(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8898],{44319:function(e,t,s){"use strict";s.d(t,{default:function(){return p}});var n=s(57437),l=s(2265),r=s(745),i=s.n(r);s(84353);var a=s(75376);function o(e){let{message:t}=e;return(0,n.jsx)("div",{className:"rounded-md bg-blue-500 py-2.5 px-3 text-sm ml-2.5",children:t&&""!==t?(0,n.jsx)(a.UG,{children:t}):(0,n.jsxs)(n.Fragment,{children:[d()," Thinking..."]})})}let c=()=>(0,n.jsx)("div",{id:"ai-geocoder",className:"ai-geocoder text-black text-left w-full"}),d=()=>(0,n.jsxs)("svg",{className:"inline",width:"15",height:"15",viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",children:[(0,n.jsx)("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z",children:(0,n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})}),(0,n.jsx)("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z",children:(0,n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})})]});var C=e=>({initialMessages:[(0,r.createChatBotMessage)("Hello, I'm Kōrero, land and waters acknowledgment assistant."),(0,r.createCustomMessage)("Geocoder","geocoder")],botName:"Kōrero",customComponents:{botChatMessage:o,header:()=>(0,n.jsxs)("div",{className:"bg-slate-400 p-2.5 text-sm rounded-tl-md rounded-tr-md",children:["Conversation with Kōrero",(0,n.jsx)("button",{className:"float-right bg-slate-200 rounded-lg shadow-lg p-1 -mt-1",onClick:()=>e(!0),children:(0,n.jsx)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289Z",fill:"#0F1729"})})})]}),botAvatar:()=>(0,n.jsx)("div",{className:"rounded-full mt-2.5 h-5 w-5 min-w-5",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 473.02 511.76",children:(0,n.jsx)("path",{fillRule:"nonzero",d:"M295.19 225.4c1.01 7.88-4.72 15.18-12.81 16.31-8.09 1.14-15.47-4.33-16.48-12.2-1.27-9.88-6.46-16.13-13.11-19.07-8.62-3.79-19.45-2.6-27.69 1.57-9.28 4.71-16.69 13.82-17.75 26.85-.88 10.83 1.84 21.41 7.4 30.69 6.17 10.3 15.26 18.4 25.68 24.23 16.3 9.11 33.06 11.66 48.47 9.3 17.05-2.61 32.66-11.18 44.4-23.52 8.94-9.41 15.63-20.99 18.97-33.77 3.12-11.89 3.36-24.9-.13-38.25l-.52-1.96c-8.71-31.27-28.89-56.11-54.67-71.05-57.13-33.14-129.12-12.08-161.65 44.79-39.53 69.14-1.35 154.36 63.54 192.02 35.35 20.5 78.39 27.53 121 16.39l2.69-.71c87.46-24.46 138.37-115.77 115.51-203.23l-.87-3.22c-15.18-54.65-50.46-98.05-95.53-124.19l-.05.02c-70.99-41.2-158.8-35.41-224.17 12.33-20.51 14.98-38.03 33.56-51.87 54.58-53.67 81.53-45.28 179.1 11.52 255.61 18.06 24.34 40.61 45.75 66.41 62.73 56.02 36.89 127.34 52.71 201.28 32.27 7.87-2.21 15.97 2.2 18.09 9.83 2.12 7.64-2.54 15.63-10.41 17.84-83.12 22.99-163.13 5.3-225.85-36-28.5-18.76-53.47-42.48-73.52-69.5-63.99-86.22-72.58-196.42-12.24-288.07 15.73-23.88 35.73-45.06 59.25-62.23C175.01-8.92 275.64-15.75 357.05 31.5c51.24 29.79 91.35 79.02 108.58 140.92l1.01 3.69c26.89 102.9-33.66 209.84-136.33 238.55l-3.24.9c-50.64 13.24-101.71 4.92-143.58-19.37-78.63-45.62-121.35-147.6-73.94-230.51 40.72-71.2 131.29-97.47 202.76-56.01 31.99 18.56 57 49.23 67.78 87.76l.66 2.43c4.77 18.27 4.41 36.16.11 52.6-4.63 17.67-13.83 33.63-26.12 46.55-16.22 17.05-37.9 28.91-61.68 32.55-21.79 3.34-45.21-.13-67.67-12.67-14.63-8.18-27.61-20.05-36.26-34.48-8.66-14.45-12.56-30.51-11.18-47.32 1.98-24.36 16.16-41.55 33.97-50.57 16.39-8.32 36.42-9.88 53.42-2.37 15.33 6.77 27.17 20.36 29.85 41.25z"})})})},customMessages:{geocoder:e=>(0,n.jsx)(c,{...e})}}),m=s(77719),h=s.n(m),u=s(3067),g=s.n(u),x=e=>{let{children:t,actions:s}=e,r=(0,l.useRef)([]);(0,l.useEffect)(()=>{let e=!1;if(h().accessToken="pk.eyJ1IjoibmF0aXZlbGFuZCIsImEiOiJjbTF4cjQwMGkxMWYxMmpva2Q4djZibXd5In0.NSN3ZKM279LTZ5HND7uU0g",!e){e=!0;let t=new(g())({accessToken:h().accessToken,placeholder:"Search for a place you're interested in..."});t.on("result",async e=>{let t=await fetch("https://native-land.ca/api/index.php?maps=territories&position=".concat(e.result.center[1],",").concat(e.result.center[0],"&key=LqUXbHEtWUcZJ7ikBX-xo")),s=(await t.json()).map(e=>e.properties.Name);r.current=s,i("Let's talk about ".concat(e.result.place_name,"."))});let s=setInterval(()=>{"undefined"!=typeof document&&document.getElementById("ai-geocoder")&&(t.addTo("#ai-geocoder"),clearInterval(s))},50)}},[]);let i=e=>{s.getAIResponse(e,r.current)};return(0,n.jsx)("div",{children:l.Children.map(t,e=>l.cloneElement(e,{parse:i,actions:s}))})},f=e=>{let{setState:t,state:s,children:i}=e,a=async(e,n)=>{let l=[...s.messages,(0,r.createClientMessage)(e)],i=JSON.parse(JSON.stringify(l));i.shift(),i.shift();let a={id:1e3*Math.random(),message:"",loading:!0,type:"bot"};t(e=>({...e,messages:[...l,a]}));let o=(await fetch("/api/ai",{method:"POST",body:JSON.stringify({messages:i,api_nations:n})})).body.getReader(),c=new TextDecoder,d="";a.loading=!1;try{for(;;){let{done:e,value:s}=await o.read();if(e)break;for(let e of c.decode(s,{stream:!0}).split("\n").filter(e=>""!==e.trim()))if(e.startsWith("0:"))try{let s=e.slice(3,e.length-1);s=s.replace(/\\n/g,"\n"),d+=s,a.message=d,t(e=>({...e,messages:[...l,a]}))}catch(t){console.log(t),console.log("Raw data:",e.slice(6))}}}catch(e){console.error("Error reading stream:",e)}finally{}};return(0,n.jsx)("div",{children:l.Children.map(i,e=>l.cloneElement(e,{actions:{getAIResponse:a}}))})};function p(e){let{startMinimized:t=!0,startClosed:s=!1}=e,[r,a]=(0,l.useState)(t),[o,c]=(0,l.useState)(s);return!o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed left-0 bottom-0 m-5 ".concat(r?"w-0 h-0 -z-10":"z-[5] lg:z-50 w-6/7 lg:w-1/2"),children:(0,n.jsx)(i(),{config:C(a),messageParser:x,actionProvider:f})}),!!r&&(0,n.jsx)("div",{className:"fixed left-0 bottom-0 m-2.5 lg:ml-2.5 z-[5] lg:z-50",children:(0,n.jsxs)("div",{className:"rounded-full border nld-border-teal-100 nld-bg-blue-800 p-1 cursor-pointer hover:bg-sky-800",children:[(0,n.jsxs)("div",{className:"hidden lg:inline-flex py-2 pl-2.5 text-white",onClick:()=>a(!1),children:[(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.99438 2.70404C9.28933 0.278214 13.7175 -0.0267613 17.301 2.07025C19.4146 3.30929 21.0979 5.30671 21.9241 7.81243L22.0774 8.32025L22.1213 8.48138C23.3091 13.0644 20.6366 17.8335 16.095 19.1142L15.9553 19.1533C13.7147 19.7439 11.4497 19.3728 9.59691 18.289C6.13373 16.2626 4.21265 11.7077 6.33129 7.97161C8.14515 4.77374 12.1863 3.58624 15.3801 5.45404C16.808 6.28942 17.9238 7.6704 18.4045 9.40228L18.4338 9.5097C18.6495 10.3427 18.6336 11.1624 18.4387 11.914C18.2289 12.7212 17.8121 13.4497 17.2571 14.038C16.5248 14.8141 15.545 15.3568 14.4661 15.5234C13.5381 15.6668 12.5459 15.5352 11.5901 15.0478L11.3996 14.9452C10.7381 14.5722 10.1474 14.0286 9.75121 13.3622C9.35375 12.6934 9.17299 11.9467 9.23656 11.1659C9.3294 10.0161 9.99701 9.19989 10.8303 8.77435L10.9748 8.70501C11.7087 8.37642 12.5819 8.32879 13.3391 8.66595C14.0745 8.99344 14.6403 9.6551 14.7668 10.6484C14.8242 11.0995 14.524 11.5119 14.092 11.6171L14.0041 11.6337C13.5236 11.7019 13.0755 11.3733 13.0139 10.8896C12.9695 10.5421 12.7967 10.3497 12.5969 10.2607C12.3103 10.1339 11.9251 10.1683 11.6233 10.3222C11.296 10.4897 11.0354 10.8121 10.9973 11.2831C10.964 11.6966 11.0664 12.1034 11.2805 12.4638L11.3752 12.6113C11.6091 12.9455 11.9275 13.2175 12.2913 13.4228C12.9424 13.7896 13.6055 13.8893 14.2112 13.7958C14.8842 13.6919 15.5045 13.3497 15.9729 12.8534C16.3294 12.475 16.5955 12.0102 16.7278 11.4999L16.7688 11.3202C16.8514 10.8961 16.8433 10.4395 16.7219 9.97064L16.6995 9.88568C16.3425 8.59792 15.5183 7.57655 14.468 6.96282C12.1416 5.60253 9.20343 6.46251 7.8723 8.80853C6.2617 11.649 7.80496 15.1996 10.509 16.7822C11.9714 17.6372 13.7507 17.9301 15.5129 17.4658L15.6282 17.4355C19.2455 16.4135 21.3577 12.5995 20.4094 8.94134L20.3733 8.8056C19.7465 6.53086 18.2998 4.72216 16.4514 3.61907L16.385 3.58001C13.4255 1.8482 9.76329 2.09077 7.03539 4.09954C6.17961 4.72979 5.44766 5.51182 4.86938 6.39739C2.62835 9.83008 2.97248 13.9404 5.3557 17.1777C6.1137 18.2077 7.0609 19.1142 8.14379 19.8329C10.494 21.3935 13.4817 22.0613 16.5793 21.1982L16.6663 21.1777C17.1047 21.0993 17.5439 21.3578 17.6653 21.7978C17.794 22.266 17.5099 22.7452 17.0452 22.8769C13.4005 23.8933 9.89033 23.1102 7.14281 21.2861C5.89474 20.4577 4.80098 19.4106 3.92309 18.2177C1.11998 14.4092 0.737202 9.52454 3.38988 5.46185C4.08113 4.40384 4.9603 3.46525 5.99438 2.70404Z",fill:"#A0C6CD"})}),(0,n.jsx)("div",{className:"ml-1",children:"Click here to speak with Kōrero, our AI Territory Acknowledgement helper!"})]}),(0,n.jsxs)("div",{className:"inline-flex lg:hidden py-2.5 pl-2.5 inline-flex text-xs items-center",onClick:()=>a(!1),children:[(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.99438 2.70404C9.28933 0.278214 13.7175 -0.0267613 17.301 2.07025C19.4146 3.30929 21.0979 5.30671 21.9241 7.81243L22.0774 8.32025L22.1213 8.48138C23.3091 13.0644 20.6366 17.8335 16.095 19.1142L15.9553 19.1533C13.7147 19.7439 11.4497 19.3728 9.59691 18.289C6.13373 16.2626 4.21265 11.7077 6.33129 7.97161C8.14515 4.77374 12.1863 3.58624 15.3801 5.45404C16.808 6.28942 17.9238 7.6704 18.4045 9.40228L18.4338 9.5097C18.6495 10.3427 18.6336 11.1624 18.4387 11.914C18.2289 12.7212 17.8121 13.4497 17.2571 14.038C16.5248 14.8141 15.545 15.3568 14.4661 15.5234C13.5381 15.6668 12.5459 15.5352 11.5901 15.0478L11.3996 14.9452C10.7381 14.5722 10.1474 14.0286 9.75121 13.3622C9.35375 12.6934 9.17299 11.9467 9.23656 11.1659C9.3294 10.0161 9.99701 9.19989 10.8303 8.77435L10.9748 8.70501C11.7087 8.37642 12.5819 8.32879 13.3391 8.66595C14.0745 8.99344 14.6403 9.6551 14.7668 10.6484C14.8242 11.0995 14.524 11.5119 14.092 11.6171L14.0041 11.6337C13.5236 11.7019 13.0755 11.3733 13.0139 10.8896C12.9695 10.5421 12.7967 10.3497 12.5969 10.2607C12.3103 10.1339 11.9251 10.1683 11.6233 10.3222C11.296 10.4897 11.0354 10.8121 10.9973 11.2831C10.964 11.6966 11.0664 12.1034 11.2805 12.4638L11.3752 12.6113C11.6091 12.9455 11.9275 13.2175 12.2913 13.4228C12.9424 13.7896 13.6055 13.8893 14.2112 13.7958C14.8842 13.6919 15.5045 13.3497 15.9729 12.8534C16.3294 12.475 16.5955 12.0102 16.7278 11.4999L16.7688 11.3202C16.8514 10.8961 16.8433 10.4395 16.7219 9.97064L16.6995 9.88568C16.3425 8.59792 15.5183 7.57655 14.468 6.96282C12.1416 5.60253 9.20343 6.46251 7.8723 8.80853C6.2617 11.649 7.80496 15.1996 10.509 16.7822C11.9714 17.6372 13.7507 17.9301 15.5129 17.4658L15.6282 17.4355C19.2455 16.4135 21.3577 12.5995 20.4094 8.94134L20.3733 8.8056C19.7465 6.53086 18.2998 4.72216 16.4514 3.61907L16.385 3.58001C13.4255 1.8482 9.76329 2.09077 7.03539 4.09954C6.17961 4.72979 5.44766 5.51182 4.86938 6.39739C2.62835 9.83008 2.97248 13.9404 5.3557 17.1777C6.1137 18.2077 7.0609 19.1142 8.14379 19.8329C10.494 21.3935 13.4817 22.0613 16.5793 21.1982L16.6663 21.1777C17.1047 21.0993 17.5439 21.3578 17.6653 21.7978C17.794 22.266 17.5099 22.7452 17.0452 22.8769C13.4005 23.8933 9.89033 23.1102 7.14281 21.2861C5.89474 20.4577 4.80098 19.4106 3.92309 18.2177C1.11998 14.4092 0.737202 9.52454 3.38988 5.46185C4.08113 4.40384 4.9603 3.46525 5.99438 2.70404Z",fill:"#A0C6CD"})}),(0,n.jsx)("div",{className:"ml-2",children:"Kōrero can help with acknowledgements!"})]}),(0,n.jsxs)("button",{onClick:()=>c(!o),type:"button",className:"mx-2.5 mt-2.5 size-5 float-right justify-center items-center gap-x-2 rounded-full bg-slate-100/50 text-black hover:bg-slate-200","aria-label":"Close",children:[(0,n.jsx)("span",{className:"sr-only",children:"Close"}),(0,n.jsxs)("svg",{className:"shrink-0 size-4 pl-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M18 6 6 18"}),(0,n.jsx)("path",{d:"m6 6 12 12"})]})]})]})})]})}s(53435),s(55910)},72321:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});var n=s(2265),l=s(48966);let r=e=>{let{messages:t}=(0,n.useContext)(l.R),s=t[e];return e=>s[e]}},48966:function(e,t,s){"use strict";s.d(t,{LocaleProvider:function(){return r},R:function(){return l}});var n=s(57437);let l=(0,s(2265).createContext)();function r(e){let{children:t,messages:s}=e;return(0,n.jsx)(l.Provider,{value:{messages:s},children:t})}},55910:function(){}}]);