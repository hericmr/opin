(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1011],{37440:function(e,t,n){Promise.resolve().then(n.t.bind(n,231,23)),Promise.resolve().then(n.bind(n,44319)),Promise.resolve().then(n.bind(n,17400))},16463:function(e,t,n){"use strict";var o=n(71169);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})},17400:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var o=n(57437),r=n(2265),a=n(72321),i=n(3067),c=n.n(i),u=n(16463),s=n(66808);function l(e){let{}=e,t=(0,u.useRouter)(),n=(0,a.T)("FrontMap");return(0,r.useEffect)(()=>{let e=new(c())({accessToken:"pk.eyJ1IjoibmF0aXZlbGFuZCIsImEiOiJjbTF4cjQwMGkxMWYxMmpva2Q4djZibXd5In0.NSN3ZKM279LTZ5HND7uU0g",placeholder:n("search-front"),externalGeocoder:s.HO});e.on("result",e=>{let{result:n}=e,o="bbox=".concat(JSON.stringify(n.bbox),"&center=").concat(n.center);n.category&&(o+="&category=".concat(n.category)),t.push("/maps/native-land?".concat(o))}),e.addTo("#front-page-geocoder")},[]),(0,o.jsx)("div",{id:"front-page-geocoder"})}n(53435)},66808:function(e,t,n){"use strict";n.d(t,{Gt:function(){return a},HO:function(){return r},JP:function(){return c},fr:function(){return l},rw:function(){return i},s4:function(){return s},tq:function(){return o},zo:function(){return u}});let o=()=>{let e=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0),e},r=e=>e&&e.length>2?fetch("/api/entry/searcher?s=".concat(e.toLowerCase(),"&category=languages,territories,treaties&geosearch=true")).then(e=>e.json()).then(e=>Promise.resolve(e.map((e,t)=>({type:"Feature",id:"feature-from-db-".concat(t),place_name:e.name+" (".concat(e.category,")"),category:e.category,center:e.centroid.coordinates,bbox:i(e)})))):[],a=(e,t)=>{let n=new Set,o=[];for(let r of e){let e=r.properties[t];n.has(e)||(n.add(e),o.push(r))}return o},i=e=>[e.bounds.coordinates[0][2][0],e.bounds.coordinates[0][0][1],e.bounds.coordinates[0][0][0],e.bounds.coordinates[0][2][1]],c=()=>{if(window.innerWidth<500)return{center:[-103.4216601,49.2173029],zoom:2};{let e=[[-100.1953125,47.27922900257082],[140.625,-27.68352808378776],[-68.5546875,-19.973348786110602]];return{center:e[Math.floor(Math.random()*e.length)],zoom:2}}},u=()=>{if(window.innerWidth<500)return{center:[-97.255109,52.342345],zoom:3};{let e=[[155.212111,-35.574853],[-97.255109,52.342345],[-61.631791,-21.02051]];return{center:e[Math.floor(Math.random()*e.length)],zoom:3}}},s=(e,t)=>{let n=[];return o=>{n.forEach(n=>{t.setFeatureState(n,{[e]:!1})}),n.length=0,o.forEach(o=>{let r={source:o.source,sourceLayer:o.sourceLayer,id:o.id};t.setFeatureState(r,{[e]:!0}),n.push(r)})}},l=e=>{"devicePixelRatio"in window||Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});let t=document.createElement("canvas"),n=e.getCanvas().width,o=e.getCanvas().height;t.width=n,t.height=o;let r=t.getContext("2d"),a=new Image;a.onload=function(){r.fillStyle="#333",r.fillRect(0,0,n,o),r.drawImage(a,0,0);let e="\xa9 Native Land Digital \xa9 Mapbox \xa9 OpenStreetMap";r.font="".concat(24,"px Helvetica Neue, Arial, Helvetica, sans-serif");let i=r.measureText(e),c=i.width;r.fillStyle="rgba(255, 255, 255, 0.5)";let u=n-c-20,s=o-24-i.actualBoundingBoxAscent+i.actualBoundingBoxDescent-10;r.fillRect(u,s,c+20,i.actualBoundingBoxAscent+i.actualBoundingBoxDescent+10),r.fillStyle="black",r.fillText(e,n-c-10,o-24);let l=document.createElement("a");l.download="image.png",l.href=t.toDataURL("image/png",.92),l.click()},a.src=e.getCanvas().toDataURL("image/png")}}},function(e){e.O(0,[3075,5495,3840,3415,231,4292,7207,8898,2971,7023,1744],function(){return e(e.s=37440)}),_N_E=e.O()}]);