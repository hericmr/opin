import{z as w,i as S,r as o,a as R,j as e,S as g,m as $,b as i,F as k,U as C,d as E}from"./index-CWU4-xd4.js";import{A as T}from"./arrow-left-Dg1EushJ.js";const P=({dataPoints:p})=>{const[u]=w(),n=S(),t=u.get("q")||"",[r,d]=o.useState([]),[j,x]=o.useState(!1),{performSearch:m}=R(p);o.useEffect(()=>{t&&(async()=>{x(!0);try{const a=await m(t);d(a)}catch(a){console.error("Erro na busca:",a),d([])}finally{x(!1)}})()},[t,m]);const N=s=>{s.coordinates&&n("/",{state:{searchTerm:s.title,coordinates:s.coordinates,highlightSchool:s.title}})},y=s=>{switch(s){case"school":return e.jsx(i,{className:"w-5 h-5"});case"land":return e.jsx(E,{className:"w-5 h-5"});case"teacher":return e.jsx(C,{className:"w-5 h-5"});case"history":return e.jsx(k,{className:"w-5 h-5"});default:return e.jsx(i,{className:"w-5 h-5"})}},b=s=>{switch(s){case"educação":return"text-blue-600 bg-blue-50";case"comunidades":return"text-red-600 bg-red-50";case"histórico":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},f=(s,a)=>{if(!a)return s;const c=new RegExp(`(${a})`,"gi");return s.split(c).map((l,v)=>c.test(l)?e.jsx("span",{className:"bg-yellow-200 font-semibold",children:l},v):l)};return j?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Buscando resultados..."})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 text-green-600 hover:text-green-700 transition-colors mb-4",children:[e.jsx(T,{className:"w-5 h-5"}),"Voltar ao mapa"]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g,{className:"w-6 h-6 text-gray-400"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Resultados da busca"})]}),e.jsx("p",{className:"text-gray-600",children:r.length>0?`${r.length} resultado${r.length>1?"s":""} encontrado${r.length>1?"s":""} para "${t}"`:`Nenhum resultado encontrado para "${t}"`})]}),r.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map((s,a)=>e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},onClick:()=>N(s),className:`bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 
                         cursor-pointer border border-gray-200 overflow-hidden group`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"text-green-600 group-hover:text-green-700 transition-colors",children:y(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2",children:f(s.title,t)}),s.subtitle&&e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s.subtitle}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${b(s.category)}`,children:s.category})]})]}),s.matches&&s.matches.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Encontrado em:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.matches.map((c,h)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:c},h))})]}),s.coordinates&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-green-600",children:[e.jsx(i,{className:"w-3 h-3"}),e.jsx("span",{children:"Ver no mapa"})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum resultado encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tente usar termos diferentes ou verificar a ortografia."}),e.jsx("button",{onClick:()=>n("/"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Voltar ao mapa"})]})]})})};export{P as default};
