"use strict";(self.webpackChunkmapa_santos=self.webpackChunkmapa_santos||[]).push([[654,806],{4654:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var l=s(2555),o=s(5043),t=s(579);const r=e=>{let{escola:a,onClose:s,onSave:r}=e;const[n,d]=(0,o.useState)((null===a||void 0===a?void 0:a.Escola)||""),[i,c]=(0,o.useState)(!1),[u,m]=(0,o.useState)("");return(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n.trim()){m(""),c(!0);try{await r((0,l.A)((0,l.A)({},a),{},{Escola:n})),s()}catch(o){m("Erro ao salvar.")}finally{c(!1)}}else m("O nome da escola \xe9 obrigat\xf3rio.")},className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola"}),(0,t.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:n,onChange:e=>d(e.target.value),disabled:i})]}),u&&(0,t.jsx)("div",{className:"text-red-600 mb-2",children:u}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:i,children:"Salvar"}),(0,t.jsx)("button",{type:"button",className:"bg-gray-300 text-gray-800 px-4 py-2 rounded",onClick:s,disabled:i,children:"Cancelar"})]})]})}},4806:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var l=s(2555),o=s(5043),t=s(2880),r=s(4654),n=s(4581),d=s(579);console.log("DEBUG: EditEscolaPanel",r.default),console.log("DEBUG: DocumentViewer",n.A);const i=()=>{const[e,a]=(0,o.useState)([]),[s,r]=(0,o.useState)(""),[i,c]=(0,o.useState)("todos"),[u,m]=(0,o.useState)(null),[x,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(null),[h,v]=(0,o.useState)(!1),[j,f]=(0,o.useState)("dados-basicos"),[y,N]=(0,o.useState)([]),[_,A]=(0,o.useState)(!1),[w,k]=(0,o.useState)(!1),[C,E]=(0,o.useState)(null),[D,P]=(0,o.useState)({titulo:"",autoria:"",tipo:"",link_pdf:""});(0,o.useEffect)((()=>{(async()=>{try{const{data:e,error:s}=await t.N.from("escolas_completa").select("*").order("Escola",{ascending:!0});if(s)throw s;a(e)}catch(e){console.error("Erro ao buscar escolas:",e)}})()}),[]);(0,o.useEffect)((()=>{null!==u&&void 0!==u&&u.id&&(async e=>{try{A(!0);const{data:a,error:s}=await t.N.from("documentos_escola").select("*").eq("escola_id",e).order("titulo",{ascending:!0});if(s)throw s;N(a||[])}catch(a){console.error("Erro ao buscar documentos:",a),N([])}finally{A(!1)}})(u.id)}),[null===u||void 0===u?void 0:u.id]);const S=async s=>{s.preventDefault();const o=(e=>{const a=[];return e.Escola&&""!==e.Escola.trim()||a.push("Nome da escola \xe9 obrigat\xf3rio"),a})(u);if(o.length>0)b(o.join(", "));else{p(!0),b(null),v(!1);try{const s={Escola:u.Escola,"Munic\xedpio":u["Munic\xedpio"],"Endere\xe7o":u["Endere\xe7o"],"Terra Indigena (TI)":u["Terra Indigena (TI)"],"Escola Estadual ou Municipal":u["Escola Estadual ou Municipal"],"Diretoria de Ensino":u["Diretoria de Ensino"],"Ano de cria\xe7\xe3o da escola":u["Ano de cria\xe7\xe3o da escola"],"Povos indigenas":u["Povos indigenas"],"Linguas faladas":u["Linguas faladas"],"Modalidade de Ensino/turnos de funcionamento":u["Modalidade de Ensino/turnos de funcionamento"],"Numero de alunos":u["Numero de alunos"],disciplinas_bilingues:u.disciplinas_bilingues,formas_avaliacao:u.formas_avaliacao,espaco_escolar:u.espaco_escolar,cozinha_merenda:u.cozinha_merenda,acesso_agua:u.acesso_agua,coleta_lixo:u.coleta_lixo,acesso_internet:u.acesso_internet,equipamentos:u.equipamentos,modo_acesso:u.modo_acesso,gestao:u.gestao,outros_funcionarios:u.outros_funcionarios,professores_indigenas:u.professores_indigenas,professores_nao_indigenas:u.professores_nao_indigenas,professores_falam_lingua:u.professores_falam_lingua,formacao_professores:u.formacao_professores,formacao_continuada:u.formacao_continuada,material_nao_indigena:u.material_nao_indigena,material_indigena:u.material_indigena,praticas_pedagogicas:u.praticas_pedagogicas,projetos_andamento:u.projetos_andamento,parcerias_universidades:u.parcerias_universidades,acoes_ongs:u.acoes_ongs,desejos_comunidade:u.desejos_comunidade,usa_redes_sociais:u.usa_redes_sociais,links_redes_sociais:u.links_redes_sociais,links:u.links,link_para_videos:u.link_para_videos,historia_da_escola:u.historia_da_escola,historia_do_prof:u.historia_do_prof,latitude:u.latitude,longitude:u.longitude},{error:o}=await t.N.from("escolas_completa").update(s).eq("id",u.id);if(o)throw o;a(e.map((e=>e.id===u.id?(0,l.A)((0,l.A)({},e),u):e))),v(!0),setTimeout((()=>{m(null),v(!1)}),2e3)}catch(r){console.error("Erro ao salvar:",r),b("Erro ao salvar: ".concat(r.message))}finally{p(!1)}}};return console.log("DEBUG: editingLocation (antes do return)",u),(0,d.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,d.jsxs)("aside",{className:"w-64 bg-white border-r p-4 overflow-y-auto max-h-screen",children:[(0,d.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Escolas"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("input",{type:"text",placeholder:"Buscar escola...",className:"w-full px-3 py-2 border rounded text-sm",value:s,onChange:e=>r(e.target.value)})}),(0,d.jsx)("ul",{className:"space-y-1",children:e.filter((e=>{var a;return null===(a=e.Escola)||void 0===a?void 0:a.toLowerCase().includes(s.toLowerCase())})).map((e=>(0,d.jsx)("li",{children:(0,d.jsx)("button",{className:"block w-full text-left px-2 py-1 rounded hover:bg-blue-100 text-sm ".concat((null===u||void 0===u?void 0:u.id)===e.id?"bg-blue-200 font-bold":""),onClick:()=>m(e),children:e.Escola})},e.id)))})]}),(0,d.jsxs)("main",{className:"flex-1 p-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Painel de Administra\xe7\xe3o"}),(0,d.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,d.jsx)("div",{className:"relative flex-1",children:(0,d.jsx)("input",{type:"text",placeholder:"Buscar por t\xedtulo ou descri\xe7\xe3o...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s,onChange:e=>r(e.target.value)})}),(0,d.jsx)("div",{className:"relative",children:(0,d.jsx)("select",{className:"pl-10 pr-4 py-2 border rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>c(e.target.value),children:(0,d.jsx)("option",{value:"todos",children:"Todos"})})})]})}),u&&"object"===typeof u&&u.id&&u.Escola&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold",children:"Editar Escola"}),(0,d.jsx)("button",{onClick:()=>m(null),className:"text-gray-500 hover:text-gray-700",children:"Fechar"})]}),(0,d.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,d.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[{id:"dados-basicos",label:"Dados B\xe1sicos"},{id:"povos-linguas",label:"Povos e L\xednguas"},{id:"ensino",label:"Ensino"},{id:"infraestrutura",label:"Infraestrutura"},{id:"gestao-professores",label:"Gest\xe3o e Professores"},{id:"material-pedagogico",label:"Material Pedag\xf3gico"},{id:"projetos-parcerias",label:"Projetos e Parcerias"},{id:"redes-sociais",label:"Redes Sociais"},{id:"historias",label:"Hist\xf3rias"},{id:"coordenadas",label:"Coordenadas"},{id:"documentos",label:"Documentos"}].map((e=>(0,d.jsx)("button",{type:"button",onClick:()=>f(e.id),className:"whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ".concat(j===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id)))})}),(0,d.jsx)("form",{onSubmit:S,children:(0,d.jsxs)("div",{className:"min-h-[400px]",children:["dados-basicos"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola *"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.Escola||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{Escola:e.target.value})),required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Munic\xedpio"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Munic\xedpio"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Munic\xedpio":e.target.value}))})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Endere\xe7o"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Endere\xe7o":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terra Ind\xedgena (TI)"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Terra Indigena (TI)"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Terra Indigena (TI)":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Escola"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Escola Estadual ou Municipal"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Escola Estadual ou Municipal":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diretoria de Ensino"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Diretoria de Ensino"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Diretoria de Ensino":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano de Cria\xe7\xe3o"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Ano de cria\xe7\xe3o da escola"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Ano de cria\xe7\xe3o da escola":e.target.value}))})]})]}),"povos-linguas"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Povos Ind\xedgenas"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Povos indigenas"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Povos indigenas":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"L\xednguas Faladas"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Linguas faladas"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Linguas faladas":e.target.value}))})]})]}),"ensino"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modalidade de Ensino/Turnos"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Modalidade de Ensino/turnos de funcionamento"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Modalidade de Ensino/turnos de funcionamento":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Alunos"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u["Numero de alunos"]||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{"Numero de alunos":e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciplinas Bil\xedngues"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.disciplinas_bilingues||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{disciplinas_bilingues:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formas de Avalia\xe7\xe3o"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.formas_avaliacao||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{formas_avaliacao:e.target.value}))})]})]}),"infraestrutura"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Espa\xe7o Escolar e Estrutura"}),(0,d.jsx)("textarea",{className:"w-full border rounded px-3 py-2 h-20",value:u.espaco_escolar||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{espaco_escolar:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cozinha/Merenda Escolar"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.cozinha_merenda||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{cozinha_merenda:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acesso \xe0 \xc1gua"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.acesso_agua||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{acesso_agua:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coleta de Lixo"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.coleta_lixo||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{coleta_lixo:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acesso \xe0 Internet"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.acesso_internet||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{acesso_internet:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipamentos Tecnol\xf3gicos"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.equipamentos||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{equipamentos:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modo de Acesso \xe0 Escola"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.modo_acesso||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{modo_acesso:e.target.value}))})]})]}),"gestao-professores"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gest\xe3o/Nome"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.gestao||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{gestao:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outros Funcion\xe1rios"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.outros_funcionarios||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{outros_funcionarios:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores Ind\xedgenas"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.professores_indigenas||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{professores_indigenas:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores N\xe3o Ind\xedgenas"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.professores_nao_indigenas||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{professores_nao_indigenas:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores Falam a L\xedngua Ind\xedgena"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.professores_falam_lingua||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{professores_falam_lingua:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma\xe7\xe3o dos Professores"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.formacao_professores||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{formacao_professores:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Forma\xe7\xe3o Continuada"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.formacao_continuada||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{formacao_continuada:e.target.value}))})]})]}),"material-pedagogico"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Pedag\xf3gico N\xe3o Ind\xedgena"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.material_nao_indigena||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{material_nao_indigena:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Pedag\xf3gico Ind\xedgena"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.material_indigena||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{material_indigena:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe1ticas Pedag\xf3gicas Ind\xedgenas"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.praticas_pedagogicas||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{praticas_pedagogicas:e.target.value}))})]})]}),"projetos-parcerias"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Projetos em Andamento"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.projetos_andamento||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{projetos_andamento:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parcerias com Universidades"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.parcerias_universidades||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{parcerias_universidades:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\xf5es com ONGs ou Coletivos"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.acoes_ongs||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{acoes_ongs:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desejos da Comunidade"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.desejos_comunidade||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{desejos_comunidade:e.target.value}))})]})]}),"redes-sociais"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Utiliza Redes Sociais"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.usa_redes_sociais||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{usa_redes_sociais:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Links das Redes Sociais"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.links_redes_sociais||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{links_redes_sociais:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Links Gerais"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.links||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{links:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link para V\xeddeos"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:u.link_para_videos||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{link_para_videos:e.target.value}))})]})]}),"historias"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hist\xf3ria da Escola"}),(0,d.jsx)("textarea",{className:"w-full border rounded px-3 py-2 h-32",value:u.historia_da_escola||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{historia_da_escola:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hist\xf3ria do Professor"}),(0,d.jsx)("textarea",{className:"w-full border rounded px-3 py-2 h-32",value:u.historia_do_prof||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{historia_do_prof:e.target.value}))})]})]}),"coordenadas"===j&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,d.jsx)("input",{type:"number",step:"any",className:"w-full border rounded px-3 py-2",value:u.latitude||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{latitude:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,d.jsx)("input",{type:"number",step:"any",className:"w-full border rounded px-3 py-2",value:u.longitude||"",onChange:e=>m((0,l.A)((0,l.A)({},u),{},{longitude:e.target.value}))})]})]}),"documentos"===j&&(0,d.jsxs)("div",{className:"space-y-6",children:[_&&(0,d.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,d.jsx)("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,d.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando documentos..."})]}),!_&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("h4",{className:"text-lg font-medium text-gray-800",children:["Documentos da Escola (",y.length,")"]}),(0,d.jsx)("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"+ Adicionar Documento"})]}),0===y.length&&!w&&(0,d.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Nenhum documento cadastrado para esta escola."}),(0,d.jsx)("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Adicionar Primeiro Documento"})]}),y.length>0&&(0,d.jsx)(n.A,{documentos:y,title:"Documentos da Escola"})]}),w&&(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,d.jsx)("h5",{className:"font-medium text-blue-800 mb-4",children:"Adicionar Novo Documento"}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==u&&void 0!==u&&u.id)try{const{data:e,error:a}=await t.N.from("documentos_escola").insert([(0,l.A)((0,l.A)({},D),{},{escola_id:u.id})]).select();if(a)throw a;N([...y,e[0]]),P({titulo:"",autoria:"",tipo:"",link_pdf:""}),k(!1)}catch(a){console.error("Erro ao adicionar documento:",a),alert("Erro ao adicionar documento. Tente novamente.")}},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo *"}),(0,d.jsx)("input",{type:"text",required:!0,className:"w-full border rounded px-3 py-2",value:D.titulo,onChange:e=>P((0,l.A)((0,l.A)({},D),{},{titulo:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autor"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:D.autoria,onChange:e=>P((0,l.A)((0,l.A)({},D),{},{autoria:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:D.tipo,onChange:e=>P((0,l.A)((0,l.A)({},D),{},{tipo:e.target.value})),placeholder:"Ex: PDF, Relat\xf3rio, Plano de Aula"})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link do PDF *"}),(0,d.jsx)("input",{type:"url",required:!0,className:"w-full border rounded px-3 py-2",value:D.link_pdf,onChange:e=>P((0,l.A)((0,l.A)({},D),{},{link_pdf:e.target.value})),placeholder:"https://drive.google.com/file/d/..."}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recomendado: Link do Google Drive com permiss\xe3o p\xfablica"})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Adicionar Documento"}),(0,d.jsx)("button",{type:"button",onClick:()=>{k(!1),P({titulo:"",autoria:"",tipo:"",link_pdf:""})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})]}),!_&&y.length>0&&(0,d.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,d.jsx)("h5",{className:"font-medium text-gray-800 mb-4",children:"Gerenciar Documentos"}),(0,d.jsx)("div",{className:"space-y-3",children:y.map((e=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h6",{className:"font-medium text-gray-800",children:e.titulo}),e.autoria&&(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["Por: ",e.autoria]}),e.tipo&&(0,d.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:e.tipo})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>E(e),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Editar"}),(0,d.jsx)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja excluir este documento?"))try{const{error:a}=await t.N.from("documentos_escola").delete().eq("id",e);if(a)throw a;N(y.filter((a=>a.id!==e)))}catch(a){console.error("Erro ao excluir documento:",a),alert("Erro ao excluir documento. Tente novamente.")}})(e.id),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Excluir"})]})]},e.id)))})]}),C&&(0,d.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,d.jsx)("h5",{className:"font-medium text-yellow-800 mb-4",children:"Editar Documento"}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==C&&void 0!==C&&C.id)try{const{error:e}=await t.N.from("documentos_escola").update(C).eq("id",C.id);if(e)throw e;N(y.map((e=>e.id===C.id?C:e))),E(null)}catch(a){console.error("Erro ao atualizar documento:",a),alert("Erro ao atualizar documento. Tente novamente.")}},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo *"}),(0,d.jsx)("input",{type:"text",required:!0,className:"w-full border rounded px-3 py-2",value:C.titulo,onChange:e=>E((0,l.A)((0,l.A)({},C),{},{titulo:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autor"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:C.autoria||"",onChange:e=>E((0,l.A)((0,l.A)({},C),{},{autoria:e.target.value}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,d.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:C.tipo||"",onChange:e=>E((0,l.A)((0,l.A)({},C),{},{tipo:e.target.value}))})]}),(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link do PDF *"}),(0,d.jsx)("input",{type:"url",required:!0,className:"w-full border rounded px-3 py-2",value:C.link_pdf,onChange:e=>E((0,l.A)((0,l.A)({},C),{},{link_pdf:e.target.value}))})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"submit",className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Atualizar Documento"}),(0,d.jsx)("button",{type:"button",onClick:()=>E(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})]}),(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,d.jsx)("h5",{className:"font-medium text-blue-800 mb-2",children:"Sobre os Documentos"}),(0,d.jsxs)("p",{className:"text-sm text-blue-700 mb-3",children:["Os documentos s\xe3o armazenados na tabela ",(0,d.jsx)("code",{children:"documentos_escola"})," no Supabase. Voc\xea pode adicionar, editar e remover documentos diretamente neste painel."]}),(0,d.jsxs)("div",{className:"text-xs text-blue-600",children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Estrutura da tabela:"})}),(0,d.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"id"})," - ID \xfanico do documento"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"escola_id"})," - ID da escola (preenchido automaticamente)"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"titulo"})," - T\xedtulo do documento"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"autoria"})," - Autor do documento (opcional)"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"tipo"})," - Tipo do documento (opcional)"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("code",{children:"link_pdf"})," - URL do documento (Google Drive ou outro)"]})]})]})]})]})]})}),g&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:g}),h&&(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-4",children:"Escola salva com sucesso!"}),(0,d.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,d.jsx)("button",{onClick:S,className:"px-4 py-2 rounded flex items-center gap-2 ".concat(x?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),disabled:x,children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):"Salvar"}),(0,d.jsx)("button",{type:"button",className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400",onClick:()=>m(null),disabled:x,children:"Cancelar"})]})]})]})]})},c=o.memo(i)}}]);
//# sourceMappingURL=806.3b0f3e4c.chunk.js.map