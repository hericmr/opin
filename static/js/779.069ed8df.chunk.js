"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[779],{8779:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var o=r(9379),i=r(5043),s=r(9896),a=r(3986),n=r(1215),l=r(576),c=r(3391),u=r(228);const d=["data"],p=(0,n.Lt)((function(e,t){let{data:r}=e,o=(0,a.A)(e,d);const i=new u.GeoJSON(r,o);return(0,l.Q)(i,(0,c.W4)(t,{overlayContainer:i}))}),(function(e,t,r){t.style!==r.style&&(null==t.style?e.resetStyle():e.setStyle(t.style))}));var m=r(9845),f=r(579);const y=e=>{let{data:t,onClick:r}=e;const a=(0,s.ko)(),n=(0,i.useRef)(new m.uy),l=(0,i.useRef)(null);(0,i.useEffect)((()=>{t?console.log("TerrasIndigenas: Dados recebidos:",{type:t.type,features:t.features?t.features.length:0,properties:t.features?t.features[0].properties:null}):console.warn("TerrasIndigenas: Nenhum dado recebido")}),[t]);const c=(0,i.useCallback)(((e,t)=>{if(!(0,m.Fr)())return;l.current&&(l.current.remove(),l.current=null);const r=document.createElement("div");r.className="mobile-tooltip-terra",r.textContent=t,r.style.position="absolute",r.style.backgroundColor="rgba(139, 0, 0, 0.95)",r.style.color="white",r.style.padding="8px 12px",r.style.borderRadius="6px",r.style.fontSize="14px",r.style.fontFamily="Arial, sans-serif",r.style.fontWeight="500",r.style.maxWidth="250px",r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.style.zIndex="1000",r.style.pointerEvents="none",r.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)",r.style.border="1px solid rgba(255, 255, 255, 0.2)";const o=e.latlng,i=a.latLngToLayerPoint(o);r.style.left=i.x+10+"px",r.style.top=i.y-10+"px",a.getContainer().appendChild(r),l.current=r,setTimeout((()=>{r.parentNode&&(r.remove(),l.current=null)}),2e3)}),[a]),u=(0,i.useMemo)((()=>({color:"#B22222",weight:2,fillOpacity:.3,fillColor:"#DC143C",dashArray:"3",zIndex:2})),[]),d=(0,i.useCallback)((e=>{if(!e||!e.properties)return console.warn("Feature sem propriedades:",e),u;const t="Regularizada"===e.properties.fase_ti;return console.log("Terra ind\xedgena ".concat(e.properties.terrai_nom,": ").concat(t?"Regularizada":"N\xe3o Regularizada")),(0,o.A)((0,o.A)({},u),{},{fillColor:t?"#DC143C":"#8B0000",fillOpacity:t?.3:.25})}),[u]),y={weight:3,color:"#FF0000",fillOpacity:.45,dashArray:""},h=(0,i.useCallback)(((e,t)=>{if(e&&e.properties){if(!(0,m.Fr)()){const r='\n          <div class="bg-white p-2 rounded shadow-md">\n            <strong>'.concat(e.properties.terrai_nom||"Nome n\xe3o dispon\xedvel","</strong><br/>\n            ").concat(e.properties.etnia_nome||"Etnia n\xe3o dispon\xedvel","<br/>\n            ").concat(e.properties.fase_ti||"Fase n\xe3o dispon\xedvel","\n          </div>\n        ");t.bindTooltip(r,{sticky:!0,className:"custom-tooltip"})}t.on({mouseover:e=>{if((0,m.Fr)())return;const t=e.target;t.setStyle(y),t.bringToFront()},mouseout:t=>{(0,m.Fr)()||t.target.setStyle(d(e))},click:t=>{t.target;const o={titulo:e.properties.terrai_nom,tipo:"terra_indigena",etnia:e.properties.etnia_nome,municipio:e.properties.municipio_,uf:e.properties.uf_sigla,superficie:e.properties.superficie,fase:e.properties.fase_ti,modalidade:e.properties.modalidade,reestudo:e.properties.reestudo_t,cr:e.properties.cr,faixa_fron:e.properties.faixa_fron,undadm_nom:e.properties.undadm_nom,undadm_sig:e.properties.undadm_sig,dominio_un:e.properties.dominio_un,data_atual:e.properties.data_atual,terrai_cod:e.properties.terrai_cod,undadm_cod:e.properties.undadm_cod};n.current.handleClick(e,(()=>c(t,e.properties.terrai_nom||"Terra Ind\xedgena")),(()=>null===r||void 0===r?void 0:r(o)))}})}else console.warn("Feature sem propriedades no onEachFeature:",e)}),[a,d,r,c]);return(0,i.useEffect)((()=>()=>{l.current&&(l.current.remove(),l.current=null),n.current.reset()}),[]),t?t.type&&"FeatureCollection"===t.type?t.features&&Array.isArray(t.features)&&0!==t.features.length?(0,f.jsx)(p,{data:t,style:d,onEachFeature:h}):(console.error("TerrasIndigenas: GeoJSON sem features v\xe1lidas"),null):(console.error("TerrasIndigenas: Formato de GeoJSON inv\xe1lido. Esperado FeatureCollection, recebido:",t.type),null):(console.warn("TerrasIndigenas: Nenhum dado recebido"),null)}},9845:(e,t,r)=>{r.d(t,{Fr:()=>o,uy:()=>i});const o=()=>window.innerWidth<=768;class i{constructor(){this.lastClickedFeature=null,this.clickTimeout=null,this.clickDelay=300}handleClick(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this.lastClickedFeature===e?(this.clearTimeout(),this.lastClickedFeature=null,r(e)):(this.lastClickedFeature&&this.clearTimeout(),this.lastClickedFeature=e,t(e),this.clickTimeout=setTimeout((()=>{this.lastClickedFeature=null}),this.clickDelay)):r(e)}clearTimeout(){this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null)}reset(){this.clearTimeout(),this.lastClickedFeature=null}}}}]);
//# sourceMappingURL=779.069ed8df.chunk.js.map