"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[779],{8779:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});var o=t(9379),n=t(5043),s=t(9896),a=t(3986),i=t(1215),l=t(576),p=t(3391),d=t(228);const u=["data"],c=(0,i.Lt)((function(e,r){let{data:t}=e,o=(0,a.A)(e,u);const n=new d.GeoJSON(t,o);return(0,l.Q)(n,(0,p.W4)(r,{overlayContainer:n}))}),(function(e,r,t){r.style!==t.style&&(null==r.style?e.resetStyle():e.setStyle(r.style))}));var f=t(9845),y=t(579);const m=e=>{let{data:r,onClick:t}=e;const a=(0,s.ko)(),i=(0,n.useRef)(null);(0,n.useEffect)((()=>{r?console.log("TerrasIndigenas: Dados recebidos:",{type:r.type,features:r.features?r.features.length:0,properties:r.features?r.features[0].properties:null}):console.warn("TerrasIndigenas: Nenhum dado recebido")}),[r]);const l=(0,n.useCallback)(((e,r)=>{if(!(0,f.Fr)())return;i.current&&(i.current.remove(),i.current=null);const t=document.createElement("div");t.className="mobile-tooltip-terra",t.textContent=r,t.style.position="absolute",t.style.backgroundColor="rgba(139, 0, 0, 0.95)",t.style.color="white",t.style.padding="8px 12px",t.style.borderRadius="6px",t.style.fontSize="14px",t.style.fontFamily="Arial, sans-serif",t.style.fontWeight="500",t.style.maxWidth="250px",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.textOverflow="ellipsis",t.style.zIndex="1000",t.style.pointerEvents="none",t.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)",t.style.border="1px solid rgba(255, 255, 255, 0.2)";const o=e.latlng,n=a.latLngToLayerPoint(o);t.style.left=n.x+10+"px",t.style.top=n.y-10+"px",a.getContainer().appendChild(t),i.current=t,setTimeout((()=>{t.parentNode&&(t.remove(),i.current=null)}),2e3)}),[a]),p=(0,n.useMemo)((()=>({color:"#B22222",weight:2,fillOpacity:.3,fillColor:"#DC143C",dashArray:"3",zIndex:2})),[]),d=(0,n.useCallback)((e=>{if(!e||!e.properties)return console.warn("Feature sem propriedades:",e),p;const r="Regularizada"===e.properties.fase_ti;return console.log("Terra ind\xedgena ".concat(e.properties.terrai_nom,": ").concat(r?"Regularizada":"N\xe3o Regularizada")),(0,o.A)((0,o.A)({},p),{},{fillColor:r?"#DC143C":"#8B0000",fillOpacity:r?.3:.25})}),[p]),u={weight:3,color:"#FF0000",fillOpacity:.45,dashArray:""},m=(0,n.useCallback)(((e,r)=>{if(e&&e.properties){if(!(0,f.Fr)()){const t='\n          <div class="bg-white p-2 rounded shadow-md">\n            <strong>'.concat(e.properties.terrai_nom||"Nome n\xe3o dispon\xedvel","</strong><br/>\n            ").concat(e.properties.etnia_nome||"Etnia n\xe3o dispon\xedvel","<br/>\n            ").concat(e.properties.fase_ti||"Fase n\xe3o dispon\xedvel","\n          </div>\n        ");r.bindTooltip(t,{sticky:!0,className:"custom-tooltip"})}r.on({mouseover:e=>{if((0,f.Fr)())return;const r=e.target;r.setStyle(u),r.bringToFront()},mouseout:r=>{(0,f.Fr)()||r.target.setStyle(d(e))},click:r=>{r.target;const o={titulo:e.properties.terrai_nom,tipo:"terra_indigena",etnia:e.properties.etnia_nome,municipio:e.properties.municipio_,uf:e.properties.uf_sigla,superficie:e.properties.superficie,fase:e.properties.fase_ti,modalidade:e.properties.modalidade,reestudo:e.properties.reestudo_t,cr:e.properties.cr,faixa_fron:e.properties.faixa_fron,undadm_nom:e.properties.undadm_nom,undadm_sig:e.properties.undadm_sig,dominio_un:e.properties.dominio_un,data_atual:e.properties.data_atual,terrai_cod:e.properties.terrai_cod,undadm_cod:e.properties.undadm_cod};l(r,e.properties.terrai_nom||"Terra Ind\xedgena"),null===t||void 0===t||t(o)}})}else console.warn("Feature sem propriedades no onEachFeature:",e)}),[a,d,t,l]);return(0,n.useEffect)((()=>()=>{i.current&&(i.current.remove(),i.current=null)}),[]),r?r.type&&"FeatureCollection"===r.type?r.features&&Array.isArray(r.features)&&0!==r.features.length?(0,y.jsx)(c,{data:r,style:d,onEachFeature:m}):(console.error("TerrasIndigenas: GeoJSON sem features v\xe1lidas"),null):(console.error("TerrasIndigenas: Formato de GeoJSON inv\xe1lido. Esperado FeatureCollection, recebido:",r.type),null):(console.warn("TerrasIndigenas: Nenhum dado recebido"),null)}},9845:(e,r,t)=>{t.d(r,{Fr:()=>o});const o=()=>window.innerWidth<=768}}]);
//# sourceMappingURL=779.89084b00.chunk.js.map