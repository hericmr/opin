"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[16],{16:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(5043),o=t(237),r=t(579);const n=()=>{const[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!1),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const s=(new Date).toLocaleTimeString();a((a=>[...a,{timestamp:s,message:e,type:t}]))};return(0,r.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-lg max-w-4xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Teste de Funcionalidade de Legendas"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("button",{onClick:async()=>{n(!0),a([]);try{l("=== INICIANDO TESTES DE LEGENDAS ===","header"),l("Teste 1: Verificando estrutura da tabela..."),await(0,o.iy)(),l("\u2705 Teste da estrutura da tabela conclu\xeddo"),l("Teste 2: Criando legenda de teste...");const e={escola_id:1,imagem_url:"test/test-image.jpg",legenda:"Legenda de teste",descricao_detalhada:"Descri\xe7\xe3o detalhada de teste",autor_foto:"Teste Autor",data_foto:"2024-01-01",categoria:"teste",ativo:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},a=await(0,o.eP)(e);l("\u2705 Legenda criada com ID: ".concat(a.id)),l("Teste 3: Buscando legenda criada...");const t=await(0,o.qP)("test/test-image.jpg",1);t?l("\u2705 Legenda encontrada: ".concat(t.legenda)):l("\u274c Legenda n\xe3o encontrada","error"),l("Teste 4: Atualizando legenda...");const s={legenda:"Legenda atualizada",updated_at:(new Date).toISOString()},r=await(0,o.w_)(a.id,s);l("\u2705 Legenda atualizada: ".concat(r.legenda)),l("Teste 5: Verificando se a atualiza\xe7\xe3o foi salva...");const n=await(0,o.qP)("test/test-image.jpg",1);n&&"Legenda atualizada"===n.legenda?l("\u2705 Atualiza\xe7\xe3o salva corretamente"):l("\u274c Atualiza\xe7\xe3o n\xe3o foi salva corretamente","error"),l("=== TESTES CONCLU\xcdDOS COM SUCESSO ===","success")}catch(e){l("\u274c ERRO NOS TESTES: ".concat(e.message),"error"),console.error("Erro nos testes:",e)}finally{n(!1)}},disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 mr-4",children:t?"Executando Testes...":"Executar Testes"}),(0,r.jsx)("button",{onClick:()=>{a([])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Limpar Logs"})]}),(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 max-h-96 overflow-y-auto",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Logs dos Testes:"}),0===e.length?(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhum teste executado ainda."}):(0,r.jsx)("div",{className:"space-y-1",children:e.map(((e,a)=>(0,r.jsxs)("div",{className:"text-sm font-mono ".concat("error"===e.type?"text-red-600":"success"===e.type?"text-green-600":"header"===e.type?"text-blue-600 font-bold":"text-gray-800"),children:["[",e.timestamp,"] ",e.message]},a)))})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Instru\xe7\xf5es:"}),(0,r.jsxs)("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[(0,r.jsx)("li",{children:'Clique em "Executar Testes" para verificar se a funcionalidade de legendas est\xe1 funcionando'}),(0,r.jsx)("li",{children:"Verifique os logs para identificar poss\xedveis problemas"}),(0,r.jsx)("li",{children:"Se houver erros, execute o script SQL no Supabase para corrigir a estrutura da tabela"}),(0,r.jsx)("li",{children:"Teste novamente ap\xf3s corrigir problemas no banco de dados"})]})]})]})}},237:(e,a,t)=>{t.d(a,{eP:()=>n,iy:()=>o,jW:()=>d,qP:()=>r,w_:()=>l});var s=t(2880);const o=async()=>{try{const{data:e,error:a}=await s.N.from("legendas_fotos").select("count").limit(1);return a?(console.warn("Tabela legendas_fotos n\xe3o encontrada ou sem permiss\xe3o:",a.message),!1):(console.log("Tabela legendas_fotos acess\xedvel"),!0)}catch(e){return console.warn("Erro ao testar tabela legendas_fotos:",e.message),!1}},r=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"professor";try{const{data:o,error:r}=await s.N.from("legendas_fotos").select("*").eq("imagem_url",e).eq("escola_id",a).eq("categoria",t).single();if(r){if("PGRST116"===r.code)return null;throw r}return o}catch(o){return console.warn("Erro ao buscar legenda:",o.message),null}},n=async e=>{try{const{data:a,error:t}=await s.N.from("legendas_fotos").insert([e]).select().single();if(t)throw t;return a}catch(a){throw console.error("Erro ao adicionar legenda:",a),a}},l=async(e,a)=>{try{const{data:t,error:o}=await s.N.from("legendas_fotos").update(a).eq("id",e).select().single();if(o)throw o;return t}catch(t){throw console.error("Erro ao atualizar legenda:",t),t}},d=async(e,a)=>{try{const{data:t,error:o}=await s.N.from("legendas_fotos").select("*").eq("imagem_url",e).eq("escola_id",a).eq("categoria","video").single();if(o){if("PGRST116"===o.code)return null;throw o}return t}catch(t){return console.warn("Erro ao buscar t\xedtulo do v\xeddeo:",t.message),null}}}}]);
//# sourceMappingURL=16.2c2f9ed5.chunk.js.map