"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[462],{38462:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(65043),r=t(91357),n=t(80197),l=t(22623),o=t(21209),i=t(3247),c=t(86953),d=t(12065),x=t(7669),m=t(59570),h=t(46446),g=t(34976),u=t(56326),p=t(70579);const f=e=>{let{dataPoints:s}=e;const[t,f]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),N=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,r.Zp)(),{setSearch:y}=(0,u.S)(),{searchResults:k,isSearching:E,performSearch:S}=(0,g.A)(s);(0,a.useEffect)(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{if(t.length<2)return void j(!1);const e=setTimeout(async()=>{try{await S(t),j(!0)}catch(e){console.error("Erro na busca:",e)}},300);return()=>clearTimeout(e)},[t,S]);const P=e=>{e.preventDefault();const s=t.trim();s&&(y(s),w("/search?q=".concat(encodeURIComponent(s))))},C=e=>{switch(e){case"school":default:return(0,p.jsx)(o.A,{className:"w-4 h-4"});case"land":return(0,p.jsx)(n.A,{className:"w-4 h-4"});case"teacher":return(0,p.jsx)(d.A,{className:"w-4 h-4"});case"history":return(0,p.jsx)(l.A,{className:"w-4 h-4"})}},_=(e,s)=>{if(!s)return e;const t=new RegExp("(".concat(s,")"),"gi");return e.split(t).map((e,s)=>t.test(e)?(0,p.jsx)("span",{className:"bg-yellow-200 font-semibold",children:e},s):e)};return(0,p.jsxs)("div",{ref:N,className:"relative w-full",children:[(0,p.jsx)("form",{onSubmit:P,className:"relative",children:(0,p.jsxs)("div",{className:"rounded-full bg-white/90 border border-green-200 px-4 py-2 flex items-center gap-2",children:[(0,p.jsx)(c.A,{className:"w-5 h-5 text-green-700 flex-shrink-0"}),(0,p.jsx)("input",{ref:b,type:"text",placeholder:"Pesquisar escolas, territ\xf3rios...",value:t,onChange:e=>{const s=e.target.value;f(s)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),P(e)):"Escape"===e.key&&(j(!1),f(""))},onFocus:()=>{t.length>=2&&k.length>0&&j(!0)},className:"w-full bg-transparent outline-none text-green-900 placeholder:text-green-800/60"}),t&&(0,p.jsx)("button",{type:"button",onClick:()=>{f(""),j(!1)},className:"text-green-700 hover:text-green-900 flex-shrink-0",children:(0,p.jsx)(x.A,{className:"w-4 h-4"})})]})}),(0,p.jsx)(m.N,{children:v&&k.length>0&&(0,p.jsx)(h.P.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full mt-2 w-full bg-white rounded-lg shadow-xl border border-green-200 z-50 max-h-96 overflow-y-auto",children:(0,p.jsx)("div",{className:"p-2",children:E?(0,p.jsx)("div",{className:"p-4 text-center text-gray-500",children:(0,p.jsx)("p",{className:"text-sm",children:"Buscando..."})}):(0,p.jsx)("div",{className:"space-y-1",children:k.slice(0,8).map(e=>(0,p.jsxs)("button",{onClick:()=>(e=>{e.data&&e.coordinates?(y(e.title,e.coordinates,e.title),w("/mapa",{state:{searchTerm:e.title,coordinates:e.coordinates,highlightSchool:e.title,schoolData:e.data}})):e.coordinates?(y(e.title,e.coordinates,e.title),w("/mapa",{state:{searchTerm:e.title,coordinates:e.coordinates,highlightSchool:e.title}})):(y(e.title),w("/search?q=".concat(encodeURIComponent(e.title)))),j(!1),f("")})(e),className:"w-full p-3 text-left hover:bg-green-50 rounded-lg transition-colors flex items-center gap-3 group",children:[(0,p.jsx)("div",{className:"text-green-600 group-hover:text-green-700 transition-colors flex-shrink-0",children:C(e.type)}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("p",{className:"font-medium text-green-900 text-sm truncate",children:_(e.title,t)}),(0,p.jsx)("p",{className:"text-xs text-green-700 truncate",children:e.subtitle})]}),e.coordinates&&(0,p.jsx)(i.A,{className:"w-4 h-4 text-green-400 group-hover:text-green-600 transition-colors flex-shrink-0"})]},e.id))})})})})]})};function v(e){let{dataPoints:s=[]}=e;return(0,p.jsx)("div",{className:"flex-1 overflow-auto bg-white text-green-900",children:(0,p.jsxs)("section",{className:"relative min-h-screen h-screen w-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('".concat("/opin/site_bg.png","')")},children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-green-950/40"}),(0,p.jsx)("div",{className:"relative max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 items-start lg:items-center h-full px-4 lg:px-12",children:(0,p.jsxs)("div",{className:"pt-28 lg:pt-0 text-white",children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)("img",{src:"".concat("/opin","/logo_index.png"),alt:"OPIN - Observat\xf3rio dos Professores Ind\xedgenas",className:"h-32 md:h-48 lg:h-64 xl:h-80 w-auto object-contain",style:{maxWidth:"100%"}})}),(0,p.jsxs)("div",{className:"mt-0.5",children:[(0,p.jsx)("p",{className:"uppercase tracking-wide text-green-100 text-sm md:text-base lg:text-lg",style:{fontFamily:"Cinzel, serif"},children:"Observat\xf3rio dos Professores Ind\xedgenas"}),(0,p.jsx)("p",{className:"uppercase tracking-wide text-green-100 text-sm md:text-base lg:text-lg",style:{fontFamily:"Cinzel, serif"},children:"do Estado de S\xe3o Paulo"})]}),(0,p.jsx)("p",{className:"mt-4 text-green-100/90 text-lg max-w-2xl",children:"Um espa\xe7o de mem\xf3ria, territ\xf3rio e educa\xe7\xe3o. Hist\xf3rias, escolas e experi\xeancias narradas pelos pr\xf3prios professores e comunidades ind\xedgenas do Estado de S\xe3o Paulo."}),(0,p.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-6 gap-3 w-full",children:[(0,p.jsx)("div",{className:"col-span-1 lg:col-span-4",children:(0,p.jsx)(f,{dataPoints:s})}),(0,p.jsx)("div",{className:"col-span-1 lg:col-span-2",children:(0,p.jsx)(r.N_,{to:"/mapa",className:"block rounded-full bg-green-500 text-green-950 font-semibold px-4 py-2.5 text-center hover:bg-green-400 transition",children:"Explorar Mapa"})})]})]})})]})})}}}]);
//# sourceMappingURL=462.7c45d5cc.chunk.js.map