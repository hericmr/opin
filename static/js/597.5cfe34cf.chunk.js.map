{"version":3,"file":"static/js/597.5cfe34cf.chunk.js","mappings":"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","sources":["utils/openlayers/markerStyles.js","utils/openlayers/interactions.js","utils/mapConfig.js","utils/mobileUtils.js","components/OpenLayers/OpenLayersMarkers.js","utils/openlayers/layerStyles.js","components/OpenLayers/OpenLayersTerrasIndigenas.js","components/OpenLayers/OpenLayersEstadoSP.js","components/OpenLayers/OpenLayersLayers.js","components/map/MapWrapper.jsx","components/OpenLayersMap.js","hooks/useGeoJSONCache.js","components/MapSelector.js","utils/slug.js","components/hooks/useDocumentosEscola.js","components/PainelInformacoes/components/InfoSection.js","components/PainelInformacoes/components/EscolaInfo/BasicInfo.js","components/PainelInformacoes/components/ImagensdasEscolas.js","components/PainelInformacoes/components/EscolaInfo/HistoriaEscola.js","components/PainelInformacoes/components/BooleanValue.js","components/PainelInformacoes/components/EscolaInfo/Modalidades.js","components/PainelInformacoes/components/EscolaInfo/Infraestrutura.js","components/PainelInformacoes/components/EscolaInfo/GestaoProfessores.js","components/PainelInformacoes/components/EscolaInfo/ProjetosParcerias.js","components/PainelInformacoes/components/ImagemHistoriadoProfessor.js","components/PainelInformacoes/components/EscolaInfo/HistoriadoProfessor.js","components/PainelInformacoes/components/EscolaInfo/index.js","components/PainelInformacoes/icons/HandFistIcon.js","components/PainelInformacoes/components/InfoItem.js","components/PainelInformacoes/TerraIndigenaInfo.js","components/ShareButton.js","components/PainelInformacoes/ShareSection.js","components/PainelDescricao.js","components/PainelInformacoes/IntroPanel.js","utils/textFormatting.js","components/PainelHeader.js","components/hooks/usePainelVisibility.js","components/PainelInformacoes/components/PainelContainer.js","components/hooks/usePainelDimensions.js","components/PainelInformacoes/components/DocumentViewer.js","components/PainelInformacoes/components/VideoPlayer.js","components/PainelInformacoes/index.js","components/hooks/useShare.js","components/hooks/useClickOutside.js","components/hooks/useDynamicURL.js","components/MapaEscolasIndigenas.js"],"sourcesContent":["import { Style, Fill, Stroke, Text, Icon } from 'ol/style';\nimport { Point } from 'ol/geom';\nimport { Feature } from 'ol';\n\n// Caminho para o marcador SVG\nconst MARKER_SVG_PATH = `${process.env.PUBLIC_URL || ''}/map-marker.svg`;\n\n// Configurações de cores dos marcadores\nexport const MARKER_COLORS = {\n  individual: '#3B82F6',\n  individualBorder: '#1E40AF',\n  cluster: {\n    small: '#60A5FA',\n    medium: '#3B82F6',\n    large: '#2563EB',\n    xlarge: '#1E40AF'\n  },\n  nearbyPair: '#FF6B6B'\n};\n\n// Configurações de tamanhos dos clusters\nexport const CLUSTER_SIZES = {\n  small: { min: 2, max: 10, size: 50 },\n  medium: { min: 11, max: 20, size: 52 },\n  large: { min: 21, max: 50, size: 56 },\n  xlarge: { min: 51, max: 100, size: 64 },\n  xxlarge: { min: 101, size: 72 }\n};\n\n// Configurações de fontes para clusters\nexport const CLUSTER_FONTS = {\n  small: 'bold 14px Arial',\n  medium: 'bold 15px Arial',\n  large: 'bold 16px Arial',\n  xlarge: 'bold 18px Arial'\n};\n\n/**\n * Cria estilo para marcador individual\n * @param {Object} feature - Feature do OpenLayers\n * @param {boolean} showNames - Se deve mostrar nomes das escolas\n * @returns {Style} Estilo do marcador\n */\nexport const createMarkerStyle = (feature, showNames = false) => {\n  const markerData = feature.get('markerData') || feature.get('schoolData'); // Suporta ambos\n  const isNearbyPair = feature.get('isNearbyPair');\n  \n  if (!markerData) return null;\n\n  const baseColor = isNearbyPair ? MARKER_COLORS.nearbyPair : MARKER_COLORS.individual;\n  const borderColor = isNearbyPair ? '#DC2626' : MARKER_COLORS.individualBorder;\n\n  // Estilo base do marcador (ícone SVG)\n  const markerStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: isNearbyPair ? 1.2 : 1.0,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  // Se deve mostrar nomes, adicionar texto\n  if (showNames && markerData.titulo) {\n    const textStyle = new Style({\n      text: new Text({\n        text: markerData.titulo,\n        font: '12px Arial',\n        fill: new Fill({\n          color: '#1F2937'\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: -15,\n        textAlign: 'center'\n      }),\n      geometry: feature.getGeometry()\n    });\n    \n    return [markerStyle, textStyle];\n  }\n\n  return markerStyle;\n};\n\n/**\n * Cria estilo para cluster de marcadores\n * @param {Object} feature - Feature do cluster\n * @param {Function} markerStyleFunction - Função para estilizar marcadores individuais\n * @returns {Style} Estilo do cluster\n */\nexport const createClusterStyle = (feature, markerStyleFunction) => {\n  const features = feature.get('features');\n  \n  if (!features || features.length === 0) {\n    return markerStyleFunction(feature);\n  }\n\n  // Se for apenas um marcador, usar estilo de marcador individual\n  if (features.length === 1) {\n    return markerStyleFunction(features[0]);\n  }\n\n  // Determinar tamanho e cor do cluster baseado na quantidade\n  let clusterSize, clusterColor;\n  const count = features.length;\n\n  if (count <= CLUSTER_SIZES.small.max) {\n    clusterSize = CLUSTER_SIZES.small.size;\n    clusterColor = MARKER_COLORS.cluster.small;\n  } else if (count <= CLUSTER_SIZES.medium.max) {\n    clusterSize = CLUSTER_SIZES.medium.size;\n    clusterColor = MARKER_COLORS.cluster.medium;\n  } else if (count <= CLUSTER_SIZES.large.max) {\n    clusterSize = CLUSTER_SIZES.large.size;\n    clusterColor = MARKER_COLORS.cluster.large;\n  } else if (count <= CLUSTER_SIZES.xlarge.max) {\n    clusterSize = CLUSTER_SIZES.xlarge.size;\n    clusterColor = MARKER_COLORS.cluster.xlarge;\n  } else {\n    clusterSize = CLUSTER_SIZES.xxlarge.size;\n    clusterColor = MARKER_COLORS.cluster.xlarge;\n  }\n\n  // Determinar fonte baseada no tamanho\n  let font;\n  if (count <= CLUSTER_SIZES.small.max) {\n    font = CLUSTER_FONTS.small;\n  } else if (count <= CLUSTER_SIZES.medium.max) {\n    font = CLUSTER_FONTS.medium;\n  } else if (count <= CLUSTER_SIZES.large.max) {\n    font = CLUSTER_FONTS.large;\n  } else {\n    font = CLUSTER_FONTS.xlarge;\n  }\n\n  return new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: Math.max(0.8, clusterSize / 80),\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    text: new Text({\n      text: count.toString(),\n      font: font,\n      fill: new Fill({\n        color: '#FFFFFF'\n      }),\n      stroke: new Stroke({\n        color: '#1F2937',\n        width: 1\n      })\n    })\n  });\n};\n\n/**\n * Cria estilo para marcador com indicador de par próximo\n * @param {Object} feature - Feature do marcador\n * @returns {Style} Estilo do marcador com indicador\n */\nexport const createNearbyPairStyle = (feature) => {\n  const baseStyle = createMarkerStyle(feature, false);\n  \n  if (!baseStyle || !Array.isArray(baseStyle)) {\n    return baseStyle;\n  }\n\n  // Adicionar indicador de par próximo\n  const indicatorStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 0.5,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  // Posicionar indicador no canto superior direito\n  const geometry = feature.getGeometry();\n  const coordinates = geometry.getCoordinates();\n  const offsetX = 0.0001; // Ajustar conforme necessário\n  const offsetY = 0.0001;\n  \n  const indicatorGeometry = new Point([\n    coordinates[0] + offsetX,\n    coordinates[1] + offsetY\n  ]);\n  \n  indicatorStyle.setGeometry(indicatorGeometry);\n  \n  return [...baseStyle, indicatorStyle];\n};\n\n/**\n * Cria estilo para marcador com tooltip\n * @param {Object} feature - Feature do marcador\n * @param {string} tooltipText - Texto do tooltip\n * @returns {Style} Estilo do marcador com tooltip\n */\nexport const createMarkerWithTooltipStyle = (feature, tooltipText) => {\n  const baseStyle = createMarkerStyle(feature, false);\n  \n  if (!baseStyle) return null;\n\n  // Adicionar tooltip como texto\n  const tooltipStyle = new Style({\n    text: new Text({\n      text: tooltipText,\n      font: '11px Arial',\n      fill: new Fill({\n        color: '#1F2937'\n      }),\n      stroke: new Stroke({\n        color: '#FFFFFF',\n        width: 2\n      }),\n      offsetY: -25,\n      textAlign: 'center',\n      backgroundFill: new Fill({\n        color: 'rgba(255, 255, 255, 0.9)'\n      }),\n      backgroundStroke: new Stroke({\n        color: '#E5E7EB',\n        width: 1\n      }),\n      padding: [4, 8]\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, tooltipStyle] : [baseStyle, tooltipStyle];\n};\n\n/**\n * Aplica estilo de hover ao marcador\n * @param {Object} feature - Feature do marcador\n * @param {Style} baseStyle - Estilo base do marcador\n * @returns {Style} Estilo com efeito hover\n */\nexport const applyHoverStyle = (feature, baseStyle) => {\n  if (!baseStyle) return null;\n\n  const hoverStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 1.3,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, hoverStyle] : [baseStyle, hoverStyle];\n};\n\n/**\n * Cria estilo para marcador selecionado\n * @param {Object} feature - Feature do marcador\n * @param {Style} baseStyle - Estilo base do marcador\n * @returns {Style} Estilo com efeito de seleção\n */\nexport const applySelectionStyle = (feature, baseStyle) => {\n  if (!baseStyle) return null;\n\n  const selectionStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 1.5,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, selectionStyle] : [baseStyle, selectionStyle];\n};\n","import { isMobile } from '../mobileUtils';\n\n/**\n * Classe para gerenciar interações e eventos do OpenLayers\n */\nexport class OpenLayersInteractions {\n  constructor(map, options = {}) {\n    this.map = map;\n    this.options = {\n      enableHover: options.enableHover !== false,\n      enableClick: options.enableClick !== false,\n      enableDoubleClick: options.enableDoubleClick !== false,\n      enableTouch: options.enableTouch !== false,\n      hoverDelay: options.hoverDelay || 200,\n      clickDelay: options.clickDelay || 300,\n      ...options\n    };\n\n    this.eventHandlers = new Map();\n    this.hoveredFeature = null;\n    this.clickedFeature = null;\n    this.clickTimeout = null;\n    this.hoverTimeout = null;\n    this.tooltipElement = null;\n    console.log('[OpenLayersInteractions] Interações inicializadas');\n\n    this.initializeInteractions();\n  }\n\n  /**\n   * Verifica se é dispositivo mobile (dinâmico)\n   */\n  isMobile() {\n    return window.innerWidth <= 768;\n  }\n\n  /**\n   * Inicializa todas as interações\n   */\n  initializeInteractions() {\n    if (this.options.enableHover) {\n      this.setupHoverInteraction();\n    }\n\n    if (this.options.enableClick) {\n      this.setupClickInteraction();\n    }\n\n    if (this.options.enableDoubleClick) {\n      this.setupDoubleClickInteraction();\n    }\n\n    if (this.options.enableTouch && this.isMobile()) {\n      this.setupTouchInteraction();\n    }\n  }\n\n  /**\n   * Configura interação de hover\n   */\n  setupHoverInteraction() {\n    this.map.on('pointermove', (event) => {\n      this.handlePointerMove(event);\n    });\n\n    this.map.on('pointerleave', () => {\n      this.handlePointerLeave();\n    });\n  }\n\n  /**\n   * Configura interação de clique\n   */\n  setupClickInteraction() {\n    this.map.on('click', (event) => {\n      this.handleClick(event);\n    });\n  }\n\n  /**\n   * Configura interação de duplo clique\n   */\n  setupDoubleClickInteraction() {\n    this.map.on('dblclick', (event) => {\n      this.handleDoubleClick(event);\n    });\n  }\n\n  /**\n   * Configura interação touch para mobile\n   */\n  setupTouchInteraction() {\n    // Em mobile, usar o sistema de clique com tooltip\n    // O handleClick já trata mobile vs desktop\n    console.log('[OpenLayersInteractions] Touch interaction configurada para mobile');\n  }\n\n  /**\n   * Handler para movimento do ponteiro (hover)\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handlePointerMove(event) {\n    if (this.isMobile()) return; // Desabilitar hover em mobile\n\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    // Debug: verificar se está detectando features\n    if (feature && !this.hoveredFeature) {\n      console.log('[OpenLayersInteractions] Feature detectado:', {\n        type: feature.get('type'),\n        schoolData: feature.get('schoolData'),\n        terraIndigenaInfo: feature.get('terraIndigenaInfo')\n      });\n    }\n    \n    if (feature !== this.hoveredFeature) {\n      // Limpar hover anterior\n      if (this.hoveredFeature) {\n        this.clearHover();\n      }\n\n      // Aplicar novo hover\n      if (feature) {\n        this.applyHover(feature, event);\n      }\n    }\n  }\n\n  /**\n   * Handler para saída do ponteiro\n   */\n  handlePointerLeave() {\n    this.clearHover();\n  }\n\n  /**\n   * Handler para clique\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleClick(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Em mobile, primeiro clique mostra tooltip, segundo abre painel\n    if (this.isMobile()) {\n      this.handleMobileClick(feature, event);\n      return;\n    }\n\n    // Verificar se é o mesmo feature clicado anteriormente\n    if (this.clickedFeature === feature) {\n      // Segundo clique no mesmo feature\n      this.handleDoubleClick(event);\n      return;\n    }\n\n    // Primeiro clique\n    this.clickedFeature = feature;\n    \n    // Configurar timeout para resetar o clique\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    \n    this.clickTimeout = setTimeout(() => {\n      this.clickedFeature = null;\n    }, this.options.clickDelay);\n\n    // Executar handler de clique único\n    this.executeClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para duplo clique\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleDoubleClick(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Limpar timeout de clique único\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n      this.clickTimeout = null;\n    }\n\n    // Resetar feature clicado\n    this.clickedFeature = null;\n\n    // Executar handler de duplo clique\n    this.executeDoubleClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para fim de toque (mobile)\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleTouchEnd(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Em mobile, toque único executa ação de clique\n    this.executeClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para clique em mobile (primeiro mostra tooltip, segundo abre painel)\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleMobileClick(feature, event) {\n    // Verificar se é o mesmo feature clicado anteriormente\n    if (this.clickedFeature === feature) {\n      // Segundo clique: abrir painel\n      console.log('[OpenLayersInteractions] Segundo clique em mobile - abrindo painel');\n      this.forceHideTooltip(); // Esconder tooltip e resetar estado\n      this.executeClickHandler(feature, event); // Abrir painel\n      return;\n    }\n\n    // Primeiro clique: mostrar tooltip\n    console.log('[OpenLayersInteractions] Primeiro clique em mobile - mostrando tooltip');\n    this.clickedFeature = feature;\n    \n    // Mostrar tooltip\n    if (this.options.showTooltip) {\n      this.showTooltip(feature, event);\n    }\n\n    // Configurar timeout para esconder tooltip e resetar clique\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    \n    this.clickTimeout = setTimeout(() => {\n      console.log('[OpenLayersInteractions] Timeout mobile - escondendo tooltip e resetando');\n      this.forceHideTooltip();\n    }, 3000); // 3 segundos de timeout\n\n    // Executar handler de hover para aplicar estilo visual\n    this.executeHoverHandler(feature, event);\n  }\n\n  /**\n   * Aplica efeito de hover a um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @param {Object} event - Evento do OpenLayers\n   */\n  applyHover(feature, event) {\n    this.hoveredFeature = feature;\n    \n    // Aplicar estilo de hover\n    this.applyHoverStyle(feature);\n    \n    // Mostrar tooltip se configurado (apenas em desktop)\n    if (this.options.showTooltip && !this.isMobile()) {\n      this.showTooltip(feature, event);\n    }\n\n    // Executar handler de hover\n    this.executeHoverHandler(feature, event);\n  }\n\n  /**\n   * Remove efeito de hover\n   */\n  clearHover() {\n    if (this.hoveredFeature) {\n      // Remover estilo de hover\n      this.clearHoverStyle(this.hoveredFeature);\n      \n      // Em mobile, não esconder tooltip automaticamente\n      // O tooltip é controlado pelo sistema de clique\n      if (!this.isMobile()) {\n        this.hideTooltip();\n      }\n      \n      // Executar handler de hover out\n      this.executeHoverOutHandler(this.hoveredFeature);\n      \n      this.hoveredFeature = null;\n    }\n  }\n\n  /**\n   * Aplica estilo de hover a um feature\n   * @param {Object} feature - Feature do OpenLayers\n   */\n  applyHoverStyle(feature) {\n    // Implementar lógica de estilo de hover\n    // Esta função deve ser sobrescrita ou configurada\n    if (this.options.hoverStyleFunction) {\n      this.options.hoverStyleFunction(feature, true);\n    }\n  }\n\n  /**\n   * Remove estilo de hover de um feature\n   * @param {Object} feature - Feature do OpenLayers\n   */\n  clearHoverStyle(feature) {\n    // Implementar lógica de remoção de estilo de hover\n    if (this.options.hoverStyleFunction) {\n      this.options.hoverStyleFunction(feature, false);\n    }\n  }\n\n  /**\n   * Mostra tooltip para um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @param {Object} event - Evento do OpenLayers\n   */\n  showTooltip(feature, event) {\n    if (this.tooltipElement) {\n      this.hideTooltip();\n    }\n\n    const tooltipContent = this.getTooltipContent(feature);\n    console.log('[OpenLayersInteractions] Conteúdo do tooltip:', tooltipContent);\n    \n    if (!tooltipContent) {\n      console.log('[OpenLayersInteractions] Sem conteúdo para tooltip');\n      return;\n    }\n\n    this.tooltipElement = this.createTooltipElement(tooltipContent, event);\n    this.map.getTargetElement().appendChild(this.tooltipElement);\n    console.log('[OpenLayersInteractions] Tooltip criado e adicionado ao DOM');\n  }\n\n  /**\n   * Esconde tooltip\n   */\n  hideTooltip() {\n    if (this.tooltipElement) {\n      this.tooltipElement.remove();\n      this.tooltipElement = null;\n      console.log('[OpenLayersInteractions] Tooltip escondido');\n    }\n  }\n\n  /**\n   * Força limpeza do tooltip (útil para mobile)\n   */\n  forceHideTooltip() {\n    this.hideTooltip();\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n      this.clickTimeout = null;\n    }\n    this.clickedFeature = null;\n    console.log('[OpenLayersInteractions] Tooltip forçadamente escondido e estado resetado');\n  }\n\n  /**\n   * Cria elemento de tooltip\n   * @param {string} content - Conteúdo do tooltip\n   * @param {Object} event - Evento do OpenLayers\n   * @returns {HTMLElement} Elemento do tooltip\n   */\n  createTooltipElement(content, event) {\n    const element = document.createElement('div');\n    element.className = 'ol-tooltip';\n    element.innerHTML = content;\n    \n    // Detectar se é terra indígena baseado no conteúdo\n    const isTerraIndigena = content.includes('Terra Indígena');\n    \n    // Estilos do tooltip - diferentes fundos, mesmo texto preto\n    const tooltipStyles = isTerraIndigena ? {\n      // Estilo para Terras Indígenas - fundo vermelho\n      backgroundColor: '#fef2f2' // Fundo vermelho claro (red-50)\n    } : {\n      // Estilo para Escolas - fundo verde\n      backgroundColor: '#bbf7d0' // Fundo verde (green-200)\n    };\n    \n    // Estilos base comuns - mais simples e harmoniosos\n    Object.assign(element.style, {\n      position: 'absolute',\n      padding: '6px 10px',\n      borderRadius: '6px',\n      fontSize: '12px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n      fontWeight: '700', // Fonte negrito\n      color: '#000000', // Texto preto para ambos os tipos\n      pointerEvents: 'none',\n      zIndex: '1000',\n      maxWidth: '200px',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)', // Sombra sutil sem brilho\n      ...tooltipStyles\n    });\n\n    // Posicionar tooltip\n    const coordinate = event.coordinate;\n    const pixel = this.map.getPixelFromCoordinate(coordinate);\n    \n    element.style.left = (pixel[0] + 10) + 'px';\n    element.style.top = (pixel[1] - 10) + 'px';\n\n    return element;\n  }\n\n  /**\n   * Obtém conteúdo do tooltip para um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @returns {string} Conteúdo do tooltip\n   */\n  getTooltipContent(feature) {\n    console.log('[OpenLayersInteractions] Obtendo conteúdo do tooltip para feature:', {\n      type: feature.get('type'),\n      schoolData: feature.get('schoolData'),\n      terraIndigenaInfo: feature.get('terraIndigenaInfo')\n    });\n\n    // Implementar lógica para obter conteúdo do tooltip\n    // Esta função deve ser sobrescrita ou configurada\n    if (this.options.tooltipContentFunction) {\n      const content = this.options.tooltipContentFunction(feature);\n      console.log('[OpenLayersInteractions] Conteúdo do tooltip (função customizada):', content);\n      return content;\n    }\n\n    // Conteúdo padrão baseado no tipo de feature\n    const schoolData = feature.get('schoolData');\n    if (schoolData) {\n      // FORÇAR apenas o título da escola, SEM município ou outras informações\n      const titulo = schoolData.titulo || 'Escola Indígena';\n      console.log('[OpenLayersInteractions] Título extraído (padrão):', titulo);\n      console.log('[OpenLayersInteractions] Conteúdo do tooltip (padrão escola - FORÇADO apenas título):', titulo);\n      return titulo; // Retorna APENAS o título\n    }\n\n    const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n    if (terraIndigenaInfo) {\n      const content = `Terra Indígena ${terraIndigenaInfo.titulo || 'Indígena'}`;\n      console.log('[OpenLayersInteractions] Conteúdo do tooltip (padrão terra indígena):', content);\n      return content;\n    }\n\n    console.log('[OpenLayersInteractions] Nenhum conteúdo encontrado para tooltip');\n    return null;\n  }\n\n  /**\n   * Executa handler de clique\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeClickHandler(feature, event) {\n    const handler = this.eventHandlers.get('click');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de duplo clique\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeDoubleClickHandler(feature, event) {\n    const handler = this.eventHandlers.get('doubleClick');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de hover\n   * @param {Object} feature - Feature em hover\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeHoverHandler(feature, event) {\n    const handler = this.eventHandlers.get('hover');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de hover out\n   * @param {Object} feature - Feature que saiu do hover\n   */\n  executeHoverOutHandler(feature) {\n    const handler = this.eventHandlers.get('hoverOut');\n    if (handler && typeof handler === 'function') {\n      handler(feature);\n    }\n  }\n\n  /**\n   * Registra handler para um tipo de evento\n   * @param {string} eventType - Tipo do evento\n   * @param {Function} handler - Função handler\n   */\n  on(eventType, handler) {\n    this.eventHandlers.set(eventType, handler);\n  }\n\n  /**\n   * Remove handler para um tipo de evento\n   * @param {string} eventType - Tipo do evento\n   */\n  off(eventType) {\n    this.eventHandlers.delete(eventType);\n  }\n\n  /**\n   * Remove todos os handlers\n   */\n  clearHandlers() {\n    this.eventHandlers.clear();\n  }\n\n  /**\n   * Atualiza opções de interação\n   * @param {Object} newOptions - Novas opções\n   */\n  updateOptions(newOptions) {\n    this.options = { ...this.options, ...newOptions };\n    \n    // Reconfigurar interações se necessário\n    if (newOptions.enableHover !== undefined) {\n      // Implementar lógica para habilitar/desabilitar hover\n    }\n    \n    if (newOptions.enableClick !== undefined) {\n      // Implementar lógica para habilitar/desabilitar clique\n    }\n  }\n\n  /**\n   * Limpa todas as interações e handlers\n   */\n  destroy() {\n    // Limpar timeouts\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    if (this.hoverTimeout) {\n      clearTimeout(this.hoverTimeout);\n    }\n\n    // Esconder tooltip\n    this.hideTooltip();\n\n    // Limpar hover\n    this.clearHover();\n\n    // Limpar handlers\n    this.clearHandlers();\n\n    // Remover event listeners do mapa\n    // Nota: OpenLayers não tem método un() para remover listeners específicos\n    // Seria necessário recriar o mapa ou implementar controle manual\n  }\n}\n\n/**\n * Função utilitária para criar interações padrão\n * @param {Object} map - Mapa OpenLayers\n * @param {Object} options - Opções de configuração\n * @returns {OpenLayersInteractions} Instância de interações\n */\nexport function createDefaultInteractions(map, options = {}) {\n  const defaultOptions = {\n    enableHover: true,\n    enableClick: true,\n    enableDoubleClick: true,\n    enableTouch: true,\n    showTooltip: true,\n    hoverDelay: 200,\n    clickDelay: 300\n  };\n\n  return new OpenLayersInteractions(map, { ...defaultOptions, ...options });\n}\n\n/**\n * Função utilitária para configurar interações específicas para marcadores\n * @param {Object} map - Mapa OpenLayers\n * @param {Function} onMarkerClick - Handler para clique em marcador\n * @param {Function} onMarkerHover - Handler para hover em marcador\n * @returns {OpenLayersInteractions} Instância de interações configurada\n */\nexport function createMarkerInteractions(map, onMarkerClick, onMarkerHover) {\n  console.log('[createMarkerInteractions] Criando interações para marcadores...');\n  \n  const interactions = createDefaultInteractions(map, {\n    showTooltip: true,\n    tooltipContentFunction: (feature) => {\n      console.log('[createMarkerInteractions] Função de conteúdo do tooltip chamada para:', feature);\n      const schoolData = feature.get('schoolData');\n      if (schoolData) {\n        // FORÇAR apenas o título da escola, SEM município\n        const titulo = schoolData.titulo || 'Escola Indígena';\n        console.log('[createMarkerInteractions] Título extraído:', titulo);\n        console.log('[createMarkerInteractions] Conteúdo do tooltip gerado (FORÇADO apenas título):', titulo);\n        return titulo; // Retorna APENAS o título\n      }\n      console.log('[createMarkerInteractions] Sem dados de escola para tooltip');\n      return null;\n    }\n  });\n\n  if (onMarkerClick) {\n    interactions.on('click', onMarkerClick);\n  }\n\n  if (onMarkerHover) {\n    interactions.on('hover', onMarkerHover);\n  }\n\n  console.log('[createMarkerInteractions] Interações criadas com sucesso');\n  return interactions;\n}\n\n/**\n * Função utilitária para configurar interações específicas para camadas GeoJSON\n * @param {Object} map - Mapa OpenLayers\n * @param {Function} onFeatureClick - Handler para clique em feature\n * @param {Function} onFeatureHover - Handler para hover em feature\n * @returns {OpenLayersInteractions} Instância de interações configurada\n */\nexport function createGeoJSONInteractions(map, onFeatureClick, onFeatureHover) {\n  const interactions = createDefaultInteractions(map, {\n    showTooltip: true,\n    tooltipContentFunction: (feature) => {\n      const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n      if (terraIndigenaInfo) {\n        return `Terra Indígena ${terraIndigenaInfo.titulo || 'Indígena'}`;\n      }\n      return null;\n    }\n  });\n\n  if (onFeatureClick) {\n    interactions.on('click', onFeatureClick);\n  }\n\n  if (onFeatureHover) {\n    interactions.on('hover', onFeatureHover);\n  }\n\n  return interactions;\n}\n","// Configurações centralizadas do mapa OpenLayers\n\nexport const MAP_CONFIG = {\n  // Configurações iniciais\n  center: [-48.4129, -22.3794], // longitude, latitude\n  zoom: 7.63,\n  maxZoom: 18,\n  minZoom: 4,\n  \n  // Configurações específicas para mobile\n  mobile: {\n    center: [-48.5935, -21.9212], // longitude, latitude - Coordenadas especificadas\n    zoom: 5.70 // Zoom ajustado para 5.70 conforme solicitado\n  },\n  \n  // Configurações de clusterização - Ajustadas para mostrar mais marcadores individuais\n  clusterDistance: 15, // Reduzido para mostrar mais marcadores individuais\n  clusterMinDistance: 3, // Reduzido para permitir marcadores mais próximos\n  clusterAnimationDuration: 300,\n  \n  // Configurações de proximidade para pares próximos\n  proximityThreshold: 0.00005,\n  \n  // Configurações de zoom para clusters\n  disableClusteringAtZoom: 12,\n  \n  // Configurações de tooltip\n  tooltipOffset: 10,\n  tooltipDelay: 200,\n  \n  // Configurações de interação\n  interaction: {\n    enableHover: true,\n    enableClick: true,\n    enableDoubleClick: true,\n    enableTouch: true,\n    clickDelay: 300,\n    hoverDelay: 200\n  },\n  \n  // Configurações de performance\n  performance: {\n    enableLazyLoading: true,\n    maxFeaturesPerTile: 1000,\n    enableFeatureCulling: true,\n    enableTileCaching: true\n  },\n\n  // Configurações de animação\n  ANIMATION_CONFIG: {\n    duration: {\n      marker: 300,\n      cluster: 500,\n      zoom: 800,\n      pan: 600\n    },\n    easing: {\n      marker: 'ease-out',\n      cluster: 'ease-in-out',\n      zoom: 'ease-out',\n      pan: 'ease-out'\n    }\n  }\n};\n\n// Configurações de cores dos marcadores\nexport const MARKER_COLORS = {\n  individual: '#3B82F6',\n  individualBorder: '#1E40AF',\n  cluster: {\n    small: '#60A5FA',\n    medium: '#3B82F6',\n    large: '#2563EB',\n    xlarge: '#1E40AF'\n  },\n  nearbyPair: '#FF6B6B',\n  selected: '#10B981',\n  hover: '#F59E0B'\n};\n\n// Configurações de tamanhos dos clusters\nexport const CLUSTER_SIZES = {\n  small: { min: 2, max: 10, size: 50 },\n  medium: { min: 11, max: 20, size: 52 },\n  large: { min: 21, max: 50, size: 56 },\n  xlarge: { min: 51, max: 100, size: 64 },\n  xxlarge: { min: 101, size: 72 }\n};\n\n// Configurações de fontes para clusters\nexport const CLUSTER_FONTS = {\n  small: 'bold 14px Arial',\n  medium: 'bold 15px Arial',\n  large: 'bold 16px Arial',\n  xlarge: 'bold 18px Arial'\n};\n\n// Configurações das camadas GeoJSON\nexport const GEOJSON_CONFIG = {\n  terrasIndigenas: {\n    regularizada: {\n      fill: 'rgba(220, 20, 60, 0.3)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(220, 20, 60, 0.45)',\n        stroke: '#FF0000'\n      }\n    },\n    declarada: {\n      fill: 'rgba(139, 0, 0, 0.25)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(139, 0, 0, 0.4)',\n        stroke: '#FF0000'\n      }\n    }\n  },\n  estadoSP: {\n    fill: 'rgba(0, 0, 0, 0.3)',\n    stroke: '#000000',\n    hover: {\n      fill: 'rgba(0, 0, 0, 0.4)',\n      stroke: '#333333'\n    }\n  }\n};\n\n// Configurações de projeção\nexport const PROJECTION_CONFIG = {\n  dataProjection: 'EPSG:4326',\n  featureProjection: 'EPSG:3857',\n  // Projeção SIRGAS 2000 (EPSG:4674) usada nos dados GeoJSON\n  sirgas2000: 'EPSG:4674'\n};\n\n// Configurações de camadas base\nexport const BASE_LAYER_CONFIG = {\n  satellite: {\n    url: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n    attributions: '© <a href=\"https://www.esri.com/\">Esri</a>',\n    maxZoom: 19,\n    wrapX: false,\n    tilePixelRatio: 1,\n    tileSize: 256\n  },\n  osm: {\n    url: 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    attributions: '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    maxZoom: 19\n  },\n  terrain: {\n    url: 'https://{a-d}.tile.opentopomap.org/{z}/{x}/{y}.png',\n    attributions: '© <a href=\"https://opentopomap.org/\">OpenTopoMap</a> contributors',\n    maxZoom: 17\n  }\n};\n\n// Configurações de estilos para diferentes tipos de marcadores\nexport const MARKER_STYLE_CONFIG = {\n  escola: {\n    default: {\n      radius: 6,\n      fillColor: MARKER_COLORS.individual,\n      strokeColor: MARKER_COLORS.individualBorder,\n      strokeWidth: 2\n    },\n    hover: {\n      radius: 8,\n      fillColor: MARKER_COLORS.hover,\n      strokeColor: '#D97706',\n      strokeWidth: 3\n    },\n    selected: {\n      radius: 10,\n      fillColor: MARKER_COLORS.selected,\n      strokeColor: '#059669',\n      strokeWidth: 3,\n      lineDash: [5, 5]\n    },\n    nearbyPair: {\n      radius: 8,\n      fillColor: MARKER_COLORS.nearbyPair,\n      strokeColor: '#DC2626',\n      strokeWidth: 2\n    }\n  },\n  cluster: {\n    small: {\n      radius: CLUSTER_SIZES.small.size / 2,\n      fillColor: MARKER_COLORS.cluster.small,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    medium: {\n      radius: CLUSTER_SIZES.medium.size / 2,\n      fillColor: MARKER_COLORS.cluster.medium,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    large: {\n      radius: CLUSTER_SIZES.large.size / 2,\n      fillColor: MARKER_COLORS.cluster.large,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    xlarge: {\n      radius: CLUSTER_SIZES.xlarge.size / 2,\n      fillColor: MARKER_COLORS.cluster.xlarge,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    }\n  }\n};\n\n// Configurações de animações\nexport const ANIMATION_CONFIG = {\n  duration: {\n    marker: 300,\n    cluster: 500,\n    zoom: 800,\n    pan: 600\n  },\n  easing: {\n    marker: 'ease-out',\n    cluster: 'ease-in-out',\n    zoom: 'ease-out',\n    pan: 'ease-out'\n  }\n};\n\n// Configurações de responsividade\nexport const RESPONSIVE_CONFIG = {\n  breakpoints: {\n    mobile: 768,\n    tablet: 1024,\n    desktop: 1200\n  },\n  mobile: {\n    clusterDistance: 12, // Reduzido para mobile\n    tooltipOffset: 8,\n    markerRadius: 5\n  },\n  tablet: {\n    clusterDistance: 15, // Reduzido para tablet\n    tooltipOffset: 10,\n    markerRadius: 6\n  },\n  desktop: {\n    clusterDistance: 15, // Reduzido para desktop\n    tooltipOffset: 10,\n    markerRadius: 6\n  }\n};\n\n// Configurações de cache\nexport const CACHE_CONFIG = {\n  markers: {\n    maxSize: 1000,\n    ttl: 300000, // 5 minutos\n    enableCompression: true\n  },\n  tiles: {\n    maxSize: 100,\n    ttl: 600000, // 10 minutos\n    enableCompression: true\n  },\n  geojson: {\n    maxSize: 50,\n    ttl: 1800000, // 30 minutos\n    enableCompression: true\n  }\n};\n\n// Configurações de debug\nexport const DEBUG_CONFIG = {\n  enableLogging: process.env.NODE_ENV === 'development',\n  enablePerformanceMonitoring: process.env.NODE_ENV === 'development',\n  enableFeatureCount: process.env.NODE_ENV === 'development',\n  logLevel: process.env.NODE_ENV === 'development' ? 'debug' : 'error'\n}; ","// Utility functions for mobile detection and interaction\n\nexport const isMobile = () => {\n  return window.innerWidth <= 768;\n};\n\nexport const isMobileLandscape = () => {\n  return isMobile() && window.innerWidth > window.innerHeight;\n}; ","import React, { useEffect, useRef, useCallback, useMemo } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { Feature } from 'ol';\nimport { Point } from 'ol/geom';\nimport { fromLonLat } from 'ol/proj';\nimport { \n  createMarkerStyle, \n  applyHoverStyle,\n  applySelectionStyle \n} from '../../utils/openlayers/markerStyles';\nimport { createMarkerInteractions } from '../../utils/openlayers/interactions';\nimport { MAP_CONFIG } from '../../utils/mapConfig';\nimport { isMobile } from '../../utils/mobileUtils';\n\n/**\n * Componente OpenLayersMarkers - Substitui completamente o Marcadores.js do Leaflet\n * IMPLEMENTAÇÃO SIMPLIFICADA: Mostra todos os marcadores individuais sem clustering\n */\nconst OpenLayersMarkers = ({ \n  dataPoints = [], \n  onPainelOpen,\n  showMarcadores = true,\n  showNomesEscolas = false,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle das camadas e fontes\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n  \n  // Estados para controle de interações\n  const [hoveredMarker, setHoveredMarker] = React.useState(null);\n  const [selectedMarker, setSelectedMarker] = React.useState(null);\n\n  // Verificar se é mobile\n  const isMobileDevice = useMemo(() => isMobile(), []);\n\n  /**\n   * Inicializa a camada de marcadores (SEM clustering)\n   */\n  const initializeMarkers = useCallback(() => {\n    if (!map) return;\n\n    console.log('[OpenLayersMarkers] Inicializando marcadores individuais...');\n\n    // Criar fonte vetorial para marcadores\n    vectorSourceRef.current = new VectorSource();\n    \n    // Criar camada vetorial para marcadores INDIVIDUAIS (sem clustering)\n    vectorLayerRef.current = new VectorLayer({\n      source: vectorSourceRef.current,\n      style: (feature) => createMarkerStyle(feature, showNomesEscolas),\n      zIndex: 100\n    });\n\n    // Adicionar camada ao mapa\n    map.addLayer(vectorLayerRef.current);\n\n    // Configurar interações\n    setupInteractions();\n\n  }, [map, showNomesEscolas]);\n\n  /**\n   * Configura as interações dos marcadores\n   */\n  const setupInteractions = useCallback(() => {\n    if (!map || !vectorLayerRef.current) return;\n\n    console.log('[OpenLayersMarkers] Configurando interações com tooltips...');\n\n    // Criar interações específicas para marcadores com tooltips\n    const interactions = createMarkerInteractions(\n      map,\n      handleMarkerClick,\n      handleMarkerHover\n    );\n\n    // Configurar handlers específicos\n    interactions.on('click', handleMarkerClick);\n    interactions.on('hover', handleMarkerHover);\n    interactions.on('hoverOut', handleMarkerHoverOut);\n\n    // IMPORTANTE: Integrar as interações com o mapa para que os tooltips funcionem\n    // O sistema de interações do OpenLayers precisa estar ativo para detectar hover\n    console.log('[OpenLayersMarkers] Interações configuradas e integradas com o mapa');\n\n  }, [map]);\n\n  /**\n   * Handler para clique em marcador\n   */\n  const handleMarkerClick = useCallback((feature, event) => {\n    const markerData = feature.get('markerData');\n    if (markerData && onPainelOpen) {\n      console.log('[OpenLayersMarkers] Marcador clicado:', markerData.titulo);\n      onPainelOpen(markerData);\n    }\n  }, [onPainelOpen]);\n\n  /**\n   * Handler para hover em marcador\n   */\n  const handleMarkerHover = useCallback((feature, event) => {\n    if (isMobileDevice) return; // Desabilitar hover em mobile\n    \n    setHoveredMarker(feature);\n    \n    // Aplicar estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => {\n        if (f === feature) {\n          return applyHoverStyle(f, createMarkerStyle(f, showNomesEscolas));\n        }\n        return createMarkerStyle(f, showNomesEscolas);\n      });\n      vectorLayerRef.current.changed();\n    }\n  }, [isMobileDevice, showNomesEscolas]);\n\n  /**\n   * Handler para saída do hover\n   */\n  const handleMarkerHoverOut = useCallback(() => {\n    setHoveredMarker(null);\n    \n    // Remover estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => createMarkerStyle(f, showNomesEscolas));\n      vectorLayerRef.current.changed();\n    }\n  }, [showNomesEscolas]);\n\n  /**\n   * Atualiza marcadores quando dataPoints mudar\n   */\n  const updateMarkers = useCallback(() => {\n    if (!vectorSourceRef.current || !dataPoints) return;\n\n    console.log('[OpenLayersMarkers] Atualizando marcadores...', dataPoints.length, 'showMarcadores:', showMarcadores);\n\n    // Limpar marcadores existentes\n    vectorSourceRef.current.clear();\n    \n    // Se showMarcadores for false, não adicionar marcadores\n    if (!showMarcadores) {\n      console.log('[OpenLayersMarkers] Marcadores desabilitados, removendo todos');\n      return;\n    }\n    \n    // Filtrar pontos válidos\n    const pontosValidos = dataPoints.filter(point => {\n      if (!point.latitude || !point.longitude) return false;\n      const lat = parseFloat(point.latitude);\n      const lng = parseFloat(point.longitude);\n      return !isNaN(lat) && !isNaN(lng) && \n             lat >= -90 && lat <= 90 && \n             lng >= -180 && lng <= 180;\n    });\n\n    console.log('[OpenLayersMarkers] Pontos válidos:', pontosValidos.length);\n\n    // Adicionar novos marcadores INDIVIDUAIS\n    pontosValidos.forEach((point, index) => {\n      if (point.latitude && point.longitude) {\n        const feature = new Feature({\n          geometry: new Point(fromLonLat([point.longitude, point.latitude]))\n        });\n        \n        feature.set('markerData', point);\n        feature.set('schoolData', point); // Dados para tooltips\n        feature.set('markerId', `marker_${index}`);\n        feature.set('type', 'marker');\n        \n        // Debug: verificar dados do tooltip\n        console.log(`[OpenLayersMarkers] Marcador ${index}:`, {\n          titulo: point.titulo,\n          municipio: point.municipio || point.Municipio,\n          uf: point.uf || point.UF\n        });\n        \n        vectorSourceRef.current.addFeature(feature);\n      }\n    });\n\n    console.log(`[OpenLayersMarkers] ${pontosValidos.length} marcadores individuais adicionados`);\n\n  }, [dataPoints, showMarcadores]);\n\n  /**\n   * Atualiza estilo dos marcadores quando showNomesEscolas mudar\n   */\n  const updateMarkerStyles = useCallback(() => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((feature) => createMarkerStyle(feature, showNomesEscolas));\n    vectorLayerRef.current.changed();\n  }, [showNomesEscolas]);\n\n  // Inicializar marcadores quando componente montar\n  useEffect(() => {\n    if (map) {\n      initializeMarkers();\n    }\n\n    return () => {\n      // Cleanup\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, initializeMarkers]);\n\n  // Atualizar marcadores quando dataPoints mudar\n  useEffect(() => {\n    updateMarkers();\n  }, [updateMarkers]);\n\n  // Atualizar estilos quando showNomesEscolas mudar\n  useEffect(() => {\n    updateMarkerStyles();\n  }, [updateMarkerStyles]);\n\n  // Sempre renderizar o componente para manter a camada ativa\n  return (\n    <div className={className}>\n      {/* Este componente não renderiza elementos visuais diretamente,\n          apenas gerencia as camadas do OpenLayers */}\n    </div>\n  );\n};\n\nexport default OpenLayersMarkers;\n","import { Style, Fill, Stroke, Text } from 'ol/style';\n\n// Configurações de cores para camadas GeoJSON\nexport const LAYER_COLORS = {\n  terrasIndigenas: {\n    regularizada: {\n      fill: 'rgba(220, 20, 60, 0.3)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(220, 20, 60, 0.45)',\n        stroke: '#FF0000'\n      }\n    },\n    declarada: {\n      fill: 'rgba(139, 0, 0, 0.25)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(139, 0, 0, 0.4)',\n        stroke: '#FF0000'\n      }\n    }\n  },\n  estadoSP: {\n    fill: 'rgba(0, 0, 0, 0.3)',\n    stroke: '#000000',\n    hover: {\n      fill: 'rgba(0, 0, 0, 0.4)',\n      stroke: '#333333'\n    }\n  }\n};\n\n/**\n * Cria estilo para terras indígenas baseado no status\n * @param {Object} feature - Feature do GeoJSON\n * @param {boolean} isHovered - Se está em estado hover\n * @returns {Style} Estilo da terra indígena\n */\nexport const createTerrasIndigenasStyle = (feature, isHovered = false) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: LAYER_COLORS.terrasIndigenas.regularizada.fill\n      }),\n      stroke: new Stroke({\n        color: LAYER_COLORS.terrasIndigenas.regularizada.stroke,\n        width: 2\n      })\n    });\n  }\n\n  const isRegularizada = feature.properties.fase_ti === 'Regularizada';\n  const colorConfig = isRegularizada \n    ? LAYER_COLORS.terrasIndigenas.regularizada \n    : LAYER_COLORS.terrasIndigenas.declarada;\n\n  const colors = isHovered ? colorConfig.hover : colorConfig;\n\n  return new Style({\n    fill: new Fill({\n      color: colors.fill\n    }),\n    stroke: new Stroke({\n      color: colors.stroke,\n      width: isHovered ? 3 : 2,\n      lineDash: isHovered ? [] : [3, 3]\n    })\n  });\n};\n\n/**\n * Cria estilo para estado de São Paulo\n * @param {Object} feature - Feature do GeoJSON\n * @param {boolean} isHovered - Se está em estado hover\n * @returns {Style} Estilo do estado\n */\nexport const createEstadoSPStyle = (feature, isHovered = false) => {\n  const colors = isHovered ? LAYER_COLORS.estadoSP.hover : LAYER_COLORS.estadoSP;\n\n  return new Style({\n    fill: new Fill({\n      color: colors.fill\n    }),\n    stroke: new Stroke({\n      color: colors.stroke,\n      width: isHovered ? 2 : 1\n    })\n  });\n};\n\n/**\n * Cria estilo para feature com label\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} labelProperty - Propriedade para usar como label\n * @param {Object} styleOptions - Opções de estilo\n * @returns {Style} Estilo com label\n */\nexport const createLabeledFeatureStyle = (feature, labelProperty, styleOptions = {}) => {\n  const {\n    fillColor = 'rgba(0, 0, 0, 0.1)',\n    strokeColor = '#000000',\n    strokeWidth = 1,\n    labelColor = '#000000',\n    labelSize = '12px',\n    labelFont = 'Arial'\n  } = styleOptions;\n\n  const labelText = feature.properties?.[labelProperty] || '';\n\n  const styles = [\n    new Style({\n      fill: new Fill({\n        color: fillColor\n      }),\n      stroke: new Stroke({\n        color: strokeColor,\n        width: strokeWidth\n      })\n    })\n  ];\n\n  // Adicionar label se houver texto\n  if (labelText) {\n    styles.push(new Style({\n      text: new Text({\n        text: labelText,\n        font: `${labelSize} ${labelFont}`,\n        fill: new Fill({\n          color: labelColor\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: 0,\n        textAlign: 'center'\n      })\n    }));\n  }\n\n  return styles;\n};\n\n/**\n * Cria estilo para feature com tooltip\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} tooltipText - Texto do tooltip\n * @param {Object} styleOptions - Opções de estilo\n * @returns {Style} Estilo com tooltip\n */\nexport const createFeatureWithTooltipStyle = (feature, tooltipText, styleOptions = {}) => {\n  const {\n    fillColor = 'rgba(0, 0, 0, 0.1)',\n    strokeColor = '#000000',\n    strokeWidth = 1,\n    tooltipColor = '#1F2937',\n    tooltipBackground = 'rgba(255, 255, 255, 0.95)',\n    tooltipBorder = '#E5E7EB'\n  } = styleOptions;\n\n  const styles = [\n    new Style({\n      fill: new Fill({\n        color: fillColor\n      }),\n      stroke: new Stroke({\n        color: strokeColor,\n        width: strokeWidth\n      })\n    })\n  ];\n\n  // Adicionar tooltip como texto\n  if (tooltipText) {\n    styles.push(new Style({\n      text: new Text({\n        text: tooltipText,\n        font: '11px Arial',\n        fill: new Fill({\n          color: tooltipColor\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: -15,\n        textAlign: 'center',\n        backgroundFill: new Fill({\n          color: tooltipBackground\n        }),\n        backgroundStroke: new Stroke({\n          color: tooltipBorder,\n          width: 1\n        }),\n        padding: [4, 8]\n      })\n    }));\n  }\n\n  return styles;\n};\n\n/**\n * Cria estilo para feature selecionada\n * @param {Object} feature - Feature do GeoJSON\n * @param {Style} baseStyle - Estilo base\n * @param {Object} selectionOptions - Opções de seleção\n * @returns {Style} Estilo com efeito de seleção\n */\nexport const applySelectionStyle = (feature, baseStyle, selectionOptions = {}) => {\n  const {\n    fillColor = 'rgba(59, 130, 246, 0.3)',\n    strokeColor = '#1E40AF',\n    strokeWidth = 3,\n    lineDash = [5, 5]\n  } = selectionOptions;\n\n  const selectionStyle = new Style({\n    fill: new Fill({\n      color: fillColor\n    }),\n    stroke: new Stroke({\n      color: strokeColor,\n      width: strokeWidth,\n      lineDash: lineDash\n    })\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, selectionStyle] : [baseStyle, selectionStyle];\n};\n\n/**\n * Cria estilo para feature com indicador de status\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} statusProperty - Propriedade que indica o status\n * @param {Object} statusConfig - Configuração dos status\n * @returns {Style} Estilo com indicador de status\n */\nexport const createStatusFeatureStyle = (feature, statusProperty, statusConfig) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: 'rgba(0, 0, 0, 0.1)'\n      }),\n      stroke: new Stroke({\n        color: '#000000',\n        width: 1\n      })\n    });\n  }\n\n  const status = feature.properties[statusProperty];\n  const config = statusConfig[status] || statusConfig.default || {\n    fill: 'rgba(0, 0, 0, 0.1)',\n    stroke: '#000000'\n  };\n\n  return new Style({\n    fill: new Fill({\n      color: config.fill\n    }),\n    stroke: new Stroke({\n      color: config.stroke,\n      width: config.strokeWidth || 1\n    })\n  });\n};\n\n/**\n * Cria estilo para feature com gradiente baseado em valor numérico\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} valueProperty - Propriedade com valor numérico\n * @param {Object} gradientConfig - Configuração do gradiente\n * @returns {Style} Estilo com gradiente\n */\nexport const createGradientFeatureStyle = (feature, valueProperty, gradientConfig) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: gradientConfig.defaultColor || 'rgba(0, 0, 0, 0.1)'\n      }),\n      stroke: new Stroke({\n        color: gradientConfig.strokeColor || '#000000',\n        width: gradientConfig.strokeWidth || 1\n      })\n    });\n  }\n\n  const value = parseFloat(feature.properties[valueProperty]) || 0;\n  const { min, max, colors } = gradientConfig;\n\n  // Calcular cor baseada no valor\n  let color;\n  if (value <= min) {\n    color = colors.min;\n  } else if (value >= max) {\n    color = colors.max;\n  } else {\n    // Interpolação linear entre cores\n    const ratio = (value - min) / (max - min);\n    color = interpolateColor(colors.min, colors.max, ratio);\n  }\n\n  return new Style({\n    fill: new Fill({\n      color: color\n    }),\n    stroke: new Stroke({\n      color: gradientConfig.strokeColor || '#000000',\n      width: gradientConfig.strokeWidth || 1\n    })\n  });\n};\n\n/**\n * Interpola entre duas cores\n * @param {string} color1 - Primeira cor (hex)\n * @param {string} color2 - Segunda cor (hex)\n * @param {number} ratio - Razão de interpolação (0-1)\n * @returns {string} Cor interpolada\n */\nfunction interpolateColor(color1, color2, ratio) {\n  const hex1 = color1.replace('#', '');\n  const hex2 = color2.replace('#', '');\n  \n  const r1 = parseInt(hex1.substr(0, 2), 16);\n  const g1 = parseInt(hex1.substr(2, 2), 16);\n  const b1 = parseInt(hex1.substr(4, 2), 16);\n  \n  const r2 = parseInt(hex2.substr(0, 2), 16);\n  const g2 = parseInt(hex2.substr(2, 2), 16);\n  const b2 = parseInt(hex2.substr(4, 2), 16);\n  \n  const r = Math.round(r1 + (r2 - r1) * ratio);\n  const g = Math.round(g1 + (g2 - g1) * ratio);\n  const b = Math.round(b1 + (b2 - b1) * ratio);\n  \n  return `rgb(${r}, ${g}, ${b})`;\n}\n","import React, { useEffect, useRef, useCallback, useMemo } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { GeoJSON } from 'ol/format';\nimport { \n  createTerrasIndigenasStyle,\n  applySelectionStyle \n} from '../../utils/openlayers/layerStyles';\nimport { createGeoJSONInteractions } from '../../utils/openlayers/interactions';\nimport { MAP_CONFIG, PROJECTION_CONFIG } from '../../utils/mapConfig';\nimport { isMobile } from '../../utils/mobileUtils';\n\n/**\n * Componente OpenLayersTerrasIndigenas - Substitui completamente o TerrasIndigenas.js do Leaflet\n * Implementa camada GeoJSON de terras indígenas com estilos dinâmicos e interações\n */\nconst OpenLayersTerrasIndigenas = ({ \n  data,\n  onPainelOpen,\n  showTerrasIndigenas = true,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle da camada\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n  const interactionsRef = useRef(null);\n  \n  // Estados para controle de interações\n  const [hoveredFeature, setHoveredFeature] = React.useState(null);\n  const [selectedFeature, setSelectedFeature] = React.useState(null);\n  const [features, setFeatures] = React.useState([]);\n\n  // Verificar se é mobile\n  const isMobileDevice = useMemo(() => isMobile(), []);\n\n  /**\n   * Inicializa a camada de terras indígenas\n   */\n  const initializeLayer = useCallback(() => {\n    if (!map || !data) return;\n\n    // Verificar se os dados têm a estrutura correta\n    if (!data.features || !Array.isArray(data.features) || data.features.length === 0) {\n      console.warn('[OpenLayersTerrasIndigenas] Dados inválidos ou vazios:', data);\n      return;\n    }\n\n    try {\n      // Criar formato GeoJSON com projeções corretas\n      const geoJSONFormat = new GeoJSON({\n        dataProjection: PROJECTION_CONFIG.sirgas2000 || PROJECTION_CONFIG.dataProjection,\n        featureProjection: PROJECTION_CONFIG.featureProjection\n      });\n\n      // Ler features do GeoJSON\n      const geoJSONFeatures = geoJSONFormat.readFeatures(data);\n      setFeatures(geoJSONFeatures);\n\n      // Criar fonte vetorial\n      vectorSourceRef.current = new VectorSource({\n        features: geoJSONFeatures\n      });\n\n      // Criar camada vetorial\n      vectorLayerRef.current = new VectorLayer({\n        source: vectorSourceRef.current,\n        style: (feature) => createTerrasIndigenasStyle(feature, false),\n        zIndex: 10\n      });\n\n      // Adicionar dados de terra indígena a cada feature\n      geoJSONFeatures.forEach(feature => {\n        const properties = feature.getProperties();\n        feature.set('terraIndigenaInfo', {\n          titulo: properties.terrai_nom,\n          tipo: 'terra_indigena',\n          etnia: properties.etnia_nome,\n          municipio: properties.municipio_,\n          uf: properties.uf_sigla,\n          superficie: properties.superficie,\n          fase: properties.fase_ti,\n          modalidade: properties.modalidade,\n          reestudo: properties.reestudo_t,\n          cr: properties.cr,\n          faixa_fron: properties.faixa_fron,\n          undadm_nom: properties.undadm_nom,\n          undadm_sig: properties.undadm_sig,\n          dominio_un: properties.dominio_un,\n          data_atual: properties.data_atual,\n          terrai_cod: properties.terrai_cod,\n          undadm_cod: properties.undadm_cod\n        });\n      });\n\n      // Adicionar camada ao mapa\n      map.addLayer(vectorLayerRef.current);\n\n      // Configurar interações\n      setupInteractions();\n\n      console.log(`[OpenLayersTerrasIndigenas] Camada criada com ${geoJSONFeatures.length} features`);\n\n    } catch (error) {\n      console.error('[OpenLayersTerrasIndigenas] Erro ao criar camada:', error);\n    }\n\n  }, [map, data]);\n\n  /**\n   * Configura as interações da camada\n   */\n  const setupInteractions = useCallback(() => {\n    if (!map || !vectorLayerRef.current) return;\n\n    // Criar interações específicas para camadas GeoJSON\n    interactionsRef.current = createGeoJSONInteractions(\n      map,\n      handleFeatureClick,\n      handleFeatureHover\n    );\n\n    // Configurar handlers específicos\n    interactionsRef.current.on('click', handleFeatureClick);\n    interactionsRef.current.on('hover', handleFeatureHover);\n    interactionsRef.current.on('hoverOut', handleFeatureHoverOut);\n\n  }, [map]);\n\n  /**\n   * Handler para clique em feature\n   */\n  const handleFeatureClick = useCallback((feature, event) => {\n    if (!feature) return;\n\n    const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n    if (!terraIndigenaInfo) return;\n\n    if (isMobileDevice) {\n      // No mobile: clique único abre o painel diretamente\n      if (onPainelOpen) {\n        onPainelOpen(terraIndigenaInfo);\n      }\n    } else {\n      // No desktop: primeiro clique faz zoom, segundo abre painel\n      if (selectedFeature === feature) {\n        // Segundo clique: abrir painel\n        if (onPainelOpen) {\n          onPainelOpen(terraIndigenaInfo);\n        }\n        setSelectedFeature(null);\n      } else {\n        // Primeiro clique: fazer zoom\n        setSelectedFeature(feature);\n        \n        const geometry = feature.getGeometry();\n        if (geometry) {\n          const extent = geometry.getExtent();\n          map.getView().fit(extent, {\n            duration: MAP_CONFIG.ANIMATION_CONFIG.duration.zoom,\n            padding: [50, 50, 50, 50],\n            maxZoom: 15\n          });\n        }\n      }\n    }\n  }, [isMobileDevice, onPainelOpen, selectedFeature, map]);\n\n  /**\n   * Handler para hover em feature\n   */\n  const handleFeatureHover = useCallback((feature, event) => {\n    if (isMobileDevice) return; // Desabilitar hover em mobile\n    \n    setHoveredFeature(feature);\n    \n    // Aplicar estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => {\n        if (f === feature) {\n          return createTerrasIndigenasStyle(f, true); // true = hover\n        }\n        return createTerrasIndigenasStyle(f, false);\n      });\n      vectorLayerRef.current.changed();\n    }\n  }, [isMobileDevice]);\n\n  /**\n   * Handler para saída do hover\n   */\n  const handleFeatureHoverOut = useCallback((feature) => {\n    setHoveredFeature(null);\n    \n    // Remover estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => createTerrasIndigenasStyle(f, false));\n      vectorLayerRef.current.changed();\n    }\n  }, []);\n\n  /**\n   * Aplica estilo de seleção a um feature\n   */\n  const applySelectionStyleToFeature = useCallback((feature) => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((f) => {\n      if (f === feature) {\n        const baseStyle = createTerrasIndigenasStyle(f, false);\n        return applySelectionStyle(f, baseStyle);\n      }\n      return createTerrasIndigenasStyle(f, false);\n    });\n    vectorLayerRef.current.changed();\n  }, []);\n\n  /**\n   * Remove estilo de seleção de um feature\n   */\n  const removeSelectionStyleFromFeature = useCallback((feature) => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((f) => createTerrasIndigenasStyle(f, false));\n    vectorLayerRef.current.changed();\n  }, []);\n\n  // Inicializar camada quando componente montar\n  useEffect(() => {\n    if (map && data && showTerrasIndigenas) {\n      initializeLayer();\n    }\n\n    return () => {\n      // Cleanup\n      if (interactionsRef.current) {\n        interactionsRef.current.destroy();\n      }\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, data, showTerrasIndigenas, initializeLayer]);\n\n  // Aplicar/remover estilo de seleção quando selectedFeature mudar\n  useEffect(() => {\n    if (selectedFeature) {\n      applySelectionStyleToFeature(selectedFeature);\n    } else if (vectorLayerRef.current) {\n      // Remover seleção de todos os features\n      removeSelectionStyleFromFeature();\n    }\n  }, [selectedFeature, applySelectionStyleToFeature, removeSelectionStyleFromFeature]);\n\n  // Limpar seleção após timeout (para comportamento de clique duplo)\n  useEffect(() => {\n    if (selectedFeature) {\n      const timeout = setTimeout(() => {\n        setSelectedFeature(null);\n      }, MAP_CONFIG.interaction.clickDelay);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [selectedFeature]);\n\n  // Se não deve mostrar terras indígenas, não renderizar nada\n  if (!showTerrasIndigenas || !data) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      {/* Este componente não renderiza elementos visuais diretamente,\n          apenas gerencia a camada GeoJSON do OpenLayers */}\n    </div>\n  );\n};\n\nexport default OpenLayersTerrasIndigenas;\n","import React, { useEffect, useRef, useCallback } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { GeoJSON } from 'ol/format';\nimport { createEstadoSPStyle } from '../../utils/openlayers/layerStyles';\nimport { PROJECTION_CONFIG } from '../../utils/mapConfig';\n\n/**\n * Componente OpenLayersEstadoSP - Substitui completamente o EstadoSP.js do Leaflet\n * Implementa camada GeoJSON de fundo do estado de São Paulo (não-interativa)\n */\nconst OpenLayersEstadoSP = ({ \n  data,\n  showEstadoSP = true,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle da camada\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n\n  /**\n   * Inicializa a camada do estado de São Paulo\n   */\n  const initializeLayer = useCallback(() => {\n    if (!map || !data) return;\n\n    // Verificar se os dados têm a estrutura correta\n    if (!data.features || !Array.isArray(data.features) || data.features.length === 0) {\n      console.warn('[OpenLayersEstadoSP] Dados inválidos ou vazios:', data);\n      return;\n    }\n\n    try {\n      // Criar formato GeoJSON com projeções corretas\n      const geoJSONFormat = new GeoJSON({\n        dataProjection: PROJECTION_CONFIG.sirgas2000 || PROJECTION_CONFIG.dataProjection,\n        featureProjection: PROJECTION_CONFIG.featureProjection\n      });\n\n      // Ler features do GeoJSON\n      const geoJSONFeatures = geoJSONFormat.readFeatures(data);\n\n      // Criar fonte vetorial\n      vectorSourceRef.current = new VectorSource({\n        features: geoJSONFeatures\n      });\n\n      // Criar camada vetorial (não-interativa, apenas visual)\n      vectorLayerRef.current = new VectorLayer({\n        source: vectorSourceRef.current,\n        style: (feature) => createEstadoSPStyle(feature, false),\n        zIndex: 5, // Camada de fundo com zIndex baixo\n        interactive: false // Desabilitar interações\n      });\n\n      // Adicionar camada ao mapa\n      map.addLayer(vectorLayerRef.current);\n\n      console.log(`[OpenLayersEstadoSP] Camada criada com ${geoJSONFeatures.length} features`);\n\n    } catch (error) {\n      console.error('[OpenLayersEstadoSP] Erro ao criar camada:', error);\n    }\n\n  }, [map, data]);\n\n  // Inicializar camada quando componente montar\n  useEffect(() => {\n    if (map && data && showEstadoSP) {\n      initializeLayer();\n    }\n\n    return () => {\n      // Cleanup\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, data, showEstadoSP, initializeLayer]);\n\n  // Se não deve mostrar estado SP, não renderizar nada\n  if (!showEstadoSP || !data) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      {/* Este componente não renderiza elementos visuais diretamente,\n          apenas gerencia a camada GeoJSON de fundo do OpenLayers */}\n    </div>\n  );\n};\n\nexport default OpenLayersEstadoSP;\n","import React, { useEffect, useRef, useCallback, useMemo } from 'react';\nimport OpenLayersTerrasIndigenas from './OpenLayersTerrasIndigenas';\nimport OpenLayersEstadoSP from './OpenLayersEstadoSP';\n\n/**\n * Componente OpenLayersLayers - Gerenciador unificado de todas as camadas GeoJSON\n * Centraliza o controle das camadas de terras indígenas e estado SP\n */\nconst OpenLayersLayers = ({ \n  terrasIndigenasData,\n  estadoSPData,\n  showTerrasIndigenas = true,\n  showEstadoSP = true,\n  onPainelOpen,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle das camadas\n  const terrasIndigenasRef = useRef(null);\n  const estadoSPRef = useRef(null);\n  \n  // Estados para controle das camadas\n  const [layersStatus, setLayersStatus] = React.useState({\n    terrasIndigenas: {\n      visible: showTerrasIndigenas,\n      loaded: false,\n      error: null\n    },\n    estadoSP: {\n      visible: showEstadoSP,\n      loaded: false,\n      error: null\n    }\n  });\n\n  // Verificar se há dados válidos\n  const hasValidData = useMemo(() => {\n    return {\n      terrasIndigenas: terrasIndigenasData && terrasIndigenasData.features && terrasIndigenasData.features.length > 0,\n      estadoSP: estadoSPData && estadoSPData.features && estadoSPData.features.length > 0\n    };\n  }, [terrasIndigenasData, estadoSPData]);\n\n  /**\n   * Atualiza status de uma camada\n   */\n  const updateLayerStatus = useCallback((layerName, updates) => {\n    setLayersStatus(prev => ({\n      ...prev,\n      [layerName]: {\n        ...prev[layerName],\n        ...updates\n      }\n    }));\n  }, []);\n\n  /**\n   * Handler para mudanças na visibilidade das camadas\n   */\n  const handleLayerVisibilityChange = useCallback((layerName, visible) => {\n    updateLayerStatus(layerName, { visible });\n  }, [updateLayerStatus]);\n\n  /**\n   * Handler para erros nas camadas\n   */\n  const handleLayerError = useCallback((layerName, error) => {\n    console.error(`[OpenLayersLayers] Erro na camada ${layerName}:`, error);\n    updateLayerStatus(layerName, { error: error.message });\n  }, [updateLayerStatus]);\n\n  /**\n   * Handler para sucesso no carregamento das camadas\n   */\n  const handleLayerSuccess = useCallback((layerName) => {\n    updateLayerStatus(layerName, { loaded: true, error: null });\n  }, [updateLayerStatus]);\n\n  /**\n   * Obtém estatísticas das camadas\n   */\n  const getLayersStats = useCallback(() => {\n    const stats = {\n      total: 0,\n      visible: 0,\n      loaded: 0,\n      errors: 0\n    };\n\n    Object.values(layersStatus).forEach(layer => {\n      stats.total++;\n      if (layer.visible) stats.visible++;\n      if (layer.loaded) stats.loaded++;\n      if (layer.error) stats.errors++;\n    });\n\n    return stats;\n  }, [layersStatus]);\n\n  /**\n   * Obtém informações detalhadas das camadas\n   */\n  const getLayersInfo = useCallback(() => {\n    return {\n      terrasIndigenas: {\n        ...layersStatus.terrasIndigenas,\n        hasData: hasValidData.terrasIndigenas,\n        featureCount: hasValidData.terrasIndigenas ? terrasIndigenasData.features.length : 0\n      },\n      estadoSP: {\n        ...layersStatus.estadoSP,\n        hasData: hasValidData.estadoSP,\n        featureCount: hasValidData.estadoSP ? estadoSPData.features.length : 0\n      }\n    };\n  }, [layersStatus, hasValidData, terrasIndigenasData, estadoSPData]);\n\n  // Log de status das camadas\n  useEffect(() => {\n    const stats = getLayersStats();\n    const info = getLayersInfo();\n    \n    console.log('[OpenLayersLayers] Status das camadas:', {\n      stats,\n      info,\n      hasValidData\n    });\n  }, [layersStatus, getLayersStats, getLayersInfo, hasValidData]);\n\n  // Atualizar status quando props mudarem\n  useEffect(() => {\n    setLayersStatus(prev => ({\n      terrasIndigenas: {\n        ...prev.terrasIndigenas,\n        visible: showTerrasIndigenas\n      },\n      estadoSP: {\n        ...prev.estadoSP,\n        visible: showEstadoSP\n      }\n    }));\n  }, [showTerrasIndigenas, showEstadoSP]);\n\n  // Se não há dados válidos, não renderizar nada\n  if (!hasValidData.terrasIndigenas && !hasValidData.estadoSP) {\n    return (\n      <div className={className}>\n        <div className=\"text-center text-gray-500 p-4\">\n          Nenhuma camada GeoJSON disponível\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      {/* Camada Terras Indígenas */}\n      {hasValidData.terrasIndigenas && (\n        <OpenLayersTerrasIndigenas\n          ref={terrasIndigenasRef}\n          data={terrasIndigenasData}\n          onPainelOpen={onPainelOpen}\n          showTerrasIndigenas={showTerrasIndigenas}\n          map={map}\n          onLoad={() => handleLayerSuccess('terrasIndigenas')}\n          onError={(error) => handleLayerError('terrasIndigenas', error)}\n        />\n      )}\n\n      {/* Camada Estado SP */}\n      {hasValidData.estadoSP && (\n        <OpenLayersEstadoSP\n          ref={estadoSPRef}\n          data={estadoSPData}\n          showEstadoSP={showEstadoSP}\n          map={map}\n          onLoad={() => handleLayerSuccess('estadoSP')}\n          onError={(error) => handleLayerError('estadoSP', error)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default OpenLayersLayers;\n","import React from 'react';\n\nconst MapWrapper = React.forwardRef((props, ref) => {\n  return <div id=\"map\" className=\"w-full h-full\" ref={ref} {...props} />;\n});\n\nexport default MapWrapper; ","import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport { defaults as defaultControls } from 'ol/control';\nimport { defaults as defaultInteractions } from 'ol/interaction';\nimport { register } from 'ol/proj/proj4';\nimport proj4 from 'proj4';\nimport 'ol/ol.css';\n\n// Componentes OpenLayers\nimport OpenLayersMarkers from './OpenLayers/OpenLayersMarkers';\nimport OpenLayersLayers from './OpenLayers/OpenLayersLayers';\n\n// Configurações e utilitários\nimport { MAP_CONFIG, BASE_LAYER_CONFIG } from '../utils/mapConfig';\nimport { isMobile } from '../utils/mobileUtils';\nimport MapWrapper from './map/MapWrapper';\n\n// Registrar projeção SIRGAS 2000 (EPSG:4674) usada nos dados GeoJSON\nproj4.defs('EPSG:4674', '+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs');\nregister(proj4);\n\nconst OpenLayersMap = ({ \n  dataPoints = [], \n  onPainelOpen,\n  center = MAP_CONFIG.center,\n  zoom = MAP_CONFIG.zoom,\n  className = \"h-screen w-full\",\n  // Props para camadas GeoJSON\n  terrasIndigenasData = null,\n  estadoSPData = null,\n  showTerrasIndigenas = true,\n  showEstadoSP = true,\n  // Props para marcadores\n  showMarcadores = true,\n  showNomesEscolas = false\n}) => {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const baseLayer = useRef(null);\n  const [mapInfo, setMapInfo] = useState({\n    lng: center[0],\n    lat: center[1],\n    zoom: zoom\n  });\n\n  // Verificar se é mobile e ajustar configurações\n  const isMobileDevice = useMemo(() => isMobile(), []);\n  const initialCenter = isMobileDevice ? MAP_CONFIG.mobile.center : center;\n  const initialZoom = isMobileDevice ? MAP_CONFIG.mobile.zoom : zoom;\n\n  /**\n   * Cria camadas base do mapa\n   */\n  const createBaseLayers = useCallback(() => {\n    const satelliteLayer = new TileLayer({\n      source: new XYZ({\n        url: BASE_LAYER_CONFIG.satellite.url,\n        attributions: BASE_LAYER_CONFIG.satellite.attributions,\n        maxZoom: BASE_LAYER_CONFIG.satellite.maxZoom,\n        wrapX: BASE_LAYER_CONFIG.satellite.wrapX,\n        tilePixelRatio: BASE_LAYER_CONFIG.satellite.tilePixelRatio,\n        tileSize: BASE_LAYER_CONFIG.satellite.tileSize\n      }),\n      preload: 1,\n      useInterimTilesOnError: false\n    });\n\n    return { satelliteLayer };\n  }, []);\n\n  /**\n   * Inicializa o mapa OpenLayers\n   */\n  const initializeMap = useCallback(() => {\n    if (map.current) return;\n\n    // Criar camadas base\n    const { satelliteLayer } = createBaseLayers();\n    baseLayer.current = satelliteLayer;\n\n    // Criar mapa com configurações ajustadas para mobile\n    map.current = new Map({\n      target: mapContainer.current,\n      layers: [baseLayer.current],\n      view: new View({\n        center: fromLonLat(initialCenter),\n        zoom: initialZoom,\n        maxZoom: MAP_CONFIG.maxZoom,\n        minZoom: MAP_CONFIG.minZoom,\n        enableRotation: false // Desabilitar rotação\n      }),\n      controls: defaultControls(),\n      interactions: defaultInteractions({\n        dragRotate: false, // Desabilitar rotação com arraste\n        pinchRotate: false // Desabilitar rotação com pinch (dois dedos)\n      })\n    });\n\n    // Event listeners para mudanças de view\n    map.current.on('moveend', () => {\n      const view = map.current.getView();\n      const center = toLonLat(view.getCenter());\n      const newView = {\n        lng: center[0].toFixed(4),\n        lat: center[1].toFixed(4),\n        zoom: view.getZoom().toFixed(2)\n      };\n      \n      setMapInfo(newView);\n    });\n\n    console.log('[OpenLayersMap] Mapa inicializado com sucesso');\n\n  }, [initialCenter, initialZoom, createBaseLayers]);\n\n  /**\n   * Atualiza configurações do mapa quando props mudarem\n   */\n  const updateMapConfig = useCallback(() => {\n    if (!map.current) return;\n\n    const isMobileDevice = isMobile();\n    const newCenter = isMobileDevice ? MAP_CONFIG.mobile.center : center;\n    const newZoom = isMobileDevice ? MAP_CONFIG.mobile.zoom : zoom;\n\n    const view = map.current.getView();\n    const currentCenter = toLonLat(view.getCenter());\n    const currentZoom = view.getZoom();\n\n    // Só atualizar se as configurações realmente mudaram\n    if (currentCenter[0] !== newCenter[0] || currentCenter[1] !== newCenter[1] || currentZoom !== newZoom) {\n      view.setCenter(fromLonLat(newCenter));\n      view.setZoom(newZoom);\n    }\n  }, [center, zoom]);\n\n  // Inicializar mapa quando componente montar\n  useEffect(() => {\n    initializeMap();\n\n    return () => {\n      if (map.current) {\n        map.current.setTarget(undefined);\n        map.current = null;\n      }\n    };\n  }, [initializeMap]);\n\n  // Atualizar configurações quando props mudarem\n  useEffect(() => {\n    updateMapConfig();\n  }, [updateMapConfig]);\n\n  return (\n    <MapWrapper ref={mapContainer}>\n      {/* Mapa base OpenLayers */}\n      {map.current && (\n        <>\n          {/* Componente de marcadores */}\n          <OpenLayersMarkers\n            dataPoints={dataPoints}\n            onPainelOpen={onPainelOpen}\n            showMarcadores={showMarcadores}\n            showNomesEscolas={showNomesEscolas}\n            map={map.current}\n          />\n\n          {/* Componente de camadas GeoJSON */}\n          <OpenLayersLayers\n            terrasIndigenasData={terrasIndigenasData}\n            estadoSPData={estadoSPData}\n            showTerrasIndigenas={showTerrasIndigenas}\n            showEstadoSP={showEstadoSP}\n            onPainelOpen={onPainelOpen}\n            map={map.current}\n          />\n        </>\n      )}\n    </MapWrapper>\n  );\n};\n\nexport default OpenLayersMap; ","import { useState, useEffect } from 'react';\n\n// Um objeto simples para armazenar os dados GeoJSON em memória.\nconst cache = {};\n\nexport const useGeoJSONCache = (key) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!key) return;\n\n    const fetchGeoJSON = async () => {\n      if (cache[key]) {\n         console.log(`useGeoJSONCache: Dados de ${key} encontrados no cache`);\n         setData(cache[key]);\n         return;\n      }\n      setLoading(true);\n      try {\n         const url = `${process.env.PUBLIC_URL}/${key}.geojson`;\n         console.log(`useGeoJSONCache: Carregando ${key} de:`, url);\n         const response = await fetch(url);\n         if (!response.ok) throw new Error(`Erro ao buscar GeoJSON (${response.status})`);\n         const geoJSON = await response.json();\n         console.log(`useGeoJSONCache: ${key} carregado com sucesso:`, {\n           type: geoJSON.type,\n           features: geoJSON.features?.length || 0,\n           crs: geoJSON.crs,\n           firstFeature: geoJSON.features?.[0] ? {\n             type: geoJSON.features[0].type,\n             properties: geoJSON.features[0].properties ? Object.keys(geoJSON.features[0].properties) : 'Sem propriedades',\n             geometry: geoJSON.features[0].geometry ? {\n               type: geoJSON.features[0].geometry.type,\n               coordinates: geoJSON.features[0].geometry.coordinates ? \n                 `${geoJSON.features[0].geometry.coordinates.length} arrays` : 'Sem coordenadas'\n             } : 'Sem geometria'\n           } : 'Nenhum feature'\n         });\n         cache[key] = geoJSON;\n         setData(geoJSON);\n      } catch (err) {\n         console.error(`useGeoJSONCache: Erro ao carregar ${key}:`, err);\n         setError(err);\n      } finally {\n         setLoading(false);\n      }\n    };\n\n    fetchGeoJSON();\n  }, [key]);\n\n  return { data, loading, error };\n}; ","import React, { useState, useEffect, useCallback } from 'react';\nimport OpenLayersMap from './OpenLayersMap';\nimport { useGeoJSONCache } from '../hooks/useGeoJSONCache';\nimport { MAP_CONFIG } from '../utils/mapConfig';\n\nconst MapSelector = ({ \n  dataPoints, \n  onPainelOpen, \n  painelAberto = false,\n  className = \"h-screen w-full\"\n}) => {\n  // Carregar dados GeoJSON\n  const { data: terrasIndigenasData, loading: terrasLoading, error: terrasError } = useGeoJSONCache('terras_indigenas');\n  const { data: estadoSPData, loading: estadoLoading, error: estadoError } = useGeoJSONCache('SP');\n\n  // Estados para controlar visibilidade das camadas\n  const [showTerrasIndigenas, setShowTerrasIndigenas] = useState(true);\n  const [showEstadoSP, setShowEstadoSP] = useState(true);\n\n  // Estado para controlar visibilidade dos marcadores\n  const [showMarcadores, setShowMarcadores] = useState(true);\n\n  // Estados para responsividade\n  const [isMobile, setIsMobile] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n\n  // Função para verificar se é mobile\n  const checkMobile = useCallback(() => {\n    setIsMobile(window.innerWidth <= 768);\n  }, []);\n\n  useEffect(() => {\n    // Verifica no carregamento inicial\n    checkMobile();\n    \n    // Adiciona listener de resize\n    window.addEventListener(\"resize\", checkMobile);\n    \n    return () => {\n      window.removeEventListener(\"resize\", checkMobile);\n    };\n  }, [checkMobile]);\n\n  // Handler para minimizar/expandir\n  const handleMinimize = useCallback(() => setIsMinimized(prev => !prev), []);\n\n  // Log de status das camadas\n  useEffect(() => {\n    console.log('MapSelector: Status das camadas GeoJSON:', {\n      terrasIndigenas: {\n        loading: terrasLoading,\n        error: terrasError,\n        hasData: !!terrasIndigenasData,\n        features: terrasIndigenasData?.features?.length || 0,\n        type: terrasIndigenasData?.type,\n        firstFeature: terrasIndigenasData?.features?.[0] ? {\n          type: terrasIndigenasData.features[0].type,\n          properties: terrasIndigenasData.features[0].properties ? Object.keys(terrasIndigenasData.features[0].properties) : 'Sem propriedades'\n        } : 'Nenhum feature'\n      },\n      estadoSP: {\n        loading: estadoLoading,\n        error: estadoError,\n        hasData: !!estadoSPData,\n        features: estadoSPData?.features?.length || 0,\n        type: estadoSPData?.type,\n        firstFeature: estadoSPData?.features?.[0] ? {\n          type: estadoSPData.features[0].type,\n          properties: estadoSPData.features[0].properties ? Object.keys(estadoSPData.features[0].properties) : 'Sem propriedades'\n        } : 'Nenhum feature'\n      }\n    });\n  }, [terrasIndigenasData, estadoSPData, terrasLoading, estadoLoading, terrasError, estadoError]);\n\n  useEffect(() => {\n    console.log('MapSelector: useEffect painelAberto mudou:', {\n      painelAberto,\n      isMobile,\n      showMarcadores,\n      shouldReactivate: !painelAberto && isMobile\n    });\n    \n    if (!painelAberto && isMobile) {\n      console.log('MapSelector: Painel fechado em mobile, reativando marcadores');\n      setShowMarcadores(true);\n    }\n  }, [painelAberto, isMobile]);\n\n  // Log para monitorar mudanças no showMarcadores\n  useEffect(() => {\n    console.log('MapSelector: showMarcadores mudou para:', showMarcadores);\n  }, [showMarcadores]);\n\n    // Componente para o cabeçalho do menu\n  const CabecalhoMenu = ({ onMinimize, isMobile, isMinimized }) => (\n    <div className=\"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-green-700 to-green-800 text-white\">\n      <div className=\"flex items-center gap-2\">\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3\" />\n        </svg>\n        <h3 className=\"text-sm font-semibold tracking-wide\">Camadas do Mapa</h3>\n      </div>\n      <button\n        onClick={onMinimize}\n        className=\"text-green-100 hover:text-white hover:bg-green-600 transition-all duration-200 p-1.5 rounded-md\"\n        aria-label={isMinimized ? \"Expandir\" : \"Minimizar\"}\n        type=\"button\"\n      >\n        {isMinimized ? (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        ) : (\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n          </svg>\n        )}\n      </button>\n    </div>\n  );\n\n  // Componente para botão de camada\n  const BotaoCamada = ({ id, label, checked, onChange, disabled = false, loading = false, error = false, total, color, subItems = null }) => (\n    <button\n      type=\"button\"\n      onClick={onChange}\n      disabled={disabled}\n      className={`group w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${\n        checked \n          ? 'bg-green-50 shadow-sm' \n          : 'bg-white hover:bg-green-50/50'\n      } ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\n    >\n      {/* Indicador de cor principal */}\n      <div className=\"flex-shrink-0\">\n        {subItems ? (\n          // Para Terras Indígenas com subcategorias\n          <div className=\"flex flex-col gap-1.5\">\n            {subItems.map((item, index) => (\n              <div key={index} className=\"flex items-center gap-2\">\n                <div \n                  className=\"w-3 h-3 rounded-full shadow-sm\" \n                  style={{ backgroundColor: item.color }}\n                />\n                <span className=\"text-xs font-medium text-gray-700\">{item.label}</span>\n              </div>\n            ))}\n          </div>\n        ) : (\n          // Para outras camadas\n          <div \n            className={`w-4 h-4 rounded-full shadow-sm ${\n              checked ? 'ring-2 ring-green-200' : ''\n            }`}\n            style={{ backgroundColor: color }}\n          />\n        )}\n      </div>\n      \n      {/* Conteúdo principal */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-2\">\n          <span className={`text-sm font-medium ${\n            checked ? 'text-green-900' : 'text-gray-800'\n          }`}>\n            {label}\n          </span>\n          \n          {total !== undefined && (\n            <span className={`text-xs px-2 py-0.5 rounded-full ${\n              checked \n                ? 'bg-green-100 text-green-700' \n                : 'bg-gray-100 text-gray-600'\n            }`}>\n              {total}\n            </span>\n          )}\n        </div>\n        \n        {/* Status indicators */}\n        <div className=\"flex items-center gap-2 mt-1\">\n          {loading && (\n            <div className=\"flex items-center gap-1 text-blue-600\">\n              <svg className=\"w-3 h-3 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n              </svg>\n              <span className=\"text-xs\">Carregando...</span>\n            </div>\n          )}\n          \n          {error && (\n            <div className=\"flex items-center gap-1 text-red-600\">\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <span className=\"text-xs\">Erro</span>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Indicador de estado */}\n      <div className=\"flex-shrink-0\">\n        {subItems ? (\n          // Indicador para Terras Indígenas\n                  <div className={`w-3 h-3 rounded-full transition-colors duration-200 ${\n          checked ? 'bg-green-600' : 'bg-gray-300'\n        }`} />\n      ) : (\n        // Indicador para outras camadas\n        <div className={`w-3 h-3 rounded-full transition-colors duration-200 ${\n          checked ? 'bg-green-600' : 'bg-gray-300'\n        }`} />\n        )}\n      </div>\n    </button>\n  );\n\n  // Definir center/zoom iniciais conforme dispositivo\n  const mapCenter = isMobile ? MAP_CONFIG.mobile.center : MAP_CONFIG.center;\n  const mapZoom = isMobile ? MAP_CONFIG.mobile.zoom : MAP_CONFIG.zoom;\n\n  // Log para debug do zoom\n  console.log('MapSelector - Debug zoom:', {\n    isMobile,\n    mobileZoom: MAP_CONFIG.mobile.zoom,\n    desktopZoom: MAP_CONFIG.zoom,\n    selectedZoom: mapZoom,\n    mobileCenter: MAP_CONFIG.mobile.center,\n    desktopCenter: MAP_CONFIG.center,\n    selectedCenter: mapCenter\n  });\n\n  return (\n    <div className={className} style={{ position: 'relative' }}>\n      {/* Controles de camadas responsivos */}\n      {isMobile ? (\n        // Menu mobile - fixo na parte inferior\n        <div className=\"fixed bottom-0 left-0 right-0 z-20\">\n          <div className=\"bg-white shadow-2xl rounded-t-2xl\">\n            <CabecalhoMenu\n              onMinimize={handleMinimize}\n              isMobile={true}\n              isMinimized={isMinimized}\n            />\n            {!isMinimized && (\n              <div className=\"p-4 flex flex-col gap-3 max-h-80 overflow-y-auto\">\n                <BotaoCamada\n                  id=\"estado-sp\"\n                  label=\"Estado de São Paulo\"\n                  checked={showEstadoSP}\n                  onChange={() => setShowEstadoSP(!showEstadoSP)}\n                  loading={estadoLoading}\n                  error={estadoError}\n                  color=\"#10B981\"\n                />\n                <BotaoCamada\n                  id=\"marcadores\"\n                  label=\"Escolas Indígenas\"\n                  checked={showMarcadores}\n                  onChange={() => setShowMarcadores(!showMarcadores)}\n                  total={dataPoints?.length}\n                  color=\"#3B82F6\"\n                />\n                <BotaoCamada\n                  id=\"terras-indigenas\"\n                  label=\"Terras Indígenas\"\n                  checked={showTerrasIndigenas}\n                  onChange={() => setShowTerrasIndigenas(!showTerrasIndigenas)}\n                  loading={terrasLoading}\n                  error={terrasError}\n                  subItems={[\n                    { label: \"Regularizadas\", color: \"#DC143C\" },\n                    { label: \"Declaradas\", color: \"#8B0000\" }\n                  ]}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        // Menu desktop - fixo no topo direito\n        <div className=\"fixed top-24 right-4 w-72 bg-white rounded-2xl shadow-2xl z-20 overflow-hidden\">\n          <CabecalhoMenu\n            onMinimize={handleMinimize}\n            isMobile={false}\n            isMinimized={isMinimized}\n          />\n          {!isMinimized && (\n            <div className=\"p-4 flex flex-col gap-3 max-h-96 overflow-y-auto\">\n              <BotaoCamada\n                id=\"estado-sp\"\n                label=\"Estado de São Paulo\"\n                checked={showEstadoSP}\n                onChange={() => setShowEstadoSP(!showEstadoSP)}\n                loading={estadoLoading}\n                error={estadoError}\n                color=\"#10B981\"\n              />\n              <BotaoCamada\n                id=\"marcadores\"\n                label=\"Escolas Indígenas\"\n                checked={showMarcadores}\n                onChange={() => setShowMarcadores(!showMarcadores)}\n                total={dataPoints?.length}\n                color=\"#3B82F6\"\n              />\n              <BotaoCamada\n                id=\"terras-indigenas\"\n                label=\"Terras Indígenas\"\n                checked={showTerrasIndigenas}\n                onChange={() => setShowTerrasIndigenas(!showTerrasIndigenas)}\n                loading={terrasLoading}\n                error={terrasError}\n                subItems={[\n                  { label: \"Regularizadas\", color: \"#DC143C\" },\n                  { label: \"Declaradas\", color: \"#8B0000\" }\n                ]}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Mapa OpenLayers unificado */}\n      <OpenLayersMap\n        dataPoints={showMarcadores ? dataPoints : []}\n        onPainelOpen={onPainelOpen}\n        className=\"h-full w-full\"\n        center={mapCenter}\n        zoom={mapZoom}\n        // Props para camadas GeoJSON\n        terrasIndigenasData={terrasIndigenasData}\n        estadoSPData={estadoSPData}\n        showTerrasIndigenas={showTerrasIndigenas}\n        showEstadoSP={showEstadoSP}\n        // Props para marcadores\n        showMarcadores={showMarcadores}\n      />\n    </div>\n  );\n};\n\nexport default MapSelector; ","// Central slug utility for the project\nexport const criarSlug = (texto) => {\n  return texto\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '') // Remove acentos\n    .replace(/[^a-z0-9]+/g, '-') // Substitui caracteres especiais por hífen\n    .replace(/^-+|-+$/g, '') // Remove hífens do início e fim\n    .trim();\n}; ","import { useState, useEffect } from 'react';\nimport { supabase } from '../../supabaseClient';\n\nconst useDocumentosEscola = (escolaId) => {\n  const [documentos, setDocumentos] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchDocumentos = async () => {\n      console.log('🔄 Iniciando busca de documentos para escola:', escolaId, 'tipo:', typeof escolaId);\n      \n      if (!escolaId) {\n        console.log('⚠️ Nenhum ID de escola fornecido, retornando array vazio');\n        setDocumentos([]);\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        console.log('📡 Consultando tabela documentos_escola...');\n        \n        // Verificar conexão com Supabase\n        const { data: authData, error: authError } = await supabase.auth.getSession();\n        console.log('🔐 Estado da autenticação:', {\n          temSessao: !!authData?.session,\n          error: authError\n        });\n\n        // Verificar permissões da tabela\n        const { data: rlsData, error: rlsError } = await supabase\n          .from('documentos_escola')\n          .select('count')\n          .limit(1);\n\n        console.log('🔑 Verificação de permissões:', {\n          podeAcessar: !rlsError,\n          error: rlsError ? {\n            code: rlsError.code,\n            message: rlsError.message,\n            details: rlsError.details,\n            hint: rlsError.hint\n          } : null\n        });\n\n        // Primeiro, vamos verificar todos os documentos para debug\n        const { data: allDocs, error: allDocsError } = await supabase\n          .from('documentos_escola')\n          .select('*');\n\n        if (allDocsError) {\n          console.error('❌ Erro ao buscar todos os documentos:', {\n            code: allDocsError.code,\n            message: allDocsError.message,\n            details: allDocsError.details,\n            hint: allDocsError.hint\n          });\n        } else {\n          console.log('📊 Todos os documentos na tabela:', allDocs);\n          if (allDocs && allDocs.length > 0) {\n            console.log('📊 Exemplo de documento:', allDocs[0]);\n            console.log('📊 Tipos de escola_id encontrados:', allDocs.map(doc => ({\n              id: doc.id,\n              escola_id: doc.escola_id,\n              tipo_escola_id: typeof doc.escola_id,\n              valor_escola_id: doc.escola_id\n            })));\n          } else {\n            console.log('⚠️ Tabela está vazia ou não temos permissão para ver os dados');\n          }\n        }\n        \n        // Agora vamos buscar os documentos específicos\n        console.log('🔍 Buscando documentos para escola_id:', escolaId);\n        const { data, error } = await supabase\n          .from('documentos_escola')\n          .select('*')\n          .eq('escola_id', escolaId.toString()) // Convertendo para string para garantir\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          console.error('❌ Erro na consulta Supabase:', {\n            code: error.code,\n            message: error.message,\n            details: error.details,\n            hint: error.hint\n          });\n          throw error;\n        }\n\n        console.log('✅ Documentos encontrados:', data?.length || 0);\n        if (data?.length === 0) {\n          console.log('ℹ️ Nenhum documento encontrado para a escola ID:', escolaId);\n          console.log('ℹ️ Tentando buscar com diferentes formatos de escola_id...');\n          \n          // Tentando diferentes formatos do ID\n          const { data: dataAsNumber, error: errorAsNumber } = await supabase\n            .from('documentos_escola')\n            .select('*')\n            .eq('escola_id', Number(escolaId));\n            \n          const { data: dataAsString, error: errorAsString } = await supabase\n            .from('documentos_escola')\n            .select('*')\n            .eq('escola_id', String(escolaId));\n            \n          console.log('Resultados com escola_id como número:', {\n            count: dataAsNumber?.length || 0,\n            error: errorAsNumber\n          });\n          console.log('Resultados com escola_id como string:', {\n            count: dataAsString?.length || 0,\n            error: errorAsString\n          });\n        } else {\n          console.log('📄 Dados dos documentos:', data);\n        }\n        \n        setDocumentos(data || []);\n      } catch (err) {\n        console.error('❌ Erro ao buscar documentos:', err);\n        setError(err.message);\n      } finally {\n        setIsLoading(false);\n        console.log('🏁 Estado final:', { \n          documentos: documentos.length, \n          isLoading, \n          error: error || 'nenhum' \n        });\n      }\n    };\n\n    fetchDocumentos();\n  }, [escolaId]);\n\n  return { documentos, isLoading, error };\n};\n\nexport default useDocumentosEscola; ","import React, { memo, useState } from 'react';\n\n// Componente InfoCard para informações individuais\nconst InfoCard = memo(({ label, value, icon: Icon, type = 'text', className = '' }) => {\n  if (!value && value !== 0) return null;\n\n  const renderValue = () => {\n    switch (type) {\n      case 'number':\n        return (\n          <div className=\"text-2xl font-bold text-green-800\">\n            {value.toLocaleString('pt-BR')}\n          </div>\n        );\n      case 'boolean':\n        return (\n          <div className={`px-3 py-1 rounded-full text-xs font-medium ${\n            value ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'\n          }`}>\n            {value ? 'Sim' : 'Não'}\n          </div>\n        );\n      case 'badge':\n        return (\n          <div className=\"flex flex-wrap gap-1\">\n            {Array.isArray(value) ? value.map((item, index) => (\n              <span key={index} className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                {item}\n              </span>\n            )) : (\n              <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                {value}\n              </span>\n            )}\n          </div>\n        );\n      case 'link':\n        return (\n          <a \n            href={value} \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"text-green-700 hover:text-green-800 underline text-sm\"\n          >\n            {value}\n          </a>\n        );\n      default:\n        return (\n          <div className=\"text-sm text-gray-700 leading-relaxed\">\n            {value}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className={`rounded-lg p-4 transition-all duration-200 ${className}`}>\n      <div className=\"flex items-center gap-2 mb-2\">\n        {Icon && <Icon className=\"w-5 h-5 text-green-600\" />}\n        <span className=\"text-xs font-medium text-gray-600 uppercase tracking-wide\">\n          {label}\n        </span>\n      </div>\n      {renderValue()}\n    </div>\n  );\n});\n\n// Componente InfoGrid para layout em grid\nconst InfoGrid = memo(({ children, columns = 'auto-fit', gap = 4, className = '' }) => {\n  const gridClasses = {\n    'auto-fit': 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',\n    '2': 'grid-cols-1 sm:grid-cols-2',\n    '3': 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',\n    '4': 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-4'\n  };\n\n  return (\n    <div className={`grid ${gridClasses[columns]} gap-${gap} ${className} [&>*]:bg-green-100`}>\n      {children}\n    </div>\n  );\n});\n\n// Componente InfoTable para dados tabulares\nconst InfoTable = memo(({ data, className = '' }) => {\n  if (!data || data.length === 0) return null;\n\n  return (\n    <div className={`bg-green-100 rounded-lg overflow-hidden ${className}`}>\n      <table className=\"w-full\">\n        <tbody>\n          {data.map((row, index) => (\n            <tr key={index} className={index % 2 === 0 ? 'bg-white' : 'bg-green-50'}>\n              <td className=\"px-4 py-3 text-sm font-medium text-gray-700 border-r border-green-200\">\n                {row.label}\n              </td>\n              <td className=\"px-4 py-3 text-sm text-gray-600\">\n                {row.value}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n});\n\n// Componente InfoStats para estatísticas com ícones\nconst InfoStats = memo(({ stats, className = '' }) => {\n  if (!stats || stats.length === 0) return null;\n\n  return (\n    <div className={`grid grid-cols-2 sm:grid-cols-4 gap-4 ${className} [&>*]:border-b [&>*]:border-gray-200 [&>*]:pb-2 [&>*]:mb-2`}>\n      {stats.map((stat, index) => (\n        <div key={index} className=\"text-center rounded-lg p-4\">\n          <div className=\"flex justify-center mb-2\">\n            {stat.icon && <stat.icon className=\"w-6 h-6 text-green-600\" />}\n          </div>\n          <div className=\"text-2xl font-bold text-green-800\">\n            {stat.value}\n          </div>\n          <div className=\"text-xs text-gray-600 mt-1\">\n            {stat.label}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n});\n\n// Componente InfoSection refatorado\nconst InfoSection = memo(({ \n  title, \n  icon: Icon, \n  children, \n  description,\n  defaultCollapsed = false,\n  className = '',\n  layout = 'default', // 'default', 'grid', 'table', 'stats'\n  layoutProps = {}\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState(defaultCollapsed);\n\n  const renderContent = () => {\n    if (!children) return null;\n\n    switch (layout) {\n      case 'grid':\n        return (\n          <InfoGrid {...layoutProps}>\n            {children}\n          </InfoGrid>\n        );\n      case 'table':\n        return (\n          <InfoTable data={layoutProps.data} className={layoutProps.className} />\n        );\n      case 'stats':\n        return (\n          <InfoStats stats={layoutProps.stats} className={layoutProps.className} />\n        );\n      default:\n        return (\n          <div className=\"space-y-4\">\n            {children}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <section \n      className={`\n        bg-white rounded-2xl p-5 \n        shadow-sm transition-all duration-200\n        ${className}\n      `}\n    >\n      <button\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"\n          w-full flex items-center justify-between \n          text-base font-semibold\n          mb-4 text-gray-900 hover:text-gray-800 \n          transition-colors focus:outline-none\n        \"\n        aria-expanded={!isCollapsed}\n        aria-controls={`${title}-content`}\n      >\n        <div className=\"flex items-center gap-2\">\n          {Icon && <Icon className=\"w-5 h-5 text-green-600\" />}\n          <span className=\"tracking-wide\">{title}</span>\n        </div>\n      </button>\n      \n      {!isCollapsed && (\n        <div \n          id={`${title}-content`}\n          className=\"space-y-4\"\n          role=\"region\"\n          aria-labelledby={`${title}-button`}\n        >\n          {description && (\n            <div className=\"bg-green-100 rounded-lg p-4\">\n              <p className=\"text-gray-700 text-sm leading-relaxed\">\n                {description}\n              </p>\n            </div>\n          )}\n          {renderContent()}\n        </div>\n      )}\n    </section>\n  );\n});\n\n// Exportar todos os componentes\nexport { InfoCard, InfoGrid, InfoTable, InfoStats };\nexport default InfoSection; ","import React, { memo, useState } from 'react';\nimport {\n  MapPin,\n  Users,\n  Globe,\n  Calendar,\n  Building,\n  Link as LinkIcon,\n  ExternalLink,\n  ChevronRight,\n  Check,\n  X,\n  Navigation,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst capitalize = (str) => {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n};\n\nconst CompactCard = ({ icon: Icon, label, value, type = 'text' }) => {\n  const renderValue = () => {\n    switch (type) {\n      case 'boolean':\n        return value ? (\n          <span className=\"flex items-center gap-1 text-green-600 text-sm\">\n            <Check className=\"w-5 h-5\" />\n            Sim\n          </span>\n        ) : (\n          <span className=\"flex items-center gap-1 text-red-500 text-sm\">\n            <X className=\"w-5 h-5\" />\n            Não\n          </span>\n        );\n      default:\n        return <span className=\"text-sm text-gray-800 truncate\">{value}</span>;\n    }\n  };\n\n  return (\n    <div className=\"p-1 rounded-md transition-all\">\n      <div className=\"flex items-center gap-1.5 mb-1\">\n        <Icon className=\"w-5 h-5 text-gray-600\" />\n        <span className=\"text-xs text-gray-500 font-medium\">{label}</span>\n      </div>\n      {renderValue()}\n    </div>\n  );\n};\n\nconst InfoBlock = ({ icon: Icon, label, value }) => (\n  <div className=\"flex items-center gap-2 bg-green-100 p-1.5 rounded-md text-xs\">\n    <Icon className=\"w-5 h-5 text-green-600\" />\n    <span className=\"text-gray-700 font-medium\">{label}:</span>\n    <span className=\"font-semibold text-green-800\">{capitalize(value)}</span>\n  </div>\n);\n\nconst AddressDetails = ({ escola }) => {\n  const hasDetailedAddress = escola.logradouro || escola.numero || escola.bairro || escola.cep;\n  \n  if (!hasDetailedAddress) {\n    return (\n      <div className=\"mt-2 p-2 bg-green-100 rounded-md\">\n        <p className=\"text-xs text-gray-700 leading-snug\">\n          {capitalize(escola.endereco)}\n        </p>\n      </div>\n    );\n  }\n\n  const addressFields = [\n    { field: 'logradouro', label: 'Logradouro' },\n    { field: 'numero', label: 'Número' },\n    { field: 'complemento', label: 'Complemento' },\n    { field: 'bairro', label: 'Bairro' },\n  ];\n\n  return (\n    <div className=\"mt-2 space-y-1\">\n      {addressFields.map(({ field, label }) => \n        escola[field] && (\n          <div key={field} className=\"flex items-start gap-2 p-1.5 bg-green-100 rounded-md\">\n            <MapPin className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" />\n            <div className=\"flex-1\">\n              <div className=\"text-xs font-medium text-gray-700 mb-0.5\">{label}</div>\n              <div className=\"text-xs text-gray-800 leading-snug\">{escola[field]}</div>\n            </div>\n          </div>\n        )\n      )}\n      \n      {(escola.cep || escola.estado) && (\n        <div className=\"flex items-start gap-2 p-1.5 bg-green-100 rounded-md\">\n          <MapPin className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" />\n          <div className=\"flex-1\">\n            <div className=\"text-xs font-medium text-gray-700 mb-0.5\">Localização</div>\n            <div className=\"text-xs text-gray-800 leading-snug\">\n              {[escola.municipio, escola.estado, escola.cep].filter(Boolean).join(', ')}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst MapButton = ({ escola }) => {\n  const hasCoordinates = escola.Latitude && escola.Longitude;\n  \n  if (!hasCoordinates) return null;\n\n  const openMap = () => {\n    window.open(`https://www.google.com/maps?q=${escola.Latitude},${escola.Longitude}`, '_blank');\n  };\n\n  return (\n    <button\n      onClick={openMap}\n      className=\"mt-2 w-full flex items-center justify-center gap-2 p-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors text-xs font-medium\"\n    >\n      <Navigation className=\"w-5 h-5\" />\n      Ver no Google Maps\n    </button>\n  );\n};\n\nconst SocialLinks = ({ links, expanded, onToggle }) => {\n  const socialLinks = (links || '').split(',').map(url => url.trim()).filter(Boolean);\n  \n  if (socialLinks.length === 0) return null;\n\n  return (\n    <div className=\"bg-green-100 rounded-md\">\n      <button\n        onClick={() => onToggle('social')}\n        className=\"w-full flex justify-between items-center p-1.5 hover:bg-green-200 text-xs\"\n        aria-expanded={expanded.social}\n      >\n        <span className=\"flex items-center gap-2 text-gray-700 font-medium\">\n          <Globe className=\"w-5 h-5 text-blue-600\" />\n          Redes sociais ({socialLinks.length})\n        </span>\n        <ChevronRight\n          className={`w-5 h-5 text-gray-400 transition-transform ${\n            expanded.social ? 'rotate-90' : ''\n          }`}\n        />\n      </button>\n      \n      {expanded.social && (\n        <div className=\"px-2 pb-2 border-t border-green-200 bg-white\">\n          <div className=\"mt-1 space-y-1\">\n            {socialLinks.map((link, index) => (\n              <a\n                key={index}\n                href={link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-1.5 p-1.5 bg-green-100 rounded-md hover:bg-green-200 group text-xs\"\n              >\n                <LinkIcon className=\"w-5 h-5 text-blue-600\" />\n                <span className=\"truncate flex-1 text-gray-700\">{link}</span>\n                <ExternalLink className=\"w-5 h-5 text-gray-400 group-hover:text-blue-600\" />\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst BasicInfo = memo(({ escola }) => {\n  const [expanded, setExpanded] = useState({});\n\n  if (!escola) return null;\n\n  const toggle = (key) => {\n    setExpanded(prev => ({ ...prev, [key]: !prev[key] }));\n  };\n\n  const basicInfoCards = [\n    {\n      icon: Building,\n      label: 'Município',\n      value: capitalize(escola.municipio),\n    },\n    {\n      icon: Calendar,\n      label: 'Fundação',\n      value: escola.ano_criacao,\n    },\n    {\n      icon: Globe,\n      label: 'Redes sociais',\n      value: escola.usa_redes_sociais,\n      type: 'boolean',\n    },\n  ].filter(item => item.value);\n\n  return (\n    <>\n      {/* Povos Indígenas em destaque antes de tudo */}\n      {escola.povos_indigenas && (\n        <div className=\"mb-4\">\n          <div className=\"text-lg sm:text-xl font-bold text-green-800\">\n            Povos Indígenas: <span className=\"font-semibold text-black\">{escola.povos_indigenas}</span>\n          </div>\n        </div>\n      )}\n      <InfoSection title=\"Localização\" icon={MapPin}>\n        {/* Cards informativos básicos */}\n        <div className=\"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 mb-3 [&>*]:bg-green-100\">\n          {basicInfoCards.map((item, index) => (\n            <CompactCard key={index} {...item} />\n          ))}\n        </div>\n\n        <div className=\"space-y-1.5\">\n          {/* Diretoria de ensino */}\n          {escola.diretoria_ensino && (\n            <InfoBlock \n              icon={Building} \n              label=\"Diretoria de ensino\" \n              value={escola.diretoria_ensino} \n            />\n          )}\n\n          {/* Gaveta do endereço */}\n          {escola.endereco && (\n            <div className=\"bg-green-100 rounded-md\">\n              <button\n                onClick={() => toggle('endereco')}\n                className=\"w-full flex justify-between items-center p-1.5 hover:bg-green-200 text-xs\"\n                aria-expanded={expanded.endereco}\n              >\n                <span className=\"flex items-center gap-2 text-gray-700 font-medium\">\n                  <Building className=\"w-5 h-5\" />\n                  Endereço\n                </span>\n                <ChevronRight\n                  className={`w-5 h-5 text-gray-400 transition-transform ${\n                    expanded.endereco ? 'rotate-90' : ''\n                  }`}\n                />\n              </button>\n              {expanded.endereco && (\n                <div className=\"px-2 pb-2 border-t border-green-200 bg-white\">\n                  <AddressDetails escola={escola} />\n                  <MapButton escola={escola} />\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Redes sociais */}\n          <SocialLinks \n            links={escola.links_redes_sociais}\n            expanded={expanded}\n            onToggle={toggle}\n          />\n        </div>\n      </InfoSection>\n    </>\n  );\n});\n\nexport default BasicInfo;","import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { X, RefreshCw } from 'lucide-react';\nimport { getLegendaByImageUrl } from '../../../services/legendasService';\nimport { supabase } from '../../../supabaseClient';\n\nconst ImagensdasEscolas = ({ escola_id, refreshKey = 0 }) => {\n  const [imagens, setImagens] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [imagemZoom, setImagemZoom] = useState(null);\n  const [error, setError] = useState('');\n  const cacheRef = useRef({});\n  const [cacheVersion, setCacheVersion] = useState(0); // Para forçar recarga\n\n  // Forçar recarga quando refreshKey mudar\n  useEffect(() => {\n    if (refreshKey > 0) {\n      console.log('ImagensdasEscolas: refreshKey mudou, forçando recarga');\n      limparCacheERecarregar();\n    }\n  }, [refreshKey]);\n\n  const fecharZoom = useCallback(() => {\n    setImagemZoom(null);\n    document.body.style.overflow = 'auto';\n  }, []);\n\n  // ESC para fechar\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') fecharZoom();\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [fecharZoom]);\n\n  // Função para limpar cache e recarregar\n  const limparCacheERecarregar = useCallback(() => {\n    console.log('Limpando cache e recarregando imagens...');\n    cacheRef.current = {};\n    setCacheVersion(prev => prev + 1);\n    setImagens([]);\n    setLoading(true);\n    setError('');\n  }, []);\n\n  useEffect(() => {\n    if (!escola_id) {\n      setLoading(false);\n      return;\n    }\n\n    // Verificar se há cache válido (com versão)\n    const cacheKey = `${escola_id}_v${cacheVersion}`;\n    if (cacheRef.current[cacheKey]) {\n      console.log('Usando cache para escola', escola_id);\n      setImagens(cacheRef.current[cacheKey]);\n      setLoading(false);\n      return;\n    }\n\n    const buscarImagens = async () => {\n      console.log('Buscando imagens para escola', escola_id);\n      \n      try {\n        // Usar a mesma abordagem do painel de edição: listar arquivos do bucket\n        const { data: files, error } = await supabase.storage\n          .from('imagens-das-escolas')\n          .list(`${escola_id}/`);\n\n        if (error) {\n          throw error;\n        }\n\n        if (!files || files.length === 0) {\n          console.log('Nenhum arquivo encontrado para escola', escola_id);\n          setImagens([]);\n          setLoading(false);\n          return;\n        }\n\n        console.log('Arquivos encontrados:', files.length);\n\n        // Processar cada arquivo encontrado\n        const imagensEncontradas = await Promise.all(\n          files.map(async (file, index) => {\n            const filePath = `${escola_id}/${file.name}`;\n            const { data: { publicUrl } } = supabase.storage\n              .from('imagens-das-escolas')\n              .getPublicUrl(filePath);\n\n            // Buscar legenda da nova tabela\n            let legenda = null;\n            try {\n              console.log('Buscando legenda para:', filePath);\n              legenda = await getLegendaByImageUrl(filePath, escola_id, 'escola');\n              console.log('Legenda encontrada:', legenda);\n            } catch (error) {\n              console.warn('Erro ao buscar legenda para', filePath, ':', error);\n            }\n\n            return {\n              id: `${escola_id}-${file.name}`,\n              publicURL: publicUrl,\n              descricao: legenda?.legenda || `Imagem ${index + 1}`,\n              descricaoDetalhada: legenda?.descricao_detalhada,\n              autor: legenda?.autor_foto,\n              dataFoto: legenda?.data_foto,\n              categoria: legenda?.categoria,\n              urlError: null,\n            };\n          })\n        );\n\n        console.log('Imagens processadas:', imagensEncontradas.length);\n        \n        // Salvar no cache com versão\n        cacheRef.current[cacheKey] = imagensEncontradas;\n        setImagens(imagensEncontradas);\n        \n        if (imagensEncontradas.length === 0) {\n          setError('Nenhuma imagem encontrada para esta escola.');\n        }\n      } catch (error) {\n        console.error('Erro ao processar imagens:', error);\n        setError('Erro ao carregar imagens da escola.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    buscarImagens();\n  }, [escola_id, cacheVersion]);\n\n  if (loading) {\n    return (\n      <div className=\"text-gray-500 flex items-center gap-2\">\n        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n        Carregando imagens da escola...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-red-600 flex items-center gap-2\">\n        <span>{error}</span>\n        <button \n          onClick={limparCacheERecarregar}\n          className=\"text-blue-600 hover:text-blue-800\"\n          title=\"Tentar novamente\"\n        >\n          <RefreshCw className=\"w-5 h-5\" />\n        </button>\n      </div>\n    );\n  }\n\n  if (!imagens.length) {\n    return (\n      <div className=\"text-yellow-700 flex items-center gap-2\">\n        <span>Nenhuma imagem encontrada para esta escola.</span>\n        <button \n          onClick={limparCacheERecarregar}\n          className=\"text-blue-600 hover:text-blue-800\"\n          title=\"Tentar novamente\"\n        >\n          <RefreshCw className=\"w-5 h-5\" />\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"my-6\">\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n        {imagens.map((img) => (\n          <figure\n            key={img.id}\n            className=\"rounded-lg overflow-hidden border bg-white shadow-sm flex flex-col cursor-pointer transition hover:shadow-md\"\n            onClick={() => img.publicURL && setImagemZoom(img)}\n          >\n            <div className=\"w-full aspect-[4/3] bg-gray-100 flex items-center justify-center\">\n              <img\n                src={img.publicURL}\n                alt={img.descricao}\n                className=\"w-full h-full object-cover object-center transition-transform duration-200 hover:scale-105\"\n                loading=\"lazy\"\n                style={{ maxHeight: '350px' }}\n              />\n            </div>\n            \n            {/* Legenda da imagem */}\n            {img.descricao && (\n              <figcaption className=\"p-3 bg-white\">\n                <h4 className=\"font-medium text-gray-900 text-sm mb-1\">\n                  {img.descricao}\n                </h4>\n                \n                {/* Informações adicionais */}\n                <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                  {img.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {img.categoria}\n                    </span>\n                  )}\n                  {img.autor && (\n                    <span>Por: {img.autor}</span>\n                  )}\n                  {img.dataFoto && (\n                    <span>{new Date(img.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrição detalhada */}\n                {img.descricaoDetalhada && (\n                  <p className=\"text-xs text-gray-600 mt-2 line-clamp-2\">\n                    {img.descricaoDetalhada}\n                  </p>\n                )}\n              </figcaption>\n            )}\n          </figure>\n        ))}\n      </div>\n\n      {/* Modal de Zoom */}\n      {imagemZoom && (\n        <div\n          className=\"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 cursor-zoom-out\"\n          onClick={fecharZoom}\n        >\n          <button\n            onClick={fecharZoom}\n            className=\"absolute top-4 right-4 text-white hover:text-red-400 transition\"\n            aria-label=\"Fechar\"\n          >\n            <X size={32} />\n          </button>\n          \n          <div className=\"max-w-4xl max-h-full\">\n          <img\n            src={imagemZoom.publicURL}\n            alt={imagemZoom.descricao}\n            className=\"max-w-full max-h-full rounded-lg shadow-2xl border-4 border-white\"\n            onClick={(e) => e.stopPropagation()}\n          />\n            \n            {/* Legenda no modal */}\n            {imagemZoom.descricao && (\n              <div className=\"mt-4 bg-white rounded-lg p-4 shadow-lg\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">\n                  {imagemZoom.descricao}\n                </h3>\n                \n                {/* Informações adicionais */}\n                <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-2\">\n                  {imagemZoom.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {imagemZoom.categoria}\n                    </span>\n                  )}\n                  {imagemZoom.autor && (\n                    <span>Fotógrafo: {imagemZoom.autor}</span>\n                  )}\n                  {imagemZoom.dataFoto && (\n                    <span>Data: {new Date(imagemZoom.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrição detalhada */}\n                {imagemZoom.descricaoDetalhada && (\n                  <p className=\"text-gray-700 leading-relaxed\">\n                    {imagemZoom.descricaoDetalhada}\n                  </p>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </section>\n  );\n};\n\nImagensdasEscolas.propTypes = {\n  escola_id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  refreshKey: PropTypes.number,\n};\n\nexport default React.memo(ImagensdasEscolas);\n","import React, { memo } from 'react';\nimport ImagensdasEscolas from '../ImagensdasEscolas';\n\nconst HistoriaEscola = memo(({ escola, refreshKey = 0 }) => {\n  if (!escola?.historia_da_escola) return null;\n\n  return (\n    <article\n      className={`\n        mt-8 mb-12\n        max-w-4xl mx-auto\n        prose\n        prose-sm sm:prose-base md:prose-lg lg:prose-xl\n        prose-headings:text-green-900\n        prose-p:text-green-800\n        prose-p:leading-relaxed\n        prose-p:text-justify\n        prose-img:rounded-xl\n        prose-img:shadow-lg\n        prose-a:text-green-700\n        prose-a:no-underline\n        prose-a:border-b-2\n        prose-a:border-green-100\n        prose-a:transition-colors\n        hover:prose-a:border-green-600\n        bg-white\n        rounded-2xl\n        px-4 sm:px-6 md:px-8 py-6\n        shadow-lg\n      `}\n    >\n      <header className=\"mb-6 sm:mb-8\">\n        <div className=\"flex items-center gap-3 mb-3 sm:mb-4\">\n          <span className=\"bg-green-300 rounded-full flex items-center justify-center w-16 h-16 sm:w-28 sm:h-28\">\n            <img \n              src={`${process.env.PUBLIC_URL}/onca.svg`} \n              alt=\"Ícone de onça\" \n              className=\"w-32 h-32 sm:w-36 sm:h-36\" \n              style={{ filter: 'none', borderRadius: '0', boxShadow: 'none', marginTop: '80px' }}\n              aria-hidden=\"true\"\n            />\n          </span>\n          <h2 className=\"text-xl sm:text-2xl font-bold text-green-900 m-0\">\n            História da Escola\n          </h2>\n        </div>\n        <div className=\"h-1 w-20 sm:w-24 bg-green-300 rounded-full\" />\n      </header>\n\n      <div className=\"text-base sm:text-lg leading-relaxed text-neutral-800\">\n        {escola.historia_da_escola}\n      </div>\n\n      {/* Imagens da escola, responsivas e modulares */}\n      <ImagensdasEscolas escola_id={escola.id} refreshKey={refreshKey} />\n    </article>\n  );\n});\n\nexport default HistoriaEscola; ","import React, { memo } from 'react';\n\nconst BooleanValue = memo(({ value }) => {\n  if (value === undefined || value === null) return null;\n\n  return (\n    <span className={`font-medium ${value ? 'text-green-600' : 'text-neutral-400'}`}>\n      {value ? 'Sim' : 'Não'}\n    </span>\n  );\n});\n\nexport default BooleanValue; ","import React, { memo, useState } from 'react';\nimport { Sparkles, BookOpen, Users, MessageCircle, Clock } from 'lucide-react';\nimport InfoSection from '../InfoSection';\nimport BooleanValue from '../../components/BooleanValue';\n\n// Função utilitária para transformar o texto em lista\nfunction parseModalidadeEnsino(text) {\n  if (!text || typeof text !== 'string') return [];\n  // Divide pelo traço longo (–, U+2013) e remove espaços extras\n  return text\n    .split('–')\n    .map(item => item.trim())\n    .filter(Boolean);\n}\n\n// Componente de lista expansível\nconst ExpandableList = ({ items, maxVisible = 3 }) => {\n  if (!items || items.length === 0) return null;\n\n  return (\n    <div className=\"-mt-1\">\n      <ul className=\"list-none text-gray-800 text-xs pl-0 ml-0\">\n        {items.map((item, idx) => (\n          <li key={idx} className=\"leading-tight m-0 p-0 pl-0 ml-0 flex items-start\">\n            <span className=\"mr-1 text-green-700 select-none\" style={{minWidth: '1em', display: 'inline-block'}}>•</span>\n            <span>{item}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\n// MiniCard padronizado\nconst MiniCard = ({ icon: Icon, label, value }) => (\n  <div className=\"flex items-start rounded-lg p-2 text-sm\">\n    <Icon className=\"w-6 h-6 text-gray-600 mt-0.5 flex-shrink-0\" />\n    <div className=\"flex-1\">\n      <div className=\"text-xs text-gray-500\">{label}</div>\n      <div className=\"text-gray-800 font-medium p-0 m-0\">{value}</div>\n    </div>\n  </div>\n);\n\nconst Modalidades = memo(({ escola }) => {\n  if (!escola) return null;\n\n  // Cards principais de Modalidades\n  const turnosValue = escola.turnos_funcionamento || escola['turnos_funcionamento'] || '';\n  const modalidadeList = parseModalidadeEnsino(escola.modalidade_ensino);\n  \n  // Card de Modalidade de Ensino (separado para ocupar linha inteira)\n  const modalidadeEnsinoCard = {\n    icon: Sparkles,\n    label: 'Modalidade de Ensino',\n    value: <ExpandableList items={modalidadeList} maxVisible={3} />,\n  };\n\n  // Outros cards para o grid\n  const gridItems = [\n    turnosValue && {\n      icon: Clock,\n      label: 'Turnos de Funcionamento',\n      value: turnosValue,\n    },\n    {\n      icon: Users,\n      label: 'Número de Alunos',\n      value: escola.numero_alunos,\n    },\n    {\n      icon: MessageCircle,\n      label: 'Línguas Faladas',\n      value: escola.linguas_faladas,\n    },\n  ].filter(Boolean);\n\n  // Cards de Materiais Pedagógicos\n  const materiaisItems = [\n    {\n      icon: BookOpen,\n      label: 'Material Pedagógico Não Indígena',\n      value: <BooleanValue value={escola.material_nao_indigena} />,\n    },\n    {\n      icon: BookOpen,\n      label: 'Material Pedagógico Indígena',\n      value: <BooleanValue value={escola.material_indigena} />,\n    },\n  ];\n\n  return (\n    <>\n      <InfoSection title=\"Modalidades\" icon={Sparkles}>\n        {/* Modalidade de Ensino em linha inteira */}\n        <div className=\"mb-4 bg-green-100 rounded-lg p-2\">\n          <ExpandableList items={modalidadeList} maxVisible={3} />\n        </div>\n        \n        {/* Grid com os outros cards */}\n        <div\n          className=\"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 mt-1 [&>*]:bg-green-100\"\n        >\n          {gridItems.map((item, idx) => (\n            <MiniCard key={idx} icon={item.icon} label={item.label} value={item.value} />\n          ))}\n        </div>\n      </InfoSection>\n      \n      <InfoSection \n        title=\"Materiais Pedagógicos\" \n        icon={BookOpen}\n        description=\"Diferenciados e não diferenciados, produzidos dentro e fora da comunidade.\"\n      >\n        <div className=\"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 mt-1 [&>*]:bg-green-100\">\n          {materiaisItems.map((item, idx) => (\n            <MiniCard key={idx} icon={item.icon} label={item.label} value={item.value} />\n          ))}\n        </div>\n      </InfoSection>\n    </>\n  );\n});\n\nexport default Modalidades; ","import React, { memo } from 'react';\nimport {\n  Home,\n  Droplet,\n  Trash2,\n  Wifi,\n  Monitor,\n  MapPin,\n  Utensils,\n  Apple,\n  ChefHat,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\nimport BooleanValue from '../BooleanValue';\n\nconst MiniCard = ({ icon: Icon, label, value }) => (\n  <div className=\"flex items-start gap-2 rounded-lg p-2 text-sm\">\n    <Icon className=\"w-6 h-6 text-gray-600 mt-0.5 flex-shrink-0\" />\n    <div className=\"flex-1\">\n      <div className=\"text-gray-500\">{label}</div>\n      <div className=\"text-gray-800 font-medium\">{value}</div>\n    </div>\n  </div>\n);\n\nconst Infraestrutura = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const items = [\n    {\n      icon: Droplet,\n      label: 'Acesso à Água',\n      value: escola.acesso_agua,\n    },\n    {\n      icon: Trash2,\n      label: 'Coleta de Lixo',\n      value: escola.coleta_lixo,\n    },\n    {\n      icon: Wifi,\n      label: 'Acesso à Internet',\n      value: <BooleanValue value={escola.acesso_internet} />,\n    },\n    {\n      icon: Monitor,\n      label: 'Equipamentos Tecnológicos',\n      value: escola.equipamentos,\n    },\n    {\n      icon: MapPin,\n      label: 'Modo de Acesso à Escola',\n      value: escola.modo_acesso,\n    },\n    {\n      icon: Utensils,\n      label: 'Cozinha',\n      value: <BooleanValue value={escola.cozinha} />,\n    },\n    {\n      icon: Apple,\n      label: 'Merenda Escolar',\n      value: <BooleanValue value={escola.merenda_escolar} />,\n    },\n    {\n      icon: ChefHat,\n      label: 'Merenda Diferenciada',\n      value: <BooleanValue value={escola.diferenciada} />,\n    },\n  ];\n\n  return (\n    <InfoSection title=\"Infraestrutura\" icon={Home}>\n      {escola.espaco_escolar && (\n        <div className=\"p-2 text-sm text-gray-800 border-b border-gray-200 whitespace-pre-wrap\">\n          {escola.espaco_escolar}\n        </div>\n      )}\n      <div className=\"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 mt-3 [&>*]:bg-green-100\">\n        {items.map((item, idx) => (\n          <MiniCard\n            key={idx}\n            icon={item.icon}\n            label={item.label}\n            value={item.value}\n          />\n        ))}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default Infraestrutura;\n","import React, { memo } from 'react';\nimport {\n  UsersRound,\n  Star,\n  User,\n  UserCheck,\n  UserMinus,\n  MessageCircle,\n  NotebookPen,\n  Check,\n  X,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst MiniCard = ({ icon: Icon, label, value, description }) => (\n  <div className=\"flex items-start gap-2 rounded-lg p-2 text-sm\">\n    <Icon className=\"w-6 h-6 text-gray-600 mt-0.5 flex-shrink-0\" />\n    <div className=\"flex-1\">\n      <div className=\"text-xs text-gray-500\">{label}</div>\n      <div className=\"text-gray-800 font-medium mt-0.5\">{value}</div>\n      {description && (\n        <div className=\"text-xs text-gray-600 mt-1 whitespace-pre-line\">\n          {description}\n        </div>\n      )}\n    </div>\n  </div>\n);\n\nconst formatarNomeProfessor = (nome) => {\n  if (!nome) return nome;\n\n  const padroesIndigenas = [\n    /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+\\(([^)]+)\\)/,\n    /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+-\\s+([^)]+)/,\n    /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+ou\\s+([^)]+)/,\n  ];\n\n  for (const padrao of padroesIndigenas) {\n    const match = nome.match(padrao);\n    if (match) {\n      const nomeIndigena = `${match[1]} ${match[2]}`;\n      const nomePortugues = match[3];\n      return `${nomeIndigena} (${nomePortugues})`;\n    }\n  }\n\n  return nome.includes('(') && nome.includes(')') ? nome : nome;\n};\n\nconst formatarFormacaoProfessores = (formacao) => {\n  if (!formacao) return null;\n\n  const [status, ...resto] = formacao.split('/');\n  const descricao = resto.join('/').trim();\n\n  return {\n    status: status.trim().toLowerCase() === 'sim' ? 'Sim' : status.trim(),\n    descricao: descricao || null,\n  };\n};\n\nconst formatarFormacaoContinuada = (valor) => {\n  if (!valor) return null;\n\n  const [status, ...resto] = valor.split('/');\n  const descricao = resto.join('/').trim();\n\n  return {\n    status: status.trim().toLowerCase() === 'sim' ? 'Sim' : status.trim(),\n    descricao: descricao || null,\n  };\n};\n\nconst renderBooleanStatus = (valor) => {\n  const normalizado = String(valor).trim().toLowerCase();\n  if (normalizado === 'sim') {\n    return (\n      <div className=\"flex items-center gap-1 text-green-700\">\n        <Check className=\"w-5 h-5\" />\n        Sim\n      </div>\n    );\n  } else if (normalizado === 'não' || normalizado === 'nao') {\n    return (\n      <div className=\"flex items-center gap-1 text-gray-500\">\n        <X className=\"w-5 h-5\" />\n        Não\n      </div>\n    );\n  }\n  return valor;\n};\n\nconst GestaoProfessores = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const formacao = formatarFormacaoProfessores(escola.formacao_professores);\n  const continuada = formatarFormacaoContinuada(escola.formacao_continuada);\n\n  return (\n    <InfoSection title=\"Gestores\" icon={UsersRound}>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-1 [&>*]:bg-green-100\">\n        <MiniCard\n          icon={UserCheck}\n          label=\"Professores Indígenas\"\n          value={escola.professores_indigenas}\n        />\n        <MiniCard\n          icon={UserMinus}\n          label=\"Professores Não Indígenas\"\n          value={escola.professores_nao_indigenas}\n        />\n        <MiniCard\n          icon={MessageCircle}\n          label=\"Professores que falam língua indígena\"\n          value={renderBooleanStatus(escola.professores_falam_lingua)}\n        />\n        {formacao?.status && (\n          <MiniCard\n            icon={Star}\n            label=\"Formação dos Professores\"\n            value={renderBooleanStatus(formacao.status)}\n            description={formacao.descricao}\n          />\n        )}\n      </div>\n\n      <div className=\"space-y-2 mt-4 [&>*]:bg-green-100\">\n        <MiniCard\n          icon={User}\n          label=\"Gestão/Nome\"\n          value={escola.gestao}\n        />\n        <MiniCard\n          icon={UsersRound}\n          label=\"Outros Funcionários\"\n          value={escola.outros_funcionarios}\n        />\n        {continuada?.status && (\n          <MiniCard\n            icon={NotebookPen}\n            label=\"Visitas de Supervisores e Formação Continuada\"\n            value={renderBooleanStatus(continuada.status)}\n            description={continuada.descricao}\n          />\n        )}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default GestaoProfessores;\n","import React, { memo } from 'react';\nimport {\n  Target,\n  BookOpen,\n  GraduationCap,\n  Users,\n  Heart,\n  X,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst ProjectCard = ({ icon: Icon, label, value }) => {\n  const isNegative = value?.trim().toLowerCase() === 'não';\n\n  return (\n    <div className=\"flex items-start gap-4 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-200\">\n      <div className=\"mt-1\">\n        <Icon className=\"w-5 h-5 text-green-600 flex-shrink-0\" />\n      </div>\n      <div className=\"flex-1 space-y-1\">\n        <div className=\"text-sm font-semibold text-gray-800\">{label}</div>\n        {isNegative ? (\n          <div className=\"text-sm text-gray-400 flex items-center gap-1\">\n            <X className=\"w-5 h-5 text-gray-400\" />\n            Não\n          </div>\n        ) : (\n          <div className=\"text-sm text-gray-700 leading-relaxed\">\n            {value}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst ProjetosParcerias = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const projectsData = [\n    {\n      field: 'projetos_andamento',\n      icon: BookOpen,\n      label: 'Projetos em andamento',\n    },\n    {\n      field: 'parcerias_universidades',\n      icon: GraduationCap,\n      label: 'Parcerias com universidades',\n    },\n    {\n      field: 'acoes_ongs',\n      icon: Users,\n      label: 'Ações com ONGs ou coletivos',\n    },\n    {\n      field: 'desejos_comunidade',\n      icon: Heart,\n      label: 'Desejos da comunidade para a escola',\n    },\n    {\n      field: 'parcerias_municipio',\n      icon: Target,\n      label: 'Parcerias com o município',\n    },\n  ];\n\n  const availableProjects = projectsData.filter(\n    project => escola[project.field] && escola[project.field].trim()\n  );\n\n  if (availableProjects.length === 0) return null;\n\n  return (\n    <InfoSection title=\"Projetos e Parcerias\" icon={Target}>\n      <div className=\"grid grid-cols-1 gap-3 [&>*]:bg-green-100\">\n        {availableProjects.map((project) => (\n          <ProjectCard\n            key={project.field}\n            icon={project.icon}\n            label={project.label}\n            value={escola[project.field]}\n          />\n        ))}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default ProjetosParcerias;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { supabase } from '../../../supabaseClient';\nimport { getLegendaByImageUrl } from '../../../services/legendasService';\nimport { X } from 'lucide-react';\n\nconst ImagemHistoriadoProfessor = ({ escola_id, refreshKey = 0 }) => {\n  const [imagens, setImagens] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [imagemZoom, setImagemZoom] = useState(null);\n\n  const fecharZoom = useCallback(() => setImagemZoom(null), []);\n\n  // Fecha modal com tecla ESC\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') fecharZoom();\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [fecharZoom]);\n\n  // Forçar recarga quando refreshKey mudar\n  useEffect(() => {\n    if (refreshKey > 0) {\n      console.log('ImagemHistoriadoProfessor: refreshKey mudou, forçando recarga');\n      setImagens([]);\n      setLoading(true);\n      setError(null);\n    }\n  }, [refreshKey]);\n\n  useEffect(() => {\n    if (!escola_id) return;\n\n    setLoading(true);\n    setError(null);\n\n    // Busca arquivos do bucket diretamente\n    supabase\n      .storage\n      .from('imagens-professores')\n      .list(`${escola_id}/`)\n      .then(async ({ data, error }) => {\n        if (error) {\n          setError(error.message);\n          setLoading(false);\n          return;\n        }\n\n        if (data && data.length > 0) {\n          console.log('Arquivos de professores encontrados:', data.length);\n          const imagensComUrl = await Promise.all(data.map(async (file, idx) => {\n            const { data: { publicUrl } } = supabase\n              .storage\n              .from('imagens-professores')\n              .getPublicUrl(`${escola_id}/${file.name}`);\n            \n            // Extrair gênero do nome do arquivo\n            let genero = 'professor';\n            if (file.name.startsWith('professora_')) {\n              genero = 'professora';\n            } else if (file.name.startsWith('professor_')) {\n              genero = 'professor';\n            }\n\n            // Buscar legenda da nova tabela\n            let legenda = null;\n            try {\n              const caminhoRelativo = `${escola_id}/${file.name}`;\n              console.log('Buscando legenda para professor:', caminhoRelativo);\n              legenda = await getLegendaByImageUrl(caminhoRelativo, escola_id, 'professor');\n              console.log('Legenda encontrada para professor:', legenda);\n            } catch (error) {\n              console.warn('Erro ao buscar legenda:', error);\n            }\n\n            return {\n              id: idx + 1,\n              publicURL: publicUrl,\n              genero,\n              nome: file.name,\n              created_at: file.created_at || '',\n              legenda: legenda?.legenda || `Imagem do ${genero}`,\n              descricaoDetalhada: legenda?.descricao_detalhada,\n              autor: legenda?.autor_foto,\n              dataFoto: legenda?.data_foto,\n              categoria: legenda?.categoria,\n            };\n          }));\n          setImagens(imagensComUrl);\n        } else {\n          setImagens([]);\n        }\n        setLoading(false);\n      })\n      .catch(err => {\n        setError(`Erro inesperado: ${err.message}`);\n        setLoading(false);\n      });\n  }, [escola_id]);\n\n  if (loading) {\n    return <div className=\"text-gray-500\">Carregando imagens do professor...</div>;\n  }\n\n  if (error) {\n    return <div className=\"text-red-600\">Erro ao carregar imagens: {error}</div>;\n  }\n\n  if (!imagens.length) {\n    return null;\n  }\n\n  return (\n    <section className=\"my-6\">\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n        {imagens.map((img) => (\n          <figure\n            key={img.id}\n            className=\"rounded-lg overflow-hidden border bg-white shadow-sm flex flex-col cursor-pointer transition hover:shadow-md\"\n            onClick={() => img.publicURL && setImagemZoom(img)}\n          >\n            <div className=\"w-full aspect-[4/3] bg-gray-100 flex items-center justify-center\">\n              <img\n                src={img.publicURL}\n                alt={img.legenda}\n                className=\"w-full h-full object-cover object-center transition-transform duration-200 hover:scale-105\"\n                loading=\"lazy\"\n                style={{ maxHeight: '350px' }}\n              />\n            </div>\n            \n            {/* Legenda da imagem */}\n            {img.legenda && (\n              <figcaption className=\"p-3 bg-white\">\n                <h4 className=\"font-medium text-gray-900 text-sm mb-1\">\n                  {img.legenda}\n                </h4>\n                \n                {/* Informações adicionais */}\n                <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                  {img.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {img.categoria}\n                    </span>\n                  )}\n                  {img.autor && (\n                    <span>Por: {img.autor}</span>\n                  )}\n                  {img.dataFoto && (\n                    <span>{new Date(img.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrição detalhada */}\n                {img.descricaoDetalhada && (\n                  <p className=\"text-xs text-gray-600 mt-2 line-clamp-2\">\n                    {img.descricaoDetalhada}\n                  </p>\n                )}\n              </figcaption>\n            )}\n          </figure>\n        ))}\n      </div>\n\n      {/* Modal de Zoom */}\n      {imagemZoom && (\n        <div\n          className=\"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 cursor-zoom-out\"\n          onClick={fecharZoom}\n        >\n          <button\n            onClick={fecharZoom}\n            className=\"absolute top-4 right-4 text-white hover:text-red-400 transition\"\n            aria-label=\"Fechar\"\n          >\n            <X size={32} />\n          </button>\n          \n          <div className=\"max-w-4xl max-h-full\">\n          <img\n            src={imagemZoom.publicURL}\n              alt={imagemZoom.legenda}\n            className=\"max-w-full max-h-full rounded-lg shadow-2xl border-4 border-white\"\n            onClick={(e) => e.stopPropagation()}\n          />\n            \n            {/* Legenda no modal */}\n            {imagemZoom.legenda && (\n              <div className=\"mt-4 bg-white rounded-lg p-4 shadow-lg\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">\n                  {imagemZoom.legenda}\n                </h3>\n                \n                {/* Informações adicionais */}\n                <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-2\">\n                  {imagemZoom.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {imagemZoom.categoria}\n                    </span>\n                  )}\n                  {imagemZoom.autor && (\n                    <span>Fotógrafo: {imagemZoom.autor}</span>\n                  )}\n                  {imagemZoom.dataFoto && (\n                    <span>Data: {new Date(imagemZoom.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrição detalhada */}\n                {imagemZoom.descricaoDetalhada && (\n                  <p className=\"text-gray-700 leading-relaxed\">\n                    {imagemZoom.descricaoDetalhada}\n                  </p>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </section>\n  );\n};\n\nImagemHistoriadoProfessor.propTypes = {\n  escola_id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  refreshKey: PropTypes.number,\n};\n\nexport default React.memo(ImagemHistoriadoProfessor);\n","import React, { memo, useEffect, useState, useCallback } from 'react';\nimport { ChevronLeft, ChevronRight, X } from 'lucide-react';\nimport { getHistoriasProfessor } from '../../../../services/historiaProfessorService';\nimport ImagemHistoriadoProfessor from '../ImagemHistoriadoProfessor';\nimport './HistoriadoProfessor.css';\n\nconst HistoriadoProfessor = memo(({ escola, refreshKey = 0 }) => {\n  const [historias, setHistorias] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentHistoriaIndex, setCurrentHistoriaIndex] = useState(0);\n  const [imagemZoom, setImagemZoom] = useState(null);\n\n  const fecharZoom = useCallback(() => setImagemZoom(null), []);\n\n  // Fecha modal com tecla ESC\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') {\n        fecharZoom();\n      }\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [fecharZoom]);\n\n  // Carregar histórias do professor\n  useEffect(() => {\n    if (!escola?.id) {\n      setLoading(false);\n      return;\n    }\n    const carregarHistorias = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const data = await getHistoriasProfessor(escola.id);\n        setHistorias(data || []);\n        setCurrentHistoriaIndex(0);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    carregarHistorias();\n  }, [escola?.id, refreshKey]);\n\n  // Navegação entre histórias\n  const nextHistoria = useCallback(() => {\n    setCurrentHistoriaIndex(prev =>\n      prev < historias.length - 1 ? prev + 1 : 0\n    );\n  }, [historias.length]);\n\n  const prevHistoria = useCallback(() => {\n    setCurrentHistoriaIndex(prev =>\n      prev > 0 ? prev - 1 : historias.length - 1\n    );\n  }, [historias.length]);\n\n  // Navegação com teclado\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (historias.length <= 1) return;\n      if (e.key === 'ArrowRight') {\n        nextHistoria();\n      } else if (e.key === 'ArrowLeft') {\n        prevHistoria();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [historias.length, nextHistoria, prevHistoria]);\n\n  if (loading) {\n    return (\n      <div className=\"mt-8 mb-12 max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 bg-white rounded-2xl shadow-lg border border-green-100/50\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n          <span className=\"ml-2 text-gray-600\">Carregando histórias do professor...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"mt-8 mb-12 max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 bg-white rounded-2xl shadow-lg border border-red-100/50\">\n        <div className=\"text-center py-8\">\n          <p className=\"text-red-600\">Erro ao carregar histórias do professor: {error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!historias.length) {\n    return null;\n  }\n\n  const currentHistoria = historias[currentHistoriaIndex];\n  const hasMultipleHistorias = historias.length > 1;\n\n  return (\n    <article\n      className=\"\n        mt-8 mb-12 max-w-4xl mx-auto\n        px-4 sm:px-6 md:px-8 py-6\n        bg-white rounded-2xl shadow-lg\n        prose prose-sm sm:prose-base md:prose-lg lg:prose-xl\n        prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n        prose-img:rounded-xl prose-img:shadow-lg\n        prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n      \"\n    >\n      <header className=\"mb-6 sm:mb-8\">\n        <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"bg-green-300 rounded-full flex items-center justify-center w-16 h-16 sm:w-28 sm:h-28\">\n              <img \n                src={`${process.env.PUBLIC_URL}/passaro.svg`} \n                alt=\"Ícone de pássaro\" \n                className=\"w-12 h-12 sm:w-24 sm:h-24\" \n                style={{ \n                  filter: 'none', \n                  borderRadius: '0', \n                  boxShadow: 'none', \n                  margin: '0',\n                  padding: '0',\n                  border: 'none',\n                  outline: 'none'\n                }}\n                aria-hidden=\"true\"\n              />\n            </span>\n            <h2 className=\"text-xl sm:text-2xl font-bold text-black m-0\">\n              Depoimento dos Professores\n            </h2>\n          </div>\n          {hasMultipleHistorias && (\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n              <span>{currentHistoriaIndex + 1} de {historias.length}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"h-1 w-20 sm:w-24 bg-green-300 rounded-full\" />\n      </header>\n\n      {/* Conteúdo da história atual */}\n      <section className=\"text-base sm:text-lg leading-relaxed text-neutral-800\">\n        {currentHistoria.nome_professor && (\n          <h3 className=\"text-lg sm:text-xl font-semibold text-green-800 mb-4\">\n            {currentHistoria.nome_professor}\n          </h3>\n        )}\n        <div \n          className=\"historia-professor-content\"\n          dangerouslySetInnerHTML={{ __html: currentHistoria.historia }}\n        />\n        {currentHistoria.imagem_public_url && (\n          <figure className=\"my-6\">\n            <div className=\"relative\">\n              <img\n                src={currentHistoria.imagem_public_url}\n                alt={currentHistoria.descricao_imagem || 'Imagem da história do professor'}\n                className=\"w-full max-w-2xl mx-auto rounded-xl shadow-lg cursor-pointer transition-transform duration-200 hover:scale-105\"\n                onClick={() => setImagemZoom(currentHistoria)}\n                loading=\"lazy\"\n              />\n              {currentHistoria.descricao_imagem && (\n                <figcaption className=\"text-center text-sm text-gray-600 mt-2\">\n                  {currentHistoria.descricao_imagem}\n                </figcaption>\n              )}\n            </div>\n          </figure>\n        )}\n      </section>\n\n      {/* Navegação entre histórias */}\n      {hasMultipleHistorias && (\n        <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-gray-200\">\n          <button\n            onClick={prevHistoria}\n            className=\"flex items-center gap-2 px-4 py-2 text-green-700 hover:text-green-800 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"História anterior\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n            <span className=\"hidden sm:inline\">Anterior</span>\n          </button>\n          <div className=\"flex gap-2\">\n            {historias.map((_, index) => (\n              <button\n                key={index}\n                onClick={() => setCurrentHistoriaIndex(index)}\n                className={`w-3 h-3 rounded-full border-2 ${index === currentHistoriaIndex ? 'bg-green-600 border-green-600' : 'bg-white border-gray-300'} transition-colors`}\n                aria-label={`Ir para história ${index + 1}`}\n              />\n            ))}\n          </div>\n          <button\n            onClick={nextHistoria}\n            className=\"flex items-center gap-2 px-4 py-2 text-green-700 hover:text-green-800 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"Próxima história\"\n          >\n            <span className=\"hidden sm:inline\">Próxima</span>\n            <ChevronRight className=\"w-5 h-5\" />\n          </button>\n        </div>\n      )}\n\n      {/* Modal de zoom da imagem */}\n      {imagemZoom && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80\" onClick={fecharZoom}>\n          <div className=\"relative max-w-3xl w-full p-4\" onClick={e => e.stopPropagation()}>\n            <button\n              className=\"absolute top-2 right-2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-80\"\n              onClick={fecharZoom}\n              aria-label=\"Fechar zoom\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n            <img\n              src={imagemZoom.imagem_public_url}\n              alt={imagemZoom.descricao_imagem || 'Imagem da história do professor'}\n              className=\"w-full max-h-[80vh] object-contain rounded-xl shadow-2xl\"\n            />\n            {imagemZoom.descricao_imagem && (\n              <figcaption className=\"text-center text-base text-gray-200 mt-4\">\n                {imagemZoom.descricao_imagem}\n              </figcaption>\n            )}\n          </div>\n        </div>\n      )}\n\n      <ImagemHistoriadoProfessor escola_id={escola.id} refreshKey={refreshKey} />\n    </article>\n  );\n});\n\nexport default HistoriadoProfessor;\n","import React, { memo } from 'react';\n\n// Import all section components\nimport BasicInfo from './BasicInfo';\nimport HistoriaEscola from './HistoriaEscola';\n// import PovosLinguas from './PovosLinguas';\nimport Modalidades from './Modalidades';\nimport Infraestrutura from './Infraestrutura';\nimport GestaoProfessores from './GestaoProfessores';\nimport ProjetosParcerias from './ProjetosParcerias';\nimport ImagemHistoriadoProfessor from '../ImagemHistoriadoProfessor';\nimport HistoriadoProfessor from './HistoriadoProfessor';\n\n// CSS para layout Masonry real usando CSS columns\nconst masonryStyles = `\n  .masonry-grid {\n    column-count: 1;\n    column-gap: 1.5rem;\n    column-fill: balance;\n  }\n  \n  .masonry-grid > * {\n    display: block;\n    break-inside: avoid;\n    page-break-inside: avoid;\n    margin-bottom: 1.5rem;\n  }\n  \n  /* Mobile: 1 coluna */\n  @media (max-width: 767px) {\n    .masonry-grid {\n      column-count: 1;\n    }\n  }\n  \n  /* Tablet e Desktop: 2 colunas */\n  @media (min-width: 768px) {\n    .masonry-grid {\n      column-count: 2;\n    }\n  }\n`;\n\n// Componente wrapper para o grid\nconst GridLayoutWrapper = memo(({ children, shouldUseGrid }) => {\n  const containerClasses = shouldUseGrid\n    ? 'masonry-grid'\n    : 'space-y-4';\n\n  return (\n    <>\n      <style>{masonryStyles}</style>\n      <div className={`${containerClasses} transition-all duration-300 ease-in-out`}>\n        {children}\n      </div>\n    </>\n  );\n});\n\nconst EscolaInfo = memo(({ escola, shouldUseGrid = false, refreshKey = 0 }) => {\n  console.log(\"EscolaInfo recebeu:\", escola);\n  \n  if (!escola) {\n    console.log(\"EscolaInfo: escola é null ou undefined\");\n    return null;\n  }\n\n  // Componentes que serão renderizados no grid\n  const gridSections = [\n    { Component: BasicInfo, props: { escola } },\n    // { Component: PovosLinguas, props: { escola } },\n    { Component: Modalidades, props: { escola } },\n    { Component: Infraestrutura, props: { escola } },\n    { Component: GestaoProfessores, props: { escola } },\n    { Component: ProjetosParcerias, props: { escola } }\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Grid de cards */}\n      <GridLayoutWrapper shouldUseGrid={shouldUseGrid}>\n        {gridSections.map(({ Component, props }, index) => (\n          <Component key={index} {...props} />\n        ))}\n      </GridLayoutWrapper>\n\n      {/* História da Escola em destaque */}\n      <HistoriaEscola escola={escola} refreshKey={refreshKey} />\n      <HistoriadoProfessor escola={escola} refreshKey={refreshKey} />\n    </div>\n  );\n});\n\nexport default EscolaInfo; ","import React from 'react';\n\nconst HandFistIcon = ({ className = 'w-5 h-5', ...props }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 256 256\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M200,80H184V64a32,32,0,0,0-56-21.13A32,32,0,0,0,72.21,60.42,32,32,0,0,0,24,88v40a104,104,0,0,0,208,0V112A32,32,0,0,0,200,80ZM152,48a16,16,0,0,1,16,16V80H136V64A16,16,0,0,1,152,48ZM88,64a16,16,0,0,1,32,0v40a16,16,0,0,1-32,0ZM40,88a16,16,0,0,1,32,0v16a16,16,0,0,1-32,0Zm176,40a88,88,0,0,1-175.92,3.75A31.93,31.93,0,0,0,80,125.13a31.93,31.93,0,0,0,44.58,3.35,32.21,32.21,0,0,0,11.8,11.44A47.88,47.88,0,0,0,120,176a8,8,0,0,0,16,0,32,32,0,0,1,32-32,8,8,0,0,0,0-16H152a16,16,0,0,1-16-16V96h64a16,16,0,0,1,16,16Z\" />\n  </svg>\n);\n\nexport default HandFistIcon; ","import React, { memo } from 'react';\n\nconst InfoItem = memo(({ label, value, className = '', isTextArea = false }) => {\n  if (!value) return null;\n\n  const isFlexLayout = className.includes('flex flex-col');\n  const baseClasses = isFlexLayout \n    ? 'flex flex-col gap-1 text-sm py-0.5'\n    : 'grid grid-cols-[auto,1fr] gap-x-2 text-sm py-0.5';\n\n  return (\n    <div className={`${baseClasses} ${className}`}>\n      <span className=\"font-medium text-neutral-800\">{label}:</span>\n      {isTextArea ? (\n        <div className=\"text-neutral-600\">\n          <div className=\"whitespace-pre-wrap break-words text-sm leading-relaxed\">\n            {value}\n          </div>\n        </div>\n      ) : (\n        <span className=\"text-neutral-600 break-words\">{value}</span>\n      )}\n    </div>\n  );\n});\n\nexport default InfoItem; ","import React, { memo } from 'react';\nimport HandFistIcon from './icons/HandFistIcon';\nimport InfoSection from './components/InfoSection';\nimport InfoItem from './components/InfoItem';\n\n// Wrapper para passar className maior ao ícone\nconst LargeHandFistIcon = (props) => <HandFistIcon className=\"w-8 h-8\" {...props} />;\n\nconst TerraIndigenaInfo = memo(({ terraIndigena }) => {\n  if (!terraIndigena) {\n    console.log(\"TerraIndigenaInfo: terraIndigena é null ou undefined\");\n    return null;\n  }\n\n  const formatarSuperficie = () => {\n    return terraIndigena.superficie ? \n      `Superfície: ${parseFloat(terraIndigena.superficie).toFixed(2)} ha` : null;\n  };\n\n  const formatarLocalizacao = () => {\n    return `${terraIndigena.municipio || ''}, ${terraIndigena.uf || ''}`.trim();\n  };\n\n  return (\n    <InfoSection title=\"Informações da Terra Indígena\" icon={LargeHandFistIcon}>\n      <InfoItem label=\"Povos Indígenas\" value={terraIndigena.etnia} />\n      <InfoItem label=\"Localização\" value={formatarLocalizacao()} />\n      <InfoItem label=\"Superfície\" value={formatarSuperficie()} />\n      <InfoItem label=\"Fase\" value={terraIndigena.fase} />\n      <InfoItem label=\"Modalidade\" value={terraIndigena.modalidade} />\n      <InfoItem label=\"Reestudo\" value={terraIndigena.reestudo} />\n      <InfoItem label=\"Coordenação Regional\" value={terraIndigena.cr} />\n      <InfoItem label=\"Faixa de Fronteira\" value={terraIndigena.faixa_fron} />\n      <InfoItem label=\"Unidade Administrativa\" value={terraIndigena.undadm_nom} />\n      <InfoItem label=\"Sigla Unidade\" value={terraIndigena.undadm_sig} />\n      <InfoItem label=\"Domínio\" value={terraIndigena.dominio_un} />\n      <InfoItem label=\"Data de Atualização\" value={terraIndigena.data_atual} />\n      <InfoItem label=\"Código Terra Indígena\" value={terraIndigena.terrai_cod} />\n      <InfoItem label=\"Código Unidade Administrativa\" value={terraIndigena.undadm_cod} />\n    </InfoSection>\n  );\n});\n\nexport default TerraIndigenaInfo; ","import React, { useState } from \"react\";\nimport {\n  FacebookShareButton,\n  TwitterShareButton,\n  WhatsappShareButton,\n  LinkedinShareButton,\n  FacebookIcon,\n  TwitterIcon,\n  WhatsappIcon,\n  LinkedinIcon,\n} from \"react-share\";\n\n// Componente Tooltip simples\nconst Tooltip = ({ children, text, position = \"top\" }) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const positionClasses = {\n    top: \"bottom-full left-1/2 transform -translate-x-1/2 mb-2\",\n    bottom: \"top-full left-1/2 transform -translate-x-1/2 mt-2\",\n  };\n\n  return (\n    <div \n      className=\"relative inline-block\"\n      onMouseEnter={() => setIsVisible(true)}\n      onMouseLeave={() => setIsVisible(false)}\n      onFocus={() => setIsVisible(true)}\n      onBlur={() => setIsVisible(false)}\n    >\n      {children}\n      {isVisible && (\n        <div className={`\n          absolute z-50 px-2 py-1 text-xs text-white bg-gray-900 rounded shadow-lg whitespace-nowrap\n          ${positionClasses[position]}\n        `}>\n          {text}\n          <div className=\"absolute left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\"></div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ShareButton = ({ onClick, url, title, description = \"\" }) => {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(url);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      // Fallback para navegadores mais antigos\n      const input = document.createElement(\"input\");\n      input.value = url;\n      document.body.appendChild(input);\n      input.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(input);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  // Frases de compartilhamento mais atrativas\n  const shareTextOptions = [\n    `Conheça a escola indígena: ${title}`,\n    `Descubra esta escola indígena: ${title}`,\n    `Escola indígena incrível: ${title}`,\n    `Educação indígena em destaque: ${title}`,\n    `Conheça esta escola: ${title}`,\n    `Escola indígena que inspira: ${title}`,\n    `Educação que transforma: ${title}`,\n    `Escola indígena de referência: ${title}`\n  ];\n\n  // Seleciona uma frase aleatória para variar o conteúdo\n  const randomIndex = Math.floor(Math.random() * shareTextOptions.length);\n  const shareText = shareTextOptions[randomIndex];\n  const shareUrl = url || window.location.href;\n\n  return (\n    <div className=\"px-2 pb-2 border-t border-green-200 bg-white\">\n      <div className=\"mt-2 space-y-1\">\n        {/* Botão Copiar Link */}\n        <Tooltip text={copied ? \"Link copiado!\" : \"Copiar link para clipboard\"}>\n          <button\n            onClick={handleCopyLink}\n            className={`\n              w-full flex items-start gap-2 p-1.5 rounded-md transition-colors\n              focus:outline-none focus:ring-1 focus:ring-green-500\n              ${copied\n                ? 'bg-green-100'\n                : 'bg-green-100 hover:bg-green-200'\n              }\n            `}\n            aria-label=\"Copiar link para clipboard\"\n          >\n            <svg \n              className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" \n              />\n            </svg>\n            <div className=\"flex-1\">\n              <div className=\"text-xs font-medium text-gray-700\">\n                {copied ? 'Link Copiado' : 'Copiar Link'}\n              </div>\n            </div>\n          </button>\n        </Tooltip>\n\n        {/* Botão WhatsApp */}\n        <Tooltip text=\"Compartilhar no WhatsApp\">\n          <WhatsappShareButton\n            url={shareUrl}\n            title={shareText}\n            className=\"w-full transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 rounded-md\"\n            aria-label=\"Compartilhar no WhatsApp\"\n          >\n            <div className=\"flex items-start gap-2 p-1.5 bg-green-100 hover:bg-green-200 rounded-md\">\n              <WhatsappIcon size={20} round={false} className=\"mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <div className=\"text-xs font-medium text-gray-700\">WhatsApp</div>\n              </div>\n            </div>\n          </WhatsappShareButton>\n        </Tooltip>\n\n        {/* Botão Facebook */}\n        <Tooltip text=\"Compartilhar no Facebook\">\n          <FacebookShareButton\n            url={shareUrl}\n            quote={shareText}\n            className=\"w-full transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 rounded-md\"\n            aria-label=\"Compartilhar no Facebook\"\n          >\n            <div className=\"flex items-start gap-2 p-1.5 bg-green-100 hover:bg-green-200 rounded-md\">\n              <FacebookIcon size={20} round={false} className=\"mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <div className=\"text-xs font-medium text-gray-700\">Facebook</div>\n              </div>\n            </div>\n          </FacebookShareButton>\n        </Tooltip>\n\n        {/* Botão Twitter */}\n        <Tooltip text=\"Compartilhar no Twitter\">\n          <TwitterShareButton\n            url={shareUrl}\n            title={shareText}\n            className=\"w-full transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 rounded-md\"\n            aria-label=\"Compartilhar no Twitter\"\n          >\n            <div className=\"flex items-start gap-2 p-1.5 bg-green-100 hover:bg-green-200 rounded-md\">\n              <TwitterIcon size={20} round={false} className=\"mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <div className=\"text-xs font-medium text-gray-700\">Twitter</div>\n              </div>\n            </div>\n          </TwitterShareButton>\n        </Tooltip>\n\n        {/* Botão LinkedIn */}\n        <Tooltip text=\"Compartilhar no LinkedIn\">\n          <LinkedinShareButton\n            url={shareUrl}\n            title={title}\n            summary={description}\n            className=\"w-full transition-colors focus:outline-none focus:ring-1 focus:ring-green-500 rounded-md\"\n            aria-label=\"Compartilhar no LinkedIn\"\n          >\n            <div className=\"flex items-start gap-2 p-1.5 bg-green-100 hover:bg-green-200 rounded-md\">\n              <LinkedinIcon size={20} round={false} className=\"mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <div className=\"text-xs font-medium text-gray-700\">LinkedIn</div>\n              </div>\n            </div>\n          </LinkedinShareButton>\n        </Tooltip>\n\n        {/* Botão Compartilhar Nativo (fallback) */}\n        {navigator.share && (\n          <Tooltip text=\"Compartilhar usando opções do sistema\">\n            <button\n              onClick={onClick}\n              className=\"w-full flex items-start gap-2 p-1.5 bg-green-100 hover:bg-green-200 rounded-md transition-colors focus:outline-none focus:ring-1 focus:ring-green-500\"\n              aria-label=\"Compartilhar usando opções do sistema\"\n            >\n              <svg \n                className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\" \n                />\n              </svg>\n              <div className=\"flex-1\">\n                <div className=\"text-xs font-medium text-gray-700\">Compartilhar</div>\n              </div>\n            </button>\n          </Tooltip>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(ShareButton);","import React, { memo } from 'react';\nimport ShareButton from '../ShareButton';\n\nconst ShareSection = memo(({ copiarLink, compartilhar, painelInfo }) => {\n  // Gerar URL customizada para compartilhamento\n  const gerarLinkCustomizado = () => {\n    if (!painelInfo?.titulo) return window.location.href;\n    \n    const criarSlug = (texto) => {\n      return texto\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/[^a-z0-9\\s-]/g, '')\n        .replace(/\\s+/g, '-')\n        .replace(/-+/g, '-')\n        .trim();\n    };\n\n    return (\n      window.location.origin +\n      window.location.pathname +\n      \"?panel=\" +\n      criarSlug(painelInfo.titulo)\n    );\n  };\n\n  return (\n    <ShareButton \n      onClick={compartilhar}\n      url={gerarLinkCustomizado()}\n      title={painelInfo?.titulo || 'Painel de Escola Indígena'}\n      description={painelInfo?.descricao || 'Confira informações sobre esta escola indígena no Observatório de Professores Indígenas.'}\n    />\n  );\n});\n\nexport default ShareSection; ","import React, { useMemo } from \"react\";\nimport DOMPurify from \"dompurify\";\n\n/**\n * Componente PainelDescricao - Exibe conteúdo formatado com sanitização HTML\n * \n * @param {Object} props - Propriedades do componente\n * @param {string} props.descricao - Texto HTML ou texto puro a ser exibido\n * @param {string} props.className - Classes CSS adicionais (opcional)\n * @returns {React.ReactElement|null} - Componente renderizado ou null\n */\nconst PainelDescricao = ({ descricao, className = \"\" }) => {\n  // Função para formatar o texto com quebras de linha\n  const formatText = (text) => {\n    if (!text) return \"\";\n    \n    // Preserva parágrafos convertendo linhas duplas em tags <p>\n    let formattedText = text.replace(/\\n\\n+/g, \"</p><p>\");\n    \n    // Substitui quebras de linha simples por <br>\n    formattedText = formattedText.replace(/\\n/g, \"<br>\");\n    \n    // Adiciona tags <p> no início e fim se não existirem\n    if (!formattedText.startsWith(\"<p>\")) {\n      formattedText = \"<p>\" + formattedText;\n    }\n    if (!formattedText.endsWith(\"</p>\")) {\n      formattedText = formattedText + \"</p>\";\n    }\n    \n    // Remove espaços extras entre tags HTML\n    formattedText = formattedText.replace(/>\\s+</g, \"><\");\n    \n    return formattedText;\n  };\n\n  // Usa useMemo para evitar sanitização redundante em re-renders\n  const sanitizedHTML = useMemo(() => {\n    if (!descricao) return \"\";\n    \n    return DOMPurify.sanitize(formatText(descricao), {\n      ALLOWED_TAGS: [\n        'b', 'i', 'em', 'strong', 'a', 'p', 'br', 'ul', 'ol', 'li',\n        'div', 'span', 'img', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n        'center', 'blockquote', 'code', 'pre', 'hr', 'table', 'thead', \n        'tbody', 'tr', 'th', 'td'\n      ],\n      ALLOWED_ATTR: [\n        'href', 'target', 'rel', 'class', 'style', 'src', 'alt',\n        'width', 'height', 'id', 'title', 'aria-label', 'aria-describedby'\n      ],\n      ADD_TAGS: ['center', 'blockquote'],\n      ADD_ATTR: ['target', 'className', 'title'],\n      KEEP_CONTENT: true,\n      ALLOW_DATA_ATTR: false\n    });\n  }, [descricao]);\n\n  if (!descricao) return null;\n\n  return (\n    <div className={`mb-6 ${className}`}>\n      <div\n        className=\"prose prose-lg lg:prose-xl max-w-none px-1\"\n        style={{\n          '--tw-prose-body': '#1f2937',\n          '--tw-prose-headings': '#111827',\n          '--tw-prose-links': '#059669',\n          '--tw-prose-bold': '#111827',\n          '--tw-prose-counters': '#1f2937',\n          '--tw-prose-bullets': '#4b5563',\n          '--tw-prose-hr': '#e5e7eb',\n          '--tw-prose-quotes': '#111827',\n          '--tw-prose-quote-borders': '#10b981',\n          '--tw-prose-captions': '#6b7280',\n          '--tw-prose-code': '#111827',\n          '--tw-prose-pre-code': '#e5e7eb',\n          '--tw-prose-pre-bg': '#1f2937',\n          '--tw-prose-th-borders': '#d1d5db',\n          '--tw-prose-td-borders': '#e5e7eb',\n          lineHeight: '1.8',\n          fontSize: '1.125rem',\n          fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n          letterSpacing: '0.015em',\n        }}\n        dangerouslySetInnerHTML={{ __html: sanitizedHTML }}\n        aria-live=\"polite\"\n      />\n    </div>\n  );\n};\n\nexport default React.memo(PainelDescricao);","import React, { memo } from 'react';\nimport PainelDescricao from '../PainelDescricao';\n\nconst IntroPanel = memo(({ painelInfo }) => (\n  <div className=\"space-y-6\">\n    <div className=\"prose prose-lg lg:prose-xl max-w-none\">\n      <div className=\"bg-green-100 rounded-lg p-6\">\n        <PainelDescricao descricao={painelInfo.descricao_detalhada} />\n      </div>\n    </div>\n    {painelInfo.audioUrl && (\n      <div className=\"mt-6\">\n        <audio controls className=\"w-full\">\n          <source src={painelInfo.audioUrl} type=\"audio/mpeg\" />\n          Seu navegador não suporta o elemento de áudio.\n        </audio>\n      </div>\n    )}\n  </div>\n));\n\nexport default IntroPanel; ","/**\n * Utility functions for text formatting\n */\n\n/**\n * Lista de siglas que devem permanecer em maiúsculas\n */\nconst SIGLAS_MAIUSCULAS = ['EE', 'EEI'];\n\n/**\n * Capitalizes the first letter of each word in a string, keeping specific acronyms in uppercase\n * @param {string} str - The string to capitalize\n * @returns {string} The capitalized string\n */\nexport const capitalizeWords = (str) => {\n  if (!str || typeof str !== 'string') return '';\n  \n  // Primeiro, divide a string em palavras\n  const words = str.split(/\\s+/);\n  \n  // Processa cada palavra\n  const processedWords = words.map(word => {\n    // Verifica se a palavra é uma sigla que deve permanecer em maiúsculas\n    if (SIGLAS_MAIUSCULAS.includes(word.toUpperCase())) {\n      return word.toUpperCase();\n    }\n    \n    // Para outras palavras, aplica a capitalização normal\n    return word.charAt(0).toUpperCase() + word.substr(1).toLowerCase();\n  });\n  \n  // Junta as palavras de volta em uma string\n  return processedWords.join(' ');\n}; \n\n/**\n * Normalizes an address string by capitalizing words and handling common address abbreviations\n * @param {string} address - The address string to normalize\n * @returns {string} The normalized address string\n */\nexport const normalizeAddress = (address) => {\n  if (!address || typeof address !== 'string') return '';\n\n  // Lista de abreviações comuns em endereços\n  const abbreviations = {\n    'r.': 'Rua',\n    'av.': 'Avenida',\n    'al.': 'Alameda',\n    'pr.': 'Praça',\n    'tr.': 'Travessa',\n    'rod.': 'Rodovia',\n    'est.': 'Estrada',\n    'n.': 'Número',\n    'nº': 'Número',\n    'apt.': 'Apartamento',\n    'bl.': 'Bloco',\n    'qd.': 'Quadra',\n    'lt.': 'Lote',\n    'km': 'KM',\n    's/n': 'S/N'\n  };\n\n  // Primeiro, substitui as abreviações\n  let normalized = address.toLowerCase();\n  Object.entries(abbreviations).forEach(([abbr, full]) => {\n    normalized = normalized.replace(new RegExp(`\\\\b${abbr}\\\\b`, 'g'), full);\n  });\n\n  // Depois aplica a capitalização de palavras\n  return capitalizeWords(normalized);\n}; ","import React from \"react\";\nimport { X, Maximize2, Minimize2 } from \"lucide-react\";\nimport { capitalizeWords } from \"../utils/textFormatting\";\n\nconst PainelHeader = ({ titulo, closePainel, toggleMaximize, isMaximized }) => {\n  const isMobile = window.innerWidth <= 768;\n  const isMobileLandscape = isMobile && window.innerWidth > window.innerHeight;\n  const isVerySmallLandscape = isMobileLandscape && window.innerWidth <= 850;\n\n  return (\n    <header className={`relative px-3 sm:px-4 md:px-6 lg:px-8 py-3 sm:py-4 md:py-6 border-b border-green-100 ${isMobileLandscape ? 'min-h-[60px]' : ''}`}>\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between pr-12\">\n        <h2 \n          id=\"painel-titulo\"\n          className={`font-semibold text-gray-900 leading-tight tracking-normal break-words ${\n            isVerySmallLandscape\n              ? 'text-base' // Força fonte menor em paisagem muito estreita\n              : isMobileLandscape \n                ? 'text-lg sm:text-xl' \n                : 'text-xl sm:text-2xl md:text-3xl'\n          }`}\n          style={isVerySmallLandscape ? { fontSize: 'clamp(1rem, 4vw, 1.25rem)' } : {}}\n        >\n          {capitalizeWords(titulo)}\n        </h2>\n      </div>\n\n      <div className=\"absolute top-2 sm:top-4 right-2 sm:right-4 flex items-center gap-2\">\n        {!isMobile && (\n          <button\n            onClick={toggleMaximize}\n            className=\"p-2 text-green-700 hover:text-green-900 hover:bg-green-100 transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n            aria-label={isMaximized ? \"Restaurar painel\" : \"Maximizar painel\"}\n            title={isMaximized ? \"Restaurar\" : \"Maximizar\"}\n          >\n            {isMaximized ? (\n              <Minimize2 size={18} className=\"stroke-2\" aria-hidden=\"true\" />\n            ) : (\n              <Maximize2 size={18} className=\"stroke-2\" aria-hidden=\"true\" />\n            )}\n          </button>\n        )}\n\n        <button\n          onClick={closePainel}\n          className={`text-gray-700 hover:text-gray-900 hover:bg-green-100 transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${\n            isMobileLandscape ? 'p-1.5' : 'p-2'\n          }`}\n          aria-label=\"Fechar painel\"\n        >\n          <X \n            size={isMobileLandscape ? 18 : 20} \n            aria-hidden=\"true\"\n            className=\"stroke-2\"\n          />\n        </button>\n      </div>\n    </header>\n  );\n};\n\nexport default PainelHeader;\n","import { useState, useEffect } from \"react\";\n\nconst usePainelVisibility = (painelInfo) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  console.log(\"usePainelVisibility - painelInfo:\", painelInfo);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      const isMobileWidth = window.innerWidth <= 768;\n      const isMobileLandscape = window.innerWidth > window.innerHeight && window.innerWidth <= 1024;\n      setIsMobile(isMobileWidth || isMobileLandscape);\n    };\n    \n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    window.addEventListener(\"orientationchange\", checkMobile);\n    \n    return () => {\n      window.removeEventListener(\"resize\", checkMobile);\n      window.removeEventListener(\"orientationchange\", checkMobile);\n    };\n  }, []);\n\n  useEffect(() => {\n    console.group(\"usePainelVisibility - Effect\");\n    console.log(\"painelInfo recebido:\", painelInfo);\n    \n    if (painelInfo && typeof painelInfo === 'object') {\n      console.log(\"painelInfo válido, definindo visibilidade como true\");\n      setIsVisible(true);\n      document.body.style.overflow = \"hidden\";\n    } else {\n      console.log(\"painelInfo inválido ou undefined, definindo visibilidade como false\");\n      setIsVisible(false);\n      document.body.style.overflow = \"\";\n    }\n\n    console.log(\"Estado atual:\", { isVisible, isMobile });\n    console.groupEnd();\n\n    return () => {\n      document.body.style.overflow = \"\";\n    };\n  }, [painelInfo]);\n\n  console.log(\"usePainelVisibility - returning state:\", { isVisible, isMobile });\n\n  return { isVisible, isMobile };\n};\n\nexport default usePainelVisibility;","import React from 'react';\nimport PainelHeader from '../../PainelHeader';\nimport usePainelVisibility from '../../hooks/usePainelVisibility';\nimport { usePainelDimensions } from '../../hooks/usePainelDimensions';\n\nconst PainelContainer = ({ \n  painelInfo, \n  closePainel, \n  children,\n  isMaximized,\n  onToggleMaximize\n}) => {\n  const { isVisible, isMobile } = usePainelVisibility(painelInfo);\n  const painelDimensions = usePainelDimensions(isMobile, isMaximized);\n\n  if (!painelInfo) return null;\n\n  // Determinar altura da navbar baseada no tamanho da tela\n  const isMobileLandscape = isMobile && window.innerWidth > window.innerHeight;\n  const navbarHeight = isMobileLandscape ? 48 : isMobile ? 56 : 72;\n\n  const baseClasses = `\n    fixed\n    ${isMobile \n      ? `inset-x-0 top-0 w-full h-full` \n      : 'top-30 bottom-0 right-0 w-full sm:w-3/4 lg:w-[49%] h-auto'\n    }\n    rounded-t-xl shadow-xl z-[9999] transform transition-all duration-500 ease-in-out\n    bg-white border-t-4 border-white\n  `;\n  \n  const visibilityClasses = isVisible \n    ? isMobile \n      ? \"translate-y-0 opacity-100\" \n      : \"translate-y-0 opacity-100\"\n    : isMobile \n      ? \"translate-y-full opacity-0\" \n      : \"translate-y-full opacity-0\";\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-labelledby=\"painel-titulo\"\n      aria-describedby=\"painel-descricao\"\n      aria-modal=\"true\"\n      className={`${baseClasses} ${visibilityClasses}${isMobile ? ' painel-informacoes-mobile' : ''}`}\n      style={{\n        height: painelDimensions.height,\n        maxHeight: painelDimensions.maxHeight,\n        width: isMobile ? '100%' : painelDimensions.width,\n        top: isMobile ? `${navbarHeight}px` : 72,\n        display: \"flex\",\n        flexDirection: \"column\",\n        ...(isMobile && {\n          borderRadius: painelDimensions.isMobileLandscape ? '0' : '1rem 1rem 0 0',\n          boxShadow: painelDimensions.isMobileLandscape \n            ? '0 0 0 0' \n            : '0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06)'\n        })\n      }}\n    >\n      <PainelHeader \n        titulo={painelInfo.titulo} \n        closePainel={closePainel}\n        toggleMaximize={onToggleMaximize}\n        isMaximized={isMaximized}\n      />\n      \n      <div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-green-600/40 scrollbar-track-green-50/20\">\n        <div className={`${isMobile ? 'p-3 sm:p-4' : 'p-6'} space-y-6 sm:space-y-8`}>\n          <div className=\"prose prose-sm sm:prose-base md:prose-lg lg:prose-xl max-w-none\">\n            {children}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(PainelContainer); ","import { useState, useEffect, useMemo } from 'react';\n\nexport const usePainelDimensions = (isMobile, isMaximized) => {\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [windowHeight, setWindowHeight] = useState(window.innerHeight);\n  \n  // Breakpoints para responsividade\n  const breakpoints = {\n    sm: 640,\n    md: 768,\n    lg: 1024,\n    xl: 1280,\n    '2xl': 1536\n  };\n\n  // Detectar mudanças no tamanho da janela\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n      setWindowHeight(window.innerHeight);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Calcular dimensões base\n  const dimensions = useMemo(() => {\n    // Determinar altura da navbar baseada na orientação\n    const isMobileLandscape = isMobile && windowWidth > windowHeight;\n    const navbarHeight = isMobileLandscape ? 48 : isMobile ? 56 : 72;\n    const baseHeight = `calc(100vh - ${navbarHeight}px)`;\n    const baseMaxHeight = isMobile ? \"96vh\" : \"92vh\";\n\n    // Determinar se está em modo desktop\n    const isDesktop = windowWidth >= breakpoints.md;\n    \n    // Determinar se deve usar grid\n    const shouldUseGrid = isDesktop && isMaximized;\n\n    // Calcular largura do painel\n    let panelWidth;\n    if (isMobile) {\n      if (isMobileLandscape) {\n        // Mobile na horizontal: preencher toda a tela\n        panelWidth = '100%';\n      } else {\n        // Mobile na vertical: preencher toda a largura\n        panelWidth = '100%';\n      }\n    } else {\n      // Desktop\n      panelWidth = isMaximized \n      ? '100%' \n      : windowWidth >= breakpoints.lg \n        ? '49%' \n        : '75%';\n    }\n\n    return {\n      height: baseHeight,\n      maxHeight: baseMaxHeight,\n      width: panelWidth,\n      isDesktop,\n      isMobileLandscape,\n      shouldUseGrid,\n      breakpoints,\n      zIndex: 1000\n    };\n  }, [isMobile, isMaximized, windowWidth, windowHeight]);\n\n  return dimensions;\n};","import React, { useRef, useState, useEffect } from 'react';\n\n/**\n * DocumentViewer\n * Componente para exibir uma lista de documentos (PDFs) associados a uma escola.\n * Permite visualização via iframe (Google Drive/Docs) ou download externo, com tratamento de erros e fallback amigável.\n * Props:\n *   - documentos: Array de objetos { id, titulo, autoria, tipo, link_pdf }\n *   - title: string (opcional)\n */\n\n// Utility function to transform Google Drive links\nconst transformarLinkGoogleDrive = (link) => {\n  if (!link || typeof link !== 'string') return null;\n  \n  const match = link.match(/\\/d\\/([a-zA-Z0-9-_]+)/);\n  if (!match) return null;\n  \n  const fileId = match[1];\n  return `https://docs.google.com/gview?url=https://drive.google.com/uc?id=${fileId}&embedded=true`;\n};\n\n/**\n * Componente de troca de visualização (lista/grade) acessível e reutilizável\n */\nconst ViewModeToggle = ({ viewMode, setViewMode }) => (\n  <div className=\"flex items-center gap-2\" role=\"tablist\" aria-label=\"Modos de visualização dos documentos\">\n    <button\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={viewMode === 'list'}\n      aria-label=\"Visualizar em lista\"\n      aria-pressed={viewMode === 'list'}\n      onClick={() => setViewMode('list')}\n      className={`p-2 rounded-lg flex items-center gap-1 transition-colors focus:outline-none focus:ring-2 focus:ring-green-600 ${\n        viewMode === 'list'\n          ? 'bg-green-100 text-green-800 font-semibold'\n          : 'text-gray-600 hover:bg-gray-100'\n      }`}\n      tabIndex={0}\n    >\n      {/* Ícone de lista */}\n      <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n      </svg>\n      <span className=\"hidden sm:inline\">Lista</span>\n    </button>\n    <button\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={viewMode === 'grid'}\n      aria-label=\"Visualizar em grade\"\n      aria-pressed={viewMode === 'grid'}\n      onClick={() => setViewMode('grid')}\n      className={`p-2 rounded-lg flex items-center gap-1 transition-colors focus:outline-none focus:ring-2 focus:ring-green-600 ${\n        viewMode === 'grid'\n          ? 'bg-green-100 text-green-800 font-semibold'\n          : 'text-gray-600 hover:bg-gray-100'\n      }`}\n      tabIndex={0}\n    >\n      {/* Ícone de grade */}\n      <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n      </svg>\n      <span className=\"hidden sm:inline\">Grade</span>\n    </button>\n  </div>\n);\n\nconst DocumentViewer = ({ documentos, title = \"Documentos\" }) => {\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [viewMode, setViewMode] = useState('list'); // 'list' ou 'grid'\n  const iframeRef = useRef(null);\n  const [iframeError, setIframeError] = useState(false);\n  const [useGoogleDocsViewer, setUseGoogleDocsViewer] = useState(false);\n\n  // Reset states when selected document changes\n  useEffect(() => {\n    if (selectedDoc) {\n      setIframeError(false);\n      setUseGoogleDocsViewer(false);\n    }\n  }, [selectedDoc]);\n\n  // Set first document as selected if none is selected\n  useEffect(() => {\n    if (!selectedDoc && documentos?.length > 0) {\n      setSelectedDoc(documentos[0]);\n    }\n  }, [documentos, selectedDoc]);\n\n  // Handle iframe events\n  useEffect(() => {\n    const iframe = iframeRef.current;\n    if (!iframe || !selectedDoc) return;\n\n    const handleLoad = () => {\n      setIframeError(false);\n    };\n\n    const handleError = () => {\n      setIframeError(true);\n      setUseGoogleDocsViewer(true);\n    };\n\n    iframe.addEventListener('load', handleLoad);\n    iframe.addEventListener('error', handleError);\n\n    return () => {\n      iframe.removeEventListener('load', handleLoad);\n      iframe.removeEventListener('error', handleError);\n    };\n  }, [selectedDoc]);\n\n  // Early return after all hooks\n  if (!documentos || documentos.length === 0) {\n    return null;\n  }\n\n  const renderDocumentGrid = () => {\n    return (\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\n        {documentos.map((doc) => (\n          <div\n            key={doc.id}\n            className={`\n              flex flex-col justify-between h-full max-w-xs mx-auto\n              rounded-2xl transition-all duration-200 cursor-pointer\n              shadow-sm hover:shadow-lg\n              ${selectedDoc?.id === doc.id\n                ? 'bg-green-100 scale-[1.03]'\n                : 'bg-white hover:bg-green-50'\n              }\n            `}\n            onClick={() => {\n              setSelectedDoc(doc);\n            }}\n            tabIndex={0}\n            aria-label={`Selecionar documento: ${doc.titulo}`}\n          >\n            <div className=\"p-5 flex-1 flex flex-col justify-between\">\n              <h4 className=\"font-semibold text-green-800 mb-2 line-clamp-2 text-lg\">{doc.titulo}</h4>\n              {doc.autoria && (\n                <p className=\"text-sm text-gray-600 mb-2 line-clamp-1\">Por: {doc.autoria}</p>\n              )}\n              {doc.tipo && (\n                <span className=\"inline-block px-2 py-1 text-xs font-medium bg-green-200 text-green-800 rounded-full\">\n                  {doc.tipo}\n                </span>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const renderDocumentList = () => {\n    return (\n      <div className=\"space-y-2\">\n        {documentos.map((doc) => (\n          <button\n            key={doc.id}\n            onClick={() => {\n              setSelectedDoc(doc);\n            }}\n            className={`w-full text-left p-3 rounded-lg transition-colors duration-200 ${\n              selectedDoc?.id === doc.id\n                ? 'bg-green-100'\n                : 'hover:bg-green-50'\n            }`}\n          >\n            <h4 className=\"font-medium text-green-800\">{doc.titulo}</h4>\n            {doc.autoria && (\n              <p className=\"text-sm text-gray-600\">Por: {doc.autoria}</p>\n            )}\n            {doc.tipo && (\n              <span className=\"inline-block mt-1 px-2 py-1 text-xs font-medium bg-green-200 text-green-800 rounded-full\">\n                {doc.tipo}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n    );\n  };\n\n  const renderDocumentViewer = () => {\n    if (!selectedDoc) return null;\n\n    const isGoogleDriveLink = selectedDoc.link_pdf.includes('drive.google.com/file/d/');\n\n    return (\n      <div className=\"rounded-lg overflow-hidden shadow-lg bg-white\">\n        {isGoogleDriveLink ? (\n          <>\n            {!useGoogleDocsViewer ? (\n              <iframe \n                ref={iframeRef}\n                src={selectedDoc.link_pdf.replace('/view?usp=sharing', '/preview')}\n                width=\"100%\" \n                height=\"500px\"\n                allow=\"autoplay\"\n                loading=\"lazy\"\n                title={selectedDoc.titulo}\n                sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n                className=\"bg-white\"\n              />\n            ) : (\n              <iframe\n                ref={iframeRef}\n                src={transformarLinkGoogleDrive(selectedDoc.link_pdf)}\n                width=\"100%\"\n                height=\"500px\"\n                allow=\"autoplay\"\n                loading=\"lazy\"\n                title={`${selectedDoc.titulo} (Google Docs Viewer)`}\n                sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n                className=\"bg-white\"\n              />\n            )}\n            {iframeError && (\n              <div className=\"p-6 text-center text-gray-600 bg-green-100\">\n                <p className=\"mb-3 text-lg\">Não foi possível carregar o documento diretamente.</p>\n                <a\n                  href={selectedDoc.link_pdf}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center px-4 py-2 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n                >\n                  <svg \n                    className=\"w-5 h-5 mr-2\" \n                    fill=\"none\" \n                    stroke=\"currentColor\" \n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path \n                      strokeLinecap=\"round\" \n                      strokeLinejoin=\"round\" \n                      strokeWidth={2} \n                      d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" \n                    />\n                  </svg>\n                  Abrir em nova aba\n                </a>\n              </div>\n            )}\n          </>\n        ) : (\n          <div className=\"flex justify-center p-6\">\n            <a\n              href={selectedDoc.link_pdf}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center px-6 py-3 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n            >\n              <svg \n                className=\"w-5 h-5 mr-2\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" \n                />\n              </svg>\n              Ver documento PDF\n            </a>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"mt-8 max-w-4xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-xl font-semibold text-green-800\">{title}:</h3>\n        {documentos.length > 1 && (\n          <ViewModeToggle viewMode={viewMode} setViewMode={setViewMode} />\n        )}\n      </div>\n      \n      {documentos.length > 1 && (\n        <div className=\"mb-6\">\n          {viewMode === 'grid' ? renderDocumentGrid() : renderDocumentList()}\n        </div>\n      )}\n      \n      {renderDocumentViewer()}\n    </div>\n  );\n};\n\nexport default React.memo(DocumentViewer); ","import React, { useState, useEffect } from 'react';\nimport { getTituloByVideoUrl } from '../../../services/legendasService';\n\n/**\n * VideoPlayer\n * Componente para exibir vídeos do YouTube de forma responsiva e acessível.\n * Faz extração do ID do vídeo a partir de diferentes formatos de URL e exibe fallback amigável em caso de erro.\n * Props:\n *   - videoUrl: string (URL do vídeo)\n *   - title: string (opcional)\n *   - escolaId: number (ID da escola para buscar título personalizado)\n */\n\n// Utility function to extract YouTube video ID\nconst extrairIdYoutube = (url) => {\n  if (!url || typeof url !== 'string') {\n    return null;\n  }\n\n  // Remove query parameters to simplify\n  const baseUrl = url.split('?')[0];\n\n  // Patterns to extract video ID\n  const patterns = [\n    /youtube\\.com\\/embed\\/([^/?&]+)/,                 // embed/ID\n    /youtube\\.com\\/watch\\?v=([^&]+)/,                 // watch?v=ID\n    /youtu\\.be\\/([^?&]+)/,                            // youtu.be/ID\n    /youtube\\.com\\/v\\/([^?&]+)/                       // youtube.com/v/ID\n  ];\n\n  for (const pattern of patterns) {\n    const match = baseUrl.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n\n  return null;\n};\n\nconst VideoPlayer = ({ videoUrl, title = \"Vídeo\", escolaId }) => {\n  const [tituloPersonalizado, setTituloPersonalizado] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // Buscar título personalizado da nova tabela\n  useEffect(() => {\n    const buscarTitulo = async () => {\n      if (!videoUrl || !escolaId) return;\n\n      try {\n        setLoading(true);\n        const titulo = await getTituloByVideoUrl(videoUrl, escolaId);\n        setTituloPersonalizado(titulo);\n      } catch (error) {\n        console.warn('Erro ao buscar título personalizado:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    buscarTitulo();\n  }, [videoUrl, escolaId]);\n\n  if (!videoUrl) return null;\n\n  const videoId = extrairIdYoutube(videoUrl);\n  \n  if (!videoId) {\n    return (\n      <div className=\"mt-8 max-w-4xl mx-auto\">\n        <h3 className=\"text-xl font-semibold text-green-800 mb-4\">\n          {tituloPersonalizado?.titulo || title}:\n        </h3>\n        <div className=\"p-6 text-center text-gray-600 bg-gray-50 rounded-lg\">\n          <p className=\"mb-3 text-lg\">Link do vídeo inválido ou não suportado.</p>\n          <a\n            href={videoUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"inline-flex items-center px-4 py-2 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n          >\n            <svg \n              className=\"w-5 h-5 mr-2\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" \n              />\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" \n              />\n            </svg>\n            Tentar abrir no YouTube\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-8 max-w-4xl mx-auto\">\n      <h3 className=\"text-xl font-semibold text-green-800 mb-4\">\n        {tituloPersonalizado?.titulo || title}:\n      </h3>\n      \n      {/* Informações adicionais do título personalizado */}\n      {tituloPersonalizado && (\n        <div className=\"mb-4 p-4 bg-green-100 rounded-lg\">\n          {tituloPersonalizado.descricao && (\n            <p className=\"text-gray-700 mb-2\">{tituloPersonalizado.descricao}</p>\n          )}\n          \n          <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n            {tituloPersonalizado.categoria && (\n              <span className=\"capitalize bg-green-200 text-green-800 px-2 py-1 rounded\">\n                {tituloPersonalizado.categoria}\n              </span>\n            )}\n            {tituloPersonalizado.plataforma && (\n              <span className=\"capitalize\">\n                {tituloPersonalizado.plataforma}\n              </span>\n            )}\n            {tituloPersonalizado.duracao && (\n              <span>Duração: {tituloPersonalizado.duracao}</span>\n            )}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"rounded-lg overflow-hidden shadow-lg bg-white\">\n        <div className=\"relative pb-[56.25%] h-0\">\n          <iframe\n            className=\"absolute top-0 left-0 w-full h-full\"\n            src={`https://www.youtube.com/embed/${videoId}`}\n            title={tituloPersonalizado?.titulo || title}\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            loading=\"lazy\"\n            referrerPolicy=\"origin\"\n          />\n        </div>\n      </div>\n      \n      <div className=\"mt-4 text-center\">\n        <a\n          href={videoUrl}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"inline-flex items-center text-green-700 hover:text-green-800 hover:underline\"\n        >\n          <svg \n            className=\"w-5 h-5 mr-2\" \n            fill=\"none\" \n            stroke=\"currentColor\" \n            viewBox=\"0 0 24 24\"\n          >\n            <path \n              strokeLinecap=\"round\" \n              strokeLinejoin=\"round\" \n              strokeWidth={2} \n              d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" \n            />\n          </svg>\n          Ver vídeo no YouTube\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(VideoPlayer); ","import React, { useRef, useState, useEffect } from \"react\";\nimport { useShare } from \"../hooks/useShare\";\nimport { useDynamicURL } from \"../hooks/useDynamicURL\";\nimport { useClickOutside } from \"../hooks/useClickOutside\";\nimport useAudio from \"../hooks/useAudio\";\nimport useDocumentosEscola from \"../hooks/useDocumentosEscola\";\n\n// Import modular components\nimport EscolaInfo from \"./components/EscolaInfo\";\nimport TerraIndigenaInfo from \"./TerraIndigenaInfo\";\nimport ShareSection from \"./ShareSection\";\nimport IntroPanel from \"./IntroPanel\";\nimport PainelContainer from \"./components/PainelContainer\";\nimport DocumentViewer from \"./components/DocumentViewer\";\nimport VideoPlayer from \"./components/VideoPlayer\";\n\nconst PainelInformacoes = ({ painelInfo, closePainel, escola_id, refreshKey = 0 }) => {\n  const painelRef = useRef(null);\n  const [isMaximized, setIsMaximized] = useState(false);\n  \n  const { gerarLinkCustomizado, copiarLink, compartilhar } = useShare(painelInfo);\n  const { documentos } = useDocumentosEscola(painelInfo?.id);\n  \n  const toggleMaximize = () => setIsMaximized(prev => !prev);\n  \n  useDynamicURL(painelInfo, gerarLinkCustomizado);\n  useClickOutside(painelRef, closePainel);\n\n  // Forçar re-renderização quando refreshKey mudar\n  useEffect(() => {\n    console.log('PainelInformacoes: refreshKey mudou para', refreshKey);\n  }, [refreshKey]);\n\n  if (!painelInfo) {\n    return null;\n  }\n\n  // Determine panel type\n  const isTerraIndigena = painelInfo.tipo === 'terra_indigena';\n  const isIntro = painelInfo.titulo === 'Sobre o site';\n\n  const renderContent = () => {\n    if (isIntro) {\n      return <IntroPanel painelInfo={painelInfo} />;\n    }\n    \n    if (isTerraIndigena) {\n      return <TerraIndigenaInfo terraIndigena={painelInfo} />;\n    }\n\n    return (\n      <>\n        <EscolaInfo \n          escola={painelInfo} \n          shouldUseGrid={true}\n          refreshKey={refreshKey}\n        />\n        {documentos && documentos.length > 0 && (\n          <DocumentViewer \n            documentos={documentos}\n            title=\"Produções e materiais da escola\"\n          />\n        )}\n        {painelInfo.link_para_videos && (\n          <VideoPlayer \n            videoUrl={painelInfo.link_para_videos}\n            title=\"Vídeo da escola\"\n            escolaId={painelInfo.id}\n          />\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div ref={painelRef}>\n      <PainelContainer\n        painelInfo={painelInfo}\n        closePainel={closePainel}\n        isMaximized={isMaximized}\n        onToggleMaximize={toggleMaximize}\n      >\n        {renderContent()}\n        <ShareSection \n          copiarLink={copiarLink} \n          compartilhar={compartilhar} \n          painelInfo={painelInfo}\n        />\n      </PainelContainer>\n    </div>\n  );\n};\n\nexport default React.memo(PainelInformacoes); ","import { criarSlug } from '../../utils/slug';\n\nexport const useShare = (painelInfo) => {\n  const gerarLinkCustomizado = () => {\n    return (\n      window.location.origin +\n      window.location.pathname +\n      \"?panel=\" +\n      criarSlug(painelInfo.titulo)\n    );\n  };\n\n  const copiarLink = async () => {\n    const url = gerarLinkCustomizado();\n    try {\n      await navigator.clipboard.writeText(url);\n      alert(\"Link copiado!\");\n    } catch (err) {\n      const input = document.createElement(\"input\");\n      input.value = url;\n      document.body.appendChild(input);\n      input.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(input);\n      alert(\"Link copiado!\");\n    }\n  };\n\n  const compartilhar = () => {\n    const url = gerarLinkCustomizado();\n    const texto = `Confira este painel: ${painelInfo.titulo}`;\n    \n    if (navigator.share) {\n      navigator.share({\n        title: painelInfo.titulo,\n        text: texto,\n        url: url,\n      });\n    } else {\n      window.open(\n        `https://twitter.com/intent/tweet?text=${encodeURIComponent(texto)}&url=${encodeURIComponent(url)}`,\n        \"_blank\"\n      );\n    }\n  };\n\n  return { gerarLinkCustomizado, copiarLink, compartilhar };\n};","import { useEffect } from 'react';\n\nexport const useClickOutside = (ref, handler) => {\n  useEffect(() => {\n    const listener = (event) => {\n      // Só fecha se o clique for no mapa (openlayers-container)\n      const el = event.target;\n      if (el.classList && el.classList.contains('openlayers-container')) {\n        return;\n      }\n      \n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n      handler(event);\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n\n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler]);\n};","import { useEffect, useRef } from \"react\";\n\nexport const useDynamicURL = (painelInfo, gerarLinkCustomizado) => {\n  const lastUrlRef = useRef(null);\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (!painelInfo) return;\n\n    // Limpa o timeout anterior se existir\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // Cria um novo timeout para debounce\n    timeoutRef.current = setTimeout(() => {\n      const newUrl = gerarLinkCustomizado();\n      \n      // Só atualiza se a URL realmente mudou\n      if (newUrl !== lastUrlRef.current) {\n        try {\n          window.history.replaceState({}, \"\", newUrl);\n          lastUrlRef.current = newUrl;\n        } catch (error) {\n          console.warn('Erro ao atualizar URL:', error);\n        }\n      }\n    }, 300); // 300ms de debounce\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [painelInfo, gerarLinkCustomizado]);\n};","/**\n * Componente MapaEscolasIndigenas - Exibe o mapa interativo com escolas indígenas e terras indígenas\n * \n * @param {Object} props - Propriedades do componente\n * @param {Array} props.dataPoints - Array de pontos de dados das escolas\n * @param {Function} props.onPainelOpen - Função para abrir o painel de informações\n * @returns {React.ReactElement} - Componente renderizado\n */\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport MapSelector from \"./MapSelector\";\nimport PainelInformacoes from \"./PainelInformacoes\";\nimport \"./MapaEscolasIndigenas.css\";\nimport { criarSlug } from '../utils/slug';\nimport { useRefresh } from '../contexts/RefreshContext';\n\nconst MapaEscolasIndigenas = ({ dataPoints, onPainelOpen }) => {\n  console.log(\"DataPoints recebidos no MapaEscolasIndigenas:\", dataPoints ? {\n    quantidade: dataPoints.length,\n    exemplo: dataPoints[0] ? {\n      titulo: dataPoints[0].titulo,\n      latitude: dataPoints[0].Latitude,\n      longitude: dataPoints[0].Longitude,\n      tipo: dataPoints[0].tipo\n    } : 'Nenhum ponto'\n  } : 'Nenhum dataPoint');\n\n  const { refreshKey } = useRefresh();\n\n  const urlParams = useMemo(() => new URLSearchParams(window.location.search), []);\n  const panel = urlParams.get('panel');\n  const initialPanel = useMemo(() => {\n    if (panel && panel !== '' && dataPoints && dataPoints.length > 0) {\n      const pointFound = dataPoints.find((item) => criarSlug(item.titulo) === panel);\n      return pointFound || null;\n    }\n    return null;\n  }, [panel, dataPoints]);\n\n  const [painelInfo, setPainelInfo] = useState(initialPanel);\n  const [initialPanelOpened, setInitialPanelOpened] = useState(!!initialPanel);\n  \n  // Memoize escolasVisiveis para evitar recálculos desnecessários\n  const escolasVisiveis = useMemo(() => \n    dataPoints ? dataPoints.filter(point => point.pontuacao >= 0) : [],\n    [dataPoints]\n  );\n  \n  const totalEscolas = useMemo(() => escolasVisiveis.length, [escolasVisiveis]);\n\n  // Abrir painel automaticamente quando initialPanel for encontrado (apenas uma vez)\n  useEffect(() => {\n    if (initialPanel && !painelInfo && !initialPanelOpened) {\n      console.log('MapaEscolasIndigenas: Abrindo painel automaticamente para:', initialPanel.titulo);\n      setPainelInfo(initialPanel);\n      setInitialPanelOpened(true);\n    }\n  }, [initialPanel, painelInfo, initialPanelOpened]);\n\n  // Adicionar useEffect para monitorar mudanças no painelInfo\n  useEffect(() => {\n    console.group(\"MapaEscolasIndigenas - painelInfo state changed\");\n    console.log(\"Novo valor de painelInfo:\", {\n      titulo: painelInfo?.titulo,\n      tipo: painelInfo?.tipo,\n      hasLink: !!painelInfo?.link_para_documentos,\n      linkValue: painelInfo?.link_para_documentos,\n      isInitialPanel: painelInfo === initialPanel,\n      isNull: painelInfo === null,\n      isUndefined: painelInfo === undefined\n    });\n    console.groupEnd();\n  }, [painelInfo, initialPanel]);\n\n  // Otimizar a função de abrir painel\n  const abrirPainel = useCallback((info) => {\n    if (!info) return;\n    setPainelInfo(info);\n  }, []);\n\n  // Função para forçar refresh do painel\n  const refreshPainel = useCallback(() => {\n    console.log('Forçando refresh do painel de informações');\n    // O refresh será disparado pelo contexto\n  }, []);\n\n  // Expor a função abrirPainel e refreshPainel para componentes externos\n  useEffect(() => {\n    console.log('MapaEscolasIndigenas: onPainelOpen disponível:', !!onPainelOpen);\n    console.log('MapaEscolasIndigenas: abrirPainel disponível:', !!abrirPainel);\n    if (onPainelOpen && typeof onPainelOpen === 'function') {\n      console.log('MapaEscolasIndigenas: Expondo função abrirPainel e refreshPainel');\n      onPainelOpen(abrirPainel, refreshPainel);\n    }\n  }, [abrirPainel, onPainelOpen, refreshPainel]);\n\n  // Otimizar a função de fechar painel\n  const fecharPainel = useCallback(() => {\n    setPainelInfo(null);\n  }, []);\n\n  return (\n    <div className=\"relative h-screen w-full overflow-hidden\">\n      {/* Novo mapa sem gaps */}\n      <MapSelector\n        dataPoints={escolasVisiveis}\n        onPainelOpen={abrirPainel}\n        painelAberto={!!painelInfo}\n        className=\"h-full w-full\"\n      />\n\n      {/* Painel de informações */}\n      {painelInfo && (\n        <>\n          {console.log(\"MapaEscolasIndigenas - Renderizando PainelInformacoes com:\", {\n            painelInfo,\n            hasLink: painelInfo?.link_para_documentos,\n            linkValue: painelInfo?.link_para_documentos\n          })}\n          <PainelInformacoes \n            painelInfo={painelInfo} \n            closePainel={fecharPainel} \n            refreshKey={refreshKey}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default MapaEscolasIndigenas;"],"names":["MARKER_SVG_PATH","concat","process","createMarkerStyle","feature","showNames","arguments","length","undefined","markerData","get","isNearbyPair","markerStyle","Style","image","Icon","src","scale","anchor","anchorXUnits","anchorYUnits","geometry","getGeometry","titulo","text","Text","font","fill","Fill","color","stroke","Stroke","width","offsetY","textAlign","OpenLayersInteractions","constructor","map","options","this","_objectSpread","enableHover","enableClick","enableDoubleClick","enableTouch","hoverDelay","clickDelay","eventHandlers","Map","hoveredFeature","clickedFeature","clickTimeout","hoverTimeout","tooltipElement","console","log","initializeInteractions","isMobile","window","innerWidth","setupHoverInteraction","setupClickInteraction","setupDoubleClickInteraction","setupTouchInteraction","on","event","handlePointerMove","handlePointerLeave","handleClick","handleDoubleClick","forEachFeatureAtPixel","pixel","type","schoolData","terraIndigenaInfo","clearHover","applyHover","handleMobileClick","clearTimeout","setTimeout","executeClickHandler","executeDoubleClickHandler","handleTouchEnd","forceHideTooltip","showTooltip","executeHoverHandler","applyHoverStyle","clearHoverStyle","hideTooltip","executeHoverOutHandler","hoverStyleFunction","tooltipContent","getTooltipContent","createTooltipElement","getTargetElement","appendChild","remove","content","element","document","createElement","className","innerHTML","tooltipStyles","includes","backgroundColor","Object","assign","style","position","padding","borderRadius","fontSize","fontFamily","fontWeight","pointerEvents","zIndex","maxWidth","whiteSpace","overflow","textOverflow","boxShadow","coordinate","getPixelFromCoordinate","left","top","tooltipContentFunction","handler","eventType","set","off","delete","clearHandlers","clear","updateOptions","newOptions","destroy","createDefaultInteractions","MAP_CONFIG","center","zoom","maxZoom","minZoom","mobile","clusterDistance","clusterMinDistance","clusterAnimationDuration","proximityThreshold","disableClusteringAtZoom","tooltipOffset","tooltipDelay","interaction","performance","enableLazyLoading","maxFeaturesPerTile","enableFeatureCulling","enableTileCaching","ANIMATION_CONFIG","duration","marker","cluster","pan","easing","MARKER_COLORS","small","medium","large","xlarge","CLUSTER_SIZES","min","max","size","PROJECTION_CONFIG","BASE_LAYER_CONFIG","url","attributions","wrapX","tilePixelRatio","tileSize","_ref","dataPoints","onPainelOpen","showMarcadores","showNomesEscolas","vectorSourceRef","useRef","vectorLayerRef","hoveredMarker","setHoveredMarker","React","selectedMarker","setSelectedMarker","isMobileDevice","useMemo","initializeMarkers","useCallback","current","VectorSource","VectorLayer","source","addLayer","setupInteractions","interactions","onMarkerClick","onMarkerHover","createMarkerInteractions","handleMarkerClick","handleMarkerHover","handleMarkerHoverOut","setStyle","f","baseStyle","hoverStyle","Array","isArray","changed","updateMarkers","pontosValidos","filter","point","latitude","longitude","lat","parseFloat","lng","isNaN","forEach","index","Feature","Point","fromLonLat","municipio","Municipio","uf","UF","addFeature","updateMarkerStyles","useEffect","removeLayer","_jsx","LAYER_COLORS","terrasIndigenas","regularizada","hover","declarada","estadoSP","createTerrasIndigenasStyle","isHovered","properties","colorConfig","fase_ti","colors","lineDash","data","showTerrasIndigenas","interactionsRef","setHoveredFeature","selectedFeature","setSelectedFeature","features","setFeatures","initializeLayer","geoJSONFeatures","GeoJSON","dataProjection","featureProjection","readFeatures","getProperties","terrai_nom","tipo","etnia","etnia_nome","municipio_","uf_sigla","superficie","fase","modalidade","reestudo","reestudo_t","cr","faixa_fron","undadm_nom","undadm_sig","dominio_un","data_atual","terrai_cod","undadm_cod","error","warn","onFeatureClick","onFeatureHover","createGeoJSONInteractions","handleFeatureClick","handleFeatureHover","handleFeatureHoverOut","extent","getExtent","getView","fit","applySelectionStyleToFeature","selectionOptions","fillColor","strokeColor","strokeWidth","selectionStyle","applySelectionStyle","removeSelectionStyleFromFeature","timeout","showEstadoSP","createEstadoSPStyle","interactive","terrasIndigenasData","estadoSPData","terrasIndigenasRef","estadoSPRef","layersStatus","setLayersStatus","visible","loaded","hasValidData","updateLayerStatus","layerName","updates","prev","handleLayerError","message","handleLayerSuccess","getLayersStats","stats","total","errors","values","layer","getLayersInfo","hasData","featureCount","info","_jsxs","children","OpenLayersTerrasIndigenas","ref","onLoad","onError","OpenLayersEstadoSP","props","id","proj4","defs","register","mapContainer","baseLayer","mapInfo","setMapInfo","useState","initialCenter","initialZoom","createBaseLayers","satelliteLayer","TileLayer","XYZ","preload","useInterimTilesOnError","initializeMap","target","layers","view","View","enableRotation","controls","defaultControls","defaultInteractions","dragRotate","pinchRotate","toLonLat","getCenter","newView","toFixed","getZoom","updateMapConfig","newCenter","newZoom","currentCenter","currentZoom","setCenter","setZoom","setTarget","MapWrapper","_Fragment","OpenLayersMarkers","OpenLayersLayers","cache","useGeoJSONCache","key","setData","loading","setLoading","setError","async","_geoJSON$features","_geoJSON$features2","response","fetch","ok","Error","status","geoJSON","json","crs","firstFeature","keys","coordinates","err","fetchGeoJSON","painelAberto","terrasLoading","terrasError","estadoLoading","estadoError","setShowTerrasIndigenas","setShowEstadoSP","setShowMarcadores","setIsMobile","isMinimized","setIsMinimized","checkMobile","addEventListener","removeEventListener","handleMinimize","_terrasIndigenasData$","_terrasIndigenasData$2","_estadoSPData$feature","_estadoSPData$feature2","shouldReactivate","CabecalhoMenu","_ref2","onMinimize","viewBox","strokeLinecap","strokeLinejoin","d","onClick","BotaoCamada","_ref3","label","checked","onChange","disabled","subItems","item","cx","cy","r","mapCenter","mapZoom","mobileZoom","desktopZoom","selectedZoom","mobileCenter","desktopCenter","selectedCenter","OpenLayersMap","criarSlug","texto","toLowerCase","normalize","replace","trim","escolaId","documentos","setDocumentos","isLoading","setIsLoading","authData","authError","supabase","auth","getSession","temSessao","session","rlsData","rlsError","from","select","limit","podeAcessar","code","details","hint","allDocs","allDocsError","doc","escola_id","tipo_escola_id","valor_escola_id","eq","toString","order","ascending","dataAsNumber","errorAsNumber","Number","dataAsString","errorAsString","String","count","fetchDocumentos","InfoGrid","memo","columns","gap","InfoTable","row","value","InfoStats","_ref4","stat","icon","_ref5","title","description","defaultCollapsed","layout","layoutProps","isCollapsed","setIsCollapsed","role","renderContent","capitalize","str","charAt","toUpperCase","slice","CompactCard","Check","X","InfoBlock","AddressDetails","escola","logradouro","numero","bairro","cep","endereco","field","MapPin","estado","Boolean","join","MapButton","Latitude","Longitude","openMap","open","Navigation","SocialLinks","_ref6","links","expanded","onToggle","socialLinks","split","social","Globe","ChevronRight","link","href","rel","LinkIcon","ExternalLink","_ref7","setExpanded","toggle","basicInfoCards","Building","Calendar","ano_criacao","usa_redes_sociais","povos_indigenas","InfoSection","diretoria_ensino","links_redes_sociais","ImagensdasEscolas","refreshKey","imagens","setImagens","imagemZoom","setImagemZoom","cacheRef","cacheVersion","setCacheVersion","limparCacheERecarregar","fecharZoom","body","handleEsc","e","cacheKey","files","storage","list","imagensEncontradas","Promise","all","file","_legenda","_legenda2","_legenda3","_legenda4","_legenda5","filePath","name","publicUrl","getPublicUrl","legenda","getLegendaByImageUrl","publicURL","descricao","descricaoDetalhada","descricao_detalhada","autor","autor_foto","dataFoto","data_foto","categoria","urlError","buscarImagens","RefreshCw","img","alt","maxHeight","Date","toLocaleDateString","stopPropagation","historia_da_escola","marginTop","ExpandableList","items","maxVisible","idx","minWidth","display","MiniCard","turnosValue","turnos_funcionamento","modalidadeList","modalidade_ensino","Sparkles","gridItems","Clock","Users","numero_alunos","MessageCircle","linguas_faladas","materiaisItems","BookOpen","BooleanValue","material_nao_indigena","material_indigena","Droplet","acesso_agua","Trash2","coleta_lixo","Wifi","acesso_internet","Monitor","equipamentos","modo_acesso","Utensils","cozinha","Apple","merenda_escolar","ChefHat","diferenciada","Home","espaco_escolar","renderBooleanStatus","valor","normalizado","formacao","resto","formatarFormacaoProfessores","formacao_professores","continuada","formatarFormacaoContinuada","formacao_continuada","UsersRound","UserCheck","professores_indigenas","UserMinus","professores_nao_indigenas","professores_falam_lingua","Star","User","gestao","outros_funcionarios","NotebookPen","ProjectCard","isNegative","availableProjects","GraduationCap","Heart","Target","project","ImagemHistoriadoProfessor","then","imagensComUrl","genero","startsWith","caminhoRelativo","nome","created_at","catch","historias","setHistorias","currentHistoriaIndex","setCurrentHistoriaIndex","getHistoriasProfessor","carregarHistorias","nextHistoria","prevHistoria","handleKeyDown","currentHistoria","hasMultipleHistorias","margin","border","outline","nome_professor","dangerouslySetInnerHTML","__html","historia","imagem_public_url","descricao_imagem","ChevronLeft","_","GridLayoutWrapper","shouldUseGrid","containerClasses","gridSections","Component","BasicInfo","Modalidades","Infraestrutura","GestaoProfessores","ProjetosParcerias","HistoriaEscola","HistoriadoProfessor","_objectWithoutProperties","_excluded","xmlns","isTextArea","baseClasses","LargeHandFistIcon","HandFistIcon","terraIndigena","InfoItem","Tooltip","isVisible","setIsVisible","onMouseEnter","onMouseLeave","onFocus","onBlur","bottom","ShareButton","copied","setCopied","shareTextOptions","shareText","Math","floor","random","shareUrl","location","navigator","clipboard","writeText","input","execCommand","removeChild","WhatsappShareButton","WhatsappIcon","round","FacebookShareButton","quote","FacebookIcon","TwitterShareButton","TwitterIcon","LinkedinShareButton","summary","LinkedinIcon","share","copiarLink","compartilhar","painelInfo","gerarLinkCustomizado","origin","pathname","PainelDescricao","sanitizedHTML","DOMPurify","sanitize","formattedText","endsWith","formatText","ALLOWED_TAGS","ALLOWED_ATTR","ADD_TAGS","ADD_ATTR","KEEP_CONTENT","ALLOW_DATA_ATTR","lineHeight","letterSpacing","audioUrl","SIGLAS_MAIUSCULAS","capitalizeWords","word","substr","closePainel","toggleMaximize","isMaximized","isMobileLandscape","innerHeight","isVerySmallLandscape","Minimize2","Maximize2","isMobileWidth","group","groupEnd","PainelContainer","onToggleMaximize","usePainelVisibility","painelDimensions","usePainelDimensions","windowWidth","setWindowWidth","windowHeight","setWindowHeight","breakpoints","sm","md","lg","xl","handleResize","dimensions","baseHeight","isDesktop","panelWidth","height","navbarHeight","visibilityClasses","flexDirection","PainelHeader","transformarLinkGoogleDrive","match","fileId","ViewModeToggle","viewMode","setViewMode","tabIndex","DocumentViewer","selectedDoc","setSelectedDoc","iframeRef","iframeError","setIframeError","useGoogleDocsViewer","setUseGoogleDocsViewer","iframe","handleLoad","handleError","autoria","renderDocumentViewer","isGoogleDriveLink","link_pdf","allow","sandbox","VideoPlayer","videoUrl","tituloPersonalizado","setTituloPersonalizado","getTituloByVideoUrl","buscarTitulo","videoId","baseUrl","patterns","pattern","extrairIdYoutube","plataforma","duracao","frameBorder","allowFullScreen","referrerPolicy","PainelInformacoes","painelRef","setIsMaximized","alert","encodeURIComponent","useShare","useDocumentosEscola","useClickOutside","useDynamicURL","lastUrlRef","timeoutRef","newUrl","history","replaceState","listener","el","classList","contains","isTerraIndigena","isIntro","IntroPanel","TerraIndigenaInfo","EscolaInfo","link_para_videos","ShareSection","quantidade","exemplo","useRefresh","panel","URLSearchParams","search","initialPanel","find","setPainelInfo","initialPanelOpened","setInitialPanelOpened","escolasVisiveis","pontuacao","hasLink","link_para_documentos","linkValue","isInitialPanel","isNull","isUndefined","abrirPainel","refreshPainel","fecharPainel","MapSelector"],"sourceRoot":""}