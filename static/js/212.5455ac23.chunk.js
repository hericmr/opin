/*! For license information please see 212.5455ac23.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmapa_santos=self.webpackChunkmapa_santos||[]).push([[212],{193:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1184:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1440:(e,a,s)=>{s.d(a,{BZ:()=>p,Gw:()=>g,gE:()=>d,vS:()=>u,vx:()=>x,wG:()=>m});var r=s(2555),o=s(2880);const t={BUCKET_NAME:"imagens-das-escolas",MAX_FILE_SIZE:5242880,ALLOWED_TYPES:["image/jpeg","image/jpg","image/png","image/webp","image/gif"],MAX_IMAGES_PER_SCHOOL:10,MIN_DIMENSIONS:{width:200,height:200}},l={BUCKET_NAME:"imagens-professores",MAX_FILE_SIZE:5242880,ALLOWED_TYPES:["image/jpeg","image/jpg","image/png","image/webp","image/gif"],MAX_IMAGES_PER_SCHOOL:5,MIN_DIMENSIONS:{width:200,height:200}},i=(e,a)=>{if(!a.ALLOWED_TYPES.includes(e.type))return{isValid:!1,error:"Tipo de arquivo n\xe3o suportado. Use apenas: ".concat(a.ALLOWED_TYPES.map((e=>e.split("/")[1].toUpperCase())).join(", "))};if(e.size>a.MAX_FILE_SIZE)return{isValid:!1,error:"Arquivo muito grande. Tamanho m\xe1ximo: ".concat(a.MAX_FILE_SIZE/1048576,"MB")};const s=e.name.split(".").pop().toLowerCase(),r=a.ALLOWED_TYPES.map((e=>e.split("/")[1]));return r.includes(s)?{isValid:!0}:{isValid:!1,error:"Extens\xe3o n\xe3o permitida. Use apenas: ".concat(r.join(", "))}},n=(e,a)=>{const s=Date.now(),r=Math.random().toString(36).substring(2,8),o=e.name.split(".").pop().toLowerCase();return"".concat(a,"_").concat(s,"_").concat(r,".").concat(o)},c=async(e,a)=>new Promise((s=>{const r=new Image;r.onload=()=>{const e=r.width>=a.MIN_DIMENSIONS.width&&r.height>=a.MIN_DIMENSIONS.height;s(e)},r.onerror=()=>s(!1),r.src=URL.createObjectURL(e)})),d=async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=i(e,t);if(!r.isValid)throw new Error(r.error);await c(e,t)||console.warn("Imagem com dimens\xf5es menores que o recomendado");const l=n(e,a),d="".concat(a,"/").concat(l),{error:m}=await o.N.storage.from(t.BUCKET_NAME).upload(d,e,{cacheControl:"3600",upsert:!1});if(m)throw new Error("Erro no upload: ".concat(m.message));const{data:{publicUrl:g}}=o.N.storage.from(t.BUCKET_NAME).getPublicUrl(d),{data:u,error:x}=await o.N.from("imagens_escola").insert([{escola_id:a,url:d,descricao:s.trim()||"Imagem da escola ".concat(a)}]).select().single();if(x)throw await o.N.storage.from(t.BUCKET_NAME).remove([d]),new Error("Erro ao salvar metadados: ".concat(x.message));return{id:u.id,url:d,publicUrl:g,descricao:u.descricao,created_at:u.created_at}}catch(r){throw console.error("Erro no upload da imagem da escola:",r),r}},m=async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const r=i(e,l);if(!r.isValid)throw new Error(r.error);await c(e,l)||console.warn("Imagem com dimens\xf5es menores que o recomendado");const t=n(e,a),d="".concat(a,"/").concat(t),{error:m}=await o.N.storage.from(l.BUCKET_NAME).upload(d,e,{cacheControl:"3600",upsert:!1});if(m)throw new Error("Erro no upload: ".concat(m.message));const{data:{publicUrl:g}}=o.N.storage.from(l.BUCKET_NAME).getPublicUrl(d),{data:u,error:x}=await o.N.from("imagens_escola").insert([{escola_id:a,url:d,descricao:s.trim()||"Imagem do professor da escola ".concat(a)}]).select().single();if(x)throw await o.N.storage.from(l.BUCKET_NAME).remove([d]),new Error("Erro ao salvar metadados: ".concat(x.message));return{id:u.id,url:d,publicUrl:g,descricao:u.descricao,created_at:u.created_at}}catch(r){throw console.error("Erro no upload da imagem do professor:",r),r}},g=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.BUCKET_NAME;try{const s="".concat(e,"/%"),{data:t,error:l}=await o.N.from("imagens_escola").select("*").like("url",s).order("created_at",{ascending:!0});if(l)throw l;if(!t||0===t.length)return[];return t.map((e=>{try{const{data:{publicUrl:s}}=o.N.storage.from(a).getPublicUrl(e.url);return(0,r.A)((0,r.A)({},e),{},{publicUrl:s})}catch(s){return(0,r.A)((0,r.A)({},e),{},{publicUrl:null,urlError:s.message})}}))}catch(s){throw console.error("Erro ao buscar imagens da escola:",s),s}},u=async(e,a,s)=>{try{const{error:r}=await o.N.from("imagens_escola").delete().eq("id",e);if(r)throw new Error("Erro ao deletar metadados: ".concat(r.message));const{error:t}=await o.N.storage.from(s).remove([a]);t&&console.warn("Arquivo n\xe3o encontrado no storage, mas metadados foram deletados")}catch(r){throw console.error("Erro ao deletar imagem:",r),r}},x=async(e,a)=>{try{const{data:s,error:r}=await o.N.from("imagens_escola").update({descricao:a.trim()}).eq("id",e).select().single();if(r)throw r;return s}catch(s){throw console.error("Erro ao atualizar descri\xe7\xe3o da imagem:",s),s}},p=async(e,a)=>{try{const s=a===l.BUCKET_NAME?l:t,r="".concat(e,"/%"),{count:i,error:n}=await o.N.from("imagens_escola").select("*",{count:"exact",head:!0}).like("url",r);if(n)throw n;return{current:i||0,limit:s.MAX_IMAGES_PER_SCHOOL,canUpload:(i||0)<s.MAX_IMAGES_PER_SCHOOL}}catch(s){throw console.error("Erro ao verificar limite de imagens:",s),s}}},2481:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},3701:(e,a,s)=>{s.d(a,{A:()=>x});var r=s(2555),o=s(5043),t=s(4562),l=s(6478),i=s(193),n=s(256),c=s(7669),d=s(2481),m=s(1184),g=s(1440),u=s(579);const x=e=>{let{escolaId:a,onImagesUpdate:s}=e;const[x,p]=(0,o.useState)([]),[h,b]=(0,o.useState)(!1),[f,v]=(0,o.useState)(0),[y,j]=(0,o.useState)(""),[N,w]=(0,o.useState)(""),[E,A]=(0,o.useState)([]),[k,C]=(0,o.useState)(!0),[I,S]=(0,o.useState)({current:0,limit:5,canUpload:!0}),[_,M]=(0,o.useState)(null),[U,L]=(0,o.useState)(""),T=(0,o.useCallback)((async()=>{if(a)try{C(!0);const e=await(0,g.Gw)(a,"imagens-professores");A(e);const s=await(0,g.BZ)(a,"imagens-professores");S(s)}catch(e){console.error("Erro ao buscar imagens dos professores:",e),j("Erro ao carregar imagens dos professores")}finally{C(!1)}}),[a]);(0,o.useEffect)((()=>{T()}),[T]),(0,o.useEffect)((()=>{if(y||N){const e=setTimeout((()=>{j(""),w("")}),5e3);return()=>clearTimeout(e)}}),[y,N]);const z=(0,o.useCallback)((e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files);if(0===a.length)return;if(!I.canUpload)return void j("Limite de ".concat(I.limit," imagens dos professores atingido. Remova algumas imagens antes de adicionar novas."));if(E.length+x.length+a.length>I.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(I.limit-E.length-x.length," imagens dos professores."));const s=a.filter((e=>e.type.startsWith("image/")));s.length>0&&(p((e=>[...e,...s])),j(""))}),[I,E.length,x.length]),P=(0,o.useCallback)((e=>{e.preventDefault()}),[]);return k?(0,u.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,u.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),(0,u.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando imagens dos professores..."})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(t.A,{className:"w-5 h-5 text-green-600"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens dos Professores"})]}),(0,u.jsxs)("div",{className:"text-sm text-gray-500",children:[I.current,"/",I.limit," imagens"]})]}),y&&(0,u.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,u.jsx)(l.A,{className:"w-5 h-5 text-red-600"}),(0,u.jsx)("span",{className:"text-red-700",children:y})]}),N&&(0,u.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,u.jsx)(i.A,{className:"w-5 h-5 text-green-600"}),(0,u.jsx)("span",{className:"text-green-700",children:N})]}),I.canUpload&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(h?"border-gray-300 bg-gray-50":"border-green-300 bg-green-50 hover:border-green-400 hover:bg-green-100"),onDrop:z,onDragOver:P,children:[(0,u.jsx)(n.A,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,u.jsx)("p",{className:"text-gray-600 mb-2",children:"Arraste imagens dos professores aqui ou clique para selecionar"}),(0,u.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"JPG, PNG, WEBP, GIF \u2022 M\xe1ximo 5MB por arquivo \u2022 M\xe1ximo 5 imagens"}),(0,u.jsxs)("label",{className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors",children:[(0,u.jsx)("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:e=>{const a=Array.from(e.target.files);if(0===a.length)return;if(!I.canUpload)return void j("Limite de ".concat(I.limit," imagens dos professores atingido. Remova algumas imagens antes de adicionar novas."));if(E.length+x.length+a.length>I.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(I.limit-E.length-x.length," imagens dos professores."));const s=a.filter((e=>{const a=["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type),s=e.size<=5242880;return a||j('Arquivo "'.concat(e.name,'" n\xe3o \xe9 uma imagem v\xe1lida. Use apenas JPG, PNG, WEBP ou GIF.')),s||j('Arquivo "'.concat(e.name,'" \xe9 muito grande. Tamanho m\xe1ximo: 5MB.')),a&&s}));s.length>0&&(p((e=>[...e,...s])),j(""))},className:"hidden",disabled:h}),"Selecionar Arquivos"]})]}),h&&(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,u.jsx)("span",{children:"Fazendo upload das imagens dos professores..."}),(0,u.jsxs)("span",{children:[Math.round(f),"%"]})]}),(0,u.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,u.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(f,"%")}})})]}),x.length>0&&(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("h4",{className:"font-medium text-gray-900",children:["Arquivos selecionados (",x.length,")"]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(((e,a)=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-24 object-cover rounded-lg border"}),(0,u.jsx)("button",{onClick:()=>(e=>{p((a=>a.filter(((a,s)=>s!==e))))})(a),className:"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,u.jsx)(c.A,{className:"w-3 h-3"})}),(0,u.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name})]},a)))}),(0,u.jsx)("button",{onClick:async()=>{if(0!==x.length){b(!0),v(0),j("");try{const e=[];for(let s=0;s<x.length;s++){const r=x[s],o=(s+1)/x.length*100;v(o);const t=await(0,g.wG)(r,a);e.push(t)}A((a=>[...a,...e])),p([]),v(0),w("".concat(e.length," imagem(ns) do(s) professor(es) carregada(s) com sucesso!"));const r=await(0,g.BZ)(a,"imagens-professores");S(r),s&&s()}catch(e){console.error("Erro no upload:",e),j("Erro ao fazer upload: ".concat(e.message))}finally{b(!1),v(0)}}},disabled:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Fazendo Upload...":"Fazer Upload"})]})]}),E.length>0&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"font-medium text-gray-900",children:["Imagens dos Professores (",E.length,")"]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:E.map((e=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:e.publicUrl,alt:e.descricao||"Imagem do professor",className:"w-full h-32 object-cover rounded-lg border"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,u.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,u.jsx)("button",{onClick:()=>{M(e.id),L(e.descricao||"")},className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700",title:"Editar descri\xe7\xe3o",children:(0,u.jsx)(d.A,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:()=>(async(e,r)=>{if(window.confirm("Tem certeza que deseja excluir esta imagem do professor?"))try{await(0,g.vS)(e,r,"imagens-professores"),A((a=>a.filter((a=>a.id!==e))));const o=await(0,g.BZ)(a,"imagens-professores");S(o),w("Imagem do professor exclu\xedda com sucesso!"),s&&s()}catch(o){console.error("Erro ao deletar imagem:",o),j("Erro ao excluir imagem: ".concat(o.message))}})(e.id,e.url),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Excluir imagem",children:(0,u.jsx)(m.A,{className:"w-4 h-4"})})]})}),e.descricao&&(0,u.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.descricao})]},e.id)))})]}),_&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Editar Descri\xe7\xe3o"}),(0,u.jsx)("textarea",{value:U,onChange:e=>L(e.target.value),className:"w-full p-3 border rounded-lg resize-none",rows:"3",placeholder:"Digite a descri\xe7\xe3o da imagem do professor..."}),(0,u.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,u.jsx)("button",{onClick:()=>(async e=>{if(U.trim())try{await(0,g.vx)(e,U),A((a=>a.map((a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{descricao:U.trim()}):a)))),M(null),L(""),w("Descri\xe7\xe3o atualizada com sucesso!")}catch(a){console.error("Erro ao atualizar descri\xe7\xe3o:",a),j("Erro ao atualizar descri\xe7\xe3o: ".concat(a.message))}})(_),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Salvar"}),(0,u.jsx)("button",{onClick:()=>{M(null),L("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})}),0===E.length&&!h&&(0,u.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,u.jsx)(t.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,u.jsx)("p",{children:"Nenhuma imagem dos professores adicionada ainda."}),(0,u.jsx)("p",{className:"text-sm",children:"Adicione imagens para mostrar os professores da escola."})]})]})}},4562:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6464:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7484:(e,a,s)=>{s.d(a,{A:()=>x});var r=s(2555),o=s(5043),t=s(6464),l=s(6478),i=s(193),n=s(256),c=s(7669),d=s(2481),m=s(1184),g=s(1440),u=s(579);const x=e=>{let{escolaId:a,onImagesUpdate:s}=e;const[x,p]=(0,o.useState)([]),[h,b]=(0,o.useState)(!1),[f,v]=(0,o.useState)(0),[y,j]=(0,o.useState)(""),[N,w]=(0,o.useState)(""),[E,A]=(0,o.useState)([]),[k,C]=(0,o.useState)(!0),[I,S]=(0,o.useState)({current:0,limit:10,canUpload:!0}),[_,M]=(0,o.useState)(null),[U,L]=(0,o.useState)(""),T=(0,o.useCallback)((async()=>{if(a)try{C(!0);const e=await(0,g.Gw)(a,"imagens-das-escolas");A(e);const s=await(0,g.BZ)(a,"imagens-das-escolas");S(s)}catch(e){console.error("Erro ao buscar imagens:",e),j("Erro ao carregar imagens existentes")}finally{C(!1)}}),[a]);(0,o.useEffect)((()=>{T()}),[T]),(0,o.useEffect)((()=>{if(y||N){const e=setTimeout((()=>{j(""),w("")}),5e3);return()=>clearTimeout(e)}}),[y,N]);const z=(0,o.useCallback)((e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files);if(0===a.length)return;if(!I.canUpload)return void j("Limite de ".concat(I.limit," imagens atingido. Remova algumas imagens antes de adicionar novas."));if(E.length+x.length+a.length>I.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(I.limit-E.length-x.length," imagens."));const s=a.filter((e=>e.type.startsWith("image/")));s.length>0&&(p((e=>[...e,...s])),j(""))}),[I,E.length,x.length]),P=(0,o.useCallback)((e=>{e.preventDefault()}),[]);return k?(0,u.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,u.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,u.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando imagens..."})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(t.A,{className:"w-5 h-5 text-blue-600"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens da Escola"})]}),(0,u.jsxs)("div",{className:"text-sm text-gray-500",children:[I.current,"/",I.limit," imagens"]})]}),y&&(0,u.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,u.jsx)(l.A,{className:"w-5 h-5 text-red-600"}),(0,u.jsx)("span",{className:"text-red-700",children:y})]}),N&&(0,u.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,u.jsx)(i.A,{className:"w-5 h-5 text-green-600"}),(0,u.jsx)("span",{className:"text-green-700",children:N})]}),I.canUpload&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(h?"border-gray-300 bg-gray-50":"border-blue-300 bg-blue-50 hover:border-blue-400 hover:bg-blue-100"),onDrop:z,onDragOver:P,children:[(0,u.jsx)(n.A,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,u.jsx)("p",{className:"text-gray-600 mb-2",children:"Arraste imagens aqui ou clique para selecionar"}),(0,u.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"JPG, PNG, WEBP, GIF \u2022 M\xe1ximo 5MB por arquivo"}),(0,u.jsxs)("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[(0,u.jsx)("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:e=>{const a=Array.from(e.target.files);if(0===a.length)return;if(!I.canUpload)return void j("Limite de ".concat(I.limit," imagens atingido. Remova algumas imagens antes de adicionar novas."));if(E.length+x.length+a.length>I.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(I.limit-E.length-x.length," imagens."));const s=a.filter((e=>{const a=["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type),s=e.size<=5242880;return a||j('Arquivo "'.concat(e.name,'" n\xe3o \xe9 uma imagem v\xe1lida. Use apenas JPG, PNG, WEBP ou GIF.')),s||j('Arquivo "'.concat(e.name,'" \xe9 muito grande. Tamanho m\xe1ximo: 5MB.')),a&&s}));s.length>0&&(p((e=>[...e,...s])),j(""))},className:"hidden",disabled:h}),"Selecionar Arquivos"]})]}),h&&(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,u.jsx)("span",{children:"Fazendo upload..."}),(0,u.jsxs)("span",{children:[Math.round(f),"%"]})]}),(0,u.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,u.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(f,"%")}})})]}),x.length>0&&(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("h4",{className:"font-medium text-gray-900",children:["Arquivos selecionados (",x.length,")"]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(((e,a)=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-24 object-cover rounded-lg border"}),(0,u.jsx)("button",{onClick:()=>(e=>{p((a=>a.filter(((a,s)=>s!==e))))})(a),className:"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,u.jsx)(c.A,{className:"w-3 h-3"})}),(0,u.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name})]},a)))}),(0,u.jsx)("button",{onClick:async()=>{if(0!==x.length){b(!0),v(0),j("");try{const e=[];for(let s=0;s<x.length;s++){const r=x[s],o=(s+1)/x.length*100;v(o);const t=await(0,g.gE)(r,a);e.push(t)}A((a=>[...a,...e])),p([]),v(0),w("".concat(e.length," imagem(ns) carregada(s) com sucesso!"));const r=await(0,g.BZ)(a,"imagens-das-escolas");S(r),s&&s()}catch(e){console.error("Erro no upload:",e),j("Erro ao fazer upload: ".concat(e.message))}finally{b(!1),v(0)}}},disabled:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Fazendo Upload...":"Fazer Upload"})]})]}),E.length>0&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"font-medium text-gray-900",children:["Imagens da Escola (",E.length,")"]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:E.map((e=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:e.publicUrl,alt:e.descricao||"Imagem da escola",className:"w-full h-32 object-cover rounded-lg border"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,u.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,u.jsx)("button",{onClick:()=>{M(e.id),L(e.descricao||"")},className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700",title:"Editar descri\xe7\xe3o",children:(0,u.jsx)(d.A,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:()=>(async(e,r)=>{if(window.confirm("Tem certeza que deseja excluir esta imagem?"))try{await(0,g.vS)(e,r,"imagens-das-escolas"),A((a=>a.filter((a=>a.id!==e))));const o=await(0,g.BZ)(a,"imagens-das-escolas");S(o),w("Imagem exclu\xedda com sucesso!"),s&&s()}catch(o){console.error("Erro ao deletar imagem:",o),j("Erro ao excluir imagem: ".concat(o.message))}})(e.id,e.url),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Excluir imagem",children:(0,u.jsx)(m.A,{className:"w-4 h-4"})})]})}),e.descricao&&(0,u.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.descricao})]},e.id)))})]}),_&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Editar Descri\xe7\xe3o"}),(0,u.jsx)("textarea",{value:U,onChange:e=>L(e.target.value),className:"w-full p-3 border rounded-lg resize-none",rows:"3",placeholder:"Digite a descri\xe7\xe3o da imagem..."}),(0,u.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,u.jsx)("button",{onClick:()=>(async e=>{if(U.trim())try{await(0,g.vx)(e,U),A((a=>a.map((a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{descricao:U.trim()}):a)))),M(null),L(""),w("Descri\xe7\xe3o atualizada com sucesso!")}catch(a){console.error("Erro ao atualizar descri\xe7\xe3o:",a),j("Erro ao atualizar descri\xe7\xe3o: ".concat(a.message))}})(_),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar"}),(0,u.jsx)("button",{onClick:()=>{M(null),L("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})}),0===E.length&&!h&&(0,u.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,u.jsx)(t.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,u.jsx)("p",{children:"Nenhuma imagem adicionada ainda."}),(0,u.jsx)("p",{className:"text-sm",children:"Adicione imagens para mostrar a escola."})]})]})}},8212:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var r=s(2555),o=s(5043),t=s(197),l=s(6464),i=s(4562),n=s(1209),c=s(1114);const d=(0,c.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),m=(0,c.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=s(7484),u=s(3701),x=s(579);const p=e=>{let{escola:a,onClose:s,onSave:c}=e;const[p,h]=(0,o.useState)((null===a||void 0===a?void 0:a.Escola)||""),[b,f]=(0,o.useState)(!1),[v,y]=(0,o.useState)(""),[j,N]=(0,o.useState)("dados-basicos"),w=[{id:"dados-basicos",label:"Dados B\xe1sicos",icon:t.A,description:"Informa\xe7\xf5es principais da escola"},{id:"imagens-escola",label:"Imagens da Escola",icon:l.A,description:"Upload e gerenciamento de imagens da escola (m\xe1x. 10)"},{id:"imagens-professores",label:"Imagens dos Professores",icon:i.A,description:"Upload e gerenciamento de imagens dos professores (m\xe1x. 5)"},{id:"localizacao",label:"Localiza\xe7\xe3o",icon:n.A,description:"Coordenadas e endere\xe7o da escola"},{id:"gestao",label:"Gest\xe3o",icon:d,description:"Informa\xe7\xf5es sobre gest\xe3o e funcion\xe1rios"},{id:"configuracoes",label:"Configura\xe7\xf5es",icon:m,description:"Configura\xe7\xf5es avan\xe7adas da escola"}],E=()=>{console.log("Imagens atualizadas - PainelInformacoes deve ser atualizado")};return(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl mx-auto",children:[(0,x.jsx)("div",{className:"border-b border-gray-200 px-6 py-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Editar Escola: ",(null===a||void 0===a?void 0:a.Escola)||"Nova Escola"]}),(0,x.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie as informa\xe7\xf5es e imagens da escola"})]}),(0,x.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,x.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,x.jsx)("div",{className:"border-b border-gray-200",children:(0,x.jsx)("nav",{className:"flex space-x-8 px-6 overflow-x-auto",children:w.map((e=>{const a=e.icon;return(0,x.jsxs)("button",{type:"button",onClick:()=>N(e.id),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 transition-colors ".concat(j===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),title:e.description,children:[(0,x.jsx)(a,{className:"w-4 h-4"}),e.label]},e.id)}))})}),(0,x.jsx)("div",{className:"p-6",children:(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),p.trim()){y(""),f(!0);try{await c((0,r.A)((0,r.A)({},a),{},{Escola:p})),s()}catch(o){y("Erro ao salvar.")}finally{f(!1)}}else y("O nome da escola \xe9 obrigat\xf3rio.")},children:[(0,x.jsx)("div",{className:"min-h-[400px]",children:(()=>{switch(j){case"dados-basicos":return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola *"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>h(e.target.value),disabled:b,placeholder:"Digite o nome da escola"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Munic\xedpio"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a["Munic\xedpio"])||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{"Munic\xedpio":e.target.value})),placeholder:"Nome do munic\xedpio"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terra Ind\xedgena (TI)"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a["Terra Indigena (TI)"])||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{"Terra Indigena (TI)":e.target.value})),placeholder:"Nome da terra ind\xedgena"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o"}),(0,x.jsx)("textarea",{className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",value:(null===a||void 0===a?void 0:a["Endere\xe7o"])||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{"Endere\xe7o":e.target.value})),placeholder:"Endere\xe7o completo da escola"})]})]});case"imagens-escola":return(0,x.jsx)(g.A,{escolaId:null===a||void 0===a?void 0:a.id,onImagesUpdate:E});case"imagens-professores":return(0,x.jsx)(u.A,{escolaId:null===a||void 0===a?void 0:a.id,onImagesUpdate:E});case"localizacao":return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,x.jsx)("input",{type:"number",step:"any",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.latitude)||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{latitude:parseFloat(e.target.value)||null})),placeholder:"Ex: -23.5505"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,x.jsx)("input",{type:"number",step:"any",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.longitude)||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{longitude:parseFloat(e.target.value)||null})),placeholder:"Ex: -46.6333"})]})]}),(0,x.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,x.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,x.jsx)("strong",{children:"Dica:"})," Use o Google Maps para encontrar as coordenadas exatas da escola. Clique com o bot\xe3o direito no local da escola e selecione as coordenadas."]})})]});case"gestao":return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gest\xe3o/Nome"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.gestao)||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{gestao:e.target.value})),placeholder:"Nome da gest\xe3o atual"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores Ind\xedgenas"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.professores_indigenas)||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{professores_indigenas:e.target.value})),placeholder:"Quantidade ou nomes"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores N\xe3o Ind\xedgenas"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.professores_nao_indigenas)||"",onChange:e=>c((0,r.A)((0,r.A)({},a),{},{professores_nao_indigenas:e.target.value})),placeholder:"Quantidade ou nomes"})]})]})]});case"configuracoes":return(0,x.jsx)("div",{className:"space-y-4",children:(0,x.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,x.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,x.jsx)("strong",{children:"Configura\xe7\xf5es Avan\xe7adas:"})," Esta se\xe7\xe3o ser\xe1 implementada em breve. Aqui voc\xea poder\xe1 configurar permiss\xf5es, notifica\xe7\xf5es e outras op\xe7\xf5es avan\xe7adas."]})})});default:return null}})()}),v&&(0,x.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,x.jsx)("p",{className:"text-red-700 text-sm",children:v})}),(0,x.jsxs)("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:b,children:b?"Salvando...":"Salvar Altera\xe7\xf5es"}),(0,x.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",onClick:s,disabled:b,children:"Cancelar"})]})]})})]})}}}]);
//# sourceMappingURL=212.5455ac23.chunk.js.map