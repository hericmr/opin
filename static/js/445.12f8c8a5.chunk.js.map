{"version":3,"file":"static/js/445.12f8c8a5.chunk.js","mappings":"gPAUO,MAAMA,EAAoBC,UAC/B,IACE,MAAM,MAAEC,SAAgBC,EAAAA,EACrBC,KAAK,kBACLC,OAAO,SACPC,MAAM,GAET,OAAIJ,GACFK,QAAQC,KAAK,+DAA0DN,EAAMO,UACtE,IAGTF,QAAQG,IAAI,uCACL,EACT,CAAE,MAAOR,GAEP,OADAK,QAAQC,KAAK,wCAAyCN,EAAMO,UACrD,CACT,GAaWE,EAAuBV,eAAOW,EAAUC,GAA4B,IAAlBC,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxE,IACE,IAAIG,EAAQf,EAAAA,EACTC,KAAK,kBACLC,OAAO,KACPc,GAAG,aAAcP,GACjBO,GAAG,YAAaN,IAGG,IAAlBC,EAAQM,QACVF,EAAQA,EAAMC,GAAG,SAAS,IAGxBL,EAAQO,YACVH,EAAQA,EAAMC,GAAG,YAAaL,EAAQO,YAGpCP,EAAQQ,YACVJ,EAAQA,EAAMC,GAAG,YAAaL,EAAQQ,YAGxC,MAAM,KAAEC,EAAI,MAAErB,SAAgBgB,EAAMM,MAAM,aAAc,CAAEC,WAAW,IAErE,OAAIvB,GACFK,QAAQC,KAAK,0BAA2BN,EAAMO,SACvC,MAIFc,GAAQA,EAAKP,OAAS,EAAIO,EAAK,GAAK,IAC7C,CAAE,MAAOrB,GAEP,OADAK,QAAQC,KAAK,0BAA2BN,EAAMO,SACvC,IACT,CACF,EAWaiB,EAA+BzB,eAAOW,EAAUC,GAAiC,IAAvBc,EAAYZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrF,IAIE,GAHAR,QAAQG,IAAI,mDAADkB,OAAuChB,EAAQ,cAAAgB,OAAaf,EAAQ,MAG3Ec,EAAaN,WAAaM,EAAaL,UAAW,CACpDf,QAAQG,IAAI,wEACZ,MAAMmB,QAAgBlB,EAAqBC,EAAUC,EAAUc,GAC/D,GAAIE,EAEF,OADAtB,QAAQG,IAAI,0DACLmB,CAEX,CAGAtB,QAAQG,IAAI,6DACZ,MAAQa,KAAMO,EAAO5B,MAAO6B,SAAiB5B,EAAAA,EAC1CC,KAAK,kBACLC,OAAO,KACPc,GAAG,aAAcP,GACjBO,GAAG,YAAaN,GAChBM,GAAG,SAAS,GACZK,MAAM,aAAc,CAAEC,WAAW,IAEpC,GAAIM,EACFxB,QAAQC,KAAK,2CAAuCuB,EAAOtB,cACtD,GAAIqB,GAASA,EAAMd,OAAS,EAEjC,OADAT,QAAQG,IAAI,wCACLoB,EAAM,GAIfvB,QAAQG,IAAI,iEACZ,MAAQa,KAAMS,EAAO9B,MAAO+B,SAAiB9B,EAAAA,EAC1CC,KAAK,kBACLC,OAAO,KACPc,GAAG,aAAcP,GACjBO,GAAG,YAAaN,GAChBW,MAAM,aAAc,CAAEC,WAAW,IAEpC,GAAIQ,EACF1B,QAAQC,KAAK,6CAAyCyB,EAAOxB,cACxD,GAAIuB,GAASA,EAAMhB,OAAS,EAEjC,OADAT,QAAQG,IAAI,mDACLsB,EAAM,GAIf,MAAME,EAActB,EAASuB,MAAM,KAAKC,MACxC7B,QAAQG,IAAI,0DAADkB,OAAiDM,IAC5D,MAAQX,KAAMc,EAAOnC,MAAOoC,SAAiBnC,EAAAA,EAC1CC,KAAK,kBACLC,OAAO,KACPkC,MAAM,aAAa,IAADX,OAAMM,IACxBf,GAAG,YAAaN,GAChBM,GAAG,SAAS,GACZK,MAAM,aAAc,CAAEC,WAAW,IAEpC,GAAIa,EACF/B,QAAQC,KAAK,8CAA0C8B,EAAO7B,cACzD,GAAI4B,GAASA,EAAMrB,OAAS,EAEjC,OADAT,QAAQG,IAAI,2CACL2B,EAAM,GAIf,OADA9B,QAAQG,IAAI,mEACL,IAET,CAAE,MAAOR,GAEP,OADAK,QAAQC,KAAK,sCAAoCN,EAAMO,SAChD,IACT,CACF,EAiBa+B,EAAiBvC,UAC5B,IACE,MAAM,KAAEsB,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,kBACLqC,OAAO,CAACC,IACRrC,SACAsC,SAEH,GAAIzC,EACF,MAAMA,EAGR,OAAOqB,CACT,CAAE,MAAOrB,GAEP,MADAK,QAAQL,MAAM,6BAA8BA,GACtCA,CACR,GASW0C,EAAoB3C,MAAO4C,EAAWC,KACjD,IACE,MAAM,KAAEvB,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,kBACL2C,OAAOD,GACP3B,GAAG,KAAM0B,GACTxC,SACAsC,SAEH,GAAIzC,EACF,MAAMA,EAGR,OAAOqB,CACT,CAAE,MAAOrB,GAEP,MADAK,QAAQL,MAAM,6BAA8BA,GACtCA,CACR,GA8DW8C,EAAsB/C,MAAOgD,EAAUpC,KAClD,IACE,MAAM,KAAEU,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,kBACLC,OAAO,KACPc,GAAG,aAAc8B,GACjB9B,GAAG,YAAaN,GAChBM,GAAG,YAAa,SAChBwB,SAEH,GAAIzC,EAAO,CAET,GAAmB,aAAfA,EAAMgD,KACR,OAAO,KAET,MAAMhD,CACR,CAEA,OAAOqB,CACT,CAAE,MAAOrB,GAEP,OADAK,QAAQC,KAAK,wCAAmCN,EAAMO,SAC/C,IACT,E,oQCxSF,MAAM0C,EAAe,GAAAvB,OAAMwB,QAA4B,mBAsC1CC,EAAoB,SAACC,GAAgC,IAAvBC,EAASxC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAClD,MAAMyC,EAAaF,EAAQG,IAAI,eAAiBH,EAAQG,IAAI,cACtDC,EAAeJ,EAAQG,IAAI,gBAEjC,IAAKD,EAAY,OAAO,KAMxB,MAAMG,EAAc,IAAIC,EAAAA,GAAM,CAC5BC,MAAO,IAAIC,EAAAA,EAAK,CACdC,IAAKZ,EACLa,MAAON,EAAe,IAAM,EAC5BO,OAAQ,CAAC,GAAK,IACdC,aAAc,WACdC,aAAc,aAEhBC,SAAUd,EAAQe,gBAIpB,GAAId,GAAaC,EAAWc,OAAQ,CAkBlC,MAAO,CAACX,EAjBU,IAAIC,EAAAA,GAAM,CAC1BW,KAAM,IAAIC,EAAAA,EAAK,CACbD,KAAMf,EAAWc,OACjBG,KAAM,aACNC,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAO,YAETC,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAO,UACPG,MAAO,IAETC,SAAU,GACVC,UAAW,WAEbb,SAAUd,EAAQe,gBAItB,CAEA,OAAOV,CACT,E,eCjFO,MAAMuB,EAAWA,KAEtB,MAAMC,EAAgBC,OAAOC,YAAc,IAGrCC,EAAW,iBAAkBF,QAAUG,UAAUC,eAAiB,EAGlEC,EAAoB,iEAAiEC,KAAKH,UAAUI,WAGpGC,OAA6C3E,IAAvBmE,OAAOS,YAI7BC,EADW,CAACX,EAAeG,EAAUG,EAAmBG,GAC9BG,OAAOC,SAAShF,OAWhD,OATAT,QAAQG,IAAI,wCAAsC,CAChDyE,gBACAG,WACAG,oBACAG,sBACAE,iBACAH,UAAWJ,UAAUI,YAGhBG,GAAkB,GC1BpB,MAAMG,EACXC,WAAAA,CAAYC,GAAoB,IAAfrF,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC1BqF,KAAKD,IAAMA,EACXC,KAAKtF,SAAOuF,EAAAA,EAAAA,GAAA,CACVC,aAAqC,IAAxBxF,EAAQwF,YACrBC,aAAqC,IAAxBzF,EAAQyF,YACrBC,mBAAiD,IAA9B1F,EAAQ0F,kBAC3BC,aAAqC,IAAxB3F,EAAQ2F,YACrBC,WAAY5F,EAAQ4F,YAAc,IAClCC,WAAY7F,EAAQ6F,YAAc,KAC/B7F,GAGLsF,KAAKQ,cAAgB,IAAIC,IACzBT,KAAKU,eAAiB,KACtBV,KAAKW,eAAiB,KACtBX,KAAKY,aAAe,KACpBZ,KAAKa,aAAe,KACpBb,KAAKc,eAAiB,KACtB3G,QAAQG,IAAI,2DAEZ0F,KAAKe,wBACP,CAKAjC,QAAAA,GACE,MAAMkC,EAASlC,IACTI,EDWD,iBAAkBF,QAAUG,UAAUC,eAAiB,ECF5D,OAPAjF,QAAQG,IAAI,qDAAgD,CAC1D0G,SACA9B,WACA+B,YAAajC,OAAOC,WACpBM,UAAWJ,UAAUI,YAGhByB,GAAU9B,CACnB,CAKA6B,sBAAAA,GACMf,KAAKtF,QAAQwF,aACfF,KAAKkB,wBAGHlB,KAAKtF,QAAQyF,aACfH,KAAKmB,wBAGHnB,KAAKtF,QAAQ0F,mBACfJ,KAAKoB,8BAGHpB,KAAKtF,QAAQ2F,aAAeL,KAAKlB,YACnCkB,KAAKqB,uBAET,CAKAH,qBAAAA,GACElB,KAAKD,IAAIuB,GAAG,eAAgBC,IAC1BvB,KAAKwB,kBAAkBD,MAGzBvB,KAAKD,IAAIuB,GAAG,gBAAgB,KAC1BtB,KAAKyB,uBAET,CAKAN,qBAAAA,GACEnB,KAAKD,IAAIuB,GAAG,SAAUC,IACpBvB,KAAK0B,YAAYH,KAErB,CAKAH,2BAAAA,GACEpB,KAAKD,IAAIuB,GAAG,YAAaC,IACvBvB,KAAK2B,kBAAkBJ,KAE3B,CAKAF,qBAAAA,GAGElH,QAAQG,IAAI,qEACd,CAMAkH,iBAAAA,CAAkBD,GAChB,GAAIvB,KAAKlB,WAAY,OAErB,MAAM5B,EAAU8C,KAAKD,IAAI6B,sBAAsBL,EAAMM,OAAQ3E,GAAYA,IAGrEA,IAAY8C,KAAKU,gBACnBvG,QAAQG,IAAI,8CAA+C,CACzDwH,KAAM5E,EAAQG,IAAI,QAClB0E,WAAY7E,EAAQG,IAAI,cACxB2E,kBAAmB9E,EAAQG,IAAI,uBAI/BH,IAAY8C,KAAKU,iBAEfV,KAAKU,gBACPV,KAAKiC,aAIH/E,GACF8C,KAAKkC,WAAWhF,EAASqE,GAG/B,CAKAE,kBAAAA,GACEzB,KAAKiC,YACP,CAMAP,WAAAA,CAAYH,GACV,MAAMrE,EAAU8C,KAAKD,IAAI6B,sBAAsBL,EAAMM,OAAQ3E,GAAYA,IAEpEA,IAGD8C,KAAKlB,WACPkB,KAAKmC,kBAAkBjF,EAASqE,GAK9BvB,KAAKW,iBAAmBzD,GAO5B8C,KAAKW,eAAiBzD,EAGlB8C,KAAKY,cACPwB,aAAapC,KAAKY,cAGpBZ,KAAKY,aAAeyB,YAAW,KAC7BrC,KAAKW,eAAiB,OACrBX,KAAKtF,QAAQ6F,YAGhBP,KAAKsC,oBAAoBpF,EAASqE,IAjBhCvB,KAAK2B,kBAAkBJ,GAkB3B,CAMAI,iBAAAA,CAAkBJ,GAChB,MAAMrE,EAAU8C,KAAKD,IAAI6B,sBAAsBL,EAAMM,OAAQ3E,GAAYA,IAEpEA,IAGD8C,KAAKY,eACPwB,aAAapC,KAAKY,cAClBZ,KAAKY,aAAe,MAItBZ,KAAKW,eAAiB,KAGtBX,KAAKuC,0BAA0BrF,EAASqE,GAC1C,CAMAiB,cAAAA,CAAejB,GACb,MAAMrE,EAAU8C,KAAKD,IAAI6B,sBAAsBL,EAAMM,OAAQ3E,GAAYA,IAEpEA,GAGL8C,KAAKsC,oBAAoBpF,EAASqE,EACpC,CAOAY,iBAAAA,CAAkBjF,EAASqE,GAEzB,GAAIvB,KAAKW,iBAAmBzD,EAK1B,OAHA/C,QAAQG,IAAI,sEACZ0F,KAAKyC,wBACLzC,KAAKsC,oBAAoBpF,EAASqE,GAKpCpH,QAAQG,IAAI,0EACZ0F,KAAKW,eAAiBzD,EAGlB8C,KAAKtF,QAAQgI,aACf1C,KAAK0C,YAAYxF,EAASqE,GAIxBvB,KAAKY,cACPwB,aAAapC,KAAKY,cAGpBZ,KAAKY,aAAeyB,YAAW,KAC7BlI,QAAQG,IAAI,4EACZ0F,KAAKyC,qBACJ,KAGHzC,KAAK2C,oBAAoBzF,EAASqE,EACpC,CAOAW,UAAAA,CAAWhF,EAASqE,GAClBvB,KAAKU,eAAiBxD,EAGtB8C,KAAK4C,gBAAgB1F,GAGjB8C,KAAKtF,QAAQgI,cAAgB1C,KAAKlB,YACpCkB,KAAK0C,YAAYxF,EAASqE,GAI5BvB,KAAK2C,oBAAoBzF,EAASqE,EACpC,CAKAU,UAAAA,GACMjC,KAAKU,iBAEPV,KAAK6C,gBAAgB7C,KAAKU,gBAIrBV,KAAKlB,YACRkB,KAAK8C,cAIP9C,KAAK+C,uBAAuB/C,KAAKU,gBAEjCV,KAAKU,eAAiB,KAE1B,CAMAkC,eAAAA,CAAgB1F,GAGV8C,KAAKtF,QAAQsI,oBACfhD,KAAKtF,QAAQsI,mBAAmB9F,GAAS,EAE7C,CAMA2F,eAAAA,CAAgB3F,GAEV8C,KAAKtF,QAAQsI,oBACfhD,KAAKtF,QAAQsI,mBAAmB9F,GAAS,EAE7C,CAOAwF,WAAAA,CAAYxF,EAASqE,GACfvB,KAAKc,gBACPd,KAAK8C,cAGP,MAAMG,EAAiBjD,KAAKkD,kBAAkBhG,GAC9C/C,QAAQG,IAAI,mDAAiD2I,GAExDA,GAKLjD,KAAKc,eAAiBd,KAAKmD,qBAAqBF,EAAgB1B,GAChEvB,KAAKD,IAAIqD,mBAAmBC,YAAYrD,KAAKc,gBAC7C3G,QAAQG,IAAI,gEANVH,QAAQG,IAAI,wDAOhB,CAKAwI,WAAAA,GACM9C,KAAKc,iBACPd,KAAKc,eAAewC,SACpBtD,KAAKc,eAAiB,KACtB3G,QAAQG,IAAI,8CAEhB,CAKAmI,gBAAAA,GACEzC,KAAK8C,cACD9C,KAAKY,eACPwB,aAAapC,KAAKY,cAClBZ,KAAKY,aAAe,MAEtBZ,KAAKW,eAAiB,KACtBxG,QAAQG,IAAI,+EACd,CAQA6I,oBAAAA,CAAqBI,EAAShC,GAC5B,MAAMiC,EAAUC,SAASC,cAAc,OACvCF,EAAQG,UAAY,aAGpB,MAAMC,EAAkBL,EAAQM,SAAS,qBAGzC,GAAI7D,KAAKlB,WAAY,CAEnB,MAAMgF,EAAgB,mCAAAtI,OAAsC+H,EAAO,WACnEC,EAAQO,UAAYD,EAGpB,MAAME,EAAgBJ,EAAkB,CACtCK,gBAAiB,UACjBC,YAAa,0BACX,CACFD,gBAAiB,UACjBC,YAAa,0BAGfC,OAAOC,OAAOZ,EAAQa,OAAKpE,EAAAA,EAAAA,GAAA,CACzBqE,SAAU,WACVC,QAAS,WACTC,aAAc,MACdC,SAAU,OACVC,WAAY,6FACZC,WAAY,MACZnG,MAAO,UACPoG,cAAe,OACfC,OAAQ,OACRC,SAAU,QACVC,WAAY,SACZC,SAAU,SACVC,aAAc,WACdC,UAAW,iCACXC,OAAO,aAAD3J,OAAewI,EAAcE,aACnCkB,OAAQ,WACLpB,IAIL,MAAMqB,EAAgB7B,EAAQ8B,cAAc,sBACxCD,IACFlB,OAAOC,OAAOiB,EAAchB,MAAO,CACjCe,OAAQ,UACRG,eAAgB,YAChBC,oBAAqB,UACrBC,wBAAyB,MACzBC,WAAY,gBACZC,QAAS,eACTpB,QAAS,UACTC,aAAc,MACdG,WAAY,QAIdU,EAAcO,iBAAiB,SAAS,KACtCzL,QAAQG,IAAI,2DAEZ,MAAM4C,EAAU8C,KAAKD,IAAI6B,sBAAsBL,EAAMM,OAAQ3E,GAAYA,IACrEA,GACF8C,KAAKsC,oBAAoBpF,EAASqE,MAKtC8D,EAAcO,iBAAiB,cAAc,KAC3CP,EAAchB,MAAMJ,gBAAkB,0BACtCoB,EAAchB,MAAMmB,oBAAsB,UAC1CH,EAAchB,MAAMwB,UAAY,iBAGlCR,EAAcO,iBAAiB,cAAc,KAC3CP,EAAchB,MAAMJ,gBAAkB,cACtCoB,EAAchB,MAAMmB,oBAAsB,UAC1CH,EAAchB,MAAMwB,UAAY,cAGtC,KAAO,CAELrC,EAAQO,UAAYR,EAGpB,MAAMS,EAAgBJ,EAAkB,CACtCK,gBAAiB,WACf,CACFA,gBAAiB,WAGnBE,OAAOC,OAAOZ,EAAQa,OAAKpE,EAAAA,EAAAA,GAAA,CACzBqE,SAAU,WACVC,QAAS,WACTC,aAAc,MACdC,SAAU,OACVC,WAAY,6FACZC,WAAY,MACZnG,MAAO,UACPoG,cAAe,OACfC,OAAQ,OACRC,SAAU,QACVC,WAAY,SACZC,SAAU,SACVC,aAAc,WACdC,UAAW,gCACRlB,GAEP,CAGA,MAAM8B,EAAavE,EAAMuE,WACnBjE,EAAQ7B,KAAKD,IAAIgG,uBAAuBD,GAK9C,OAHAtC,EAAQa,MAAM2B,KAAQnE,EAAM,GAAK,GAAM,KACvC2B,EAAQa,MAAM4B,IAAOpE,EAAM,GAAK,GAAM,KAE/B2B,CACT,CAOAN,iBAAAA,CAAkBhG,GAShB,GARA/C,QAAQG,IAAI,wEAAsE,CAChFwH,KAAM5E,EAAQG,IAAI,QAClB0E,WAAY7E,EAAQG,IAAI,cACxB2E,kBAAmB9E,EAAQG,IAAI,uBAK7B2C,KAAKtF,QAAQwL,uBAAwB,CACvC,MAAM3C,EAAUvD,KAAKtF,QAAQwL,uBAAuBhJ,GAEpD,OADA/C,QAAQG,IAAI,8EAAsEiJ,GAC3EA,CACT,CAGA,MAAMxB,EAAa7E,EAAQG,IAAI,cAC/B,GAAI0E,EAAY,CAEd,MAAM7D,EAAS6D,EAAW7D,QAAU,qBAGpC,OAFA/D,QAAQG,IAAI,8DAAsD4D,GAClE/D,QAAQG,IAAI,oGAAyF4D,GAC9FA,CACT,CAEA,MAAM8D,EAAoB9E,EAAQG,IAAI,qBACtC,GAAI2E,EAAmB,CACrB,MAAMuB,EAAO,qBAAA/H,OAAqBwG,EAAkB9D,QAAU,eAE9D,OADA/D,QAAQG,IAAI,iFAAyEiJ,GAC9EA,CACT,CAGA,OADApJ,QAAQG,IAAI,uEACL,IACT,CAOAgI,mBAAAA,CAAoBpF,EAASqE,GAC3B,MAAM4E,EAAUnG,KAAKQ,cAAcnD,IAAI,SACnC8I,GAA8B,oBAAZA,GACpBA,EAAQjJ,EAASqE,EAErB,CAOAgB,yBAAAA,CAA0BrF,EAASqE,GACjC,MAAM4E,EAAUnG,KAAKQ,cAAcnD,IAAI,eACnC8I,GAA8B,oBAAZA,GACpBA,EAAQjJ,EAASqE,EAErB,CAOAoB,mBAAAA,CAAoBzF,EAASqE,GAC3B,MAAM4E,EAAUnG,KAAKQ,cAAcnD,IAAI,SACnC8I,GAA8B,oBAAZA,GACpBA,EAAQjJ,EAASqE,EAErB,CAMAwB,sBAAAA,CAAuB7F,GACrB,MAAMiJ,EAAUnG,KAAKQ,cAAcnD,IAAI,YACnC8I,GAA8B,oBAAZA,GACpBA,EAAQjJ,EAEZ,CAOAoE,EAAAA,CAAG8E,EAAWD,GACZnG,KAAKQ,cAAc6F,IAAID,EAAWD,EACpC,CAMAG,GAAAA,CAAIF,GACFpG,KAAKQ,cAAc+F,OAAOH,EAC5B,CAKAI,aAAAA,GACExG,KAAKQ,cAAciG,OACrB,CAMAC,aAAAA,CAAcC,GACZ3G,KAAKtF,SAAOuF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQD,KAAKtF,SAAYiM,GAGjCA,EAAWzG,YAIXyG,EAAWxG,WAGjB,CAKAyG,OAAAA,GAEM5G,KAAKY,cACPwB,aAAapC,KAAKY,cAEhBZ,KAAKa,cACPuB,aAAapC,KAAKa,cAIpBb,KAAK8C,cAGL9C,KAAKiC,aAGLjC,KAAKwG,eAKP,EASK,SAASK,EAA0B9G,GAAoB,IAAfrF,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAWxD,OAAO,IAAIkF,EAAuBE,GAAGE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAVd,CACrBC,aAAa,EACbC,aAAa,EACbC,mBAAmB,EACnBC,aAAa,EACbqC,aAAa,EACbpC,WAAY,IACZC,WAAY,MAGiD7F,GACjE,C,cC1mBO,SAASoM,EAAM/G,EAAK+F,GAA2B,IAADiB,EAAA,IAAdrM,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAChD,IAAKoF,IAAQ+F,EAAY,OACzB,MAAMkB,EAA+B,QAArBD,EAAGrM,EAAQsM,kBAAU,IAAAD,EAAAA,EAAI,IACnCE,EAAOlH,EAAImH,UACXC,EAAgB,CAAEC,OAAQtB,EAAYuB,SAAUL,GAC1B,kBAAjBtM,EAAQ4M,OACjBH,EAAcG,KAAO5M,EAAQ4M,MAE/BL,EAAKM,QAAQJ,EACf,CCjDA,MAKMK,EACG,EADHA,EAEE,EAFFA,EAGE,EAHFA,EAIG,EAOHC,EAA6CD,EA0EnD,EA7DsB,CAKpBE,MAAO,WACL,GAAID,GAAaD,EAAgB,CAAC,IAAD,IAAAG,EAAAhN,UAAAC,OADxBgN,EAAI,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,GAAAnN,UAAAmN,GAEX3N,QAAQG,IAAI,aAAcsN,EAC5B,CACF,EAMAG,KAAM,WACJ,GAAIN,GAAaD,EAAe,CAAC,IAAD,IAAAQ,EAAArN,UAAAC,OADxBgN,EAAI,IAAAC,MAAAG,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJL,EAAIK,GAAAtN,UAAAsN,GAEV9N,QAAQ4N,KAAK,YAAaH,EAC5B,CACF,EAMAxN,KAAM,WACJ,GAAIqN,GAAaD,EAAe,CAAC,IAAD,IAAAU,EAAAvN,UAAAC,OADxBgN,EAAI,IAAAC,MAAAK,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJP,EAAIO,GAAAxN,UAAAwN,GAEVhO,QAAQC,KAAK,YAAawN,EAC5B,CACF,EAMA9N,MAAO,WACL,GAAI2N,GAAaD,EAAgB,CAAC,IAAD,IAAAY,EAAAzN,UAAAC,OADxBgN,EAAI,IAAAC,MAAAO,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJT,EAAIS,GAAA1N,UAAA0N,GAEXlO,QAAQL,MAAM,aAAc8N,EAC9B,CACF,EAMAU,MAAQC,IACFd,GAAaD,GACfrN,QAAQmO,MAAMC,IAOlBC,SAAUA,KACJf,GAAaD,GACfrN,QAAQqO,a,eC5Ed,MAwNA,EAxN0BC,IAOnB,IAPoB,WACzBC,EAAa,GAAE,aACfC,EAAY,eACZC,GAAiB,EAAI,iBACrBC,GAAmB,EAAK,IACxB9I,EAAG,UACH4D,EAAY,iBACb8E,EAEC,MAAMK,GAAkBC,EAAAA,EAAAA,QAAO,MACzBC,GAAiBD,EAAAA,EAAAA,QAAO,OAGvB,CAAEE,GAAoBC,EAAAA,SAAe,MAStCC,GAAoBC,EAAAA,EAAAA,cAAY,KAC/BrJ,IAELsJ,EAAO3B,MAAM,+DAGboB,EAAgBQ,QAAU,IAAIC,EAAAA,EAG9BP,EAAeM,QAAU,IAAIE,EAAAA,EAAY,CACvCC,OAAQX,EAAgBQ,QACxBjF,MAAQnH,GAAYD,EAAkBC,EAAS2L,GAC/ChE,OAAQ,MAIV9E,EAAI2J,SAASV,EAAeM,SAG5BK,OAGC,CAAC5J,EAAK8I,IAKHc,GAAoBP,EAAAA,EAAAA,cAAY,KACpC,IAAKrJ,IAAQiJ,EAAeM,QAAS,OAErCD,EAAO3B,MAAM,qEAGb,MAAMkC,EH2lBH,SAAkC7J,EAAK8J,EAAeC,GAC3D3P,QAAQG,IAAI,0EAEZ,MAAMsP,EAAe/C,EAA0B9G,EAAK,CAClD2C,aAAa,EACbwD,uBAAyBhJ,IACvB/C,QAAQG,IAAI,kFAA0E4C,GACtF,MAAM6E,EAAa7E,EAAQG,IAAI,cAC/B,GAAI0E,EAAY,CAEd,MAAM7D,EAAS6D,EAAW7D,QAAU,qBAGpC,OAFA/D,QAAQG,IAAI,oDAA+C4D,GAC3D/D,QAAQG,IAAI,0FAAkF4D,GACvFA,CACT,CAEA,OADA/D,QAAQG,IAAI,+DACL,QAeX,OAVIuP,IACF1P,QAAQG,IAAI,2EACZsP,EAAatI,GAAG,QAASuI,IAGvBC,GACFF,EAAatI,GAAG,QAASwI,GAG3B3P,QAAQG,IAAI,mEACLsP,CACT,CG3nByBG,CACnBhK,EACAiK,EACAC,GAIFL,EAAatI,GAAG,QAAS0I,GACzBJ,EAAatI,GAAG,QAAS2I,GACzBL,EAAatI,GAAG,WAAY4I,GAE5Bb,EAAO3B,MAAM,+EAGZ,CAAC3H,IAKEiK,GAAoBZ,EAAAA,EAAAA,cAAY,CAAClM,EAASqE,KAE9C,MAAMQ,EAAa7E,EAAQG,IAAI,cAC/B,GAAI0E,GAAc4G,EAAc,CAAC,IAADwB,EAC9B,MAAMC,EAA6B,QAAxBD,EAAGjN,EAAQe,qBAAa,IAAAkM,OAAA,EAArBA,EAAuBE,iBACjCtK,GAAOqK,IF4BV,SAA0BrK,EAAK+F,GAA2B,IAADwE,EAAA,IAAd5P,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3D,IAAKoF,IAAQ+F,EAAY,OACzB,MAAMkB,EAA+B,QAArBsD,EAAG5P,EAAQsM,kBAAU,IAAAsD,EAAAA,EAAI,IACnChD,EAAO5M,EAAQ4M,KACfiD,EAAyC,kBAAtB7P,EAAQ6P,UAAyB7P,EAAQ6P,UAAY,IACxEC,EAAyC,kBAAtB9P,EAAQ8P,UAAyB9P,EAAQ8P,UAAY,GAExEC,EAAU1K,EAAI2K,UACpB,IAAKD,EAAS,OAAO3D,EAAM/G,EAAK+F,EAAY,CAAEkB,aAAYM,SAE1D,MAAOqD,EAAUC,GAAaH,EAGxBI,EAFYC,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGT,IAEbI,EACvBM,EAFYH,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGR,IAEbI,EAEvBM,EAAUnL,EAAIgG,uBAAuBD,GAC3C,IAAKoF,EAAS,OAAOpE,EAAM/G,EAAK+F,EAAY,CAAEkB,aAAYM,SAE1D,MAAM6D,EAAc,CAClBD,EAAQ,GAAKL,EAAYF,EAAW,EACpCO,EAAQ,GAAKD,EAAYL,EAAY,GAGjCQ,EAAiBrL,EAAIsL,uBAAuBF,GAClD,IAAKC,EAAgB,OAAOtE,EAAM/G,EAAK+F,EAAY,CAAEkB,aAAYM,SAEjE,MAAML,EAAOlH,EAAImH,UACXC,EAAgB,CAAEC,OAAQgE,EAAgB/D,SAAUL,GACtC,kBAATM,IAAmBH,EAAcG,KAAOA,GACnDL,EAAKM,QAAQJ,EACf,CEzDQmE,CAAiBvL,EAAKqK,EAAO,CAAEpD,WAAY,IAAKuD,UAAW,MF3F5D,SAAwBxK,EAAK+F,GAA2B,IAADyF,EAAAC,EAAA,IAAd9Q,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzD,IAAKoF,IAAQ+F,EAAY,OAEzB,MAAM2F,EAA2B,QAAnBF,EAAG7Q,EAAQ+Q,gBAAQ,IAAAF,EAAAA,EAAI,GAC/BvE,EAA+B,QAArBwE,EAAG9Q,EAAQsM,kBAAU,IAAAwE,EAAAA,EAAI,IAEnChI,EAAUC,SAASC,cAAc,OACvCF,EAAQG,UAAY,iBACpBH,EAAQa,MAAM1F,MAAK,GAAAnD,OAAiB,EAAXiQ,EAAY,MACrCjI,EAAQa,MAAMqH,OAAM,GAAAlQ,OAAiB,EAAXiQ,EAAY,MACtCjI,EAAQa,MAAMsH,WAAU,GAAAnQ,QAAOiQ,EAAQ,MACvCjI,EAAQa,MAAMuH,UAAS,GAAApQ,QAAOiQ,EAAQ,MAEtC,MAAMI,EAAU,IAAIC,EAAAA,EAAQ,CAC1BtI,UACAuI,YAAa,gBACbC,WAAW,IAGbjM,EAAIkM,WAAWJ,GACfA,EAAQK,YAAYpG,GAGpB,MAAMqG,EAAUA,KACd,IACEpM,EAAIqM,cAAcP,EACpB,CAAE,MAAAQ,GAAO,GAGX7I,EAAQoC,iBAAiB,eAAgBuG,EAAS,CAAEG,MAAM,IAE1DjK,WAAW8J,EAASnF,EAAa,IACnC,CE4DQuF,CAAexM,EAAKqK,IAEtBf,EAAO3B,MAAM,wCAAyC3F,EAAW7D,QACjEyK,EAAa5G,EACf,IACC,CAAC4G,IAKEsB,GAAoBb,EAAAA,EAAAA,cAAY,CAAClM,EAASqE,KAK9C0H,EAAiB/L,GAGb8L,EAAeM,UACjBN,EAAeM,QAAQkD,UAAUC,GAC3BA,IAAMvP,EL+Ha0F,EAAC1F,EAASwP,KACvC,IAAKA,EAAW,OAAO,KAEvB,MAAMC,EAAa,IAAInP,EAAAA,GAAM,CAC3BC,MAAO,IAAIC,EAAAA,EAAK,CACdC,IAAKZ,EACLa,MAAO,IACPC,OAAQ,CAAC,GAAK,IACdC,aAAc,WACdC,aAAc,aAEhBC,SAAUd,EAAQe,gBAGpB,OAAO4J,MAAM+E,QAAQF,GAAa,IAAIA,EAAWC,GAAc,CAACD,EAAWC,IK5I5D/J,CAAgB6J,EAAGxP,EAAkBwP,EAAG5D,IAE1C5L,EAAkBwP,EAAG5D,KAE9BG,EAAeM,QAAQuD,aAExB,CAAChE,IAKEqB,GAAuBd,EAAAA,EAAAA,cAAY,KACvCH,EAAiB,MAGbD,EAAeM,UACjBN,EAAeM,QAAQkD,UAAUC,GAAMxP,EAAkBwP,EAAG5D,KAC5DG,EAAeM,QAAQuD,aAExB,CAAChE,IAKEiE,GAAgB1D,EAAAA,EAAAA,cAAY,KAChC,IAAKN,EAAgBQ,UAAYZ,EAAY,OAQ7C,GANAW,EAAO3B,MAAM,gDAAiDgB,EAAW9N,OAAQ,kBAAmBgO,GAGpGE,EAAgBQ,QAAQ7C,SAGnBmC,EAEH,YADAS,EAAO3B,MAAM,iEAKf,MAAMqF,EAAgBrE,EAAW/I,QAAOqN,IACtC,IAAKA,EAAMC,WAAaD,EAAME,UAAW,OAAO,EAChD,MAAMC,EAAMC,WAAWJ,EAAMC,UACvBI,EAAMD,WAAWJ,EAAME,WAC7B,OAAQI,MAAMH,KAASG,MAAMD,IACtBF,IAAQ,IAAMA,GAAO,IACrBE,IAAQ,KAAOA,GAAO,OAG/BhE,EAAO3B,MAAM,yCAAuCqF,EAAcnS,QAGlEmS,EAAcQ,SAAQ,CAACP,EAAOQ,KAC5B,GAAIR,EAAMC,UAAYD,EAAME,UAAW,CACrC,MAAMhQ,EAAU,IAAIuQ,EAAAA,EAAQ,CAC1BzP,SAAU,IAAI0P,EAAAA,GAAMC,EAAAA,EAAAA,IAAW,CAACX,EAAME,UAAWF,EAAMC,cAGzD/P,EAAQmJ,IAAI,aAAc2G,GAC1B9P,EAAQmJ,IAAI,aAAc2G,GAC1B9P,EAAQmJ,IAAI,WAAW,UAAD7K,OAAYgS,IAClCtQ,EAAQmJ,IAAI,OAAQ,UAEpByC,EAAgBQ,QAAQsE,WAAW1Q,EACrC,KAGFmM,EAAO3B,MAAM,uBAADlM,OAAwBuR,EAAcnS,OAAM,0CAEvD,CAAC8N,EAAYE,IAKViF,GAAqBzE,EAAAA,EAAAA,cAAY,KAChCJ,EAAeM,UAEpBN,EAAeM,QAAQkD,UAAUtP,GAAYD,EAAkBC,EAAS2L,KACxEG,EAAeM,QAAQuD,aACtB,CAAChE,IA2BJ,OAxBAiF,EAAAA,EAAAA,YAAU,KACJ/N,GACFoJ,IAGK,KAEDH,EAAeM,SAAWvJ,GAC5BA,EAAIgO,YAAY/E,EAAeM,YAGlC,CAACvJ,EAAKoJ,KAGT2E,EAAAA,EAAAA,YAAU,KACRhB,MACC,CAACA,KAGJgB,EAAAA,EAAAA,YAAU,KACRD,MACC,CAACA,KAIFG,EAAAA,EAAAA,KAAA,OAAKrK,UAAWA,K,cChOb,MAAMsK,EAAe,CAC1BC,gBAAiB,CACfC,aAAc,CACZ7P,KAAM,yBACNG,OAAQ,UACR2P,MAAO,CACL9P,KAAM,0BACNG,OAAQ,YAGZ4P,UAAW,CACT/P,KAAM,wBACNG,OAAQ,UACR2P,MAAO,CACL9P,KAAM,uBACNG,OAAQ,aAId6P,SAAU,CACRhQ,KAAM,qBACNG,OAAQ,UACR2P,MAAO,CACL9P,KAAM,qBACNG,OAAQ,aAWD8P,EAA6B,SAACrR,GAAgC,IAAvBsR,EAAS7T,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC3D,IAAKuC,IAAYA,EAAQuR,WACvB,OAAO,IAAIjR,EAAAA,GAAM,CACfc,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAOyP,EAAaC,gBAAgBC,aAAa7P,OAEnDG,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAOyP,EAAaC,gBAAgBC,aAAa1P,OACjDE,MAAO,MAKb,MACM+P,EADgD,iBAA/BxR,EAAQuR,WAAWE,QAEtCV,EAAaC,gBAAgBC,aAC7BF,EAAaC,gBAAgBG,UAE3BO,EAASJ,EAAYE,EAAYN,MAAQM,EAE/C,OAAO,IAAIlR,EAAAA,GAAM,CACfc,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAOoQ,EAAOtQ,OAEhBG,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAOoQ,EAAOnQ,OACdE,MAAO6P,EAAY,EAAI,EACvBK,SAAUL,EAAY,GAAK,CAAC,EAAG,MAGrC,EClEO,MAAMM,EAAa,CAExB1H,OAAQ,EAAE,SAAU,SACpBE,KAAM,KACNyH,QAAS,GACTC,QAAS,EAGThO,OAAQ,CACNoG,OAAQ,EAAE,SAAU,SACpBE,KAAM,KAIR2H,gBAAiB,GACjBC,mBAAoB,EACpBC,yBAA0B,IAG1BC,mBAAoB,KAGpBC,wBAAyB,GAGzBC,cAAe,GACfC,aAAc,IAGdC,YAAa,CACXtP,aAAa,EACbC,aAAa,EACbC,mBAAmB,EACnBC,aAAa,EACbE,WAAY,IACZD,WAAY,KAIdmP,YAAa,CACXC,mBAAmB,EACnBC,mBAAoB,IACpBC,sBAAsB,EACtBC,mBAAmB,GAIrBC,iBAAkB,CAChBzI,SAAU,CACR0I,OAAQ,IACRC,QAAS,IACT1I,KAAM,IACN2I,IAAK,KAEPC,OAAQ,CACNH,OAAQ,WACRC,QAAS,cACT1I,KAAM,WACN2I,IAAK,cAMEE,EAGF,CACPC,MAAO,UACPC,OAAQ,UACRC,MAAO,UACPC,OAAQ,WAQCC,EAEH,CAAExF,IAAK,GAAID,IAAK,GAAI0F,KAAM,IAFvBD,EAGJ,CAAExF,IAAK,GAAID,IAAK,GAAI0F,KAAM,IAHtBD,EAIH,CAAExF,IAAK,GAAID,IAAK,IAAK0F,KAAM,IA2CxBC,EACK,YADLA,EAEQ,YAFRA,EAIC,YAIDC,EACA,CACTC,IAAK,gGACLC,aAAc,gDACd9B,QAAS,GACT+B,OAAO,EACPC,eAAgB,EAChBC,SAAU,KCyId,GD3FiBb,EAAsBC,MAKzBI,EAAqBC,KAClBN,EAAsBE,OAKzBG,EAAoBC,KACjBN,EAAsBG,MAKzBE,EAAqBC,KAClBN,EAAsBI,QC/LLU,EAAAA,EAAAA,aAAW,CAAAxI,EAM1CyI,KAAS,IANkC,KAC5C/V,EAAI,aACJwN,EAAY,oBACZwI,GAAsB,EAAI,IAC1BpR,EAAG,UACH4D,EAAY,iBACb8E,EAEC,MAAMK,GAAkBC,EAAAA,EAAAA,QAAO,MACzBC,GAAiBD,EAAAA,EAAAA,QAAO,MACxBqI,GAAkBrI,EAAAA,EAAAA,QAAO,OAGxB,CAAEsI,GAAqBnI,EAAAA,SAAe,OACtCoI,EAAiBC,GAAsBrI,EAAAA,SAAe,MAIvDsI,GAAiBC,EAAAA,EAAAA,UAAQ,IAAM3S,KAAY,IAK3C4S,GAAkBtI,EAAAA,EAAAA,cAAY,KAClC,GAAKrJ,GAAQ5E,EAGb,GAAKA,EAAKwW,UAAa9J,MAAM+E,QAAQzR,EAAKwW,WAAsC,IAAzBxW,EAAKwW,SAAS/W,OAKrE,IAEE,MAMMgX,EANgB,IAAIC,EAAAA,EAAQ,CAChCC,eAAgBpB,GAAgCA,EAChDqB,kBAAmBrB,IAIiBsB,aAAa7W,GAInD2N,EAAgBQ,QAAU,IAAIC,EAAAA,EAAa,CACzCoI,SAAUC,IAIZ5I,EAAeM,QAAU,IAAIE,EAAAA,EAAY,CACvCC,OAAQX,EAAgBQ,QACxBjF,MAAQnH,GAAYqR,EAA2BrR,GAAS,GACxD2H,OAAQ,KAIV+M,EAAgBrE,SAAQrQ,IACtB,MAAMuR,EAAavR,EAAQ+U,gBAC3B/U,EAAQmJ,IAAI,oBAAqB,CAC/BnI,OAAQuQ,EAAWyD,WACnBC,KAAM,iBACNC,MAAO3D,EAAW4D,WAClBC,UAAW7D,EAAW8D,WACtBC,GAAI/D,EAAWgE,SACfC,WAAYjE,EAAWiE,WACvBC,KAAMlE,EAAWE,QACjBiE,WAAYnE,EAAWmE,WACvBC,SAAUpE,EAAWqE,WACrBC,GAAItE,EAAWsE,GACfC,WAAYvE,EAAWuE,WACvBC,WAAYxE,EAAWwE,WACvBC,WAAYzE,EAAWyE,WACvBC,WAAY1E,EAAW0E,WACvBC,WAAY3E,EAAW2E,WACvBC,WAAY5E,EAAW4E,WACvBC,WAAY7E,EAAW6E,gBAK3BvT,EAAI2J,SAASV,EAAeM,SAG5BK,IAEAxP,QAAQG,IAAI,iDAADkB,OAAkDoW,EAAgBhX,OAAM,aAErF,CAAE,MAAOd,GACPK,QAAQL,MAAM,oDAAqDA,EACrE,MA7DEK,QAAQC,KAAK,4DAA0De,KAgExE,CAAC4E,EAAK5E,IAKHwO,GAAoBP,EAAAA,EAAAA,cAAY,KAC/BrJ,GAAQiJ,EAAeM,UAG5B8H,EAAgB9H,QNwlBb,SAAmCvJ,EAAKwT,EAAgBC,GAC7D,MAAM5J,EAAe/C,EAA0B9G,EAAK,CAClD2C,aAAa,EACbwD,uBAAyBhJ,IACvB,MAAM8E,EAAoB9E,EAAQG,IAAI,qBACtC,OAAI2E,EACI,qBAANxG,OAAyBwG,EAAkB9D,QAAU,eAEhD,QAYX,OARIqV,GACF3J,EAAatI,GAAG,QAASiS,GAGvBC,GACF5J,EAAatI,GAAG,QAASkS,GAGpB5J,CACT,CM7mB8B6J,CACxB1T,EACA2T,EACAC,GAIFvC,EAAgB9H,QAAQhI,GAAG,QAASoS,GACpCtC,EAAgB9H,QAAQhI,GAAG,QAASqS,GACpCvC,EAAgB9H,QAAQhI,GAAG,WAAYsS,MAGtC,CAAC7T,IAKE2T,GAAqBtK,EAAAA,EAAAA,cAAY,CAAClM,EAASqE,KAC/C,IAAKrE,EAAS,OAEd,MAAM8E,EAAoB9E,EAAQG,IAAI,qBACtC,GAAK2E,EAEL,GAAIwP,EAEE7I,GACFA,EAAa3G,QAIf,GAAIsP,IAAoBpU,EAElByL,GACFA,EAAa3G,GAEfuP,EAAmB,UACd,CAELA,EAAmBrU,GAEnB,MAAMc,EAAWd,EAAQe,cACzB,GAAID,EAAU,CACZ,MAAM6V,EAAS7V,EAAS8V,YACxB/T,EAAImH,UAAU6M,IAAIF,EAAQ,CACxBxM,SAAUyH,EAAWgB,iBAAiBzI,SAASC,KAC/C/C,QAAS,CAAC,GAAI,GAAI,GAAI,IACtBwK,QAAS,IAEb,CACF,IAED,CAACyC,EAAgB7I,EAAc2I,EAAiBvR,IAK7C4T,GAAqBvK,EAAAA,EAAAA,cAAY,CAAClM,EAASqE,KAC3CiQ,IAEJH,EAAkBnU,GAGd8L,EAAeM,UACjBN,EAAeM,QAAQkD,UAAUC,GAEtB8B,EAA2B9B,EADhCA,IAAMvP,KAKZ8L,EAAeM,QAAQuD,cAExB,CAAC2E,IAKEoC,GAAwBxK,EAAAA,EAAAA,cAAalM,IACzCmU,EAAkB,MAGdrI,EAAeM,UACjBN,EAAeM,QAAQkD,UAAUC,GAAM8B,EAA2B9B,GAAG,KACrEzD,EAAeM,QAAQuD,aAExB,IAKGmH,GAA+B5K,EAAAA,EAAAA,cAAalM,IAC3C8L,EAAeM,UAEpBN,EAAeM,QAAQkD,UAAUC,IAC/B,GAAIA,IAAMvP,EAAS,CAEjB,OFH2B,SAACA,EAASwP,GAAsC,IAA3BuH,EAAgBtZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC1E,MAAM,UACJuZ,EAAY,0BAAyB,YACrCC,EAAc,UAAS,YACvBC,EAAc,EAAC,SACfvF,EAAW,CAAC,EAAG,IACboF,EAEEI,EAAiB,IAAI7W,EAAAA,GAAM,CAC/Bc,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAO0V,IAETzV,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAO2V,EACPxV,MAAOyV,EACPvF,SAAUA,MAId,OAAOhH,MAAM+E,QAAQF,GAAa,IAAIA,EAAW2H,GAAkB,CAAC3H,EAAW2H,EACjF,CEjBeC,CAAoB7H,EADT8B,EAA2B9B,GAAG,GAElD,CACA,OAAO8B,EAA2B9B,GAAG,MAEvCzD,EAAeM,QAAQuD,aACtB,IAKG0H,GAAkCnL,EAAAA,EAAAA,cAAalM,IAC9C8L,EAAeM,UAEpBN,EAAeM,QAAQkD,UAAUC,GAAM8B,EAA2B9B,GAAG,KACrEzD,EAAeM,QAAQuD,aACtB,IAyCH,OAtCAiB,EAAAA,EAAAA,YAAU,KACJ/N,GAAO5E,GAAQgW,GACjBO,IAGK,KAEDN,EAAgB9H,SAClB8H,EAAgB9H,QAAQ1C,UAEtBoC,EAAeM,SAAWvJ,GAC5BA,EAAIgO,YAAY/E,EAAeM,YAGlC,CAACvJ,EAAK5E,EAAMgW,EAAqBO,KAGpC5D,EAAAA,EAAAA,YAAU,KACJwD,EACF0C,EAA6B1C,GACpBtI,EAAeM,SAExBiL,MAED,CAACjD,EAAiB0C,EAA8BO,KAGnDzG,EAAAA,EAAAA,YAAU,KACR,GAAIwD,EAAiB,CACnB,MAAMkD,EAAUnS,YAAW,KACzBkP,EAAmB,QAClBzC,EAAWU,YAAYjP,YAE1B,MAAO,IAAM6B,aAAaoS,EAC5B,IACC,CAAClD,IAGCH,GAAwBhW,GAK3B6S,EAAAA,EAAAA,KAAA,OAAKrK,UAAWA,IAJT,SC/KX,GAnF2BsN,EAAAA,EAAAA,aAAW,CAAAxI,EAKnCyI,KAAS,IAL2B,KACrC/V,EAAI,aACJsZ,GAAe,EAAI,IACnB1U,EAAG,UACH4D,EAAY,iBACb8E,EAEC,MAAMK,GAAkBC,EAAAA,EAAAA,QAAO,MACzBC,GAAiBD,EAAAA,EAAAA,QAAO,MAKxB2I,GAAkBtI,EAAAA,EAAAA,cAAY,KAClC,GAAKrJ,GAAQ5E,EAGb,GAAKA,EAAKwW,UAAa9J,MAAM+E,QAAQzR,EAAKwW,WAAsC,IAAzBxW,EAAKwW,SAAS/W,OAKrE,IAEE,MAMMgX,EANgB,IAAIC,EAAAA,EAAQ,CAChCC,eAAgBpB,GAAgCA,EAChDqB,kBAAmBrB,IAIiBsB,aAAa7W,GAGnD2N,EAAgBQ,QAAU,IAAIC,EAAAA,EAAa,CACzCoI,SAAUC,IAIZ5I,EAAeM,QAAU,IAAIE,EAAAA,EAAY,CACvCC,OAAQX,EAAgBQ,QACxBjF,MAAQnH,GHyBmB,SAACA,GAAgC,IAAvBsR,EAAS7T,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACpD,MAAMiU,EAASJ,EAAYP,EAAaK,SAASF,MAAQH,EAAaK,SAEtE,OAAO,IAAI9Q,EAAAA,GAAM,CACfc,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAOoQ,EAAOtQ,OAEhBG,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAOoQ,EAAOnQ,OACdE,MAAO6P,EAAY,EAAI,KAG7B,CGrC4BkG,CAAoBxX,GAAS,GACjD2H,OAAQ,EACR8P,aAAa,IAIf5U,EAAI2J,SAASV,EAAeM,SAE5BnP,QAAQG,IAAI,0CAADkB,OAA2CoW,EAAgBhX,OAAM,aAE9E,CAAE,MAAOd,GACPK,QAAQL,MAAM,6CAA8CA,EAC9D,MAlCEK,QAAQC,KAAK,qDAAmDe,KAoCjE,CAAC4E,EAAK5E,IAiBT,OAdA2S,EAAAA,EAAAA,YAAU,KACJ/N,GAAO5E,GAAQsZ,GACjB/C,IAGK,KAED1I,EAAeM,SAAWvJ,GAC5BA,EAAIgO,YAAY/E,EAAeM,YAGlC,CAACvJ,EAAK5E,EAAMsZ,EAAc/C,IAGxB+C,GAAiBtZ,GAKpB6S,EAAAA,EAAAA,KAAA,OAAKrK,UAAWA,IAJT,QCqGX,EAhLyB8E,IAQlB,IARmB,oBACxBmM,EAAmB,aACnBC,EAAY,oBACZ1D,GAAsB,EAAI,aAC1BsD,GAAe,EAAI,aACnB9L,EAAY,IACZ5I,EAAG,UACH4D,EAAY,iBACb8E,EAEC,MAAMqM,GAAqB/L,EAAAA,EAAAA,QAAO,MAC5BgM,GAAchM,EAAAA,EAAAA,QAAO,OAGpBiM,EAAcC,GAAmB/L,EAAAA,SAAe,CACrDgF,gBAAiB,CACfgH,QAAS/D,EACTgE,QAAQ,EACRrb,MAAO,MAETwU,SAAU,CACR4G,QAAST,EACTU,QAAQ,EACRrb,MAAO,QAKLsb,GAAe3D,EAAAA,EAAAA,UAAQ,KACpB,CACLvD,gBAAiB0G,GAAuBA,EAAoBjD,UAAYiD,EAAoBjD,SAAS/W,OAAS,EAC9G0T,SAAUuG,GAAgBA,EAAalD,UAAYkD,EAAalD,SAAS/W,OAAS,KAEnF,CAACga,EAAqBC,IAKnBQ,GAAoBjM,EAAAA,EAAAA,cAAY,CAACkM,EAAWC,KAChDN,GAAgBO,IAAIvV,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACfuV,GAAI,IACP,CAACF,IAASrV,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACLuV,EAAKF,IACLC,SAGN,IAYGE,GAAmBrM,EAAAA,EAAAA,cAAY,CAACkM,EAAWxb,KAC/CK,QAAQL,MAAM,qCAAD0B,OAAsC8Z,EAAS,KAAKxb,GACjEub,EAAkBC,EAAW,CAAExb,MAAOA,EAAMO,YAC3C,CAACgb,IAKEK,GAAqBtM,EAAAA,EAAAA,cAAakM,IACtCD,EAAkBC,EAAW,CAAEH,QAAQ,EAAMrb,MAAO,SACnD,CAACub,IAKEM,GAAiBvM,EAAAA,EAAAA,cAAY,KACjC,MAAMwM,EAAQ,CACZC,MAAO,EACPX,QAAS,EACTC,OAAQ,EACRW,OAAQ,GAUV,OAPA3R,OAAO4R,OAAOf,GAAczH,SAAQyI,IAClCJ,EAAMC,QACFG,EAAMd,SAASU,EAAMV,UACrBc,EAAMb,QAAQS,EAAMT,SACpBa,EAAMlc,OAAO8b,EAAME,YAGlBF,IACN,CAACZ,IAKEiB,GAAgB7M,EAAAA,EAAAA,cAAY,KACzB,CACL8E,iBAAejO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACV+U,EAAa9G,iBAAe,IAC/BgI,QAASd,EAAalH,gBACtBiI,aAAcf,EAAalH,gBAAkB0G,EAAoBjD,SAAS/W,OAAS,IAErF0T,UAAQrO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACH+U,EAAa1G,UAAQ,IACxB4H,QAASd,EAAa9G,SACtB6H,aAAcf,EAAa9G,SAAWuG,EAAalD,SAAS/W,OAAS,OAGxE,CAACoa,EAAcI,EAAcR,EAAqBC,IA6BrD,OA1BA/G,EAAAA,EAAAA,YAAU,KACR,MAAM8H,EAAQD,IACR5N,EAAOkO,IAEb9b,QAAQG,IAAI,yCAA0C,CACpDsb,QACA7N,OACAqN,mBAED,CAACJ,EAAcW,EAAgBM,EAAeb,KAGjDtH,EAAAA,EAAAA,YAAU,KACRmH,GAAgBO,IAAI,CAClBtH,iBAAejO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACVuV,EAAKtH,iBAAe,IACvBgH,QAAS/D,IAEX7C,UAAQrO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACHuV,EAAKlH,UAAQ,IAChB4G,QAAST,UAGZ,CAACtD,EAAqBsD,IAGpBW,EAAalH,iBAAoBkH,EAAa9G,UAWjD8H,EAAAA,EAAAA,MAAA,OAAKzS,UAAWA,EAAU0S,SAAA,CAEvBjB,EAAalH,kBACZF,EAAAA,EAAAA,KAACsI,EAAyB,CACxBpF,IAAK4D,EACL3Z,KAAMyZ,EACNjM,aAAcA,EACdwI,oBAAqBA,EACrBpR,IAAKA,EACLwW,OAAQA,IAAMb,EAAmB,mBACjCc,QAAU1c,GAAU2b,EAAiB,kBAAmB3b,KAK3Dsb,EAAa9G,WACZN,EAAAA,EAAAA,KAACyI,EAAkB,CACjBvF,IAAK6D,EACL5Z,KAAM0Z,EACNJ,aAAcA,EACd1U,IAAKA,EACLwW,OAAQA,IAAMb,EAAmB,YACjCc,QAAU1c,GAAU2b,EAAiB,WAAY3b,SA/BrDkU,EAAAA,EAAAA,KAAA,OAAKrK,UAAWA,EAAU0S,UACxBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gCAA+B0S,SAAC,4CC5I1CK,EAAiBA,KAC5B,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,CAC3ClY,MAAyB,qBAAXK,OAAyBA,OAAOC,WAAa,KAC3DyM,OAA0B,qBAAX1M,OAAyBA,OAAO8X,YAAc,OAGxDhY,EAAUiY,IAAeF,EAAAA,EAAAA,WAAS,IAClCG,EAAUC,IAAeJ,EAAAA,EAAAA,WAAS,IAClCK,EAAWC,IAAgBN,EAAAA,EAAAA,WAAS,IAE3C/I,EAAAA,EAAAA,YAAU,KACR,MAAMsJ,EAAeA,KACnB,MAAMzY,EAAQK,OAAOC,WACfyM,EAAS1M,OAAO8X,YAEtBF,EAAc,CAAEjY,QAAO+M,WAGvBqL,EAAYpY,GAAS,KACrBsY,EAAYtY,GAAS,KAAOA,GAAS,MACrCwY,EAAaxY,GAAS,OAUxB,OANAK,OAAO4G,iBAAiB,SAAUwR,GAGlCA,IAGO,IAAMpY,OAAOqY,oBAAoB,SAAUD,KACjD,IA4CH,MAAO,CACLT,aACA7X,WACAkY,WACAE,YACAI,WA3CIxY,EACK,CACLyY,OAAQ,IACRC,WAAY,GACZC,QAAS,EACTzR,KAAM,KAINgR,EACK,CACLO,OAAQ,GACRC,WAAY,GACZC,QAAS,EACTzR,KAAM,IAKH,CACLuR,OAAQ,GACRC,WAAY,GACZC,QAAS,EACTzR,KAAM,IAqBR0R,cAbO,CACLC,qBAAsB3Y,OAAO4Y,WAAW,oCAAoCC,QAC5EC,oBAAqB9Y,OAAO4Y,WAAW,4BAA4BC,QACnEE,YAAapB,EAAWhY,MAAQgY,EAAWjL,UCGjD,EAxE+BjD,IAAiB,IAAhB,OAAEuP,GAAQvP,EACxC,MAAM,WAAE6O,EAAU,cAAEI,EAAa,SAAE5Y,EAAQ,SAAEkY,GAAaN,IACpDuB,GAAclP,EAAAA,EAAAA,QAAO,MA4D3B,OA1DA+E,EAAAA,EAAAA,YAAU,KACR,IAAKmK,EAAY3O,SAAkB,OAAN0O,QAAM,IAANA,IAAAA,EAAQ1O,QAAS,OAE9C,MAIM4O,EAJMF,EAAO1O,QACE6O,cAAcC,WAGNC,MAAKC,GAChCA,EAAQC,cAAgBD,EAAQC,eAAe1U,SAAS,aAG1D,GAAIqU,EAAa,CACf,MAAM1U,EAAU0U,EAAY1U,QAG5BA,EAAQa,MAAMkT,OAAM,GAAA/b,OAAM8b,EAAWC,OAAM,MAC3C/T,EAAQa,MAAM2B,KAAI,GAAAxK,OAAM8b,EAAWtR,KAAI,MAGvBxC,EAAQgV,iBAAiB,6BACjCjL,SAAQkL,IACdA,EAAOpU,MAAMqU,UAAS,GAAAld,OAAM8b,EAAWE,WAAU,MACjDiB,EAAOpU,MAAMsU,SAAQ,GAAAnd,OAAM8b,EAAWE,WAAU,MAChDiB,EAAOpU,MAAMuU,aAAY,GAAApd,OAAM8b,EAAWG,QAAO,MAG7CC,EAAcC,uBAChBc,EAAOpU,MAAMqB,WAAa,QAGxBgS,EAAcI,sBAChBW,EAAOpU,MAAMJ,gBAAkB,QAC/BwU,EAAOpU,MAAMc,OAAS,kBACtBsT,EAAOpU,MAAM7F,MAAQ,WAG3B,IACC,CAAC8Y,EAAYI,EAAeM,KAG/BlK,EAAAA,EAAAA,YAAU,KACR,IAAKmK,EAAY3O,QAAS,OAE1B,MAAM9F,EAAUyU,EAAY3O,QAG5B9F,EAAQqV,UAAUvV,OAAO,mBAAoB,mBAAoB,qBAG7DxE,EACF0E,EAAQqV,UAAUC,IAAI,oBACb9B,EACTxT,EAAQqV,UAAUC,IAAI,oBAEtBtV,EAAQqV,UAAUC,IAAI,uBAEvB,CAACha,EAAUkY,KAGZhJ,EAAAA,EAAAA,KAAA,OACEkD,IAAK+G,EACLtU,UAAU,2BACV,cAAa7E,EAAW,SAAWkY,EAAW,SAAW,UACzD,qBAAoB+B,KAAKC,UAAUtB,MCtEzC,GAJmBxO,EAAAA,YAAiB,CAAC+P,EAAO/H,KACnClD,EAAAA,EAAAA,KAAA,OAAA/N,EAAAA,EAAAA,GAAA,CAAKiZ,GAAG,MAAMvV,UAAU,gBAAgBuN,IAAKA,GAAS+H,MCuB/DE,EAAAA,EAAMC,KAAK,YAAa,+DACxBC,EAAAA,EAAAA,IAASF,EAAAA,GAET,MAqKA,GArKsB1Q,IAcf,IAdgB,WACrBC,EAAa,GAAE,aACfC,EAAY,OACZvB,EAAS0H,EAAW1H,OAAM,KAC1BE,EAAOwH,EAAWxH,KAAI,UACtB3D,EAAY,kBAAiB,oBAE7BiR,EAAsB,KAAI,aAC1BC,EAAe,KAAI,oBACnB1D,GAAsB,EAAI,aAC1BsD,GAAe,EAAI,eAEnB7L,GAAiB,EAAI,iBACrBC,GAAmB,GACpBJ,EACC,MAAM6Q,GAAevQ,EAAAA,EAAAA,QAAO,MACtBhJ,GAAMgJ,EAAAA,EAAAA,QAAO,MACbwQ,GAAYxQ,EAAAA,EAAAA,QAAO,OAClB,CAAEyQ,IAAc3C,EAAAA,EAAAA,UAAS,CAC9BxJ,IAAKjG,EAAO,GACZ+F,IAAK/F,EAAO,GACZE,KAAMA,IAIFkK,GAAiBC,EAAAA,EAAAA,UAAQ,IAAM3S,KAAY,IAC3C2a,EAAgBjI,EAAiB1C,EAAW9N,OAAOoG,OAASA,EAC5DsS,EAAclI,EAAiB1C,EAAW9N,OAAOsG,KAAOA,EAKxDqS,GAAmBvQ,EAAAA,EAAAA,cAAY,KAc5B,CAAEwQ,eAbc,IAAIC,EAAAA,EAAU,CACnCpQ,OAAQ,IAAIqQ,EAAAA,EAAI,CACdlJ,IAAKD,EAA4BC,IACjCC,aAAcF,EAA4BE,aAC1C9B,QAAS4B,EAA4B5B,QACrC+B,MAAOH,EAA4BG,MACnCC,eAAgBJ,EAA4BI,eAC5CC,SAAUL,EAA4BK,WAExC+I,QAAS,EACTC,wBAAwB,OAIzB,IAKGC,GAAgB7Q,EAAAA,EAAAA,cAAY,KAChC,GAAIrJ,EAAIuJ,QAAS,OAGjB,MAAM,eAAEsQ,GAAmBD,IAC3BJ,EAAUjQ,QAAUsQ,EAGpB7Z,EAAIuJ,QAAU,IAAI7I,EAAAA,EAAI,CACpByZ,OAAQZ,EAAahQ,QACrB6Q,OAAQ,CAACZ,EAAUjQ,SACnBrC,KAAM,IAAImT,EAAAA,GAAK,CACbhT,QAAQuG,EAAAA,EAAAA,IAAW8L,GACnBnS,KAAMoS,EACN3K,QAASD,EAAWC,QACpBC,QAASF,EAAWE,QACpBqL,gBAAgB,IAElBC,UAAUC,EAAAA,EAAAA,OASZxa,EAAIuJ,QAAQhI,GAAG,WAAW,KACxB,MAAM2F,EAAOlH,EAAIuJ,QAAQpC,UACnBE,GAASoT,EAAAA,EAAAA,IAASvT,EAAKwT,aACvBC,EAAU,CACdrN,IAAKjG,EAAO,GAAGuT,QAAQ,GACvBxN,IAAK/F,EAAO,GAAGuT,QAAQ,GACvBrT,KAAML,EAAK2T,UAAUD,QAAQ,IAG/BnB,EAAWkB,MAGbvgB,QAAQG,IAAI,mDAEX,CAACmf,EAAeC,EAAaC,IAK1BkB,GAAkBzR,EAAAA,EAAAA,cAAY,KAClC,IAAKrJ,EAAIuJ,QAAS,OAElB,MAAMkI,EAAiB1S,IACjBgc,EAAYtJ,EAAiB1C,EAAW9N,OAAOoG,OAASA,EACxD2T,EAAUvJ,EAAiB1C,EAAW9N,OAAOsG,KAAOA,EAEpDL,EAAOlH,EAAIuJ,QAAQpC,UACnB8T,GAAgBR,EAAAA,EAAAA,IAASvT,EAAKwT,aAC9BQ,EAAchU,EAAK2T,UAGrBI,EAAc,KAAOF,EAAU,IAAME,EAAc,KAAOF,EAAU,IAAMG,IAAgBF,IAC5F9T,EAAKiU,WAAUvN,EAAAA,EAAAA,IAAWmN,IAC1B7T,EAAKkU,QAAQJ,MAEd,CAAC3T,EAAQE,IAmBZ,OAhBAwG,EAAAA,EAAAA,YAAU,KACRmM,IAEO,KACDla,EAAIuJ,UACNvJ,EAAIuJ,QAAQ8R,eAAUvgB,GACtBkF,EAAIuJ,QAAU,SAGjB,CAAC2Q,KAGJnM,EAAAA,EAAAA,YAAU,KACR+M,MACC,CAACA,KAGF7M,EAAAA,EAAAA,KAACqN,GAAU,CAACnK,IAAKoI,EAAajD,SAE3BtW,EAAIuJ,UACH8M,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,EAEErI,EAAAA,EAAAA,KAACuN,EAAiB,CAChB7S,WAAYA,EACZC,aAAcA,EACdC,eAAgBA,EAChBC,iBAAkBA,EAClB9I,IAAKA,EAAIuJ,WAIX0E,EAAAA,EAAAA,KAACwN,EAAgB,CACf5G,oBAAqBA,EACrBC,aAAcA,EACd1D,oBAAqBA,EACrBsD,aAAcA,EACd9L,aAAcA,EACd5I,IAAKA,EAAIuJ,WAIX0E,EAAAA,EAAAA,KAACyN,EAAsB,CAACzD,OAAQjY,UCvLpC2b,GAAQ,CAAC,EAQFC,GAAmBC,IAC9B,MAAOzgB,EAAM0gB,IAAWhF,EAAAA,EAAAA,UAAS,OAC1BiF,EAASC,IAAclF,EAAAA,EAAAA,WAAS,IAChC/c,EAAOkiB,IAAYnF,EAAAA,EAAAA,UAAS,MAmCnC,OAjCA/I,EAAAA,EAAAA,YAAU,KACR,IAAK8N,EAAK,OAEW/hB,WACnB,GAAI6hB,GAAME,GAGP,OAFAvS,EAAO3B,MAAM,6BAADlM,OAA8BogB,EAAG,+BAC7CC,EAAQH,GAAME,IAGjBG,GAAW,GACX,IAAK,IAADE,EACD,MAAMrL,EAAG,GAAApV,OAAMwB,QAAsB,KAAAxB,OAAIogB,EAAG,YAC5CvS,EAAO3B,MAAM,+BAADlM,OAAgCogB,EAAG,QAAQhL,GACvD,MAAMsL,QAAiBC,MAAMvL,GAC7B,IAAKsL,EAASE,GAAI,MAAM,IAAIC,MAAM,2BAAD7gB,OAA4B0gB,EAASI,OAAM,MAC5E,MAAMC,QAAgBL,EAASM,OAC/BnT,EAAO3B,MAAM,oBAADlM,OAAqBogB,EAAG,2BAA2B,CAC7D9Z,KAAMya,EAAQza,KACd6P,UAA0B,QAAhBsK,EAAAM,EAAQ5K,gBAAQ,IAAAsK,OAAA,EAAhBA,EAAkBrhB,SAAU,IAExC8gB,GAAME,GAAOW,EACbV,EAAQU,EACX,CAAE,MAAOE,GACNpT,EAAOvP,MAAM,qCAAD0B,OAAsCogB,EAAG,KAAKa,GAC1DT,EAASS,EACZ,CAAC,QACEV,GAAW,EACd,GAGFW,KACC,CAACd,IAEG,CAAEzgB,OAAM2gB,UAAShiB,UCzCb6iB,GAAoBA,CAAC7d,EAAU8d,KACnCnL,EAAAA,EAAAA,UAAQ,IACT3S,EAIK,CACL+d,UAAW,CACTC,KAAM,gBACNC,UAAW,iBAEbC,SAAU,CACRF,KAAM,iBACNC,UAAW,mBAOR,CACLF,UAAW,CACTC,KAAM,iBACNC,UAAW,iBAEbC,SAAU,CACRF,KAAM,gBACNC,UAAW,oBAIhB,CAACje,IAMOme,GAAiBxU,IAAuD,IAAtD,SAAE3J,EAAQ,YAAE8d,EAAW,UAAEjZ,EAAY,WAAW8E,EAC7E,MAAMyU,EAAaP,GAAkB7d,GAC/Bqe,EAAgBP,EAAcM,EAAWL,UAAYK,EAAWF,SAEtE,OACEhP,EAAAA,EAAAA,KAAA,OACErK,UAAWA,EACXrF,KAAK,OACLG,OAAO,eACP2e,QAAQ,YACR,aAAYD,EAAcJ,UAAU1G,UAEpCrI,EAAAA,EAAAA,KAAA,QACEqP,cAAc,QACdC,eAAe,QACflJ,YAAa,EACbmJ,EAAGJ,EAAcL,U,gBCtDzB,MAAMU,GAAc/U,IAMb,IANc,WACnBC,EAAU,aACVC,EAAY,aACZ8U,GAAe,EAAK,UACpB9Z,EAAY,kBAAiB,cAC7B+Z,GAAgB,GACjBjV,EAEC,MAAQtN,KAAMyZ,EAAqBkH,QAAS6B,EAAe7jB,MAAO8jB,GAAgBjC,GAAgB,qBAC1FxgB,KAAM0Z,EAAciH,QAAS+B,EAAe/jB,MAAOgkB,GAAgBnC,GAAgB,OAGpFxK,EAAqB4M,IAA0BlH,EAAAA,EAAAA,WAAS,IACxDpC,EAAcuJ,IAAmBnH,EAAAA,EAAAA,WAAS,IAG1CjO,EAAgBqV,IAAqBpH,EAAAA,EAAAA,WAAS,IAG/C,SAAE/X,IAAaof,EAAAA,GAAAA,MACdtB,EAAauB,IAAkBtH,EAAAA,EAAAA,WAAS,GAGzCuH,GAAiBhV,EAAAA,EAAAA,cAAY,IAAM+U,GAAe3I,IAASA,KAAO,KAGxE1H,EAAAA,EAAAA,YAAU,KAAO,IAADuQ,EAAAC,EACdjV,EAAO3B,MAAM,2CAA4C,CACvDwG,gBAAiB,CACf4N,QAAS6B,EACT7jB,MAAO8jB,EACP1H,UAAWtB,EACXjD,UAA6B,OAAnBiD,QAAmB,IAAnBA,GAA6B,QAAVyJ,EAAnBzJ,EAAqBjD,gBAAQ,IAAA0M,OAAV,EAAnBA,EAA+BzjB,SAAU,GAErD0T,SAAU,CACRwN,QAAS+B,EACT/jB,MAAOgkB,EACP5H,UAAWrB,EACXlD,UAAsB,OAAZkD,QAAY,IAAZA,GAAsB,QAAVyJ,EAAZzJ,EAAclD,gBAAQ,IAAA2M,OAAV,EAAZA,EAAwB1jB,SAAU,OAG/C,CAACga,EAAqBC,EAAc8I,EAAeE,EAAeD,EAAaE,KAGlFhQ,EAAAA,EAAAA,YAAU,MACH2P,GAAgB3e,IACnBuK,EAAO3B,MAAM,gEACbuW,GAAkB,MAEnB,CAACR,EAAc3e,IAGlB,MAAMyf,EAAgBC,IAAA,IAAC,WAAEC,EAAU,SAAE3f,EAAQ,YAAE8d,GAAa4B,EAAA,OAC1DpI,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sGAAqG0S,SAAA,EAClHD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,EACtCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,UAAUrF,KAAK,OAAOG,OAAO,eAAe2e,QAAQ,YAAW/G,UAC5ErI,EAAAA,EAAAA,KAAA,QAAMqP,cAAc,QAAQC,eAAe,QAAQlJ,YAAa,EAAGmJ,EAAE,0KAEvEvP,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,sCAAqC0S,SAAC,wBAEtDrI,EAAAA,EAAAA,KAAA,UACE0Q,QAASD,EACT9a,UAAU,kGACV,aAAYiZ,EAAc,WAAa,YACvC9a,KAAK,SAAQuU,UAEbrI,EAAAA,EAAAA,KAACiP,GAAc,CACbne,SAAUA,EACV8d,YAAaA,EACbjZ,UAAU,kBAOZgb,EAAcC,IAAA,IAAC,GAAE1F,EAAE,MAAE3Q,EAAK,QAAEsW,EAAO,SAAEC,EAAQ,SAAEC,GAAW,EAAK,QAAEjD,GAAU,EAAK,MAAEhiB,GAAQ,EAAK,MAAE+b,EAAK,MAAErX,EAAK,SAAEwgB,EAAW,MAAMJ,EAAA,OACpIxI,EAAAA,EAAAA,MAAA,UACEtU,KAAK,SACL4c,QAASI,EACTC,SAAUA,EACVpb,UAAS,yFAAAnI,OACPqjB,EACI,wBACA,gCAA+B,KAAArjB,OACjCujB,EAAW,gCAAkC,kBAAmB1I,SAAA,EAGpErI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gBAAe0S,SAC3B2I,GAEChR,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wBAAuB0S,SACnC2I,EAASjf,KAAI,CAACkf,EAAMzR,KACnB4I,EAAAA,EAAAA,MAAA,OAAiBzS,UAAU,0BAAyB0S,SAAA,EAClDrI,EAAAA,EAAAA,KAAA,OACErK,UAAU,iCACVU,MAAO,CAAEJ,gBAAiBgb,EAAKzgB,UAEjCwP,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,oCAAmC0S,SAAE4I,EAAK1W,UALlDiF,QAWdQ,EAAAA,EAAAA,KAAA,OACErK,UAAS,kCAAAnI,OACPqjB,EAAU,wBAA0B,IAEtCxa,MAAO,CAAEJ,gBAAiBzF,QAMhC4X,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iBAAgB0S,SAAA,EAC7BD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,EACtCrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAS,uBAAAnI,OACbqjB,EAAU,iBAAmB,iBAC5BxI,SACA9N,SAGQ1N,IAAVgb,IACC7H,EAAAA,EAAAA,KAAA,QAAMrK,UAAS,oCAAAnI,OACbqjB,EACI,8BACA,6BACHxI,SACAR,QAMPO,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,+BAA8B0S,SAAA,CAC1CyF,IAAY4B,IACX1P,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,UACpDrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,UAAS0S,SAAC,oBAI7Bvc,IACCsc,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uCAAsC0S,SAAA,EACnDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,UAAUrF,KAAK,OAAOG,OAAO,eAAe2e,QAAQ,YAAW/G,UAC5ErI,EAAAA,EAAAA,KAAA,QAAMqP,cAAc,QAAQC,eAAe,QAAQlJ,YAAa,EAAGmJ,EAAE,yDAEvEvP,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,UAAS0S,SAAC,mBAOlCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gBAAe0S,UAGlBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,uDAAAnI,OACtBqjB,EAAU,eAAiB,uBAa7BK,EAAYpgB,EAAWgQ,EAAW9N,OAAOoG,OAAS0H,EAAW1H,OAC7D+X,EAAUrgB,EAAWgQ,EAAW9N,OAAOsG,KAAOwH,EAAWxH,KAQ/D,OANA+B,EAAO3B,MAAM,4CAAuC,CAClD5I,WACAwI,KAAM6X,EACN/X,OAAQ8X,KAIR9I,EAAAA,EAAAA,MAAA,OAAKzS,UAAWA,EAAWU,MAAO,CAAEC,SAAU,YAAa+R,SAAA,CAExDvX,GAECkP,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,qCAAoC0S,UACjDD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,oCAAmC0S,SAAA,EAChDrI,EAAAA,EAAAA,KAACuQ,EAAa,CACZE,WAAYL,EACZtf,UAAU,EACV8d,YAAaA,KAEbA,IACAxG,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,mDAAkD0S,SAAA,EAC/DrI,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,YACH3Q,MAAM,yBACNsW,QAASpK,EACTqK,SAAUA,IAAMd,GAAiBvJ,GACjCqH,QAAS+B,EACT/jB,MAAOgkB,EACPtf,MAAM,aAERwP,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,aACH3Q,MAAM,uBACNsW,QAASjW,EACTkW,SAAUA,IAAMb,GAAmBrV,GACnCpK,MAAM,aAERwP,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,mBACH3Q,MAAM,sBACNsW,QAAS1N,EACT2N,SAAUA,IAAMf,GAAwB5M,GACxC2K,QAAS6B,EACT7jB,MAAO8jB,EACPoB,SAAU,CACR,CAAEzW,MAAO,gBAAiB/J,MAAO,WACjC,CAAE+J,MAAO,aAAc/J,MAAO,uBAS1C4X,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iFAAgF0S,SAAA,EAC7FrI,EAAAA,EAAAA,KAACuQ,EAAa,CACZE,WAAYL,EACZtf,UAAU,EACV8d,YAAaA,KAEbA,IACAxG,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,mDAAkD0S,SAAA,EAC/DrI,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,YACH3Q,MAAM,yBACNsW,QAASpK,EACTqK,SAAUA,IAAMd,GAAiBvJ,GACjCqH,QAAS+B,EACT/jB,MAAOgkB,EACPtf,MAAM,aAERwP,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,aACH3Q,MAAM,uBACNsW,QAASjW,EACTkW,SAAUA,IAAMb,GAAmBrV,GACnCiN,MAAiB,OAAVnN,QAAU,IAAVA,OAAU,EAAVA,EAAY9N,OACnB4D,MAAM,aAERwP,EAAAA,EAAAA,KAAC2Q,EAAW,CACVzF,GAAG,mBACH3Q,MAAM,sBACNsW,QAAS1N,EACT2N,SAAUA,IAAMf,GAAwB5M,GACxC2K,QAAS6B,EACT7jB,MAAO8jB,EACPoB,SAAU,CACR,CAAEzW,MAAO,gBAAiB/J,MAAO,WACjC,CAAE+J,MAAO,aAAc/J,MAAO,qBAS1CwP,EAAAA,EAAAA,KAACoR,GAAa,CACZ1W,WAAYE,EAAiBF,EAAa,GAC1CC,aAAcA,EACdhF,UAAU,gBACVyD,OAAQ8X,EACR5X,KAAM6X,EAENvK,oBAAqBA,EACrBC,aAAcA,EACd1D,oBAAqBA,EACrBsD,aAAcA,EAEd7L,eAAgBA,QAMxB,GAAeM,EAAAA,KAAWsU,I,gCCrS1B,MAqIA,GArI6B/iB,IAC3B,MAAO4kB,EAAYC,IAAiBzI,EAAAA,EAAAA,UAAS,KACtC0I,EAAWC,IAAgB3I,EAAAA,EAAAA,WAAS,IACpC/c,EAAOkiB,IAAYnF,EAAAA,EAAAA,UAAS,MA+HnC,OA7HA/I,EAAAA,EAAAA,YAAU,KACgBjU,WAGtB,GAFAM,QAAQG,IAAI,0DAAiDG,EAAU,eAAgBA,IAElFA,EAIH,OAHAN,QAAQG,IAAI,sEACZglB,EAAc,SACdE,GAAa,GAIf,IACEA,GAAa,GACbrlB,QAAQG,IAAI,wDAGZ,MAAQa,KAAMskB,EAAU3lB,MAAO4lB,SAAoB3lB,GAAAA,EAAS4lB,KAAKC,aACjEzlB,QAAQG,IAAI,6CAA8B,CACxCulB,YAAqB,OAARJ,QAAQ,IAARA,IAAAA,EAAUK,SACvBhmB,MAAO4lB,IAIT,MAAQ5lB,MAAOimB,SAAmBhmB,GAAAA,EAC/BC,KAAK,qBACLC,OAAO,SACPC,MAAM,GAETC,QAAQG,IAAI,mDAAiC,CAC3C0lB,aAAcD,EACdjmB,MAAOimB,EAAW,CAChBjjB,KAAMijB,EAASjjB,KACfzC,QAAS0lB,EAAS1lB,QAClB4lB,QAASF,EAASE,QAClBC,KAAMH,EAASG,MACb,OAIN,MAAQ/kB,KAAMglB,EAASrmB,MAAOsmB,SAAuBrmB,GAAAA,EAClDC,KAAK,qBACLC,OAAO,KAENmmB,EACFjmB,QAAQL,MAAM,6CAAyC,CACrDgD,KAAMsjB,EAAatjB,KACnBzC,QAAS+lB,EAAa/lB,QACtB4lB,QAASG,EAAaH,QACtBC,KAAME,EAAaF,QAGrB/lB,QAAQG,IAAI,8CAAqC6lB,GAC7CA,GAAWA,EAAQvlB,OAAS,GAC9BT,QAAQG,IAAI,qCAA4B6lB,EAAQ,IAChDhmB,QAAQG,IAAI,+CAAsC6lB,EAAQpgB,KAAIsgB,IAAG,CAC/DnH,GAAImH,EAAInH,GACRoH,UAAWD,EAAIC,UACfC,sBAAuBF,EAAIC,UAC3BE,gBAAiBH,EAAIC,gBAGvBnmB,QAAQG,IAAI,qFAKhBH,QAAQG,IAAI,mDAA0CG,GACtD,MAAM,KAAEU,EAAI,MAAErB,SAAgBC,GAAAA,EAC3BC,KAAK,qBACLC,OAAO,KACPc,GAAG,YAAaN,EAASgmB,YACzBrlB,MAAM,aAAc,CAAEC,WAAW,IAEpC,GAAIvB,EAOF,MANAK,QAAQL,MAAM,oCAAgC,CAC5CgD,KAAMhD,EAAMgD,KACZzC,QAASP,EAAMO,QACf4lB,QAASnmB,EAAMmmB,QACfC,KAAMpmB,EAAMomB,OAERpmB,EAIR,GADAK,QAAQG,IAAI,kCAAiC,OAAJa,QAAI,IAAJA,OAAI,EAAJA,EAAMP,SAAU,GACpC,KAAb,OAAJO,QAAI,IAAJA,OAAI,EAAJA,EAAMP,QAAc,CACtBT,QAAQG,IAAI,6DAAoDG,GAChEN,QAAQG,IAAI,wEAGZ,MAAQa,KAAMulB,EAAc5mB,MAAO6mB,SAAwB5mB,GAAAA,EACxDC,KAAK,qBACLC,OAAO,KACPc,GAAG,YAAa6lB,OAAOnmB,KAElBU,KAAM0lB,EAAc/mB,MAAOgnB,SAAwB/mB,GAAAA,EACxDC,KAAK,qBACLC,OAAO,KACPc,GAAG,YAAagmB,OAAOtmB,IAE1BN,QAAQG,IAAI,2CAAyC,CACnD0mB,OAAmB,OAAZN,QAAY,IAAZA,OAAY,EAAZA,EAAc9lB,SAAU,EAC/Bd,MAAO6mB,IAETxmB,QAAQG,IAAI,wCAAyC,CACnD0mB,OAAmB,OAAZH,QAAY,IAAZA,OAAY,EAAZA,EAAcjmB,SAAU,EAC/Bd,MAAOgnB,GAEX,MACE3mB,QAAQG,IAAI,qCAA4Ba,GAG1CmkB,EAAcnkB,GAAQ,GACxB,CAAE,MAAOshB,GACPtiB,QAAQL,MAAM,oCAAgC2iB,GAC9CT,EAASS,EAAIpiB,QACf,CAAC,QACCmlB,GAAa,EAEf,GAGFyB,KAEC,CAACxmB,IAEG,CAAE4kB,aAAYE,YAAWzlB,U,yHClIlC,MAqEMonB,IAAWC,EAAAA,EAAAA,OAAK3C,IAAkE,IAAjE,SAAEnI,EAAQ,QAAE+K,EAAU,WAAU,IAAEC,EAAM,EAAC,UAAE1d,EAAY,IAAI6a,EAQhF,OACExQ,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,QAAAnI,OARI,CAClB,WAAY,6BACZ,EAAK,cACL,EAAK,6BACL,EAAK,8BAI+B4lB,GAAQ,SAAA5lB,OAAQ6lB,EAAG,KAAA7lB,OAAImI,EAAS,uBAAsB0S,SACvFA,OAMDiL,IAAYH,EAAAA,EAAAA,OAAKvC,IAA+B,IAA9B,KAAEzjB,EAAI,UAAEwI,EAAY,IAAIib,EAC9C,OAAKzjB,GAAwB,IAAhBA,EAAKP,QAGhBoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,2CAAAnI,OAA6CmI,GAAY0S,UACrErI,EAAAA,EAAAA,KAAA,SAAOrK,UAAU,SAAQ0S,UACvBrI,EAAAA,EAAAA,KAAA,SAAAqI,SACGlb,EAAK4E,KAAI,CAACwhB,EAAK/T,KACd4I,EAAAA,EAAAA,MAAA,MAAgBzS,UAAW6J,EAAQ,IAAM,EAAI,WAAa,cAAc6I,SAAA,EACtErI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,wEAAuE0S,SAClFkL,EAAIhZ,SAEPyF,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,kCAAiC0S,SAC5CkL,EAAIC,UALAhU,WAPoB,QAuBnCiU,IAAYN,EAAAA,EAAAA,OAAKO,IAAgC,IAA/B,MAAE9L,EAAK,UAAEjS,EAAY,IAAI+d,EAC/C,OAAK9L,GAA0B,IAAjBA,EAAMhb,QAGlBoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,yCAAAnI,OAA2CmI,EAAS,+DAA8D0S,SAC7HT,EAAM7V,KAAI,CAAC4hB,EAAMnU,KAChB4I,EAAAA,EAAAA,MAAA,OAAiBzS,UAAU,6BAA4B0S,SAAA,EACrDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2BAA0B0S,SACtCsL,EAAKC,OAAQ5T,EAAAA,EAAAA,KAAC2T,EAAKC,KAAI,CAACje,UAAU,6BAErCqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2CAA0C0S,SACtDsL,EAAKH,SAERxT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6BAA4B0S,SACxCsL,EAAKpZ,UARAiF,OALyB,QA6G3C,IAvFoB2T,EAAAA,EAAAA,OAAKU,IASlB,IATmB,MACxBC,EACAF,KAAMlkB,EAAI,SACV2Y,EAAQ,YACR0L,EAAW,iBACXC,GAAmB,EAAK,UACxBre,EAAY,GAAE,OACdse,EAAS,UAAS,YAClBC,EAAc,CAAC,GAChBL,EACC,MAAOM,EAAaC,IAAkBvL,EAAAA,EAAAA,UAASmL,GA6B/C,OACE5L,EAAAA,EAAAA,MAAA,WACEzS,UAAS,+FAAAnI,OAGLmI,EAAS,YACX0S,SAAA,EAEFrI,EAAAA,EAAAA,KAAA,UACE0Q,QAASA,IAAM0D,GAAgBD,GAC/Bxe,UAAU,mJAMV,iBAAgBwe,EAChB,mBAAA3mB,OAAkBsmB,EAAK,YAAWzL,UAElCD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,CACrC3Y,IAAQsQ,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,2BACzBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,gBAAe0S,SAAEyL,UAInCK,IACA/L,EAAAA,EAAAA,MAAA,OACE8C,GAAE,GAAA1d,OAAKsmB,EAAK,YACZne,UAAU,YACV0e,KAAK,SACL,qBAAA7mB,OAAoBsmB,EAAK,WAAUzL,SAAA,CAElC0L,IACC/T,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,8BAA6B0S,UAC1CrI,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,wCAAuC0S,SACjD0L,MA9DOO,MACpB,IAAKjM,EAAU,OAAO,KAEtB,OAAQ4L,GACN,IAAK,OACH,OACEjU,EAAAA,EAAAA,KAACkT,IAAQjhB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKiiB,GAAW,IAAA7L,SACtBA,KAGP,IAAK,QACH,OACErI,EAAAA,EAAAA,KAACsT,GAAS,CAACnmB,KAAM+mB,EAAY/mB,KAAMwI,UAAWue,EAAYve,YAE9D,IAAK,QACH,OACEqK,EAAAA,EAAAA,KAACyT,GAAS,CAAC7L,MAAOsM,EAAYtM,MAAOjS,UAAWue,EAAYve,YAEhE,QACE,OACEqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,YAAW0S,SACvBA,MA6CFiM,YCtMLC,GAAcC,GACbA,EACEA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,MAAM,GAAGC,cADjC,GAIbC,GAAcpa,IAAkD,IAA/CmZ,KAAMlkB,EAAI,MAAE6K,EAAK,MAAEiZ,EAAK,KAAE1f,EAAO,QAAQ2G,EA4B9D,OACE2N,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2HAA0H0S,SAAA,EAEvID,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sFAAqF0S,SAAA,EAClGrI,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,uDAChBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,kDAAiD0S,SAAE9N,QAGrEyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0CAAyC0S,SAnCxCyM,MAClB,OAAQhhB,GACN,IAAK,UACH,OAAO0f,GACLpL,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,iDAAgD0S,SAAA,EAC9DrI,EAAAA,EAAAA,KAAC+U,GAAAA,EAAK,CAACpf,UAAU,0BAA0B,UAI7CyS,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,+CAA8C0S,SAAA,EAC5DrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CAACrf,UAAU,0BAA0B,YAI7C,IAAK,SACH,OACEqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6DAA4D0S,UACzErI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sCAAsCU,MAAO,CAACI,SAAU,WAAYE,WAAY,MAAOnG,MAAO,WAAW6X,SACrHmL,GAAS,QAIlB,QACE,OAAOxT,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,uDAAsD0S,SAAEmL,MAa9EsB,SAcHG,GAAiBzE,IAAiB,IAAhB,OAAE0E,GAAQ1E,EAGhC,KAF2B0E,EAAOC,YAAcD,EAAOE,QAAUF,EAAOG,QAAUH,EAAOI,KAGvF,OACEtV,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mCAAkC0S,UAC/CrI,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,qCAAoC0S,SAC9CkM,GAAWW,EAAOK,cAa3B,OACEnN,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iBAAgB0S,SAAA,CARX,CACpB,CAAEmN,MAAO,aAAcjb,MAAO,cAC9B,CAAEib,MAAO,SAAUjb,MAAO,aAC1B,CAAEib,MAAO,cAAejb,MAAO,eAC/B,CAAEib,MAAO,SAAUjb,MAAO,WAKTxI,KAAI6e,IAAA,IAAC,MAAE4E,EAAK,MAAEjb,GAAOqW,EAAA,OAClCsE,EAAOM,KACLpN,EAAAA,EAAAA,MAAA,OAAiBzS,UAAU,uDAAsD0S,SAAA,EAC/ErI,EAAAA,EAAAA,KAACyV,GAAAA,EAAM,CAAC9f,UAAU,gDAClByS,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,SAAQ0S,SAAA,EACrBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2CAA0C0S,SAAE9N,KAC3DyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,qCAAoC0S,SAAE6M,EAAOM,UAJtDA,OAUZN,EAAOI,KAAOJ,EAAOQ,UACrBtN,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uDAAsD0S,SAAA,EACnErI,EAAAA,EAAAA,KAACyV,GAAAA,EAAM,CAAC9f,UAAU,gDAClByS,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,SAAQ0S,SAAA,EACrBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2CAA0C0S,SAAC,uBAC1DrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,qCAAoC0S,SAChD,CAAC6M,EAAO5Q,UAAW4Q,EAAOQ,OAAQR,EAAOI,KAAK3jB,OAAOC,SAAS+jB,KAAK,kBAS5EC,GAAYlC,IAAiB,IAAhB,OAAEwB,GAAQxB,EAG3B,KAFuBwB,EAAOW,UAAYX,EAAOY,WAE5B,OAAO,KAM5B,OACE1N,EAAAA,EAAAA,MAAA,UACEsI,QANYqF,KACd/kB,OAAOglB,KAAK,iCAADxoB,OAAkC0nB,EAAOW,SAAQ,KAAAroB,OAAI0nB,EAAOY,WAAa,WAMlFngB,UAAU,qJAAoJ0S,SAAA,EAE9JrI,EAAAA,EAAAA,KAACiW,GAAAA,EAAU,CAACtgB,UAAU,YAAY,yBAMlCugB,GAAcrC,IAAoC,IAAnC,MAAEsC,EAAK,SAAEnH,EAAQ,SAAEoH,GAAUvC,EAChD,MAAMwC,GAAeF,GAAS,IAAIpoB,MAAM,KAAKgE,KAAI6Q,GAAOA,EAAI0T,SAAQ3kB,OAAOC,SAE3E,OAA2B,IAAvBykB,EAAYzpB,OAAqB,MAGnCwb,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,EACtCD,EAAAA,EAAAA,MAAA,UACEsI,QAASA,IAAM0F,EAAS,UACxBzgB,UAAU,4EACV,gBAAeqZ,EAASuH,OAAOlO,SAAA,EAE/BD,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,oDAAmD0S,SAAA,EACjErI,EAAAA,EAAAA,KAACwW,GAAAA,EAAK,CAAC7gB,UAAU,0BAA0B,kBAC3B0gB,EAAYzpB,OAAO,QAErCoT,EAAAA,EAAAA,KAACyW,GAAAA,EAAY,CACX9gB,UAAS,8CAAAnI,OACPwhB,EAASuH,OAAS,YAAc,SAKrCvH,EAASuH,SACRvW,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,+CAA8C0S,UAC3DrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,iBAAgB0S,SAC5BgO,EAAYtkB,KAAI,CAAC2kB,EAAMlX,KACtB4I,EAAAA,EAAAA,MAAA,KAEEuO,KAAMD,EACNxK,OAAO,SACP0K,IAAI,sBACJjhB,UAAU,2FAA0F0S,SAAA,EAEpGrI,EAAAA,EAAAA,KAAC6W,GAAAA,EAAQ,CAAClhB,UAAU,2BACpBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,gCAA+B0S,SAAEqO,KACjD1W,EAAAA,EAAAA,KAAC8W,GAAAA,EAAY,CAACnhB,UAAU,sDARnB6J,aAkHrB,IAhGkB2T,EAAAA,EAAAA,OAAK4D,IAAiB,IAAhB,OAAE7B,GAAQ6B,EAChC,MAAO/H,EAAUgI,IAAenO,EAAAA,EAAAA,UAAS,CAAC,GAE1C,IAAKqM,EAAQ,OAAO,KAEpB,MAAM+B,EAAUrJ,IACdoJ,GAAYxP,IAAIvV,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUuV,GAAI,IAAE,CAACoG,IAAOpG,EAAKoG,QAGzCsJ,EAAiB,CACrB,CACEtD,KAAMuD,GAAAA,EACN5c,MAAO,eACPiZ,MAAOe,GAAWW,EAAO5Q,YAE3B,CACEsP,KAAMwD,GAAAA,EACN7c,MAAO,iBACPiZ,MAAO0B,EAAOmC,YACdvjB,KAAM,UAER,CACE8f,KAAM4C,GAAAA,EACNjc,MAAO,gBACPiZ,MAAO0B,EAAOoC,kBACdxjB,KAAM,YAERnC,QAAOsf,GAAQA,EAAKuC,QAEtB,OACEpL,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,CAEG6M,EAAOqC,kBACNvX,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,OAAM0S,UACnBD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,8CAA6C0S,SAAA,CAAC,wBAC1CrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,2BAA0B0S,SAAE6M,EAAOqC,wBAI1EnP,EAAAA,EAAAA,MAACoP,GAAW,CAAC1D,MAAM,oBAAcF,KAAM6B,GAAAA,EAAOpN,SAAA,EAE5CD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sEAAqE0S,SAAA,CACjF6O,EAAenlB,KAAI,CAACkf,EAAMzR,KACzBQ,EAAAA,EAAAA,KAAC6U,IAAW5iB,EAAAA,EAAAA,GAAA,GAAiBgf,GAAXzR,KAGnB0V,EAAOuC,mBACNzX,EAAAA,EAAAA,KAAC6U,GAAW,CACVjB,KAAMuD,GAAAA,EACN5c,MAAM,sBACNiZ,MAAO0B,EAAOuC,uBAKpBrP,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,cAAa0S,SAAA,CAGzB6M,EAAOK,WACNnN,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,EACtCD,EAAAA,EAAAA,MAAA,UACEsI,QAASA,IAAMuG,EAAO,YACtBthB,UAAU,4EACV,gBAAeqZ,EAASuG,SAASlN,SAAA,EAEjCD,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,oDAAmD0S,SAAA,EACjErI,EAAAA,EAAAA,KAACmX,GAAAA,EAAQ,CAACxhB,UAAU,YAAY,kBAGlCqK,EAAAA,EAAAA,KAACyW,GAAAA,EAAY,CACX9gB,UAAS,8CAAAnI,OACPwhB,EAASuG,SAAW,YAAc,SAIvCvG,EAASuG,WACRnN,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,+CAA8C0S,SAAA,EAC3DrI,EAAAA,EAAAA,KAACiV,GAAc,CAACC,OAAQA,KACxBlV,EAAAA,EAAAA,KAAC4V,GAAS,CAACV,OAAQA,WAO3BlV,EAAAA,EAAAA,KAACkW,GAAW,CACVC,MAAOjB,EAAOwC,oBACd1I,SAAUA,EACVoH,SAAUa,gBClQtB,GAd8Bxc,IAAA,IAAC,YAAEkd,GAAald,EAAA,OAC5CuF,EAAAA,EAAAA,KAAA,OACErK,UAAU,krBAQViiB,wBAAyB,CAAEC,OAAQF,MCmBvC,GA7B6BG,KAC3B1P,EAAAA,EAAAA,MAAA,UAAQzS,UAAU,wCAAuC0S,SAAA,EACvDD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uCAAsC0S,SAAA,EACnDrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,uFAAsF0S,UACpGrI,EAAAA,EAAAA,KAAA,OACErQ,IAAG,GAAAnC,OAAKwB,QAAsB,aAC9B+oB,IAAI,sBACJpiB,UAAU,4BACVU,MAAO,CACL1E,OAAQ,OACR6E,aAAc,IACdU,UAAW,OACX8gB,OAAQ,IACRzhB,QAAS,IACTY,OAAQ,OACR8gB,QAAS,OACTpgB,UAAW,oBAEb,cAAY,YAGhBmI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,+CAA8C0S,SAAC,8BAI/DrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,kDCQnB,IA9BuBwd,EAAAA,EAAAA,OAAK1Y,IAAiC,IAAhC,OAAEya,EAAM,WAAEgD,EAAa,GAAGzd,EACrD,GAAW,OAANya,QAAM,IAANA,IAAAA,EAAQiD,mBAAoB,OAAO,KAGxC,MAAMR,EAAczC,EAAOiD,mBAE3B,OACE/P,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,wCAAuC0S,SAAA,EACpDrI,EAAAA,EAAAA,KAAC8X,GAAoB,KAGrB9X,EAAAA,EAAAA,KAAA,WACErK,UAAU,yYAQT0S,UAEDrI,EAAAA,EAAAA,KAACoY,GAAqB,CAACT,YAAaA,Y,gECzB5C,MAUA,IAVqBxE,EAAAA,EAAAA,OAAK1Y,IAAgB,IAAf,MAAE+Y,GAAO/Y,EAClC,YAAc5N,IAAV2mB,GAAiC,OAAVA,EAAuB,MAGhDxT,EAAAA,EAAAA,KAAA,QAAMrK,UAAS,wCAAAnI,OAA0CgmB,EAAQ,iBAAmB,oBAAqBnL,SACtGmL,EAAQ,MAAQ,cCSvB,MAAM6E,GAAiB5d,IAAgC,IAA/B,MAAE6d,EAAK,WAAEC,EAAa,GAAG9d,EAC/C,OAAK6d,GAA0B,IAAjBA,EAAM1rB,QAGlBoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,QAAO0S,UACpBrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,4CAA2C0S,SACtDiQ,EAAMvmB,KAAI,CAACkf,EAAMuH,KAChBpQ,EAAAA,EAAAA,MAAA,MAAczS,UAAU,mDAAkD0S,SAAA,EACxErI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,kCAAkCU,MAAO,CAACsU,SAAU,MAAOhT,QAAS,gBAAgB0Q,SAAC,YACrGrI,EAAAA,EAAAA,KAAA,QAAAqI,SAAO4I,MAFAuH,SANwB,MAiBrCC,GAAWjI,IAAkD,IAA/CoD,KAAMlkB,EAAI,MAAE6K,EAAK,MAAEiZ,EAAK,KAAE1f,EAAO,QAAQ0c,EAgB3D,OACEpI,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2HAA0H0S,SAAA,EAEvID,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sFAAqF0S,SAAA,EAClGrI,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,uDAChBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,kDAAiD0S,SAAE9N,QAGrEyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0CAAyC0S,SAtB7C,WAATvU,GAEAkM,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6DAA4D0S,UACzErI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sCAAsCU,MAAO,CAACI,SAAU,WAAYE,WAAY,MAAOnG,MAAO,WAAW6X,SACrHmL,GAAS,SAMhBxT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mEAAkE0S,SAAEmL,UAoJzF,IAjIoBL,EAAAA,EAAAA,OAAKvC,IAAiB,IAAhB,OAAEsE,GAAQtE,EAClC,IAAKsE,EAAQ,OAAO,KAGpB,MAAMwD,EAAcxD,EAAOyD,sBAAwBzD,EAA6B,sBAAK,GAC/E0D,GAhEuBzoB,EAgEgB+kB,EAAO2D,oBA/DvB,kBAAT1oB,EAEbA,EACJpC,MAAM,UACNgE,KAAIkf,GAAQA,EAAKqF,SACjB3kB,OAAOC,SALoC,GADhD,IAA+BzB,EAoE7B,MAAM2oB,EAAY,CAChBJ,GAAe,CACb9E,KAAMmF,GAAAA,EACNxe,MAAO,0BACPiZ,MAAOkF,GAET,CACE9E,KAAMoF,GAAAA,EACNze,MAAO,sBACPiZ,MAAO0B,EAAO+D,eAAiB,IAC/BnlB,KAAM,UAER,CACE8f,KAAMsF,GAAAA,EACN3e,MAAO,qBACPiZ,MAAO0B,EAAOiE,kBAEhBxnB,OAAOC,SAGHwnB,EAAiB,CACrB,CACExF,KAAMyF,GAAAA,EACN9e,MAAO,4CACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOqE,yBAErC,CACE3F,KAAMyF,GAAAA,EACN9e,MAAO,qCACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOsE,qBAErC,CACE5F,KAAMyF,GAAAA,EACN9e,MAAO,iBACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOuE,eAErC,CACE7F,KAAMyF,GAAAA,EACN9e,MAAO,qBACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOwE,mBAIvC,OACEtR,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,EACED,EAAAA,EAAAA,MAACoP,GAAW,CAAAnP,SAAA,EAEVD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,kCAAiC0S,SAAA,EAC9CD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,8BAA6B0S,SAAA,EAC1CrI,EAAAA,EAAAA,KAAC2Z,GAAAA,EAAQ,CAAChkB,UAAU,gDACpBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,oCAAmC0S,SAAC,6BAEtDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,OAAM0S,UACnBrI,EAAAA,EAAAA,KAACqY,GAAc,CAACC,MAAOM,EAAgBL,WAAY,UAKvDvY,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sEAAqE0S,SACjFyQ,EAAU/mB,KAAI,CAACkf,EAAMuH,KACpBxY,EAAAA,EAAAA,KAACyY,GAAQ,CAAW7E,KAAM3C,EAAK2C,KAAMrZ,MAAO0W,EAAK1W,MAAOiZ,MAAOvC,EAAKuC,MAAO1f,KAAMmd,EAAKnd,MAAvE0kB,WAKrBpQ,EAAAA,EAAAA,MAACoP,GAAW,CACV1D,MAAM,2BACNF,KAAMyF,GAAAA,EACNtF,YAAY,gFAA4E1L,SAAA,EAGxFrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,OAAM0S,UACnBrI,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMwF,EAAe,GAAGxF,KACxBrZ,MAAO6e,EAAe,GAAG7e,MACzBiZ,MAAO4F,EAAe,GAAG5F,UAK5B4F,EAAexsB,OAAS,IACvBoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,YAAW0S,SACvB,MACC,MAAMuR,EAAiBR,EAAezE,MAAM,GACtCkF,EAAS,GAGf,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAehtB,OAAQktB,GAAK,EAC9CD,EAAOE,KAAKH,EAAejF,MAAMmF,EAAGA,EAAI,IAG1C,OAAOD,EAAO9nB,KAAI,CAACuI,EAAO0f,KACxBha,EAAAA,EAAAA,KAAA,OAEErK,UAAS,uCAAAnI,OACU,IAAjB8M,EAAM1N,OACF,cACiB,IAAjB0N,EAAM1N,OACJ,cACA,eACLyb,SAEF/N,EAAMvI,KAAI,CAACkf,EAAMuH,KAChBxY,EAAAA,EAAAA,KAACyY,GAAQ,CAEP7E,KAAM3C,EAAK2C,KACXrZ,MAAO0W,EAAK1W,MACZiZ,MAAOvC,EAAKuC,OAAM,GAAAhmB,OAHVwsB,EAAQ,KAAAxsB,OAAIgrB,OAXnBwB,IAmBV,EA9BA,c,iGC7Ib,MAAMvB,GAAWhe,IAAA,IAAGmZ,KAAMlkB,EAAI,MAAE6K,EAAK,MAAEiZ,GAAO/Y,EAAA,OAC5C2N,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2HAA0H0S,SAAA,EAEvID,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sFAAqF0S,SAAA,EAClGrI,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,uDAChBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,kDAAiD0S,SAAE9N,QAGrEyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0CAAyC0S,UACtDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mEAAkE0S,SAAEmL,UAwEzF,IAnEuBL,EAAAA,EAAAA,OAAK3C,IAAiB,IAAhB,OAAE0E,GAAQ1E,EACrC,IAAK0E,EAAQ,OAAO,KAEpB,MAAMoD,EAAQ,CACZ,CACE1E,KAAMqG,GAAAA,EACN1f,MAAO,sBACPiZ,MAAO0B,EAAOgF,aAEhB,CACEtG,KAAMuG,GAAAA,EACN5f,MAAO,iBACPiZ,MAAO0B,EAAOkF,aAEhB,CACExG,KAAMyG,GAAAA,EACN9f,MAAO,uBACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOoF,mBAErC,CACE1G,KAAM2G,GAAAA,EACNhgB,MAAO,+BACPiZ,MAAO0B,EAAOsF,cAEhB,CACE5G,KAAM6B,GAAAA,EACNlb,MAAO,6BACPiZ,MAAO0B,EAAOuF,aAEhB,CACE7G,KAAM8G,GAAAA,EACNngB,MAAO,UACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAOyF,WAErC,CACE/G,KAAMgH,GAAAA,EACNrgB,MAAO,kBACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAO2F,mBAErC,CACEjH,KAAMkH,GAAAA,EACNvgB,MAAO,uBACPiZ,OAAOxT,EAAAA,EAAAA,KAACsZ,GAAY,CAAC9F,MAAO0B,EAAO6F,iBAIvC,OACE3S,EAAAA,EAAAA,MAACoP,GAAW,CAAC1D,MAAM,iBAAiBF,KAAMoH,GAAAA,EAAK3S,SAAA,CAC5C6M,EAAO+F,iBACNjb,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,yEAAwE0S,SACpF6M,EAAO+F,kBAGZjb,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sEAAqE0S,SACjFiQ,EAAMvmB,KAAI,CAACkf,EAAMuH,KAChBxY,EAAAA,EAAAA,KAACyY,GAAQ,CAEP7E,KAAM3C,EAAK2C,KACXrZ,MAAO0W,EAAK1W,MACZiZ,MAAOvC,EAAKuC,OAHPgF,a,4ECvEjB,MAAMC,GAAWhe,IAA+D,IAA5DmZ,KAAMlkB,EAAI,MAAE6K,EAAK,MAAEiZ,EAAK,YAAEO,EAAW,KAAEjgB,EAAO,QAAQ2G,EAgBxE,OACE2N,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2HAA0H0S,SAAA,EAEvID,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sFAAqF0S,SAAA,EAClGrI,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,uDAChBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,kDAAiD0S,SAAE9N,QAGrEyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0CAAyC0S,SAtB7C,WAATvU,GAEAkM,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6DAA4D0S,UACzErI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sCAAsCU,MAAO,CAACI,SAAU,WAAYE,WAAY,MAAOnG,MAAO,WAAW6X,SACrHmL,GAAS,SAMhBxT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wEAAuE0S,SAAEmL,MAevFO,IACC/T,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6EAA4E0S,SACxF0L,QAoDLmH,GAAuBC,IAC3B,MAAMC,EAAcrI,OAAOoI,GAAO7E,OAAO1B,cACzC,MAAoB,QAAhBwG,GAEAhT,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yCAAwC0S,SAAA,EACrDrI,EAAAA,EAAAA,KAAC+U,GAAAA,EAAK,CAACpf,UAAU,YAAY,SAIR,WAAhBylB,GAAyC,QAAhBA,GAEhChT,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,wCAAuC0S,SAAA,EACpDrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CAACrf,UAAU,YAAY,YAKxBwlB,GAoET,IAjE0BhI,EAAAA,EAAAA,OAAK3C,IAAiB,IAAhB,OAAE0E,GAAQ1E,EACxC,IAAK0E,EAAQ,OAAO,KAEpB,MAAMmG,EA/C6BA,KACnC,IAAKA,EAAU,OAAO,KAEtB,MAAO/M,KAAWgN,GAASD,EAASttB,MAAM,KACpCwtB,EAAYD,EAAM3F,KAAK,KAAKW,OAElC,MAAO,CACLhI,OAAwC,QAAhCA,EAAOgI,OAAO1B,cAA0B,MAAQtG,EAAOgI,OAC/DiF,UAAWA,GAAa,OAuCTC,CAA4BtG,EAAOuG,sBAC9CC,EApC4BP,KAClC,IAAKA,EAAO,OAAO,KAEnB,MAAO7M,KAAWgN,GAASH,EAAMptB,MAAM,KACjCwtB,EAAYD,EAAM3F,KAAK,KAAKW,OAElC,MAAO,CACLhI,OAAwC,QAAhCA,EAAOgI,OAAO1B,cAA0B,MAAQtG,EAAOgI,OAC/DiF,UAAWA,GAAa,OA4BPI,CAA2BzG,EAAO0G,qBAErD,OACExT,EAAAA,EAAAA,MAACoP,GAAW,CAAC1D,MAAM,WAAWF,KAAMiI,GAAAA,EAAWxT,SAAA,EAC7CD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iBAAgB0S,SAAA,EAE7BD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iEAAgE0S,SAAA,EAC7ErI,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMkI,GAAAA,EACNvhB,MAAM,2BACNiZ,MAAO0B,EAAO6G,sBACdjoB,KAAK,YAEPkM,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMoI,GAAAA,EACNzhB,MAAM,kCACNiZ,MAAO0B,EAAO+G,0BACdnoB,KAAK,YAEPkM,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMsF,GAAAA,EACN3e,MAAM,8CACNiZ,MAAO0H,GAAoBhG,EAAOgH,gCAK7B,OAARb,QAAQ,IAARA,OAAQ,EAARA,EAAU/M,UACTtO,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMuI,GAAAA,EACN5hB,MAAM,iCACNiZ,MAAO0H,GAAoBG,EAAS/M,QACpCyF,YAAasH,EAASE,gBAK5BnT,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iBAAgB0S,SAAA,EAC7BrI,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMwI,GAAAA,EACN7hB,MAAM,iBACNiZ,MAAO0B,EAAOmH,UAEhBrc,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAMiI,GAAAA,EACNthB,MAAM,yBACNiZ,MAAO0B,EAAOoH,uBAEL,OAAVZ,QAAU,IAAVA,OAAU,EAAVA,EAAYpN,UACXtO,EAAAA,EAAAA,KAACyY,GAAQ,CACP7E,KAAM2I,GAAAA,EACNhiB,MAAM,sDACNiZ,MAAO0H,GAAoBQ,EAAWpN,QACtCyF,YAAa2H,EAAWH,qB,wCCjKpC,MAAMiB,GAAc/hB,IAAmC,IAAhCmZ,KAAMlkB,EAAI,MAAE6K,EAAK,MAAEiZ,GAAO/Y,EAC/C,MAAMgiB,EAA6C,YAA3B,OAALjJ,QAAK,IAALA,OAAK,EAALA,EAAO8C,OAAO1B,eAEjC,OACE5U,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wHAAuH0S,UACpID,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,gCAA+B0S,SAAA,EAC5CrI,EAAAA,EAAAA,KAACtQ,EAAI,CAACiG,UAAU,gDAChByS,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yCAAwC0S,SAAA,EACrDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,kDAAiD0S,SAAE9N,KAClEyF,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0BAAyB0S,SACrCoU,GACCrU,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,gDAA+C0S,SAAA,EAC5DrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CAACrf,UAAU,wCAAwC,aAIvDqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,oDAAmD0S,SAC/DmL,eA+DjB,IArD0BL,EAAAA,EAAAA,OAAK3C,IAAiB,IAAhB,OAAE0E,GAAQ1E,EACxC,IAAK0E,EAAQ,OAAO,KAEpB,MA4BMwH,EA5Be,CACnB,CACElH,MAAO,qBACP5B,KAAMyF,GAAAA,EACN9e,MAAO,yBAET,CACEib,MAAO,0BACP5B,KAAM+I,GAAAA,EACNpiB,MAAO,+BAET,CACEib,MAAO,aACP5B,KAAMoF,GAAAA,EACNze,MAAO,qCAET,CACEib,MAAO,qBACP5B,KAAMgJ,GAAAA,EACNriB,MAAO,uCAET,CACEib,MAAO,sBACP5B,KAAMiJ,GAAAA,EACNtiB,MAAO,iCAI4B5I,QACrCmrB,GAAW5H,EAAO4H,EAAQtH,QAAUN,EAAO4H,EAAQtH,OAAOc,SAG5D,OAAiC,IAA7BoG,EAAkB9vB,OAAqB,MAGzCoT,EAAAA,EAAAA,KAACwX,GAAW,CAAC1D,MAAM,uBAAuBF,KAAMiJ,GAAAA,EAAOxU,UACrDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,uCAAsC0S,SAClDqU,EAAkB3qB,KAAK+qB,IACtB9c,EAAAA,EAAAA,KAACwc,GAAW,CAEV5I,KAAMkJ,EAAQlJ,KACdrZ,MAAOuiB,EAAQviB,MACfiZ,MAAO0B,EAAO4H,EAAQtH,QAHjBsH,EAAQtH,gB,4EC5EzB,MA+RA,GA/R0B/a,IAUnB,IAVoB,OACzBsiB,EAAS,GAAE,kBACXC,EAAoB,EAAC,OACrBC,GAAS,EAAK,QACdC,EAAO,cACPC,EAAa,eACbC,GAAiB,EAAI,aACrBC,GAAe,EAAI,YACnBC,GAAc,EAAI,YAClBC,GAAc,GACf9iB,EACC,MAAO+iB,EAAWC,IAAgB5U,EAAAA,EAAAA,UAAS,IACpC6U,EAAUC,IAAe9U,EAAAA,EAAAA,UAAS,IAClC+U,EAAcC,IAAmBhV,EAAAA,EAAAA,UAASmU,IAGjDld,EAAAA,EAAAA,YAAU,KACR2d,EAAa,GACbE,EAAY,GACZE,EAAgBb,KACf,CAACA,EAAmBC,IAEvB,MAAMa,EAAef,EAAOa,GAEtBG,GAAa3iB,EAAAA,EAAAA,cAAY,KAC7BqiB,EAAa,GACbE,EAAY,GACZT,MACC,CAACA,IAEEc,EAAaA,KACjBP,EAAa,GACbE,EAAY,IAGRM,GAAY7iB,EAAAA,EAAAA,cAAY,KAC5B,GAAIwiB,EAAeb,EAAOnwB,OAAS,EAAG,CACpC,MAAMsxB,EAAWN,EAAe,EAChCC,EAAgBK,GACZf,GAAeA,EAAce,EACnC,IACC,CAACN,EAAcb,EAAOnwB,OAAQuwB,IAE3BgB,GAAY/iB,EAAAA,EAAAA,cAAY,KAC5B,GAAIwiB,EAAe,EAAG,CACpB,MAAMM,EAAWN,EAAe,EAChCC,EAAgBK,GACZf,GAAeA,EAAce,EACnC,IACC,CAACN,EAAcT,IAyDlB,OAtDArd,EAAAA,EAAAA,YAAU,KACR,MAAMse,EAAaC,IACH,WAAVA,EAAEzQ,KAAkBmQ,KAG1B,GAAId,EAEF,OADAjsB,OAAO4G,iBAAiB,UAAWwmB,GAC5B,IAAMptB,OAAOqY,oBAAoB,UAAW+U,KAEpD,CAACnB,EAAQc,KAGZje,EAAAA,EAAAA,YAAU,KACR,MAAMwe,EAAiBD,IACrB,GAAKpB,EAEL,OAAQoB,EAAEzQ,KACR,IAAK,YACHyQ,EAAEE,iBACFJ,IACA,MACF,IAAK,aACHE,EAAEE,iBACFN,IACA,MACF,IAAK,IACL,IAAK,IACHI,EAAEE,iBACFZ,GAAYnW,IAASA,EAAO,IAAM,MAClC,MACF,IAAK,IACL,IAAK,IACH6W,EAAEE,iBACFd,GAAajW,GAAQ1K,KAAKE,IAAIwK,EAAO,IAAM,KAC3C,MACF,IAAK,IACH6W,EAAEE,iBACFd,GAAajW,GAAQ1K,KAAKC,IAAIyK,EAAO,IAAM,MAC3C,MACF,IAAK,IACH6W,EAAEE,iBACFP,MAON,GAAIf,EAEF,OADAjsB,OAAO4G,iBAAiB,UAAW0mB,GAC5B,IAAMttB,OAAOqY,oBAAoB,UAAWiV,KAEpD,CAACrB,EAAQW,EAAcb,EAAOnwB,OAAQqxB,EAAWE,IAE/ClB,GAAWa,GAGd1V,EAAAA,EAAAA,MAAA,OACEzS,UAAU,mBACV+a,QAASqN,EAAW1V,SAAA,EAGpBrI,EAAAA,EAAAA,KAAA,UACE0Q,QAASqN,EACTpoB,UAAU,mBACV,aAAW,SAAQ0S,UAEnBrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CAACvS,KAAM,OAIV4a,IACCjV,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sBAAqB0S,SAAA,EAClCrI,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFf,GAAajW,GAAQ1K,KAAKE,IAAIwK,EAAO,IAAM,MAE7C7R,UAAU,4BACV,aAAW,gBAAe0S,UAE1BrI,EAAAA,EAAAA,KAACye,GAAAA,EAAM,CAAChc,KAAM,QAEhBzC,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFf,GAAajW,GAAQ1K,KAAKC,IAAIyK,EAAO,IAAM,OAE7C7R,UAAU,4BACV,aAAW,gBAAe0S,UAE1BrI,EAAAA,EAAAA,KAAC0e,GAAAA,EAAO,CAACjc,KAAM,QAEjBzC,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFb,GAAYnW,IAASA,EAAO,IAAM,OAEpC7R,UAAU,4BACV,aAAW,aAAY0S,UAEvBrI,EAAAA,EAAAA,KAAC2e,GAAAA,EAAQ,CAAClc,KAAM,QAElBzC,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFR,KAEFroB,UAAU,yCACV,aAAW,UAAS0S,SACrB,aAOJ+U,GAAkBL,EAAOnwB,OAAS,IACjCwb,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,EACErI,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFL,KAEFxoB,UAAU,6BACVob,SAA2B,IAAjB6M,EACV,aAAW,kBAAiBvV,UAE5BrI,EAAAA,EAAAA,KAAC4e,GAAAA,EAAW,CAACnc,KAAM,QAErBzC,EAAAA,EAAAA,KAAA,UACE0Q,QAAU2N,IACRA,EAAEG,kBACFP,KAEFtoB,UAAU,6BACVob,SAAU6M,IAAiBb,EAAOnwB,OAAS,EAC3C,aAAW,oBAAgByb,UAE3BrI,EAAAA,EAAAA,KAACyW,GAAAA,EAAY,CAAChU,KAAM,UAMzB6a,GAAeP,EAAOnwB,OAAS,IAC9Bwb,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,qBAAoB0S,SAAA,CAChCuV,EAAe,EAAE,MAAIb,EAAOnwB,WAKjCwb,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uBAAsB0S,SAAA,EACnCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2BAA0B0S,UACvCrI,EAAAA,EAAAA,KAAA,OACErQ,IAAKmuB,EAAalb,KAAOkb,EAAae,WAAaf,EAAagB,kBAChE/G,IAAK+F,EAAavC,WAAauC,EAAaiB,kBAAoB,SAChEppB,UAAU,mBACVU,MAAO,CACLwB,UAAU,SAADrK,OAAWgwB,EAAS,aAAAhwB,OAAYkwB,EAAQ,QACjDtmB,OAAQ,QAEVsZ,QAAU2N,GAAMA,EAAEG,kBAClBQ,YAAcX,IACZA,EAAEE,sBAOPhB,IAAgBO,EAAavC,WAAauC,EAAaiB,oBACtD3W,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,qBAAoB0S,SAAA,EACjCrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,mCAAkC0S,SAC7CyV,EAAavC,WAAauC,EAAaiB,oBAI1C3W,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,qDAAoD0S,SAAA,CAChEyV,EAAa7wB,YACZ+S,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,yDAAwD0S,SACrEyV,EAAa7wB,YAGjB6wB,EAAamB,QACZ7W,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,iBAAYyV,EAAamB,SAEhCnB,EAAaoB,WACZ9W,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,SAAO,IAAI8W,KAAKrB,EAAaoB,UAAUE,mBAAmB,eAKnEtB,EAAauB,qBACZrf,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,gCAA+B0S,SACzCyV,EAAauB,4BAQxBrf,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0BAAyB0S,UACtCD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,kCAAiC0S,SAAA,EAC9CrI,EAAAA,EAAAA,KAAA,OAAAqI,SAAK,0DACLrI,EAAAA,EAAAA,KAAA,OAAAqI,SAAK,iCAxJwB,M,kGCzBvC,GA9EuB5N,IAShB,IATiB,IACtB9K,EAAG,IACHooB,EAAG,UACHpiB,EAAY,GAAE,YACd2pB,GAAc,EAAK,YACnBC,EAAc,KAAI,OAClBhX,EAAM,QACNC,GAED/N,EADIwQ,GAAKuU,EAAAA,GAAAA,GAAA/kB,EAAAglB,IAER,MAAOC,EAAaC,IAAkB9W,EAAAA,EAAAA,WAAS,IACxC+W,EAAYC,IAAiBhX,EAAAA,EAAAA,WAAS,IACtCiX,EAAWC,IAAgBlX,EAAAA,EAAAA,WAAS,IAE3C/I,EAAAA,EAAAA,YAAU,KAEJwf,IACFK,GAAe,GACfI,GAAa,MAEd,CAACT,IAgBJ,OAAIM,EACKL,GAAe,MAItBnX,EAAAA,EAAAA,MAAA,OAAKzS,UAAS,4BAAAnI,OAA8BmI,GAAY0S,SAAA,EAEpDqX,IACA1f,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gGAA+F0S,UAC9GrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,uCAAsC0S,UACnDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wBAAuB0S,SAAC,uBAM3CrI,EAAAA,EAAAA,KAAA,OAAA/N,EAAAA,EAAAA,GAAA,CACEtC,IAAKA,EACLooB,IAAKA,EACLpiB,UAAS,mEAAAnI,OACPsyB,EACI,wBACA,uBAENvX,OAtCkByX,KACtBL,GAAe,GACfE,GAAc,GACdE,GAAa,GACTxX,GAAQA,KAmCRC,QAhCmByX,KACvBJ,GAAc,GACdF,GAAe,GACXnX,GAASA,MA8BLyC,QCkFZ,GAhJ0B,SAACxe,GAA8B,IAApByzB,IAAOvzB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAC1C,MAAOwzB,EAAiBC,IAAsBvX,EAAAA,EAAAA,UAAS,IAAIpW,MACpD4tB,EAAcC,IAAmBzX,EAAAA,EAAAA,WAAS,GAC3C0X,GAAoBxlB,EAAAA,EAAAA,QAAO,MAa3BylB,EAAgB30B,UACpB,MAAM40B,EAAWC,EAAK3uB,KAAI6Q,GAXNA,IACb,IAAI+d,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAM,IAAIC,MAChBD,EAAIE,OAAS,IAAMJ,EAAQhe,GAC3Bke,EAAIG,QAAU,IAAMJ,EAAO,IAAIxS,MAAM,yBAAD7gB,OAA0BoV,KAC9Dke,EAAInxB,IAAMiT,KAOVse,CAAate,GAAKue,OAAMr1B,IACtBK,QAAQC,KAAK,6BAA8BwW,EAAK9W,GACzC,UAKX,aADsB60B,QAAQS,IAAIX,IACnB9uB,OAAOC,UAIlByvB,EAAex1B,UACnB,GAAKY,GAAayzB,EAAlB,CAEAI,GAAgB,GAChBn0B,QAAQG,IAAI,+DAAiDG,GAE7D,IAEE,MAAQU,KAAMm0B,SAAsBv1B,GAAAA,EAASw1B,QAC1Cv1B,KAAK,uBACLw1B,KAAK,GAADh0B,OAAIf,EAAQ,OAGXU,KAAMs0B,SAAyB11B,GAAAA,EAASw1B,QAC7Cv1B,KAAK,uBACLw1B,KAAK,GAADh0B,OAAIf,EAAQ,MAEbi1B,EAAgB,GAwBtB,GArBIJ,GAAeA,EAAY10B,OAAS,GACtC00B,EAAY/hB,SAAQoiB,IAClB,MAAQx0B,MAAM,UAAEy0B,IAAgB71B,GAAAA,EAASw1B,QACtCv1B,KAAK,uBACL61B,aAAa,GAADr0B,OAAIf,EAAQ,KAAAe,OAAIm0B,EAAKG,OACpCJ,EAAc3H,KAAK6H,MAKnBH,GAAkBA,EAAe70B,OAAS,GAC5C60B,EAAeliB,SAAQoiB,IACrB,MAAQx0B,MAAM,UAAEy0B,IAAgB71B,GAAAA,EAASw1B,QACtCv1B,KAAK,uBACL61B,aAAa,GAADr0B,OAAIf,EAAQ,KAAAe,OAAIm0B,EAAKG,OACpCJ,EAAc3H,KAAK6H,MAIvBz1B,QAAQG,IAAI,+BAADkB,OAAiBk0B,EAAc90B,OAAM,yBAE5C80B,EAAc90B,OAAS,EAAG,CAE5B,MAAMm1B,EAAY,EACZC,EAAU,GAEhB,IAAK,IAAIlI,EAAI,EAAGA,EAAI4H,EAAc90B,OAAQktB,GAAKiI,EAC7CC,EAAQjI,KAAK2H,EAAc/M,MAAMmF,EAAGA,EAAIiI,IAI1C,IAAK,IAAIjI,EAAI,EAAGA,EAAIkI,EAAQp1B,OAAQktB,IAAK,CACvC,MAAMmI,EAAQD,EAAQlI,GACtB3tB,QAAQG,IAAI,mCAADkB,OAAqBssB,EAAI,EAAC,KAAAtsB,OAAIw0B,EAAQp1B,OAAM,MAAAY,OAAKy0B,EAAMr1B,OAAM,mBAElE4zB,EAAcyB,GAGhBnI,EAAIkI,EAAQp1B,OAAS,SACjB,IAAI+zB,SAAQC,GAAWvsB,WAAWusB,EAAS,MAErD,CAGA,MAAMsB,EAAe,IAAIzvB,IACzBivB,EAAcniB,SAAQqD,IACpBsf,EAAa7pB,IAAIuK,GAAK,MAExBwd,EAAmB8B,GAEnB/1B,QAAQG,IAAI,+BAAwBo1B,EAAc90B,OAAQ,UAC5D,CAEF,CAAE,MAAOd,GACPK,QAAQL,MAAM,+BAA2BA,EAC3C,CAAC,QACCw0B,GAAgB,EAClB,CA5EiC,IAgFnCxgB,EAAAA,EAAAA,YAAU,KACR,GAAKrT,GAAayzB,EAYlB,OATIK,EAAkBjlB,SACpBlH,aAAamsB,EAAkBjlB,SAIjCilB,EAAkBjlB,QAAUjH,YAAW,KACrCgtB,MACC,KAEI,KACDd,EAAkBjlB,SACpBlH,aAAamsB,EAAkBjlB,YAIlC,CAAC7O,EAAUyzB,IAOd,MAAO,CACLG,eACAF,kBACAgC,iBAPwBvf,GACjBud,EAAgBiC,IAAIxf,GAO3Bye,eAEJ,EC5IMgB,GAA4B5nB,IAAoC,IAAnC,UAAE6X,EAAS,WAAE4F,EAAa,GAAGzd,EAC9D,MAAO6nB,EAASC,IAAc1Z,EAAAA,EAAAA,UAAS,KAChCiF,EAASC,IAAclF,EAAAA,EAAAA,WAAS,IAChC/c,EAAOkiB,IAAYnF,EAAAA,EAAAA,UAAS,OAC5B2Z,EAAYC,IAAiB5Z,EAAAA,EAAAA,UAAS,OACtCmU,EAAmB0F,IAAwB7Z,EAAAA,EAAAA,UAAS,IAGrD,iBAAEsZ,GAAqBQ,GAAkBrQ,GAAW,GAEpDyL,GAAa3iB,EAAAA,EAAAA,cAAY,KAC7BqnB,EAAc,MACdC,EAAqB,KACpB,IAyFH,OApFA5iB,EAAAA,EAAAA,YAAU,KACJoY,EAAa,IACf/rB,QAAQG,IAAI,oEACZi2B,EAAW,IACXxU,GAAW,GACXC,EAAS,SAEV,CAACkK,KAEJpY,EAAAA,EAAAA,YAAU,KACHwS,IAELvE,GAAW,GACXC,EAAS,MAGTjiB,GAAAA,EACGw1B,QACAv1B,KAAK,uBACLw1B,KAAK,GAADh0B,OAAI8kB,EAAS,MACjBsQ,MAAK/2B,UAA4B,IAArB,KAAEsB,EAAI,MAAErB,GAAO0kB,EAC1B,GAAI1kB,EAGF,OAFAkiB,EAASliB,EAAMO,cACf0hB,GAAW,GAIb,GAAI5gB,GAAQA,EAAKP,OAAS,EAAG,CAC3BT,QAAQG,IAAI,uCAAwCa,EAAKP,QACzD,MAAMi2B,QAAsBlC,QAAQS,IAAIj0B,EAAK4E,KAAIlG,MAAO81B,EAAMnJ,KAAS,IAADsK,EAAAC,EAAAC,EAAAC,EAAAC,EACpE,MAAQ/1B,MAAM,UAAEy0B,IAAgB71B,GAAAA,EAC7Bw1B,QACAv1B,KAAK,uBACL61B,aAAa,GAADr0B,OAAI8kB,EAAS,KAAA9kB,OAAIm0B,EAAKG,OAGrC,IAAIqB,EAAS,YACTxB,EAAKG,KAAKsB,WAAW,eACvBD,EAAS,aACAxB,EAAKG,KAAKsB,WAAW,gBAC9BD,EAAS,aAIX,IAAI11B,EAAU,KACd,IACE,MAAM41B,EAAe,GAAA71B,OAAM8kB,EAAS,KAAA9kB,OAAIm0B,EAAKG,MAC7C31B,QAAQG,IAAI,mCAAoC+2B,GAChD51B,QAAgBH,EAAAA,GAAAA,IAA6B+1B,EAAiB/Q,EAAW,CACvErlB,UAAW,YACXC,UAAW,cAEbf,QAAQG,IAAI,sBAAuBmB,EACrC,CAAE,MAAO3B,GACPK,QAAQC,KAAK,0BAA2BN,EAC1C,CAEA,MAAO,CACLof,GAAIsN,EAAM,EACVqG,UAAW+C,EACXuB,SACAG,KAAM3B,EAAKG,KACXyB,WAAY5B,EAAK4B,YAAc,GAC/B91B,SAAgB,QAAPq1B,EAAAr1B,SAAO,IAAAq1B,OAAA,EAAPA,EAASr1B,UAAO,aAAAD,OAAiB21B,GAC1C9D,mBAA2B,QAAT0D,EAAEt1B,SAAO,IAAAs1B,OAAA,EAAPA,EAASS,oBAC7BvE,MAAc,QAAT+D,EAAEv1B,SAAO,IAAAu1B,OAAA,EAAPA,EAASS,WAChBvE,SAAiB,QAAT+D,EAAEx1B,SAAO,IAAAw1B,OAAA,EAAPA,EAASS,UACnBz2B,UAAkB,QAATi2B,EAAEz1B,SAAO,IAAAy1B,OAAA,EAAPA,EAASj2B,eAIxBs1B,EAAWM,EACb,MACEN,EAAW,IAEbxU,GAAW,MAEZoT,OAAM1S,IACLT,EAAS,oBAADxgB,OAAqBihB,EAAIpiB,UACjC0hB,GAAW,SAEd,CAACuE,IAGAxE,GACK9N,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gBAAe0S,SAAC,uCAGpCvc,GACKsc,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,eAAc0S,SAAA,CAAC,6BAA2Bvc,KAG7Dw2B,EAAQ11B,QAKXwb,EAAAA,EAAAA,MAAA,WAASzS,UAAU,OAAM0S,SAAA,EACvBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,SACnDia,EAAQvwB,KAAI,CAAC+uB,EAAKthB,KACjB4I,EAAAA,EAAAA,MAAA,UAEEzS,UAAU,wGACV+a,QAASA,KACHoQ,EAAIjC,YACN6D,EAAqBljB,GACrBijB,EAAc3B,KAEhBzY,SAAA,EAEFrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mEAAkE0S,UAC/ErI,EAAAA,EAAAA,KAAC2jB,GAAc,CACbh0B,IAAKmxB,EAAIjC,UACT9G,IAAK+I,EAAIrzB,QACTkI,UAAU,6FACV2pB,YAAa6C,EAAiBrB,EAAIjC,WAClCxoB,MAAO,CAAEutB,UAAW,aAKvB9C,EAAIrzB,UACH2a,EAAAA,EAAAA,MAAA,cAAYzS,UAAU,eAAc0S,SAAA,EAClCrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,yCAAwC0S,SACnDyY,EAAIrzB,WAIP2a,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,gDAA+C0S,SAAA,CAC3DyY,EAAI7zB,YACH+S,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,2CAA0C0S,SACvDyY,EAAI7zB,YAGR6zB,EAAI7B,QACH7W,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,QAAMyY,EAAI7B,SAEjB6B,EAAI5B,WACHlf,EAAAA,EAAAA,KAAA,QAAAqI,SAAO,IAAI8W,KAAK2B,EAAI5B,UAAUE,mBAAmB,cAKpD0B,EAAIzB,qBACHrf,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,0CAAyC0S,SACnDyY,EAAIzB,0BA5CRyB,EAAI5V,SAsDflL,EAAAA,EAAAA,KAAC6jB,GAAiB,CAChB9G,OAAQuF,EACRtF,kBAAmBA,EACnBC,SAAUuF,EACVtF,QAASa,EACTZ,cAAeuF,EACftF,gBAAgB,EAChBC,cAAc,EACdC,aAAa,EACbC,aAAa,OAvEV,MAkFX,GAAeriB,EAAAA,KAAWmnB,I,kUCsJ1B,GAxVe5nB,IA+CR,IA/CS,IAEd9K,EAAG,IACHooB,EAAG,KACH+J,EAAI,KAGJrf,EAAO,SAAQ,WACfqhB,EAAU,MAGVC,EAAQ,SAAQ,QAChBC,EAAU,UAAS,QAGnBlW,GAAU,EAAK,MACfhiB,GAAQ,EAAK,UACbm4B,GAAY,EAAK,UAGjBtuB,EAAY,GAAE,YACdO,EAAc,mBAAkB,gBAChCD,EAAkB,cAAa,UAC/BiuB,EAAY,gBAAe,MAG3BC,EAAK,cACLC,EAAgB,eAAc,WAC9BC,EAAa,eAAc,UAC3BC,EAAY,QAAO,QAGnB5T,EAAO,QACPlI,EAAO,OACPD,EAAM,aAGNgc,EAAe,OAAM,aACrBC,GAAe,EAAI,YACnBC,EAAc,EAAC,KAGfC,GAAO,EAAI,SACXC,GAAW,GAIZlqB,EADIwQ,GAAKuU,EAAAA,GAAAA,GAAA/kB,EAAAglB,IAER,MAAOG,EAAYC,IAAiBhX,EAAAA,EAAAA,WAAS,IACtC+b,EAAcC,IAAmBhc,EAAAA,EAAAA,YAAWlZ,GAG7Cm1B,GAAarhB,EAAAA,EAAAA,UAAQ,KACzB,GAAIqgB,EACF,MAAO,CACLiB,UAAW,gBACX50B,KAAM,UACNyjB,KAAM,UACNuQ,MAAO,UACPL,WAAYA,GAIhB,MAAMkB,EAAQ,CACZC,GAAI,CACFF,UAAW,UACX50B,KAAM,UACNyjB,KAAM,UACNuQ,MAAO,WAET/hB,MAAO,CACL2iB,UAAW,UACX50B,KAAM,UACNyjB,KAAM,UACNuQ,MAAO,WAET9hB,OAAQ,CACN0iB,UAAW,4BACX50B,KAAM,uBACNyjB,KAAM,wBACNuQ,MAAO,WAET7hB,MAAO,CACLyiB,UAAW,4BACX50B,KAAM,uBACNyjB,KAAM,0BACNuQ,MAAO,WAET5hB,OAAQ,CACNwiB,UAAW,4BACX50B,KAAM,qBACNyjB,KAAM,4BACNuQ,MAAO,WAETe,QAAS,CACPH,UAAW,4BACX50B,KAAM,sBACNyjB,KAAM,4BACNuQ,MAAO,YAIX,OAAOa,EAAMviB,IAASuiB,EAAM3iB,SAC3B,CAACI,EAAMqhB,IAGJqB,GAAc1hB,EAAAA,EAAAA,UAAQ,KAC1B,MAAM2hB,EAAS,CACbC,OAAQ,eACRC,OAAQ,aACRC,QAAS,aACTC,KAAM,gBAER,OAAOJ,EAAOrB,IAAUqB,EAAOC,SAC9B,CAACtB,IAGE0B,GAAgBhiB,EAAAA,EAAAA,UAAQ,KAC5B,MAAMiiB,EAAW,CACfC,QAAS,CACPxuB,OAAQ,WACRyuB,OAAQ,YACRxlB,MAAO,mBAETylB,QAAS,CACP1uB,OAAQ,SACRyuB,OAAQ,YACRxlB,MAAO,mBAET0lB,KAAM,CACJ3uB,OAAQ,WACRyuB,OAAQ,cACRxlB,MAAO,mBAET2lB,SAAU,CACR5uB,OAAQ,WACRyuB,OAAQ,YACRxlB,MAAO,oBAGX,OAAOslB,EAAS1B,IAAY0B,EAASC,UACpC,CAAC3B,IAGEgC,GAAcviB,EAAAA,EAAAA,UAAQ,KAC1B,MAAMwiB,EAAY,CAChB,WAAY,eACZ,YAAa,gBACb,cAAe,kBACf,eAAgB,mBAChB,OAAU,gEAGNC,EAAa,CACjB9jB,MAAO,UACPC,OAAQ,UACRC,MAAO,WAGT,MAAO,CACLhM,SAAU2vB,EAAU7B,IAAkB6B,EAAU,gBAChDxjB,KAAMyjB,EAAW5B,IAAc4B,EAAW9jB,SAE3C,CAACgiB,EAAeE,IAGb6B,GAAW1iB,EAAAA,EAAAA,UAAQ,KACvB,IAAKqe,IAAS0C,EAAc,MAAO,GAQnC,OANc1C,EAAKxL,OAAOvoB,MAAM,KAE7B4mB,MAAM,EAAG8P,GACT1yB,KAAIq0B,GAAQA,EAAK3R,OAAO,GAAGC,gBAC3B/iB,QAAO00B,GAAQA,EAAKC,MAAM,WAER3Q,KAAK,MACzB,CAACmM,EAAM0C,EAAcC,IAGlB8B,GAAe9iB,EAAAA,EAAAA,UAAQ,KAC3B,MAAM+iB,EAAQ,CACZC,KAAMrK,GAAAA,EACNsK,MAAOC,GAAAA,EACP7Y,QAAS8Y,GAAAA,GAEX,OAAOJ,EAAMjC,IAAiBiC,EAAMC,OACnC,CAAClC,IAsBEsC,EAAkBl3B,IAAQiwB,IAAe9R,EACzCgZ,GAAsBD,GAAmBV,IAAar6B,EACtDi7B,GAAkBF,IAAoBC,IAAuBh7B,EAG7Dk7B,EAAc,SAAAx5B,OAChBs3B,EAAWC,UAAS,UAAAv3B,OACpB23B,EAAW,UAAA33B,OACXi4B,EAActuB,OAAM,UAAA3J,OACpB0I,EAAW,UAAA1I,OACXi4B,EAAcG,OAAM,UAAAp4B,OACpBy2B,GAAavT,EAAU,iBAAmB,GAAE,UAAAljB,OAC5Ci4B,EAAcrlB,MAAK,+GAAA5S,OAInBmI,EAAS,QACX2gB,OAAO2Q,QAAQ,OAAQ,KAEzB,OACE7e,EAAAA,EAAAA,MAAA,OAAAnW,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACE0D,UAAWqxB,EACX3wB,MAAOytB,EAAa,CAAEnzB,MAAOmzB,EAAYpmB,OAAQomB,QAAej3B,EAChE6jB,QA9BiB2N,KACf4F,GAAavT,KACR,OAAPA,QAAO,IAAPA,GAAAA,EAAU2N,KA6BVhK,KAAM4P,GAAavT,EAAU,cAAW7jB,EACxCq6B,SAAUjD,GAAavT,EAAU,OAAI7jB,GACjCoe,GAAK,IAAA5C,SAAA,CAGRyF,IACC9N,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,oBAAAnI,OAAsByI,EAAe,qCAAoCoS,UACrFrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,yBAAwB0S,SAAC,oBAK5Cwe,IACC7mB,EAAAA,EAAAA,KAAA,OAAA/N,EAAAA,EAAAA,GAAA,CACEtC,IAAKA,EACLooB,IAAKA,GAAG,aAAAvqB,OAAiBs0B,IAAU,EACnCnsB,UAAS,8BAAAnI,OAAgCo3B,EAAe,YAAc,cAAa,oCACnFrc,OA5DgByX,KACtB6E,GAAgB,GAChBhF,GAAc,GACR,OAANtX,QAAM,IAANA,GAAAA,KA0DMC,QAvDiByX,KACvB4E,GAAgB,GAChBhF,GAAc,GACP,OAAPrX,QAAO,IAAPA,GAAAA,KAqDMsF,QAAS4W,EAAO,OAAS,SACpBC,GAAY,CAAEwC,cAAe,UAKrCvC,GAAgBiC,IACf7mB,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,oBAAAnI,OAAsByI,EAAe,qCAAoCoS,UACrFrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,yBAAwB0S,SAAC,oBAK5Cye,IACC9mB,EAAAA,EAAAA,KAAA,QAAMrK,UAAS,GAAAnI,OAAKs3B,EAAW30B,KAAI,mBAAA3C,OAAkB02B,GAAY7b,SAC9D8d,IAKJY,IACC/mB,EAAAA,EAAAA,KAACumB,EAAY,CAAC5wB,UAAS,GAAAnI,OAAKs3B,EAAWlR,KAAI,KAAApmB,OAAI02B,KAIhDp4B,IACCkU,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,oBAAAnI,OAAsByI,EAAe,qCAAoCoS,UACrFrI,EAAAA,EAAAA,KAAC2mB,GAAAA,EAAW,CAAChxB,UAAS,GAAAnI,OAAKs3B,EAAWlR,KAAI,qBAK7CuQ,IACCnkB,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,YAAAnI,OAAcw4B,EAAY1vB,SAAQ,KAAA9I,OAAIw4B,EAAYvjB,KAAI,KAAAjV,OAAI62B,EAAU,uCAAsChc,SACpG,kBAAV8b,GACNnkB,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,uEAAsE0S,SACnF8b,IAGHA,SCrSCiD,GAAe,CAE1BzB,QAAS,CACPzvB,YAAa,mBACbD,gBAAiB,cACjBiuB,UAAW,iBACXG,WAAY,eACZgD,iBAAkB,0BAIpBC,UAAW,CACTpxB,YAAa,kBACbD,gBAAiB,aACjBiuB,UAAW,gBACXG,WAAY,cACZgD,iBAAkB,yBAIpBnS,OAAQ,CACNhf,YAAa,oBACbD,gBAAiB,eACjBiuB,UAAW,kBACXG,WAAY,gBACZgD,iBAAkB,2BAIpBE,QAAS,CACPrxB,YAAa,kBACbD,gBAAiB,aACjBiuB,UAAW,gBACXG,WAAY,cACZgD,iBAAkB,yBAIpBG,SAAU,CACRtxB,YAAa,mBACbD,gBAAiB,cACjBiuB,UAAW,iBACXG,WAAY,eACZgD,iBAAkB,0BAIpBI,QAAS,CACPvxB,YAAa,qBACbD,gBAAiB,gBACjBiuB,UAAW,mBACXG,WAAY,iBACZgD,iBAAkB,4BAIpBK,QAAS,CACPxxB,YAAa,oBACbD,gBAAiB,eACjBiuB,UAAW,kBACXG,WAAY,gBACZgD,iBAAkB,2BAIpBv7B,MAAO,CACLoK,YAAa,iBACbD,gBAAiB,YACjBiuB,UAAW,eACXG,WAAY,aACZgD,iBAAkB,yBC0BtB,GA/FsB5sB,IAqBf,IArBgB,QACrBktB,EAAO,cACPC,EAAa,QACbC,EAAU,SAAQ,UAClBlyB,EAAY,GAAE,aACdmyB,GAAe,EAAI,MAEnBC,EAAQ,YAAW,QACnB/D,EAAU,UAAS,MACnBD,EAAQ,SAAQ,UAChBE,GAAY,EAAK,MACjBE,EAAK,cACLC,EAAgB,eAAc,QAC9B1T,EAAO,QACPlI,EAAO,OACPD,EAAM,KAEN9F,EAAI,WACJqhB,EAAU,SAEVr3B,GACDgO,EAEC,MAOMutB,EAAavlB,GAPC,CAClBL,MAAO,SACPC,OAAQ,QACRC,MAAO,SACPC,OAAQ,WAG6BslB,IAAY,SAG7C,iBAAE1F,GAAqBQ,GAAkBl2B,IAAYA,GAGrDw7B,EAAcb,GAAaW,IAAUX,GAAaE,UAGxD,OAAKK,GAAYG,GAKf9nB,EAAAA,EAAAA,KAACkoB,GAAM,CACLv4B,IAAKg4B,EACL7F,KAAM8F,EACN7P,IAAK6P,EAAa,WAAAp6B,OAAco6B,GAAkB,oBAClDnlB,KAAMqhB,OAAaj3B,EAAYm7B,EAC/BlE,WAAYA,EACZC,MAAOA,EACPC,QAASA,EACT+D,MAAOA,EACP9D,UAAWA,EACXE,MAAOA,EACPC,cAAeA,EACfzuB,UAAWA,EACX+a,QAASA,EACTlI,QAASA,EACTD,OAAQA,EACRic,cAAc,EACdC,YAAa,EACbF,aAAa,OACbG,MAAOvC,EAAiBwF,GAExBzxB,YAAa+xB,EAAY/xB,YACzBD,gBAAiBgyB,EAAYhyB,gBAC7BiuB,UAAW+D,EAAY/D,UACvBG,WAAY4D,EAAY5D,aA5BnB,MC2OX,IAlR4BlR,EAAAA,EAAAA,OAAK1Y,IAAiC,IAAhC,OAAEya,EAAM,WAAEgD,EAAa,GAAGzd,EAC1D,MAAO0tB,EAAWC,IAAgBvf,EAAAA,EAAAA,UAAS,KACpCiF,EAASC,IAAclF,EAAAA,EAAAA,WAAS,IAChC/c,EAAOkiB,IAAYnF,EAAAA,EAAAA,UAAS,OAC5Bwf,EAAsBC,IAA2Bzf,EAAAA,EAAAA,UAAS,IAC1D2Z,EAAYC,IAAiB5Z,EAAAA,EAAAA,UAAS,MAEvCkV,GAAa3iB,EAAAA,EAAAA,cAAY,IAAMqnB,EAAc,OAAO,KAG1D3iB,EAAAA,EAAAA,YAAU,KACR,MAAMse,EAAaC,IACH,WAAVA,EAAEzQ,KACJmQ,KAIJ,OADA/sB,OAAO4G,iBAAiB,UAAWwmB,GAC5B,IAAMptB,OAAOqY,oBAAoB,UAAW+U,KAClD,CAACL,KAGJje,EAAAA,EAAAA,YAAU,KACR,GAAW,OAANoV,QAAM,IAANA,IAAAA,EAAQhK,GAEX,YADA6C,GAAW,GAGaliB,WACxB,IACEkiB,GAAW,GACXC,EAAS,MACT,MAAM7gB,QAAao7B,EAAAA,GAAAA,IAAsBrT,EAAOhK,IAChDkd,EAAaj7B,GAAQ,IACrBm7B,EAAwB,EAC1B,CAAE,MAAO7Z,GACPT,EAASS,EAAIpiB,QACf,CAAC,QACC0hB,GAAW,EACb,GAEFya,KACC,CAAO,OAANtT,QAAM,IAANA,OAAM,EAANA,EAAQhK,GAAIgN,IAGhB,MAAMuQ,GAAertB,EAAAA,EAAAA,cAAY,KAC/BktB,GAAwB9gB,GACtBA,EAAO2gB,EAAUv7B,OAAS,EAAI4a,EAAO,EAAI,MAE1C,CAAC2gB,EAAUv7B,SAER87B,GAAettB,EAAAA,EAAAA,cAAY,KAC/BktB,GAAwB9gB,GACtBA,EAAO,EAAIA,EAAO,EAAI2gB,EAAUv7B,OAAS,MAE1C,CAACu7B,EAAUv7B,SAkBd,IAbAkT,EAAAA,EAAAA,YAAU,KACR,MAAMwe,EAAiBD,IACjB8J,EAAUv7B,QAAU,IACV,eAAVyxB,EAAEzQ,IACJ6a,IACmB,cAAVpK,EAAEzQ,KACX8a,MAIJ,OADA13B,OAAO4G,iBAAiB,UAAW0mB,GAC5B,IAAMttB,OAAOqY,oBAAoB,UAAWiV,KAClD,CAAC6J,EAAUv7B,OAAQ67B,EAAcC,IAEhC5a,EACF,OACE9N,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mHAAkH0S,UAC/HrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,UACpDrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,qBAAoB0S,SAAC,gDAM7C,GAAIvc,EACF,OACEkU,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,iHAAgH0S,UAC7HrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mBAAkB0S,UAC/BD,EAAAA,EAAAA,MAAA,KAAGzS,UAAU,eAAc0S,SAAA,CAAC,+CAA0Cvc,SAM9E,IAAKq8B,EAAUv7B,OACb,OAAO,KAGT,MAAM+7B,EAAkBR,EAAUE,GAC5BO,EAAuBT,EAAUv7B,OAAS,EAEhD,OACEwb,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,wCAAuC0S,SAAA,EAEpDD,EAAAA,EAAAA,MAAA,UAAQzS,UAAU,wCAAuC0S,SAAA,EACvDD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,iDAAgD0S,SAAA,EAC7DD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAAyB0S,SAAA,EACtCrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,uFAAsF0S,UACpGrI,EAAAA,EAAAA,KAAA,OACErQ,IAAG,GAAAnC,OAAKwB,QAAsB,gBAC9B+oB,IAAI,yBACJpiB,UAAU,4BACVU,MAAO,CACL1E,OAAQ,OACR6E,aAAc,IACdU,UAAW,OACX8gB,OAAQ,IACRzhB,QAAS,IACTY,OAAQ,OACR8gB,QAAS,QAEX,cAAY,YAGhBjY,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,+CAA8C0S,SAAC,kCAI9DugB,IACC5oB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gDAA+C0S,UAC5DD,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAOggB,EAAuB,EAAE,OAAKF,EAAUv7B,gBAIrDoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mDAIjByS,EAAAA,EAAAA,MAAA,WACEzS,UAAU,yYAQT0S,SAAA,EAIHD,EAAAA,EAAAA,MAAA,WAASzS,UAAU,wDAAuD0S,SAAA,CACvEsgB,EAAgBE,iBACfzgB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,kCAAiC0S,SAAA,EAC9CrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gBAAe0S,UAC5BrI,EAAAA,EAAAA,KAAC8oB,GAAa,CACZnB,QAASgB,EAAgBI,WACzBnB,cAAee,EAAgBE,eAC/B/E,WAAW,QACXnuB,UAAU,YACVlJ,SAAUyoB,EAAOhK,QAGrB9C,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,qBAAoB0S,SAAA,EACjCrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,wDAAuD0S,SAClEsgB,EAAgBE,kBAEnB7oB,EAAAA,EAAAA,KAAA,OACErK,UAAU,qrBAQViiB,wBAAyB,CAAEC,OAAQ8Q,EAAgBK,mBAKzDL,EAAgBE,iBAChB7oB,EAAAA,EAAAA,KAAA,OACErK,UAAU,qrBAQViiB,wBAAyB,CAAEC,OAAQ8Q,EAAgBK,YAGtDL,EAAgB7J,oBACf9e,EAAAA,EAAAA,KAAA,UAAQrK,UAAU,OAAM0S,UACtBD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,WAAU0S,SAAA,EACvBrI,EAAAA,EAAAA,KAAA,OACErQ,IAAKg5B,EAAgB7J,kBACrB/G,IAAK4Q,EAAgB5J,kBAAoB,qCACzCppB,UAAU,iHACV+a,QAASA,IAAM+R,EAAckG,GAC7B7a,QAAQ,SAET6a,EAAgB5J,mBACf/e,EAAAA,EAAAA,KAAA,cAAYrK,UAAU,yCAAwC0S,SAC3DsgB,EAAgB5J,2BAS5B6J,IACCxgB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uEAAsE0S,SAAA,EACnFD,EAAAA,EAAAA,MAAA,UACEsI,QAASgY,EACT/yB,UAAU,uHACV,aAAW,uBAAmB0S,SAAA,EAE9BrI,EAAAA,EAAAA,KAAC4e,GAAAA,EAAW,CAACjpB,UAAU,aACvBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,mBAAkB0S,SAAC,iBAErCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,aAAY0S,SACxB8f,EAAUp2B,KAAI,CAACk3B,EAAGzpB,KACjBQ,EAAAA,EAAAA,KAAA,UAEE0Q,QAASA,IAAM4X,EAAwB9oB,GACvC7J,UAAS,iCAAAnI,OAAmCgS,IAAU6oB,EAAuB,gCAAkC,2BAA0B,sBACzI,oCAAA76B,OAAgCgS,EAAQ,IAHnCA,QAOX4I,EAAAA,EAAAA,MAAA,UACEsI,QAAS+X,EACT9yB,UAAU,uHACV,aAAW,yBAAkB0S,SAAA,EAE7BrI,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,mBAAkB0S,SAAC,gBACnCrI,EAAAA,EAAAA,KAACyW,GAAAA,EAAY,CAAC9gB,UAAU,kBAM7B6sB,IACCxiB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6EAA6E+a,QAASqN,EAAW1V,UAC9GD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0EAA0E+a,QAAS2N,GAAKA,EAAEG,kBAAkBnW,SAAA,EACzHrI,EAAAA,EAAAA,KAAA,UACErK,UAAU,qGACV+a,QAASqN,EACT,aAAW,cAAa1V,UAExBrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CAACrf,UAAU,eAEfqK,EAAAA,EAAAA,KAAA,OACErQ,IAAK6yB,EAAW1D,kBAChB/G,IAAKyK,EAAWzD,kBAAoB,qCACpCppB,UAAU,qFAEX6sB,EAAWzD,mBACV/e,EAAAA,EAAAA,KAAA,cAAYrK,UAAU,qIAAoI0S,SACvJma,EAAWzD,yBAOpB/e,EAAAA,EAAAA,KAACqiB,GAAyB,CAAC/P,UAAW4C,EAAOhK,GAAIgN,WAAYA,a,gBCzQrE,MAAMgR,GAAoBzuB,IAAoC,IAAnC,UAAE6X,EAAS,WAAE4F,EAAa,GAAGzd,EACtD,MAAO6nB,EAASC,IAAc1Z,EAAAA,EAAAA,UAAS,KAChCiF,EAASC,IAAclF,EAAAA,EAAAA,WAAS,IAChC2Z,EAAYC,IAAiB5Z,EAAAA,EAAAA,UAAS,OACtCmU,EAAmB0F,IAAwB7Z,EAAAA,EAAAA,UAAS,IACpD/c,EAAOkiB,IAAYnF,EAAAA,EAAAA,UAAS,IAC7BsgB,GAAWpuB,EAAAA,EAAAA,QAAO,CAAC,IAClBquB,EAAcC,IAAmBxgB,EAAAA,EAAAA,UAAS,IAG3C,iBAAEsZ,GAAqBQ,GAAkBrQ,GAAW,GAGpDgX,GAAyBluB,EAAAA,EAAAA,cAAY,KACzCjP,QAAQG,IAAI,4CACZ68B,EAAS7tB,QAAU,CAAC,EACpB+tB,GAAgB7hB,GAAQA,EAAO,MAC9B,KAGH1H,EAAAA,EAAAA,YAAU,KACJoY,EAAa,IACf/rB,QAAQG,IAAI,4DACZg9B,OAED,CAACpR,EAAYoR,IAEhB,MAAMvL,GAAa3iB,EAAAA,EAAAA,cAAY,KAC7BqnB,EAAc,MACdC,EAAqB,GACrBjtB,SAAS8zB,KAAKlzB,MAAMW,SAAW,SAC9B,IAuGH,OApGA8I,EAAAA,EAAAA,YAAU,KACR,MAAMse,EAAaC,IACH,WAAVA,EAAEzQ,KAAkBmQ,KAG1B,OADA/sB,OAAO4G,iBAAiB,UAAWwmB,GAC5B,IAAMptB,OAAOqY,oBAAoB,UAAW+U,KAClD,CAACL,KAGJje,EAAAA,EAAAA,YAAU,KACR,IAAKwS,EAEH,YADAvE,GAAW,GAKb,MAAMyb,EAAQ,GAAAh8B,OAAM8kB,EAAS,MAAA9kB,OAAK47B,GAClC,GAAID,EAAS7tB,QAAQkuB,GAInB,OAHAr9B,QAAQG,IAAI,2BAA4BgmB,GACxCiQ,EAAW4G,EAAS7tB,QAAQkuB,SAC5Bzb,GAAW,GAISliB,WACpBM,QAAQG,IAAI,+BAAgCgmB,GAE5C,IAEE,MAAQnlB,KAAMs8B,EAAK,MAAE39B,SAAgBC,GAAAA,EAASw1B,QAC3Cv1B,KAAK,uBACLw1B,KAAK,GAADh0B,OAAI8kB,EAAS,MAEpB,GAAIxmB,EACF,MAAMA,EAGR,IAAK29B,GAA0B,IAAjBA,EAAM78B,OAIlB,OAHAT,QAAQG,IAAI,wCAAyCgmB,GACrDiQ,EAAW,SACXxU,GAAW,GAIb5hB,QAAQG,IAAI,wBAAyBm9B,EAAM78B,QAG3C,MAAM88B,QAA2B/I,QAAQS,IACvCqI,EAAM13B,KAAIlG,MAAO81B,EAAMniB,KAAW,IAADsjB,EAAAC,EAAAC,EAAAC,EAAAC,EAC/B,MAAMyG,EAAQ,GAAAn8B,OAAM8kB,EAAS,KAAA9kB,OAAIm0B,EAAKG,OAC9B30B,MAAM,UAAEy0B,IAAgB71B,GAAAA,EAASw1B,QACtCv1B,KAAK,uBACL61B,aAAa8H,GAGhB,IAAIl8B,EAAU,KACd,IACEtB,QAAQG,IAAI,yBAA0Bq9B,GACtCl8B,QAAgBH,EAAAA,GAAAA,IAA6Bq8B,EAAUrX,EAAW,CAChErlB,UAAW,SACXC,UAAW,WAEbf,QAAQG,IAAI,sBAAuBmB,EACrC,CAAE,MAAO3B,GACPK,QAAQC,KAAK,8BAA+Bu9B,EAAU,IAAK79B,EAC7D,CAEA,MAAO,CACLof,GAAG,GAAD1d,OAAK8kB,EAAS,KAAA9kB,OAAIm0B,EAAKG,MACzBjD,UAAW+C,EACXrG,WAAkB,QAAPuH,EAAAr1B,SAAO,IAAAq1B,OAAA,EAAPA,EAASr1B,UAAO,UAAAD,OAAcgS,EAAQ,GACjD6f,mBAA2B,QAAT0D,EAAEt1B,SAAO,IAAAs1B,OAAA,EAAPA,EAASS,oBAC7BvE,MAAc,QAAT+D,EAAEv1B,SAAO,IAAAu1B,OAAA,EAAPA,EAASS,WAChBvE,SAAiB,QAAT+D,EAAEx1B,SAAO,IAAAw1B,OAAA,EAAPA,EAASS,UACnBz2B,UAAkB,QAATi2B,EAAEz1B,SAAO,IAAAy1B,OAAA,EAAPA,EAASj2B,UACpB28B,SAAU,UAKhBz9B,QAAQG,IAAI,uBAAwBo9B,EAAmB98B,QAGvDu8B,EAAS7tB,QAAQkuB,GAAYE,EAC7BnH,EAAWmH,GAEuB,IAA9BA,EAAmB98B,QACrBohB,EAAS,8CAEb,CAAE,MAAOliB,GACPK,QAAQL,MAAM,6BAA8BA,GAC5CkiB,EAAS,sCACX,CAAC,QACCD,GAAW,EACb,GAGF8b,KACC,CAACvX,EAAW8W,IAEXtb,GAEA9N,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,SAAC,oCAMvDvc,GAEAsc,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,uCAAsC0S,SAAA,EACnDrI,EAAAA,EAAAA,KAAA,QAAAqI,SAAOvc,KACPkU,EAAAA,EAAAA,KAAA,UACE0Q,QAAS4Y,EACT3zB,UAAU,oCACVme,MAAM,mBAAkBzL,UAExBrI,EAAAA,EAAAA,KAAC8pB,GAAAA,EAAS,CAACn0B,UAAU,iBAMxB2sB,EAAQ11B,QAgBXwb,EAAAA,EAAAA,MAAA,WAASzS,UAAU,OAAM0S,SAAA,EACvBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,SACnDia,EAAQvwB,KAAK+uB,IACZ1Y,EAAAA,EAAAA,MAAA,UAEEzS,UAAU,wGACV+a,QAASA,KACP,GAAIoQ,EAAIjC,UAAW,CACjB,MAAMrf,EAAQ8iB,EAAQyH,WAAUjQ,GAAKA,EAAE+E,YAAciC,EAAIjC,YACzD6D,EAAqBljB,GACrBijB,EAAc3B,EAChB,GACAzY,SAAA,EAEFrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mEAAkE0S,UAC/ErI,EAAAA,EAAAA,KAAC2jB,GAAc,CACbh0B,IAAKmxB,EAAIjC,UACT9G,IAAK+I,EAAIvF,UACT5lB,UAAU,6FACV2pB,YAAa6C,EAAiBrB,EAAIjC,WAClCxoB,MAAO,CAAEutB,UAAW,aAKvB9C,EAAIvF,YACHnT,EAAAA,EAAAA,MAAA,cAAYzS,UAAU,eAAc0S,SAAA,EAClCrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,yCAAwC0S,SACnDyY,EAAIvF,aAIPnT,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,gDAA+C0S,SAAA,CAC3DyY,EAAI7zB,YACH+S,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,2CAA0C0S,SACvDyY,EAAI7zB,YAGR6zB,EAAI7B,QACH7W,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,QAAMyY,EAAI7B,SAEjB6B,EAAI5B,WACHlf,EAAAA,EAAAA,KAAA,QAAAqI,SAAO,IAAI8W,KAAK2B,EAAI5B,UAAUE,mBAAmB,cAKpD0B,EAAIzB,qBACHrf,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,0CAAyC0S,SACnDyY,EAAIzB,0BA7CRyB,EAAI5V,SAuDflL,EAAAA,EAAAA,KAAC6jB,GAAiB,CAChB9G,OAAQuF,EACRtF,kBAAmBA,EACnBC,SAAUuF,EACVtF,QAASa,EACTZ,cAAeuF,EACftF,gBAAgB,EAChBC,cAAc,EACdC,aAAa,EACbC,aAAa,QAlFfnV,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0CAAyC0S,SAAA,EACtDrI,EAAAA,EAAAA,KAAA,QAAAqI,SAAM,iDACNrI,EAAAA,EAAAA,KAAA,UACE0Q,QAAS4Y,EACT3zB,UAAU,oCACVme,MAAM,mBAAkBzL,UAExBrI,EAAAA,EAAAA,KAAC8pB,GAAAA,EAAS,CAACn0B,UAAU,kBAsF/B,GAAeuF,EAAAA,KAAWguB,ICzNpBc,IAAoB7W,EAAAA,EAAAA,OAAK1Y,IAAkC,IAAjC,SAAE4N,EAAQ,cAAE4hB,GAAexvB,EACzD,MAAMyvB,EAAmBD,EACrB,eACA,YAEJ,OACE7hB,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,EACErI,EAAAA,EAAAA,KAAA,SAAAqI,SArCa,2eAsCbrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,GAAAnI,OAAK08B,EAAgB,4CAA2C7hB,SAC3EA,UAkDT,IA5CmB8K,EAAAA,EAAAA,OAAK3C,IAAqE,IAApE,OAAE0E,EAAM,cAAE+U,GAAgB,EAAK,WAAE/R,EAAa,EAAC,YAAEiS,GAAa3Z,EAGrF,GAFArkB,QAAQG,IAAI,sBAAuB4oB,IAE9BA,EAEH,OADA/oB,QAAQG,IAAI,6CACL,KAIT,MAAM89B,EAAe,CACnB,CAAEC,UAAWC,GAAWrf,MAAO,CAAEiK,WAEjC,CAAEmV,UAAWE,GAAatf,MAAO,CAAEiK,WACnC,CAAEmV,UAAWG,GAAgBvf,MAAO,CAAEiK,WACtC,CAAEmV,UAAWI,GAAmBxf,MAAO,CAAEiK,WACzC,CAAEmV,UAAWK,GAAmBzf,MAAO,CAAEiK,YAG3C,OACE9M,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,YAAW0S,SAAA,EAExBrI,EAAAA,EAAAA,KAAA,OAAKkD,IAAMynB,GAAOR,IAAgBA,EAAYS,MAAQD,GAAItiB,UACxDrI,EAAAA,EAAAA,KAACgqB,GAAiB,CAACC,cAAeA,EAAc5hB,SAC7C+hB,EAAar4B,KAAI,CAAA6e,EAAuBpR,KAAK,IAA3B,UAAE6qB,EAAS,MAAEpf,GAAO2F,EAAA,OACrC5Q,EAAAA,EAAAA,KAACqqB,GAASp4B,EAAAA,EAAAA,GAAA,GAAiBgZ,GAAXzL,WAMtBQ,EAAAA,EAAAA,KAAA,OAAKkD,IAAMynB,GAAOR,IAAgBA,EAAYnB,SAAW2B,GAAItiB,UAC3DrI,EAAAA,EAAAA,KAAC6qB,GAAc,CAAC3V,OAAQA,EAAQgD,WAAYA,OAI9ClY,EAAAA,EAAAA,KAACkpB,GAAiB,CAAC5W,UAAW4C,EAAOhK,GAAIgN,WAAYA,KAErDlY,EAAAA,EAAAA,KAAA,OAAKkD,IAAMynB,GAAOR,IAAgBA,EAAYW,YAAcH,GAAItiB,UAC9DrI,EAAAA,EAAAA,KAAC+qB,GAAmB,CAAC7V,OAAQA,EAAQgD,WAAYA,Y,iBCpFzD,GAZqBzd,IAAA,IAAC,UAAE9E,EAAY,WAAqB8E,EAAPwQ,GAAKuU,EAAAA,GAAAA,GAAA/kB,EAAAglB,IAAA,OACrDzf,EAAAA,EAAAA,KAAA,OAAA/N,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACE+4B,MAAM,6BACN5b,QAAQ,cACR9e,KAAK,eACLqF,UAAWA,GACPsV,GAAK,IAAA5C,UAETrI,EAAAA,EAAAA,KAAA,QAAMuP,EAAE,kgBCgBZ,IAxBiB4D,EAAAA,EAAAA,OAAK1Y,IAA2D,IAA1D,MAAEF,EAAK,MAAEiZ,EAAK,UAAE7d,EAAY,GAAE,WAAEs1B,GAAa,GAAOxwB,EACzE,IAAK+Y,EAAO,OAAO,KAEnB,MACMwT,EADerxB,EAAUE,SAAS,iBAEpC,qCACA,mDAEJ,OACEuS,EAAAA,EAAAA,MAAA,OAAKzS,UAAS,GAAAnI,OAAKw5B,EAAW,KAAAx5B,OAAImI,GAAY0S,SAAA,EAC5CD,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,+BAA8B0S,SAAA,CAAE9N,EAAM,OACrD0wB,GACCjrB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mBAAkB0S,UAC/BrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0DAAyD0S,SACrEmL,OAILxT,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,+BAA8B0S,SAAEmL,UCdlD0X,GAAqBjgB,IAAUjL,EAAAA,EAAAA,KAACmrB,IAAYl5B,EAAAA,EAAAA,GAAA,CAAC0D,UAAU,WAAcsV,IAqC3E,IAnC0BkI,EAAAA,EAAAA,OAAK1Y,IAAwB,IAAvB,cAAE2wB,GAAe3wB,EAC/C,IAAK2wB,EAEH,OADAj/B,QAAQG,IAAI,2DACL,KAYT,OACE8b,EAAAA,EAAAA,MAACoP,GAAW,CAAC1D,MAAM,yCAAgCF,KAAMsX,GAAkB7iB,SAAA,EACzErI,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,qBAAkBiZ,MAAO4X,EAAchnB,SACvDpE,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,oBAAciZ,MANzB,GAAAhmB,OAAG49B,EAAc9mB,WAAa,GAAE,MAAA9W,OAAK49B,EAAc5mB,IAAM,IAAK8R,UAOnEtW,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,gBAAaiZ,MAZxB4X,EAAc1mB,WAAU,kBAAAlX,OACd4R,WAAWgsB,EAAc1mB,YAAYiI,QAAQ,GAAE,OAAQ,QAYtE3M,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,OAAOiZ,MAAO4X,EAAczmB,QAC5C3E,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,aAAaiZ,MAAO4X,EAAcxmB,cAClD5E,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,WAAWiZ,MAAO4X,EAAcvmB,YAChD7E,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,6BAAuBiZ,MAAO4X,EAAcrmB,MAC5D/E,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,qBAAqBiZ,MAAO4X,EAAcpmB,cAC1DhF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,yBAAyBiZ,MAAO4X,EAAcnmB,cAC9DjF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,gBAAgBiZ,MAAO4X,EAAclmB,cACrDlF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,aAAUiZ,MAAO4X,EAAcjmB,cAC/CnF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,4BAAsBiZ,MAAO4X,EAAchmB,cAC3DpF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,8BAAwBiZ,MAAO4X,EAAc/lB,cAC7DrF,EAAAA,EAAAA,KAACqrB,GAAQ,CAAC9wB,MAAM,mCAAgCiZ,MAAO4X,EAAc9lB,mB,kDC5B3E,MAAMgmB,GAAU7wB,IAA2C,IAA1C,SAAE4N,EAAQ,KAAElY,EAAI,SAAEmG,EAAW,OAAOmE,EACnD,MAAO8wB,EAAWC,IAAgB3iB,EAAAA,EAAAA,WAAS,GAO3C,OACET,EAAAA,EAAAA,MAAA,OACEzS,UAAU,wBACV81B,aAAcA,IAAMD,GAAa,GACjCE,aAAcA,IAAMF,GAAa,GACjCG,QAASA,IAAMH,GAAa,GAC5BI,OAAQA,IAAMJ,GAAa,GAAOnjB,SAAA,CAEjCA,EACAkjB,IACCnjB,EAAAA,EAAAA,MAAA,OAAKzS,UAAS,wHAAAnI,OAfI,CACtByK,IAAK,uDACLsR,OAAQ,qDAegBjT,GAAS,sEAE3B+R,SAAA,CACClY,GACD6P,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,sIAOnBk2B,GAAcrb,IAAgD,IAA/C,QAAEE,EAAO,IAAE9N,EAAG,MAAEkR,EAAK,YAAEC,EAAc,IAAIvD,EAC5D,MAAOsb,EAAQC,IAAaljB,EAAAA,EAAAA,WAAS,GAsB/BmjB,EAAmB,CAAC,oCAADx+B,OACOsmB,GAAK,qCAAAtmB,OACDsmB,GAAK,mCAAAtmB,OACVsmB,GAAK,2CAAAtmB,OACAsmB,GAAK,2BAAAtmB,OACfsmB,GAAK,mCAAAtmB,OACGsmB,GAAK,kCAAAtmB,OACTsmB,GAAK,wCAAAtmB,OACCsmB,IAK9BmY,EAAYD,EADElvB,KAAKovB,MAAMpvB,KAAKqvB,SAAWH,EAAiBp/B,SAE1Dw/B,EAAWxpB,GAAO5R,OAAOq7B,SAAS1V,KAElC2V,EAAe,CACnB,CACExK,KAAM,WACNlO,MAAM5T,EAAAA,EAAAA,KAACkZ,GAAAA,EAAa,CAACvjB,UAAU,YAC/BnF,MAAO,kCACP+7B,UAAWC,GAAAA,GACXvhB,MAAO,CAAErI,IAAKwpB,EAAUtY,MAAOmY,IAEjC,CACEnK,KAAM,WACNlO,MAAM5T,EAAAA,EAAAA,KAACysB,GAAAA,EAAQ,CAAC92B,UAAU,YAC1BnF,MAAO,gCACP+7B,UAAWG,GAAAA,GACXzhB,MAAO,CAAErI,IAAKwpB,EAAUO,MAAOV,IAEjC,CACEnK,KAAM,UACNlO,MAAM5T,EAAAA,EAAAA,KAAC4sB,GAAAA,EAAO,CAACj3B,UAAU,YACzBnF,MAAO,8BACP+7B,UAAWM,GAAAA,GACX5hB,MAAO,CAAErI,IAAKwpB,EAAUtY,MAAOmY,IAEjC,CACEnK,KAAM,WACNlO,MAAM5T,EAAAA,EAAAA,KAAC8sB,GAAAA,EAAQ,CAACn3B,UAAU,YAC1BnF,MAAO,gCACP+7B,UAAWQ,GAAAA,GACX9hB,MAAO,CAAErI,IAAKwpB,EAAUtY,MAAOA,EAAOkZ,QAASjZ,KAInD,OACE/T,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,8EAA6E0S,UAC1FD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,oBAAmB0S,SAAA,EAEhCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mBAAkB0S,UAC/BrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,qCAAoC0S,SAAC,+BAMrDD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yCAAwC0S,SAAA,EAErDrI,EAAAA,EAAAA,KAACsrB,GAAO,CAACn7B,KAAM27B,EAAS,gBAAkB,cAAczjB,UACtDD,EAAAA,EAAAA,MAAA,UACEsI,QAjFW7kB,UACrB,UACQsF,UAAU87B,UAAUC,UAAUtqB,GACpCmpB,GAAU,GACV13B,YAAW,IAAM03B,GAAU,IAAQ,IACrC,CAAE,MAAOtd,GAEP,MAAM0e,EAAQ13B,SAASC,cAAc,SACrCy3B,EAAM3Z,MAAQ5Q,EACdnN,SAAS8zB,KAAKl0B,YAAY83B,GAC1BA,EAAMlhC,SACNwJ,SAAS23B,YAAY,QACrB33B,SAAS8zB,KAAK8D,YAAYF,GAC1BpB,GAAU,GACV13B,YAAW,IAAM03B,GAAU,IAAQ,IACrC,GAmEUp2B,UAAS,0NAAAnI,OAGLs+B,EACE,8BACA,6CAA4C,oBAGlD,aAAW,cAAazjB,SAAA,CAEvByjB,GACC9rB,EAAAA,EAAAA,KAAC+U,GAAAA,EAAK,CAACpf,UAAU,aAEjBqK,EAAAA,EAAAA,KAACstB,GAAAA,EAAI,CAAC33B,UAAU,aAElBqK,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,sBAAqB0S,SAClCyjB,EAAS,UAAY,cAM3BQ,EAAav6B,KAAI,CAAC0Y,EAAQjL,KACzB,MAAM+tB,EAAiB9iB,EAAO8hB,UAC9B,OACEvsB,EAAAA,EAAAA,KAACsrB,GAAO,CAAan7B,KAAI,mBAAA3C,OAAqBid,EAAOqX,MAAOzZ,UAC1DrI,EAAAA,EAAAA,KAACutB,GAAct7B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACTwY,EAAOQ,OAAK,IAChBtV,UAAU,uGACV,gCAAAnI,OAA+Bid,EAAOqX,MAAOzZ,UAE7CD,EAAAA,EAAAA,MAAA,OAAKzS,UAAS,uHAAAnI,OAEVid,EAAOja,MAAK,wBACd6X,SAAA,CACCoC,EAAOmJ,MACR5T,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,sBAAqB0S,SAAEoC,EAAOqX,cAXtCtiB,eAuB5B,GAAetE,EAAAA,KAAW2wB,I,gBC3K1B,MA0BA,IA1BqB1Y,EAAAA,EAAAA,OAAK1Y,IAA+C,IAA9C,WAAE+yB,EAAU,aAAEC,EAAY,WAAEC,GAAYjzB,EAEjE,MAAMkzB,GAAuBlqB,EAAAA,EAAAA,UAAQ,KAC5BmqB,EAAAA,GAAAA,IAAeF,IACrB,CAACA,IAGEG,GAAiBpqB,EAAAA,EAAAA,UAAQ,KACtBqqB,EAAAA,GAAAA,IAAqBJ,IAC3B,CAACA,IAGEK,GAActqB,EAAAA,EAAAA,UAAQ,KACnBuqB,EAAAA,GAAAA,GAAkBN,IACxB,CAACA,IAEJ,OACE1tB,EAAAA,EAAAA,KAAC6rB,GAAW,CACVnb,QAAS+c,EACT7qB,IAAK+qB,EACL7Z,MAAOia,EACPha,YAAa8Z,O,gBCdnB,MAAMI,GAAkBxzB,IAAoC,IAAnC,UAAE8gB,EAAS,UAAE5lB,EAAY,IAAI8E,EAEpD,MAwBMyzB,GAAgBzqB,EAAAA,EAAAA,UAAQ,IACvB8X,EAEE4S,GAAAA,EAAUC,SA3BCj+B,KAClB,IAAKA,EAAM,MAAO,GAGlB,IAAIk+B,EAAgBl+B,EAAK82B,QAAQ,SAAU,WAgB3C,OAbAoH,EAAgBA,EAAcpH,QAAQ,MAAO,QAGxCoH,EAAcjL,WAAW,SAC5BiL,EAAgB,MAAQA,GAErBA,EAAcC,SAAS,UAC1BD,GAAgC,QAIlCA,EAAgBA,EAAcpH,QAAQ,SAAU,MAEzCoH,GAOmBE,CAAWhT,GAAY,CAC/CiT,aAAc,CACZ,IAAK,IAAK,KAAM,SAAU,IAAK,IAAK,KAAM,KAAM,KAAM,KACtD,MAAO,OAAQ,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KACpD,SAAU,aAAc,OAAQ,MAAO,KAAM,QAAS,QACtD,QAAS,KAAM,KAAM,MAEvBC,aAAc,CACZ,OAAQ,SAAU,MAAO,QAAS,QAAS,MAAO,MAClD,QAAS,SAAU,KAAM,QAAS,aAAc,oBAElDC,SAAU,CAAC,SAAU,cACrBC,SAAU,CAAC,SAAU,YAAa,SAClCC,cAAc,EACdC,iBAAiB,IAhBI,IAkBtB,CAACtT,IAEJ,OAAKA,GAGHvb,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,QAAAnI,OAAUmI,GAAY0S,UAClCrI,EAAAA,EAAAA,KAAA,OACErK,UAAU,6CACVU,MAAO,CACL,kBAAmB,UACnB,sBAAuB,UACvB,mBAAoB,UACpB,kBAAmB,UACnB,sBAAuB,UACvB,qBAAsB,UACtB,gBAAiB,UACjB,oBAAqB,UACrB,2BAA4B,UAC5B,sBAAuB,UACvB,kBAAmB,UACnB,sBAAuB,UACvB,oBAAqB,UACrB,wBAAyB,UACzB,wBAAyB,UACzBy4B,WAAY,MACZr4B,SAAU,WACVC,WAAY,6FACZq4B,cAAe,WAEjBnX,wBAAyB,CAAEC,OAAQqW,GACnC,YAAU,aA5BO,MAkCzB,GAAehzB,EAAAA,KAAW+yB,ICvE1B,IAlBmB9a,EAAAA,EAAAA,OAAK1Y,IAAA,IAAC,WAAEizB,GAAYjzB,EAAA,OACrC2N,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,YAAW0S,SAAA,EACxBrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,UACpDrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,8BAA6B0S,UAC1CrI,EAAAA,EAAAA,KAACiuB,GAAe,CAAC1S,UAAWmS,EAAWlK,0BAG1CkK,EAAWsB,WACVhvB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,OAAM0S,UACnBD,EAAAA,EAAAA,MAAA,SAAOkE,UAAQ,EAAC3W,UAAU,SAAQ0S,SAAA,EAChCrI,EAAAA,EAAAA,KAAA,UAAQrQ,IAAK+9B,EAAWsB,SAAUl7B,KAAK,eAAe,kE,2BCNhE,MAAMm7B,GAAoB,CAAC,KAAM,OAOpBC,GAAmB1a,IAC9B,IAAKA,GAAsB,kBAARA,EAAkB,MAAO,GAiB5C,OAdcA,EAAIzmB,MAAM,OAGKgE,KAAIq0B,GAE3B6I,GAAkBp5B,SAASuwB,EAAK1R,eAC3B0R,EAAK1R,cAIP0R,EAAK3R,OAAO,GAAGC,cAAgB0R,EAAK+I,OAAO,GAAGva,gBAIjCe,KAAK,MC3BvByZ,GAAwBl/B,IAC5B,IAAKA,EAAQ,MAAO,GAGpB,MAAMm/B,EAAcn/B,EAAO0kB,cAG3B,GAAIya,EAAYx5B,SAAS,oBAAsBw5B,EAAYx5B,SAAS,UAAW,CAE7E,MAAMy5B,EAASp/B,EAAOnC,MAAM,KACtBwhC,EAAeD,EAAOvF,WAAUyF,GACpCA,EAAM5a,cAAc/e,SAAS,YAG/B,IAAsB,IAAlB05B,GAAuBA,EAAeD,EAAO1iC,OAAS,EAAG,CAE3D,MAAM6iC,EAAaH,EAAO3a,MAAM4a,EAAe,GAAG5Z,KAAK,KACvD,MAAM,SAANnoB,OAAgB0hC,GAAgBO,GAClC,CACF,CAGA,OAAOP,GAAgBh/B,IAwEzB,GArEqBuK,IAAyE,IAAxE,OAAEvK,EAAM,YAAEw/B,EAAW,eAAEC,EAAc,YAAEC,EAAW,aAAEC,GAAcp1B,EACtF,MAAM3J,EAAWE,OAAOC,YAAc,IAChC6+B,EAAoBh/B,GAAYE,OAAOC,WAAaD,OAAO8X,YAC3DinB,EAAuBD,GAAqB9+B,OAAOC,YAAc,IAEvE,OACEmX,EAAAA,EAAAA,MAAA,UAAQzS,UAAS,sCAAAnI,OAAwCsiC,EAAoB,eAAiB,IAAKznB,SAAA,EACjGrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,oDAAmD0S,UAChErI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,8EAA6E0S,UAC1FD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,YAAW0S,SAAA,EACxBrI,EAAAA,EAAAA,KAAA,MACEkL,GAAG,gBACHvV,UAAS,oEAAAnI,OACPuiC,EACI,UACAD,EACE,sBACA,oCAERz5B,MAAO05B,EAAuB,CAAEt5B,SAAU,kCAAqC,CAAC,EAAE4R,SAEjF+mB,GAAqBl/B,MAIxBkY,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,4CAA2C0S,SAAA,EACxDrI,EAAAA,EAAAA,KAACyV,GAAAA,EAAM,CAAC9f,UAAU,YAAY,KAC9ByS,EAAAA,EAAAA,MAAA,QAAMzS,UAAU,iCAAgC0S,SAAA,CAAC,IAA0C,4CAQnGD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,qEAAoE0S,SAAA,EAC/EvX,IACAkP,EAAAA,EAAAA,KAAA,UACE0Q,QAASif,EACTh6B,UAAU,gLACV,aAAYi6B,EAAc,mBAAqB,mBAC/C9b,MAAO8b,EAAc,YAAc,YAAYvnB,SAE9CunB,GACC5vB,EAAAA,EAAAA,KAACgwB,GAAAA,EAAS,CAACvtB,KAAM,GAAI9M,UAAU,WAAW,cAAY,UAEtDqK,EAAAA,EAAAA,KAACiwB,GAAAA,EAAS,CAACxtB,KAAM,GAAI9M,UAAU,WAAW,cAAY,YAK5DqK,EAAAA,EAAAA,KAAA,UACE0Q,QAASgf,EACT/5B,UAAS,2KAAAnI,OACPsiC,EAAoB,QAAU,OAEhC,aAAW,gBAAeznB,UAE1BrI,EAAAA,EAAAA,KAACgV,GAAAA,EAAC,CACAvS,KAAMqtB,EAAoB,GAAK,GAC/B,cAAY,OACZn6B,UAAU,sBC1CtB,GA7C0B8E,IAAyD,IAAxD,UAAEy1B,EAAS,UAAEv6B,EAAY,GAAE,YAAE2pB,GAAc,GAAO7kB,EAC3E,MAAOmlB,EAAYC,IAAiBhX,EAAAA,EAAAA,WAAS,GAW7C,OAAKqnB,GAAatQ,EACT,MAIPxX,EAAAA,EAAAA,MAAA,OAAKzS,UAAS,sEAAAnI,OAAwEmI,GAAY0S,SAAA,EAEhGrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,mBAAkB0S,UAC/BrI,EAAAA,EAAAA,KAAC2jB,GAAc,CACbh0B,IAAKugC,EACLnY,IAAI,mBACJpiB,UAAU,kEACV2pB,YAAaA,EACb/W,OAtBgByX,KACtBH,GAAc,IAsBRrX,QAnBiByX,KACvBJ,GAAc,SAuBZ7f,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,+EACfqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,oFAGfqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6BAA4B0S,UACzCrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0GAIjBqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,6GCTrB,GAzB6B+3B,IAC3B,MAAOnC,EAAWC,IAAgB3iB,EAAAA,EAAAA,WAAS,IACrC,SAAE/X,IAAaof,EAAAA,GAAAA,KAoBrB,OAlBApQ,EAAAA,EAAAA,YAAU,KACRzE,EAAO3B,MAAM,0CAA2Cg0B,GAEpDA,GAAoC,kBAAfA,GACvBryB,EAAO3B,MAAM,yDACb8xB,GAAa,GACb/1B,SAAS8zB,KAAKlzB,MAAMW,SAAW,WAE/BqE,EAAO3B,MAAM,0DACb8xB,GAAa,GACb/1B,SAAS8zB,KAAKlzB,MAAMW,SAAW,IAG1B,KACLvB,SAAS8zB,KAAKlzB,MAAMW,SAAW,MAEhC,CAAC02B,IAEG,CAAEnC,YAAWz6B,aCxBhBq/B,GAAkB11B,IAQjB,IARkB,WACvBizB,EAAU,YACVgC,EAAW,SACXrnB,EAAQ,YACRunB,EAAW,iBACXQ,EAAgB,WAChBC,EAAU,SACVC,GACD71B,EACC,MAAM,UAAE8wB,EAAS,SAAEz6B,GAAay/B,GAAoB7C,GAC9C8C,EChB2BC,EAAC3/B,EAAU8+B,KAC5C,MAAO38B,EAAay9B,IAAkB7nB,EAAAA,EAAAA,UAAS7X,OAAOC,aAC/C0/B,EAAcC,IAAmB/nB,EAAAA,EAAAA,UAAS7X,OAAO8X,aAGlD+nB,EAAc,CAClBC,GAAI,IACJC,GAAI,IACJC,GAAI,KACJC,GAAI,KACJ,MAAO,OAITnxB,EAAAA,EAAAA,YAAU,KACR,MAAMsJ,EAAeA,KACnBsnB,EAAe1/B,OAAOC,YACtB2/B,EAAgB5/B,OAAO8X,cAIzB,OADA9X,OAAO4G,iBAAiB,SAAUwR,GAC3B,IAAMpY,OAAOqY,oBAAoB,SAAUD,KACjD,IAGH,MAAM8nB,GAAaztB,EAAAA,EAAAA,UAAQ,KAEzB,MAAMqsB,EAAoBh/B,GAAYmC,EAAc09B,EAE9CQ,EAAU,gBAAA3jC,OADKsiC,EAAoB,GAAKh/B,EAAW,GAAK,GACf,OAIzCoY,EAAYjW,GAAe49B,EAAYE,GAM7C,IAAIK,EAkBJ,OAdIA,EAHAtgC,GAUW8+B,EAPE,OASb38B,GAAe49B,EAAYG,GACzB,MACA,MAGC,CACLtzB,OAAQyzB,EACRvN,UA7BoB9yB,EAAW,OAAS,OA8BxCH,MAAOygC,EACPloB,YACA4mB,oBACA7F,cA3BoB/gB,GAAa0mB,EA4BjCiB,cACAh6B,OAAQ,OAGT,CAAC/F,EAAU8+B,EAAa38B,EAAa09B,IAExC,OAAOO,GDtDkBT,CAAoB3/B,EAAU8+B,IAGjD,iBAAEzN,GAAqBQ,GAA4B,OAAV+K,QAAU,IAAVA,OAAU,EAAVA,EAAYxiB,IAAI,GAE/D,IAAKwiB,EAAY,OAAO,KAGxB,MACM2D,EADoBvgC,GAAYE,OAAOC,WAAaD,OAAO8X,YACxB,GAAKhY,EAAW,GAAK,GAExDk2B,EAAW,oBAAAx5B,OAEbsD,EAAQ,gCAEN,4DAA2D,8IAM3DwgC,EAAoB/F,EAEpB,4BAGA,6BAGN,OACEnjB,EAAAA,EAAAA,MAAA,OACEiM,KAAK,SACL,kBAAgB,gBAChB,mBAAiB,mBACjB,aAAW,OACX1e,UAAS,GAAAnI,OAAKw5B,EAAW,KAAAx5B,OAAI8jC,GAAiB9jC,OAAGsD,EAAW,6BAA+B,IAC3FuF,OAAKpE,EAAAA,EAAAA,GAAA,CACHyL,OAAQ8yB,EAAiB9yB,OACzBkmB,UAAW4M,EAAiB5M,UAC5BjzB,MAAOG,EAAW,OAAS0/B,EAAiB7/B,MAC5CsH,IAAKnH,EAAQ,GAAAtD,OAAM6jC,EAAY,MAAO,GACtC15B,QAAS,OACT45B,cAAe,SACfj7B,SAAU,SACNxF,GAAY,CACd0F,aAAcg6B,EAAiBV,kBAAoB,IAAM,gBACzD54B,UAAWs5B,EAAiBV,kBACxB,UACA,4EAENznB,SAAA,EAEFrI,EAAAA,EAAAA,KAACwxB,GAAY,CACXthC,OAAQw9B,EAAWx9B,OACnBw/B,YAAaA,EACbC,eAAgBS,EAChBR,YAAaA,EACbC,aAAcnC,EAAW+D,gBAI1BnB,IACCtwB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,oFAAmF0S,SAC/FioB,KAILloB,EAAAA,EAAAA,MAAA,OAAKlF,IAAKmtB,EAAY16B,UAAU,kHAAiH0S,SAAA,CAE9IqlB,EAAW+D,gBACVzxB,EAAAA,EAAAA,KAAC0xB,GAAiB,CAChBxB,UAAWxC,EAAW+D,cACtB97B,UAAU,8CACV2pB,YAAa6C,EAAiBuL,EAAW+D,kBAI7CzxB,EAAAA,EAAAA,KAAA,OAAKrK,UAAS,GAAAnI,OAAKsD,EAAW,aAAe,MAAK,iCAAgCuX,UAChFrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2EAA0E0S,SACtFA,aAQb,GAAenN,EAAAA,KAAWi1B,IE7FpBwB,GAA8Bjb,IAClC,IAAKA,GAAwB,kBAATA,EAAmB,OAAO,KAE9C,MAAM4P,EAAQ5P,EAAK4P,MAAM,yBACzB,IAAKA,EAAO,OAAO,KAEnB,MAAMsL,EAAStL,EAAM,GACrB,MAAM,oEAAN94B,OAA2EokC,EAAM,mBAM7EC,GAAiBp3B,IAAA,IAAC,SAAEq3B,EAAQ,YAAEC,GAAat3B,EAAA,OAC/C2N,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,0BAA0B0e,KAAK,UAAU,aAAW,6CAAsChM,SAAA,EACvGD,EAAAA,EAAAA,MAAA,UACEtU,KAAK,SACLugB,KAAK,MACL,gBAA4B,SAAbyd,EACf,aAAW,sBACXphB,QAASA,IAAMqhB,EAAY,QAC3Bp8B,UAAS,iHAAAnI,OACM,SAAbskC,EACI,4CACA,mCAEN5K,SAAU,EAAE7e,SAAA,EAGZrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,UAAUrF,KAAK,OAAOG,OAAO,eAAe2e,QAAQ,YAAW/G,UAC5ErI,EAAAA,EAAAA,KAAA,QAAMqP,cAAc,QAAQC,eAAe,QAAQlJ,YAAa,EAAGmJ,EAAE,+BAEvEvP,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,mBAAkB0S,SAAC,cAErCD,EAAAA,EAAAA,MAAA,UACEtU,KAAK,SACLugB,KAAK,MACL,gBAA4B,SAAbyd,EACf,aAAW,sBACXphB,QAASA,IAAMqhB,EAAY,QAC3Bp8B,UAAS,iHAAAnI,OACM,SAAbskC,EACI,4CACA,mCAEN5K,SAAU,EAAE7e,SAAA,EAGZrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,UAAUrF,KAAK,OAAOG,OAAO,eAAe2e,QAAQ,YAAW/G,UAC5ErI,EAAAA,EAAAA,KAAA,QAAMqP,cAAc,QAAQC,eAAe,QAAQlJ,YAAa,EAAGmJ,EAAE,4QAEvEvP,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,mBAAkB0S,SAAC,iBAKnC2pB,GAAiBxhB,IAA2C,IAA1C,WAAEa,EAAU,MAAEyC,EAAQ,cAActD,EAC1D,MAAOyhB,EAAaC,IAAkBrpB,EAAAA,EAAAA,UAAS,OACxCipB,EAAUC,IAAelpB,EAAAA,EAAAA,UAAS,QACnCspB,GAAYp3B,EAAAA,EAAAA,QAAO,OAClBq3B,EAAaC,IAAkBxpB,EAAAA,EAAAA,WAAS,IACxCypB,EAAqBC,IAA0B1pB,EAAAA,EAAAA,WAAS,GAyC/D,IAtCA/I,EAAAA,EAAAA,YAAU,KACJmyB,IACFI,GAAe,GACfE,GAAuB,MAExB,CAACN,KAGJnyB,EAAAA,EAAAA,YAAU,MACHmyB,IAAyB,OAAV5gB,QAAU,IAAVA,OAAU,EAAVA,EAAYzkB,QAAS,GACvCslC,EAAe7gB,EAAW,MAE3B,CAACA,EAAY4gB,KAGhBnyB,EAAAA,EAAAA,YAAU,KACR,MAAM0yB,EAASL,EAAU72B,QACzB,IAAKk3B,IAAWP,EAAa,OAE7B,MAAMQ,EAAaA,KACjBJ,GAAe,IAGXK,EAAcA,KAClBL,GAAe,GACfE,GAAuB,IAMzB,OAHAC,EAAO56B,iBAAiB,OAAQ66B,GAChCD,EAAO56B,iBAAiB,QAAS86B,GAE1B,KACLF,EAAOnpB,oBAAoB,OAAQopB,GACnCD,EAAOnpB,oBAAoB,QAASqpB,MAErC,CAACT,KAGC5gB,GAAoC,IAAtBA,EAAWzkB,OAC5B,OAAO,KAiKT,OACEwb,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yBAAwB0S,SAAA,EACrCD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yCAAwC0S,SAAA,EACrDD,EAAAA,EAAAA,MAAA,MAAIzS,UAAU,uCAAsC0S,SAAA,CAAEyL,EAAM,OAC3DzC,EAAWzkB,OAAS,IACnBoT,EAAAA,EAAAA,KAAC6xB,GAAc,CAACC,SAAUA,EAAUC,YAAaA,OAIpD1gB,EAAWzkB,OAAS,IACnBoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,OAAM0S,SACL,SAAbypB,GAvKL9xB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,SACnDgJ,EAAWtf,KAAKsgB,IACfrS,EAAAA,EAAAA,KAAA,OAEErK,UAAS,uMAAAnI,QAIM,OAAXykC,QAAW,IAAXA,OAAW,EAAXA,EAAa/mB,MAAOmH,EAAInH,GACtB,4BACA,6BAA4B,kBAGlCwF,QAASA,KACPwhB,EAAe7f,IAEjB6U,SAAU,EACV,sCAAA15B,OAAqC6kB,EAAIniB,QAASmY,UAElDD,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2CAA0C0S,SAAA,EACvDrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,yDAAwD0S,SAAEgK,EAAIniB,SAC3EmiB,EAAIsgB,UACHvqB,EAAAA,EAAAA,MAAA,KAAGzS,UAAU,0CAAyC0S,SAAA,CAAC,QAAMgK,EAAIsgB,WAElEtgB,EAAIlO,OACHnE,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,sFAAqF0S,SAClGgK,EAAIlO,WAvBNkO,EAAInH,SAmCflL,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,YAAW0S,SACvBgJ,EAAWtf,KAAKsgB,IACfjK,EAAAA,EAAAA,MAAA,UAEEsI,QAASA,KACPwhB,EAAe7f,IAEjB1c,UAAS,kEAAAnI,QACI,OAAXykC,QAAW,IAAXA,OAAW,EAAXA,EAAa/mB,MAAOmH,EAAInH,GACpB,eACA,qBACH7C,SAAA,EAEHrI,EAAAA,EAAAA,KAAA,MAAIrK,UAAU,6BAA4B0S,SAAEgK,EAAIniB,SAC/CmiB,EAAIsgB,UACHvqB,EAAAA,EAAAA,MAAA,KAAGzS,UAAU,wBAAuB0S,SAAA,CAAC,QAAMgK,EAAIsgB,WAEhDtgB,EAAIlO,OACHnE,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,2FAA0F0S,SACvGgK,EAAIlO,SAhBJkO,EAAInH,UAyBU0nB,MAC3B,IAAKX,EAAa,OAAO,KAEzB,MAAMY,EAAoBZ,EAAYa,SAASj9B,SAAS,4BAExD,OACEmK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gDAA+C0S,SAC3DwqB,GACCzqB,EAAAA,EAAAA,MAAAkF,EAAAA,SAAA,CAAAjF,SAAA,CACIiqB,GAaAtyB,EAAAA,EAAAA,KAAA,UACEkD,IAAKivB,EACLxiC,IAAKgiC,GAA2BM,EAAYa,UAC5CniC,MAAM,OACN+M,OAAO,QACPq1B,MAAM,WACNjlB,QAAQ,OACRgG,MAAK,GAAAtmB,OAAKykC,EAAY/hC,OAAM,yBAC5B8iC,QAAQ,2DACRr9B,UAAU,cArBZqK,EAAAA,EAAAA,KAAA,UACEkD,IAAKivB,EACLxiC,IAAKsiC,EAAYa,SAAS7L,QAAQ,oBAAqB,YACvDt2B,MAAM,OACN+M,OAAO,QACPq1B,MAAM,WACNjlB,QAAQ,OACRgG,MAAOme,EAAY/hC,OACnB8iC,QAAQ,2DACRr9B,UAAU,aAeby8B,IACChqB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,6CAA4C0S,SAAA,EACzDrI,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,eAAc0S,SAAC,8DAC5BD,EAAAA,EAAAA,MAAA,KACEuO,KAAMsb,EAAYa,SAClB5mB,OAAO,SACP0K,IAAI,sBACJjhB,UAAU,0KAAyK0S,SAAA,EAEnLrI,EAAAA,EAAAA,KAAA,OACErK,UAAU,eACVrF,KAAK,OACLG,OAAO,eACP2e,QAAQ,YAAW/G,UAEnBrI,EAAAA,EAAAA,KAAA,QACEqP,cAAc,QACdC,eAAe,QACflJ,YAAa,EACbmJ,EAAE,mFAEA,8BAOdvP,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,0BAAyB0S,UACtCD,EAAAA,EAAAA,MAAA,KACEuO,KAAMsb,EAAYa,SAClB5mB,OAAO,SACP0K,IAAI,sBACJjhB,UAAU,0KAAyK0S,SAAA,EAEnLrI,EAAAA,EAAAA,KAAA,OACErK,UAAU,eACVrF,KAAK,OACLG,OAAO,eACP2e,QAAQ,YAAW/G,UAEnBrI,EAAAA,EAAAA,KAAA,QACEqP,cAAc,QACdC,eAAe,QACflJ,YAAa,EACbmJ,EAAE,sIAEA,4BAwBbqjB,OAKP,GAAe13B,EAAAA,KAAW82B,IChQpBiB,GAAcx4B,IAA8C,IAA7C,SAAE5L,EAAQ,MAAEilB,EAAQ,WAAO,SAAErnB,GAAUgO,EAC1D,MAAOy4B,EAAqBC,IAA0BtqB,EAAAA,EAAAA,UAAS,OACxD,CAAEkF,IAAclF,EAAAA,EAAAA,WAAS,GAqBhC,IAlBA/I,EAAAA,EAAAA,YAAU,KACajU,WACnB,GAAKgD,GAAapC,EAElB,IACEshB,GAAW,GACX,MAAM7d,QAAetB,EAAAA,GAAAA,IAAoBC,EAAUpC,GACnD0mC,EAAuBjjC,EACzB,CAAE,MAAOpE,GACPK,QAAQC,KAAK,0CAAwCN,EACvD,CAAC,QACCiiB,GAAW,EACb,GAGFqlB,KACC,CAACvkC,EAAUpC,KAEToC,EAAU,OAAO,KAEtB,MAAMwkC,EAnDkBzwB,KACxB,IAAKA,GAAsB,kBAARA,EACjB,OAAO,KAIT,MAAM0wB,EAAU1wB,EAAI7U,MAAM,KAAK,GAGzBwlC,EAAW,CACf,iCACA,iCACA,sBACA,6BAGF,IAAK,MAAMC,KAAWD,EAAU,CAC9B,MAAMjN,EAAQgN,EAAQhN,MAAMkN,GAC5B,GAAIlN,GAASA,EAAM,GACjB,OAAOA,EAAM,EAEjB,CAEA,OAAO,MA4BSmN,CAAiB5kC,GAEjC,OAAKwkC,GAyCHjrB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yBAAwB0S,SAAA,EACrCD,EAAAA,EAAAA,MAAA,MAAIzS,UAAU,4CAA2C0S,SAAA,EACnC,OAAnB6qB,QAAmB,IAAnBA,OAAmB,EAAnBA,EAAqBhjC,SAAU4jB,EAAM,OAIvCof,IACC9qB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,mCAAkC0S,SAAA,CAC9C6qB,EAAoB3X,YACnBvb,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,qBAAoB0S,SAAE6qB,EAAoB3X,aAGzDnT,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,gDAA+C0S,SAAA,CAC3D6qB,EAAoBjmC,YACnB+S,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,2DAA0D0S,SACvE6qB,EAAoBjmC,YAGxBimC,EAAoBQ,aACnB1zB,EAAAA,EAAAA,KAAA,QAAMrK,UAAU,aAAY0S,SACzB6qB,EAAoBQ,aAGxBR,EAAoBS,UACnBvrB,EAAAA,EAAAA,MAAA,QAAAC,SAAA,CAAM,kBAAU6qB,EAAoBS,kBAM5C3zB,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,gDAA+C0S,UAC5DrI,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,2BAA0B0S,UACvCrI,EAAAA,EAAAA,KAAA,UACErK,UAAU,sCACVhG,IAAG,iCAAAnC,OAAmC6lC,GACtCvf,OAA0B,OAAnBof,QAAmB,IAAnBA,OAAmB,EAAnBA,EAAqBhjC,SAAU4jB,EACtC8f,YAAY,IACZb,MAAM,2FACNc,iBAAe,EACf/lB,QAAQ,OACRgmB,eAAe,mBA/ErB1rB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,yBAAwB0S,SAAA,EACrCD,EAAAA,EAAAA,MAAA,MAAIzS,UAAU,4CAA2C0S,SAAA,EACnC,OAAnB6qB,QAAmB,IAAnBA,OAAmB,EAAnBA,EAAqBhjC,SAAU4jB,EAAM,QAExC1L,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,sDAAqD0S,SAAA,EAClErI,EAAAA,EAAAA,KAAA,KAAGrK,UAAU,eAAc0S,SAAC,uDAC5BD,EAAAA,EAAAA,MAAA,KACEuO,KAAM9nB,EACNqd,OAAO,SACP0K,IAAI,sBACJjhB,UAAU,0KAAyK0S,SAAA,EAEnLD,EAAAA,EAAAA,MAAA,OACEzS,UAAU,eACVrF,KAAK,OACLG,OAAO,eACP2e,QAAQ,YAAW/G,SAAA,EAEnBrI,EAAAA,EAAAA,KAAA,QACEqP,cAAc,QACdC,eAAe,QACflJ,YAAa,EACbmJ,EAAE,sGAEJvP,EAAAA,EAAAA,KAAA,QACEqP,cAAc,QACdC,eAAe,QACflJ,YAAa,EACbmJ,EAAE,0CAEA,oCA2DlB,GAAerU,EAAAA,KAAW+3B,IC/IpBc,GAAoBt5B,IAA6D,IAA5D,WAAEizB,EAAU,YAAEgC,EAAW,UAAEpd,EAAS,WAAE4F,EAAa,GAAGzd,EAC/E,MAAMu5B,GAAYj5B,EAAAA,EAAAA,QAAO,MACnBs1B,GAAat1B,EAAAA,EAAAA,QAAO,MACpBovB,GAAcpvB,EAAAA,EAAAA,QAAO,CAAC,IACrBk5B,EAAaC,IAAkBrrB,EAAAA,EAAAA,UAAS,IACxC+mB,EAAauE,IAAkBtrB,EAAAA,EAAAA,WAAS,IAEzC,qBAAE8kB,EAAoB,WAAEH,EAAU,aAAEC,GCpBnBC,KACvB,MAAMC,EAAuBA,IAEzB38B,OAAOq7B,SAAS+H,OAChBpjC,OAAOq7B,SAASgI,SAChB,WACAC,EAAAA,GAAAA,GAAU5G,EAAWx9B,QAsCzB,MAAO,CAAEy9B,uBAAsBH,WAlCZ3hC,UACjB,MAAM+W,EAAM+qB,IACZ,UACQx8B,UAAU87B,UAAUC,UAAUtqB,GACpC8jB,MAAM,gBACR,CAAE,MAAOjY,GACP,MAAM0e,EAAQ13B,SAASC,cAAc,SACrCy3B,EAAM3Z,MAAQ5Q,EACdnN,SAAS8zB,KAAKl0B,YAAY83B,GAC1BA,EAAMlhC,SACNwJ,SAAS23B,YAAY,QACrB33B,SAAS8zB,KAAK8D,YAAYF,GAC1BzG,MAAM,gBACR,GAqByC+G,aAlBtBA,KACnB,MAAM7qB,EAAM+qB,IACN4G,EAAK,wBAAA/mC,OAA2BkgC,EAAWx9B,QAE7CiB,UAAUqjC,MACZrjC,UAAUqjC,MAAM,CACd1gB,MAAO4Z,EAAWx9B,OAClBC,KAAMokC,EACN3xB,IAAKA,IAGP5R,OAAOglB,KAAK,yCAADxoB,OACgCinC,mBAAmBF,GAAM,SAAA/mC,OAAQinC,mBAAmB7xB,IAC7F,aDnBqD8xB,CAAShH,IAC9D,WAAErc,GAAesjB,GAA8B,OAAVjH,QAAU,IAAVA,OAAU,EAAVA,EAAYxiB,IErB1B0pB,IAAC1xB,EAAK/K,ECAR08B,EAACnH,EAAYC,KACxC,MAAMmH,GAAa/5B,EAAAA,EAAAA,QAAO,MACpBg6B,GAAah6B,EAAAA,EAAAA,QAAO,OAE1B+E,EAAAA,EAAAA,YAAU,KACR,GAAK4tB,EAsBL,OAnBIqH,EAAWz5B,SACblH,aAAa2gC,EAAWz5B,SAI1By5B,EAAWz5B,QAAUjH,YAAW,KAC9B,MAAM2gC,EAASrH,IAGf,GAAIqH,IAAWF,EAAWx5B,QACxB,IACEtK,OAAOikC,QAAQC,aAAa,CAAC,EAAG,GAAIF,GACpCF,EAAWx5B,QAAU05B,CACvB,CAAE,MAAOlpC,GACPK,QAAQC,KAAK,yBAA0BN,EACzC,IAED,KAEI,KACDipC,EAAWz5B,SACblH,aAAa2gC,EAAWz5B,YAG3B,CAACoyB,EAAYC,KHPhBkH,CAAcnH,EAAYC,GEzBIzqB,EF0Bd8wB,EE1BmB77B,EF0BRu3B,GEzB3B5vB,EAAAA,EAAAA,YAAU,KACR,MAAMq1B,EAAY5hC,IAEhB,MAAMo3B,EAAKp3B,EAAM2Y,OACbye,EAAG9f,WAAa8f,EAAG9f,UAAUuqB,SAAS,yBAIrClyB,EAAI5H,UAAW4H,EAAI5H,QAAQ85B,SAAS7hC,EAAM2Y,SAG/C/T,EAAQ5E,IAMV,OAHAkC,SAASmC,iBAAiB,YAAau9B,GACvC1/B,SAASmC,iBAAiB,aAAcu9B,GAEjC,KACL1/B,SAAS4T,oBAAoB,YAAa8rB,GAC1C1/B,SAAS4T,oBAAoB,aAAc8rB,MAE5C,CAACjyB,EAAK/K,KFOT2H,EAAAA,EAAAA,YAAU,KACR3T,QAAQG,IAAI,2CAA4C4rB,KACvD,CAACA,IAEJ,MAAMmd,GAAW5xB,EAAAA,EAAAA,UAAQ,KACvB,MAAM+d,EAAO,GAKb,OAJAA,EAAKzH,KAAK,CAAEnM,IAAK,QAASrT,MAAO,UACjCinB,EAAKzH,KAAK,CAAEnM,IAAK,WAAYrT,MAAO,gBACpCinB,EAAKzH,KAAK,CAAEnM,IAAK,cAAerT,MAAO,gBACnCmzB,GAAcA,EAAW4H,kBAAkB9T,EAAKzH,KAAK,CAAEnM,IAAK,SAAUrT,MAAO,cAC1EinB,IACN,CAAW,OAAVkM,QAAU,IAAVA,OAAU,EAAVA,EAAY4H,oBAEhBx1B,EAAAA,EAAAA,YAAU,KACR,MAAM6qB,EAAK0F,EAAW/0B,QACtB,IAAKqvB,EAAI,OACT,MAAM4K,EAAeA,KACnB,MAAMC,EAAgB7K,EAAG8K,wBACzB,IAAIC,EAAY,EACZC,EAAYC,IAChBP,EAAS91B,SAAQ,CAACs2B,EAAGrd,KACnB,MAAMsd,EAAM3L,EAAY7uB,QAAQu6B,EAAEjoB,KAClC,IAAKkoB,EAAK,OACV,MAAMC,EAAID,EAAIL,wBACRO,EAAQl5B,KAAKm5B,IAAIF,EAAE99B,IAAMu9B,EAAcv9B,IAAM,IAC/C+9B,EAAQL,IACVA,EAAYK,EACZN,EAAYld,MAGhB0b,EAAewB,IAIjB,OAFA/K,EAAG/yB,iBAAiB,SAAU29B,EAAc,CAAEW,SAAS,IACvDX,IACO,IAAM5K,EAAGthB,oBAAoB,SAAUksB,KAC7C,CAACF,IAEJ,MAAMc,EAAmB3d,IAAS,IAAD4d,EAC/B,MAAMzL,EAAK0F,EAAW/0B,QACtB,IAAKqvB,EAAI,OACT,MAAM/c,EAAmB,QAAhBwoB,EAAGf,EAAS7c,UAAI,IAAA4d,OAAA,EAAbA,EAAexoB,IACrB1B,EAAS0B,EAAMuc,EAAY7uB,QAAQsS,GAAO,KAChD,IAAK1B,EAAQ,OACb,MAAMmqB,EAAe1L,EAAG8K,wBAAwBx9B,IAE1Cq+B,EADYpqB,EAAOupB,wBAAwBx9B,IACpBo+B,EAAe1L,EAAG4L,UAAY,GAC3D5L,EAAG6L,SAAS,CAAEv+B,IAAKq+B,EAAUG,SAAU,YAGnCC,EAAcA,KAElBP,EADgBlC,EAAc,EAAIA,EAAc,EAAI,IAIhD0C,EAAcA,KAClB,MAAMC,EAAOvB,EAASzoC,OAAS,EAE/BupC,EADgBlC,EAAc2C,EAAO3C,EAAc,EAAI2C,IAInDC,EAAoBA,CAACxY,EAAGyY,KACd,UAAVzY,EAAEzQ,KAA6B,MAAVyQ,EAAEzQ,MACzByQ,EAAEE,iBACFuY,MAIJ,IAAKpJ,EACH,OAAO,KAIT,MAAM93B,EAAsC,mBAApB83B,EAAWvpB,KAC7B4yB,EAAgC,iBAAtBrJ,EAAWx9B,OAsC3B,OACE8P,EAAAA,EAAAA,KAAA,OAAKkD,IAAK8wB,EAAU3rB,UAClBD,EAAAA,EAAAA,MAAC+nB,GAAe,CACdzC,WAAYA,EACZgC,YAAaA,EACbE,YAAaA,EACbQ,iBA3HiBT,IAAMwE,GAAe3sB,IAASA,IA4H/C6oB,WAAYA,EACZC,SAAU+E,EAASzoC,OAAS,GAC1BoT,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,eAAe0e,KAAK,aAAa,aAAW,iBAAgBhM,UACzED,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,4EAA4EU,MAAO,CAAE2gC,wBAAyB,eAAgB3uB,SAAA,EAC3IrI,EAAAA,EAAAA,KAAA,OACErK,UAAU,mOACV0e,KAAK,SACL6S,SAAU,EACV,aAAW,mBACXxW,QAASgmB,EACTO,UAAY5Y,GAAMwY,EAAkBxY,EAAGqY,MAEzC12B,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,kDACfqK,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,wCAAuC0S,SACnDgtB,EAAStjC,KAAI,CAAC8jC,EAAGrd,KAChBxY,EAAAA,EAAAA,KAAA,OAEEqU,KAAK,SACL6S,SAAU,EACVvxB,UAAS,mCAAAnI,OAAqCgrB,IAAQyb,EAAc,gCAAkC,mDAAkD,mFACxJngB,MAAO+hB,EAAEt7B,MACT,aAAYie,EACZ,8BAAAhrB,OAA6BgrB,EAAM,EAAC,MAAAhrB,OAAKqoC,EAAEt7B,OAC3CmW,QAASA,IAAMylB,EAAgB3d,GAC/Bye,UAAY5Y,GAAMwY,EAAkBxY,GAAG,IAAM8X,EAAgB3d,MARxDqd,EAAEjoB,UAYb5N,EAAAA,EAAAA,KAAA,OAAKrK,UAAU,oDACfqK,EAAAA,EAAAA,KAAA,OACErK,UAAU,qOACV0e,KAAK,SACL6S,SAAU,EACV,aAAW,eACXxW,QAASimB,EACTM,UAAY5Y,GAAMwY,EAAkBxY,EAAGsY,UAI3C,KAAKtuB,SAAA,CAjFT0uB,GACK/2B,EAAAA,EAAAA,KAACk3B,GAAU,CAACxJ,WAAYA,IAG7B93B,GACKoK,EAAAA,EAAAA,KAACm3B,GAAiB,CAAC/L,cAAesC,KAIzCtlB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,WAAU0S,SAAA,EACvBrI,EAAAA,EAAAA,KAACo3B,GAAU,CACTliB,OAAQwY,EACRzD,eAAe,EACf/R,WAAYA,EACZiS,YAAaA,EAAY7uB,UAE1B+V,GAAcA,EAAWzkB,OAAS,IACjCoT,EAAAA,EAAAA,KAACgyB,GAAc,CACb3gB,WAAYA,EACZyC,MAAM,0CAGT4Z,EAAW4H,mBACVt1B,EAAAA,EAAAA,KAAA,OAAKkD,IAAMynB,GAAQR,EAAY7uB,QAAgB,OAAIqvB,EAAItiB,UACrDrI,EAAAA,EAAAA,KAACizB,GAAW,CACVpkC,SAAU6+B,EAAW4H,iBACrBxhB,OAAO9T,EAAAA,EAAAA,KAAA,QAAM3J,MAAO,CAAEI,SAAU,UAAW4R,SAAA,8CAAA7a,OAA0CkgC,EAAWx9B,UAChGzD,SAAUihC,EAAWxiB,WAyD3BlL,EAAAA,EAAAA,KAACq3B,GAAY,CACX7J,WAAYA,EACZC,aAAcA,EACdC,WAAYA,UAOtB,GAAexyB,EAAAA,KAAW64B,I,gBIzL1B,MAAMuD,GAAuB78B,IAAsD,IAArD,WAAEC,EAAU,aAAEC,EAAY,UAAE4W,GAAY,GAAO9W,EAC3EY,EAAO3B,MAAM,gDAAiDgB,EAAa,CACzE68B,WAAY78B,EAAW9N,OACvB4qC,QAAS98B,EAAW,GAAK,CACvBxK,OAAQwK,EAAW,GAAGxK,OACtB+O,SAAUvE,EAAW,GAAGmb,SACxB3W,UAAWxE,EAAW,GAAGob,UACzB3R,KAAMzJ,EAAW,GAAGyJ,MAClB,gBACF,oBAEJ,MAAM,WAAE+T,IAAeuf,EAAAA,GAAAA,KAGjBC,GADYj0B,EAAAA,EAAAA,UAAQ,IAAM,IAAIk0B,gBAAgB3mC,OAAOq7B,SAASuL,SAAS,IACrDvoC,IAAI,SACtBwoC,GAAep0B,EAAAA,EAAAA,UAAQ,KAC3B,GAAIi0B,GAAmB,KAAVA,GAAgBh9B,GAAcA,EAAW9N,OAAS,EAAG,CAEhE,OADmB8N,EAAW2P,MAAM4G,IAASqjB,EAAAA,GAAAA,GAAUrjB,EAAK/gB,UAAYwnC,KACnD,IACvB,CACA,OAAO,OACN,CAACA,EAAOh9B,KAEJgzB,EAAYoK,IAAiBjvB,EAAAA,EAAAA,UAASgvB,IACtCE,EAAoBC,IAAyBnvB,EAAAA,EAAAA,YAAWgvB,GAGzDI,GAAkBx0B,EAAAA,EAAAA,UAAQ,IAC9B/I,EAAaA,EAAW/I,QAAOqN,GAASA,EAAMk5B,WAAa,IAAK,IAChE,CAACx9B,IAIGy9B,GAAc/8B,EAAAA,EAAAA,cAAarB,IAC1BA,GACL+9B,EAAc/9B,KACb,IAGGq+B,GAAgBh9B,EAAAA,EAAAA,cAAY,KAChCC,EAAO3B,MAAM,wDAEZ,KAGHoG,EAAAA,EAAAA,YAAU,MACJ+3B,GAAiBnK,GAAeqK,IAClC18B,EAAO3B,MAAM,6DAA8Dm+B,EAAa3nC,QACxF4nC,EAAcD,GACdG,GAAsB,MAEvB,CAACH,EAAcnK,EAAYqK,KAG9Bj4B,EAAAA,EAAAA,YAAU,KACRzE,EAAO3B,MAAM,sDAAoDiB,GACjEU,EAAO3B,MAAM,qDAAmDy+B,GAC5Dx9B,GAAwC,oBAAjBA,IACzBU,EAAO3B,MAAM,0EACbiB,EAAaw9B,EAAaC,MAE3B,CAACD,EAAax9B,EAAcy9B,IAG/B,MAAMC,GAAej9B,EAAAA,EAAAA,cAAY,KAC/B08B,EAAc,QACb,IAEH,OACE1vB,EAAAA,EAAAA,MAAA,OAAKzS,UAAU,2CAA0C0S,SAAA,EAEvDrI,EAAAA,EAAAA,KAACwP,GAAW,CACV9U,WAAYu9B,EACZt9B,aAAcw9B,EACd1oB,eAAgBie,EAChB/3B,UAAU,gBACV+Z,cAAe6B,IAIhBmc,IACC1tB,EAAAA,EAAAA,KAAC+zB,GAAiB,CAChBrG,WAAYA,EACZgC,YAAa2I,EACbngB,WAAYA,QAOtB,GAAehd,EAAAA,KAAWo8B,G,yFCxG1B,MAAMgB,EAA4B,CAChCC,YAAa,6BACbC,cAAe,QACfC,cAAe,CAAC,aAAc,YAAa,YAAa,aAAc,aACtEC,wBAAyB,EACzBC,eAAgB,CAAEhoC,MAAO,IAAK+M,OAAQ,MA2E3B6qB,EAAwB18B,UACnC,IACE,MAAM,KAAEsB,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,uBACLC,OAAO,KACPc,GAAG,YAAaN,GAChBM,GAAG,SAAS,GACZK,MAAM,QAAS,CAAEC,WAAW,IAC5BD,MAAM,aAAc,CAAEC,WAAW,IAEpC,GAAIvB,EACF,MAAMA,EAGR,IAAKqB,GAAwB,IAAhBA,EAAKP,OAChB,MAAO,GAmBT,OAf4BO,EAAK4E,KAAKi3B,IACpC,GAAIA,EAAS4P,WACX,IACE,MAAQzrC,MAAM,UAAEy0B,IAAgB71B,EAAAA,EAASw1B,QACtCv1B,KAAKssC,EAA0BC,aAC/B1W,aAAamH,EAAS4P,YAEzB,OAAA3mC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAY+2B,GAAQ,IAAElK,kBAAmB8C,GAC3C,CAAE,MAAOnT,GACP,OAAAxc,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAY+2B,GAAQ,IAAElK,kBAAmB,KAAM8K,SAAUnb,EAAIpiB,SAC/D,CAEF,OAAO28B,IAKX,CAAE,MAAOl9B,GAEP,MADAK,QAAQL,MAAM,4CAA0CA,GAClDA,CACR,GAQW+sC,EAA0BhtC,UACrC,IACE,MAAM,KAAEsB,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,uBACLqC,OAAO,CAAC,CACPikB,UAAWwmB,EAAaxmB,UACxBuW,eAAgBiQ,EAAajQ,gBAAkB,KAC/CG,SAAU8P,EAAa9P,SACvB+P,MAAOD,EAAaC,OAAS,EAC7B/rC,OAA8B,IAAvB8rC,EAAa9rC,MACpB+7B,WAAY+P,EAAa/P,YAAc,QAExC98B,SACAsC,SAEH,GAAIzC,EACF,MAAMA,EAGR,OAAOqB,CAET,CAAE,MAAOrB,GAEP,MADAK,QAAQL,MAAM,0CAAwCA,GAChDA,CACR,GASWktC,EAA0BntC,MAAOotC,EAAYH,KACxD,IACE,MAAM,KAAE3rC,EAAI,MAAErB,SAAgBC,EAAAA,EAC3BC,KAAK,uBACL2C,OAAO,CACNk6B,eAAgBiQ,EAAajQ,eAC7BG,SAAU8P,EAAa9P,SACvB+P,MAAOD,EAAaC,MACpB/rC,MAAO8rC,EAAa9rC,MACpB+7B,WAAY+P,EAAa/P,YAAc,KACvCmQ,YAAY,IAAI/Z,MAAOga,gBAExBpsC,GAAG,KAAMksC,GACThtC,SACAsC,SAEH,GAAIzC,EACF,MAAMA,EAGR,OAAOqB,CAET,CAAE,MAAOrB,GAEP,MADAK,QAAQL,MAAM,8CAA4CA,GACpDA,CACR,GAQWstC,EAA0BvtC,UACrC,IAEE,MAAQC,MAAOutC,SAAsBttC,EAAAA,EAClCC,KAAK,uBACLuM,SACAxL,GAAG,KAAMksC,GAEZ,GAAII,EACF,MAAMA,CAEV,CAAE,MAAOvtC,GAEP,MADAK,QAAQL,MAAM,4CAA0CA,GAClDA,CACR,E","sources":["services/legendasService.js","utils/openlayers/markerStyles.js","utils/mobileUtils.js","utils/openlayers/interactions.js","utils/openlayers/effects.js","utils/logger.js","components/OpenLayers/OpenLayersMarkers.js","utils/openlayers/layerStyles.js","utils/mapConfig.js","components/OpenLayers/OpenLayersTerrasIndigenas.js","components/OpenLayers/OpenLayersEstadoSP.js","components/OpenLayers/OpenLayersLayers.js","hooks/useMapControls.js","components/map/ResponsiveZoomControls.js","components/map/MapWrapper.jsx","components/OpenLayersMap.js","hooks/useGeoJSONCache.js","hooks/useResponsiveIcon.js","components/MapSelector.js","components/hooks/useDocumentosEscola.js","components/PainelInformacoes/components/InfoSection.js","components/PainelInformacoes/components/EscolaInfo/BasicInfo.js","components/PainelInformacoes/components/EscolaInfo/HistoriaEscolaContent.js","components/PainelInformacoes/components/EscolaInfo/HistoriaEscolaHeader.js","components/PainelInformacoes/components/EscolaInfo/HistoriaEscola.js","components/PainelInformacoes/components/BooleanValue.js","components/PainelInformacoes/components/EscolaInfo/Modalidades.js","components/PainelInformacoes/components/EscolaInfo/Infraestrutura.js","components/PainelInformacoes/components/EscolaInfo/GestaoProfessores.js","components/PainelInformacoes/components/EscolaInfo/ProjetosParcerias.js","components/ReusableImageZoom.js","components/shared/OptimizedImage.js","hooks/useImagePreloader.js","components/PainelInformacoes/components/ImagemHistoriadoProfessor.js","components/shared/Avatar.js","components/shared/AvatarThemes.js","components/PainelInformacoes/components/FotoProfessor.js","components/PainelInformacoes/components/EscolaInfo/HistoriadoProfessor.js","components/PainelInformacoes/components/ImagensdasEscolas.js","components/PainelInformacoes/components/EscolaInfo/index.js","components/PainelInformacoes/icons/HandFistIcon.js","components/PainelInformacoes/components/InfoItem.js","components/PainelInformacoes/TerraIndigenaInfo.js","components/ShareButton.js","components/PainelInformacoes/ShareSection.js","components/PainelDescricao.js","components/PainelInformacoes/IntroPanel.js","utils/textFormatting.js","components/PainelHeader.js","components/PainelInformacoes/components/EscolaHeaderImage.js","components/hooks/usePainelVisibility.js","components/PainelInformacoes/components/PainelContainer.js","components/hooks/usePainelDimensions.js","components/PainelInformacoes/components/DocumentViewer.js","components/PainelInformacoes/components/VideoPlayer.js","components/PainelInformacoes/index.js","components/hooks/useShare.js","components/hooks/useClickOutside.js","components/hooks/useDynamicURL.js","components/MapaEscolasIndigenas.js","services/historiaProfessorService.js"],"sourcesContent":["import { supabase } from '../supabaseClient';\n\n/**\n * Servio para gerenciar legendas de fotos\n */\n\n/**\n * Testar se a tabela legendas_fotos existe e est acessvel\n * @returns {Promise<boolean>} True se a tabela existe\n */\nexport const testLegendasTable = async () => {\n  try {\n    const { error } = await supabase\n      .from('legendas_fotos')\n      .select('count')\n      .limit(1);\n    \n    if (error) {\n      console.warn('Tabela legendas_fotos no encontrada ou sem permisso:', error.message);\n      return false;\n    }\n    \n    console.log('Tabela legendas_fotos acessvel');\n    return true;\n  } catch (error) {\n    console.warn('Erro ao testar tabela legendas_fotos:', error.message);\n    return false;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (todos os atributos opcionais)\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @param {Object} options - Opes de busca (todos opcionais)\n * @param {string} options.categoria - Categoria da imagem\n * @param {string} options.tipo_foto - Tipo da foto\n * @param {boolean} options.ativo - Se deve buscar apenas ativas\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrl = async (imageUrl, escolaId, options = {}) => {\n  try {\n    let query = supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId);\n\n    // Aplicar filtros opcionais\n    if (options.ativo !== false) { // Por padro, busca apenas ativas\n      query = query.eq('ativo', true);\n    }\n    \n    if (options.categoria) {\n      query = query.eq('categoria', options.categoria);\n    }\n    \n    if (options.tipo_foto) {\n      query = query.eq('tipo_foto', options.tipo_foto);\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: false });\n\n    if (error) {\n      console.warn('Erro ao buscar legenda:', error.message);\n      return null;\n    }\n\n    // Retorna a primeira legenda encontrada (mais recente)\n    return data && data.length > 0 ? data[0] : null;\n  } catch (error) {\n    console.warn('Erro ao buscar legenda:', error.message);\n    return null;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (busca flexvel com mltiplas estratgias)\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @param {Object} preferencias - Preferncias de busca (todos opcionais)\n * @param {string} preferencias.categoria - Categoria preferida\n * @param {string} preferencias.tipo_foto - Tipo de foto preferido\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrlFlexivel = async (imageUrl, escolaId, preferencias = {}) => {\n  try {\n    console.log(` Buscando legenda flexvel para: ${imageUrl} (escola: ${escolaId})`);\n    \n    // Estratgia 1: Busca com preferncias especficas\n    if (preferencias.categoria || preferencias.tipo_foto) {\n      console.log('   Tentativa 1: Busca com preferncias especficas');\n      const legenda = await getLegendaByImageUrl(imageUrl, escolaId, preferencias);\n      if (legenda) {\n        console.log('   Encontrada com preferncias especficas');\n        return legenda;\n      }\n    }\n\n    // Estratgia 2: Busca apenas por URL e escola (sem outros filtros)\n    console.log('   Tentativa 2: Busca apenas por URL e escola');\n    const { data: data2, error: error2 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('created_at', { ascending: false });\n\n    if (error2) {\n      console.warn('   Erro na busca por URL e escola:', error2.message);\n    } else if (data2 && data2.length > 0) {\n      console.log('   Encontrada por URL e escola');\n      return data2[0];\n    }\n\n    // Estratgia 3: Busca incluindo legendas inativas\n    console.log('   Tentativa 3: Busca incluindo legendas inativas');\n    const { data: data3, error: error3 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId)\n      .order('created_at', { ascending: false });\n\n    if (error3) {\n      console.warn('   Erro na busca incluindo inativas:', error3.message);\n    } else if (data3 && data3.length > 0) {\n      console.log('   Encontrada incluindo legendas inativas');\n      return data3[0];\n    }\n\n    // Estratgia 4: Busca por nome do arquivo (sem caminho completo)\n    const nomeArquivo = imageUrl.split('/').pop();\n    console.log(`   Tentativa 4: Busca por nome do arquivo: ${nomeArquivo}`);\n    const { data: data4, error: error4 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .ilike('imagem_url', `%${nomeArquivo}`)\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('created_at', { ascending: false });\n\n    if (error4) {\n      console.warn('   Erro na busca por nome do arquivo:', error4.message);\n    } else if (data4 && data4.length > 0) {\n      console.log('   Encontrada por nome do arquivo');\n      return data4[0];\n    }\n\n    console.log('   Nenhuma legenda encontrada com todas as estratgias');\n    return null;\n\n  } catch (error) {\n    console.warn('Erro ao buscar legenda flexvel:', error.message);\n    return null;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (sem filtro de categoria) - MANTIDA PARA COMPATIBILIDADE\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrlAnyCategory = async (imageUrl, escolaId) => {\n  return getLegendaByImageUrlFlexivel(imageUrl, escolaId);\n};\n\n/**\n * Adicionar nova legenda de foto\n * @param {Object} legendaData - Dados da legenda\n * @returns {Promise<Object>} Legenda criada\n */\nexport const addLegendaFoto = async (legendaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .insert([legendaData])\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Erro ao adicionar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar legenda de foto existente\n * @param {number} legendaId - ID da legenda\n * @param {Object} updateData - Dados para atualizar\n * @returns {Promise<Object>} Legenda atualizada\n */\nexport const updateLegendaFoto = async (legendaId, updateData) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .update(updateData)\n      .eq('id', legendaId)\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Erro ao atualizar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar legenda de foto\n * @param {number} legendaId - ID da legenda\n * @returns {Promise<boolean>} True se deletado com sucesso\n */\nexport const deleteLegendaFoto = async (legendaId) => {\n  try {\n    const { error } = await supabase\n      .from('legendas_fotos')\n      .delete()\n      .eq('id', legendaId);\n\n    if (error) {\n      throw error;\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Erro ao deletar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar todas as legendas de uma escola\n * @param {number} escolaId - ID da escola\n * @param {string} categoria - Categoria das imagens (opcional)\n * @returns {Promise<Array>} Lista de legendas\n */\nexport const getLegendasByEscola = async (escolaId, categoria = null) => {\n  try {\n    let query = supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('escola_id', escolaId);\n\n    if (categoria) {\n      query = query.eq('categoria', categoria);\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: false });\n\n    if (error) {\n      throw error;\n    }\n\n    return data || [];\n  } catch (error) {\n    console.error('Erro ao buscar legendas da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar ttulo personalizado de vdeo por URL\n * @param {string} videoUrl - URL do vdeo\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Object|null>} Ttulo encontrado ou null\n */\nexport const getTituloByVideoUrl = async (videoUrl, escolaId) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', videoUrl)\n      .eq('escola_id', escolaId)\n      .eq('categoria', 'video')\n      .single();\n\n    if (error) {\n      // Se no encontrar, retorna null (no  erro)\n      if (error.code === 'PGRST116') {\n        return null;\n      }\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.warn('Erro ao buscar ttulo do vdeo:', error.message);\n    return null;\n  }\n};\n\nconst LegendasService = {\n  testLegendasTable,\n  getLegendaByImageUrl,\n  getLegendaByImageUrlFlexivel,\n  getLegendaByImageUrlAnyCategory,\n  addLegendaFoto,\n  updateLegendaFoto,\n  deleteLegendaFoto,\n  getLegendasByEscola,\n  getTituloByVideoUrl\n};\n\nexport default LegendasService;\n","import { Style, Fill, Stroke, Text, Icon } from 'ol/style';\nimport { Point } from 'ol/geom';\n\n// Caminho para o marcador SVG\nconst MARKER_SVG_PATH = `${process.env.PUBLIC_URL || ''}/map-marker.svg`;\n\n// Configuraes de cores dos marcadores\nexport const MARKER_COLORS = {\n  individual: '#3B82F6',\n  individualBorder: '#1E40AF',\n  cluster: {\n    small: '#60A5FA',\n    medium: '#3B82F6',\n    large: '#2563EB',\n    xlarge: '#1E40AF'\n  },\n  nearbyPair: '#FF6B6B'\n};\n\n// Configuraes de tamanhos dos clusters\nexport const CLUSTER_SIZES = {\n  small: { min: 2, max: 10, size: 50 },\n  medium: { min: 11, max: 20, size: 52 },\n  large: { min: 21, max: 50, size: 56 },\n  xlarge: { min: 51, max: 100, size: 64 },\n  xxlarge: { min: 101, size: 72 }\n};\n\n// Configuraes de fontes para clusters\nexport const CLUSTER_FONTS = {\n  small: 'bold 14px Arial',\n  medium: 'bold 15px Arial',\n  large: 'bold 16px Arial',\n  xlarge: 'bold 18px Arial'\n};\n\n/**\n * Cria estilo para marcador individual\n * @param {Object} feature - Feature do OpenLayers\n * @param {boolean} showNames - Se deve mostrar nomes das escolas\n * @returns {Style} Estilo do marcador\n */\nexport const createMarkerStyle = (feature, showNames = false) => {\n  const markerData = feature.get('markerData') || feature.get('schoolData'); // Suporta ambos\n  const isNearbyPair = feature.get('isNearbyPair');\n  \n  if (!markerData) return null;\n\n  // const baseColor = isNearbyPair ? MARKER_COLORS.nearbyPair : MARKER_COLORS.individual; // Removido - no utilizado\n  // const borderColor = isNearbyPair ? '#DC2626' : MARKER_COLORS.individualBorder; // Removido - no utilizado\n\n  // Estilo base do marcador (cone SVG)\n  const markerStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: isNearbyPair ? 1.2 : 1.0,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  // Se deve mostrar nomes, adicionar texto\n  if (showNames && markerData.titulo) {\n    const textStyle = new Style({\n      text: new Text({\n        text: markerData.titulo,\n        font: '12px Arial',\n        fill: new Fill({\n          color: '#1F2937'\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: -15,\n        textAlign: 'center'\n      }),\n      geometry: feature.getGeometry()\n    });\n    \n    return [markerStyle, textStyle];\n  }\n\n  return markerStyle;\n};\n\n/**\n * Cria estilo para cluster de marcadores\n * @param {Object} feature - Feature do cluster\n * @param {Function} markerStyleFunction - Funo para estilizar marcadores individuais\n * @returns {Style} Estilo do cluster\n */\nexport const createClusterStyle = (feature, markerStyleFunction) => {\n  const features = feature.get('features');\n  \n  if (!features || features.length === 0) {\n    return markerStyleFunction(feature);\n  }\n\n  // Se for apenas um marcador, usar estilo de marcador individual\n  if (features.length === 1) {\n    return markerStyleFunction(features[0]);\n  }\n\n  // Determinar tamanho e cor do cluster baseado na quantidade\n  let clusterSize; // clusterColor removido - no utilizado\n  const count = features.length;\n\n  if (count <= CLUSTER_SIZES.small.max) {\n    clusterSize = CLUSTER_SIZES.small.size;\n    // clusterColor = MARKER_COLORS.cluster.small; // Removido - no utilizado\n  } else if (count <= CLUSTER_SIZES.medium.max) {\n    clusterSize = CLUSTER_SIZES.medium.size;\n    // clusterColor = MARKER_COLORS.cluster.medium; // Removido - no utilizado\n  } else if (count <= CLUSTER_SIZES.large.max) {\n    clusterSize = CLUSTER_SIZES.large.size;\n    // clusterColor = MARKER_COLORS.cluster.large; // Removido - no utilizado\n  } else if (count <= CLUSTER_SIZES.xlarge.max) {\n    clusterSize = CLUSTER_SIZES.xlarge.size;\n    // clusterColor = MARKER_COLORS.cluster.xlarge; // Removido - no utilizado\n  } else {\n    clusterSize = CLUSTER_SIZES.xxlarge.size;\n    // clusterColor = MARKER_COLORS.cluster.xlarge; // Removido - no utilizado\n  }\n\n  // Determinar fonte baseada no tamanho\n  let font;\n  if (count <= CLUSTER_SIZES.small.max) {\n    font = CLUSTER_FONTS.small;\n  } else if (count <= CLUSTER_SIZES.medium.max) {\n    font = CLUSTER_FONTS.medium;\n  } else if (count <= CLUSTER_SIZES.large.max) {\n    font = CLUSTER_FONTS.large;\n  } else {\n    font = CLUSTER_FONTS.xlarge;\n  }\n\n  return new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: Math.max(0.8, clusterSize / 80),\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    text: new Text({\n      text: count.toString(),\n      font: font,\n      fill: new Fill({\n        color: '#FFFFFF'\n      }),\n      stroke: new Stroke({\n        color: '#1F2937',\n        width: 1\n      })\n    })\n  });\n};\n\n/**\n * Cria estilo para marcador com indicador de par prximo\n * @param {Object} feature - Feature do marcador\n * @returns {Style} Estilo do marcador com indicador\n */\nexport const createNearbyPairStyle = (feature) => {\n  const baseStyle = createMarkerStyle(feature, false);\n  \n  if (!baseStyle || !Array.isArray(baseStyle)) {\n    return baseStyle;\n  }\n\n  // Adicionar indicador de par prximo\n  const indicatorStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 0.5,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  // Posicionar indicador no canto superior direito\n  const geometry = feature.getGeometry();\n  const coordinates = geometry.getCoordinates();\n  const offsetX = 0.0001; // Ajustar conforme necessrio\n  const offsetY = 0.0001;\n  \n  const indicatorGeometry = new Point([\n    coordinates[0] + offsetX,\n    coordinates[1] + offsetY\n  ]);\n  \n  indicatorStyle.setGeometry(indicatorGeometry);\n  \n  return [...baseStyle, indicatorStyle];\n};\n\n/**\n * Cria estilo para marcador com tooltip\n * @param {Object} feature - Feature do marcador\n * @param {string} tooltipText - Texto do tooltip\n * @returns {Style} Estilo do marcador com tooltip\n */\nexport const createMarkerWithTooltipStyle = (feature, tooltipText) => {\n  const baseStyle = createMarkerStyle(feature, false);\n  \n  if (!baseStyle) return null;\n\n  // Adicionar tooltip como texto\n  const tooltipStyle = new Style({\n    text: new Text({\n      text: tooltipText,\n      font: '11px Arial',\n      fill: new Fill({\n        color: '#1F2937'\n      }),\n      stroke: new Stroke({\n        color: '#FFFFFF',\n        width: 2\n      }),\n      offsetY: -25,\n      textAlign: 'center',\n      backgroundFill: new Fill({\n        color: 'rgba(255, 255, 255, 0.9)'\n      }),\n      backgroundStroke: new Stroke({\n        color: '#E5E7EB',\n        width: 1\n      }),\n      padding: [4, 8]\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, tooltipStyle] : [baseStyle, tooltipStyle];\n};\n\n/**\n * Aplica estilo de hover ao marcador\n * @param {Object} feature - Feature do marcador\n * @param {Style} baseStyle - Estilo base do marcador\n * @returns {Style} Estilo com efeito hover\n */\nexport const applyHoverStyle = (feature, baseStyle) => {\n  if (!baseStyle) return null;\n\n  const hoverStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 1.3,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, hoverStyle] : [baseStyle, hoverStyle];\n};\n\n/**\n * Cria estilo para marcador selecionado\n * @param {Object} feature - Feature do marcador\n * @param {Style} baseStyle - Estilo base do marcador\n * @returns {Style} Estilo com efeito de seleo\n */\nexport const applySelectionStyle = (feature, baseStyle) => {\n  if (!baseStyle) return null;\n\n  const selectionStyle = new Style({\n    image: new Icon({\n      src: MARKER_SVG_PATH,\n      scale: 1.5,\n      anchor: [0.5, 0.5],\n      anchorXUnits: 'fraction',\n      anchorYUnits: 'fraction'\n    }),\n    geometry: feature.getGeometry()\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, selectionStyle] : [baseStyle, selectionStyle];\n};\n","// Utility functions for mobile detection and interaction\n\n/**\n * Detecta se  um dispositivo mobile baseado em mltiplos critrios\n */\nexport const isMobile = () => {\n  // Verificar largura da tela\n  const isMobileWidth = window.innerWidth <= 768;\n  \n  // Verificar se tem capacidades de toque\n  const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n  \n  // Verificar se  um dispositivo mvel baseado no user agent\n  const isMobileUserAgent = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  \n  // Verificar orientao (mobile geralmente tem orientao varivel)\n  const isMobileOrientation = window.orientation !== undefined;\n  \n  // Retorna true se pelo menos 2 critrios forem verdadeiros\n  const criteria = [isMobileWidth, hasTouch, isMobileUserAgent, isMobileOrientation];\n  const mobileCriteria = criteria.filter(Boolean).length;\n  \n  console.log('[mobileUtils] Critrios de mobile:', {\n    isMobileWidth,\n    hasTouch,\n    isMobileUserAgent,\n    isMobileOrientation,\n    mobileCriteria,\n    userAgent: navigator.userAgent\n  });\n  \n  return mobileCriteria >= 2;\n};\n\n/**\n * Detecta se  mobile em orientao paisagem\n */\nexport const isMobileLandscape = () => {\n  return isMobile() && window.innerWidth > window.innerHeight;\n};\n\n/**\n * Detecta especificamente se o dispositivo tem capacidades de toque\n */\nexport const hasTouchCapabilities = () => {\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n};\n\n/**\n * Detecta se o evento atual  um evento de toque\n */\nexport const isTouchEvent = (event) => {\n  return event.type && event.type.startsWith('touch');\n}; ","import { isMobile, hasTouchCapabilities } from '../mobileUtils';\n\n/**\n * Classe para gerenciar interaes e eventos do OpenLayers\n */\nexport class OpenLayersInteractions {\n  constructor(map, options = {}) {\n    this.map = map;\n    this.options = {\n      enableHover: options.enableHover !== false,\n      enableClick: options.enableClick !== false,\n      enableDoubleClick: options.enableDoubleClick !== false,\n      enableTouch: options.enableTouch !== false,\n      hoverDelay: options.hoverDelay || 200,\n      clickDelay: options.clickDelay || 300,\n      ...options\n    };\n\n    this.eventHandlers = new Map();\n    this.hoveredFeature = null;\n    this.clickedFeature = null;\n    this.clickTimeout = null;\n    this.hoverTimeout = null;\n    this.tooltipElement = null;\n    console.log('[OpenLayersInteractions] Interaes inicializadas');\n\n    this.initializeInteractions();\n  }\n\n  /**\n   * Verifica se  dispositivo mobile (dinmico e robusto)\n   */\n  isMobile() {\n    const mobile = isMobile();\n    const hasTouch = hasTouchCapabilities();\n    \n    console.log('[OpenLayersInteractions] Deteco de mobile:', {\n      mobile,\n      hasTouch,\n      windowWidth: window.innerWidth,\n      userAgent: navigator.userAgent\n    });\n    \n    return mobile || hasTouch;\n  }\n\n  /**\n   * Inicializa todas as interaes\n   */\n  initializeInteractions() {\n    if (this.options.enableHover) {\n      this.setupHoverInteraction();\n    }\n\n    if (this.options.enableClick) {\n      this.setupClickInteraction();\n    }\n\n    if (this.options.enableDoubleClick) {\n      this.setupDoubleClickInteraction();\n    }\n\n    if (this.options.enableTouch && this.isMobile()) {\n      this.setupTouchInteraction();\n    }\n  }\n\n  /**\n   * Configura interao de hover\n   */\n  setupHoverInteraction() {\n    this.map.on('pointermove', (event) => {\n      this.handlePointerMove(event);\n    });\n\n    this.map.on('pointerleave', () => {\n      this.handlePointerLeave();\n    });\n  }\n\n  /**\n   * Configura interao de clique\n   */\n  setupClickInteraction() {\n    this.map.on('click', (event) => {\n      this.handleClick(event);\n    });\n  }\n\n  /**\n   * Configura interao de duplo clique\n   */\n  setupDoubleClickInteraction() {\n    this.map.on('dblclick', (event) => {\n      this.handleDoubleClick(event);\n    });\n  }\n\n  /**\n   * Configura interao touch para mobile\n   */\n  setupTouchInteraction() {\n    // Em mobile, usar o sistema de clique com tooltip\n    // O handleClick j trata mobile vs desktop\n    console.log('[OpenLayersInteractions] Touch interaction configurada para mobile');\n  }\n\n  /**\n   * Handler para movimento do ponteiro (hover)\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handlePointerMove(event) {\n    if (this.isMobile()) return; // Desabilitar hover em mobile\n\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    // Debug: verificar se est detectando features\n    if (feature && !this.hoveredFeature) {\n      console.log('[OpenLayersInteractions] Feature detectado:', {\n        type: feature.get('type'),\n        schoolData: feature.get('schoolData'),\n        terraIndigenaInfo: feature.get('terraIndigenaInfo')\n      });\n    }\n    \n    if (feature !== this.hoveredFeature) {\n      // Limpar hover anterior\n      if (this.hoveredFeature) {\n        this.clearHover();\n      }\n\n      // Aplicar novo hover\n      if (feature) {\n        this.applyHover(feature, event);\n      }\n    }\n  }\n\n  /**\n   * Handler para sada do ponteiro\n   */\n  handlePointerLeave() {\n    this.clearHover();\n  }\n\n  /**\n   * Handler para clique\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleClick(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Em mobile, primeiro clique mostra tooltip, segundo abre painel\n    if (this.isMobile()) {\n      this.handleMobileClick(feature, event);\n      return;\n    }\n\n    // Verificar se  o mesmo feature clicado anteriormente\n    if (this.clickedFeature === feature) {\n      // Segundo clique no mesmo feature\n      this.handleDoubleClick(event);\n      return;\n    }\n\n    // Primeiro clique\n    this.clickedFeature = feature;\n    \n    // Configurar timeout para resetar o clique\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    \n    this.clickTimeout = setTimeout(() => {\n      this.clickedFeature = null;\n    }, this.options.clickDelay);\n\n    // Executar handler de clique nico\n    this.executeClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para duplo clique\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleDoubleClick(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Limpar timeout de clique nico\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n      this.clickTimeout = null;\n    }\n\n    // Resetar feature clicado\n    this.clickedFeature = null;\n\n    // Executar handler de duplo clique\n    this.executeDoubleClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para fim de toque (mobile)\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleTouchEnd(event) {\n    const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n    \n    if (!feature) return;\n\n    // Em mobile, toque nico executa ao de clique\n    this.executeClickHandler(feature, event);\n  }\n\n  /**\n   * Handler para clique em mobile (primeiro mostra tooltip, segundo abre painel)\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  handleMobileClick(feature, event) {\n    // Verificar se  o mesmo feature clicado anteriormente\n    if (this.clickedFeature === feature) {\n      // Segundo clique: abrir painel\n      console.log('[OpenLayersInteractions] Segundo clique em mobile - abrindo painel');\n      this.forceHideTooltip(); // Esconder tooltip e resetar estado\n      this.executeClickHandler(feature, event); // Abrir painel\n      return;\n    }\n\n    // Primeiro clique: mostrar tooltip\n    console.log('[OpenLayersInteractions] Primeiro clique em mobile - mostrando tooltip');\n    this.clickedFeature = feature;\n    \n    // Mostrar tooltip\n    if (this.options.showTooltip) {\n      this.showTooltip(feature, event);\n    }\n\n    // Configurar timeout para esconder tooltip e resetar clique\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    \n    this.clickTimeout = setTimeout(() => {\n      console.log('[OpenLayersInteractions] Timeout mobile - escondendo tooltip e resetando');\n      this.forceHideTooltip();\n    }, 3000); // 3 segundos de timeout\n\n    // Executar handler de hover para aplicar estilo visual\n    this.executeHoverHandler(feature, event);\n  }\n\n  /**\n   * Aplica efeito de hover a um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @param {Object} event - Evento do OpenLayers\n   */\n  applyHover(feature, event) {\n    this.hoveredFeature = feature;\n    \n    // Aplicar estilo de hover\n    this.applyHoverStyle(feature);\n    \n    // Mostrar tooltip se configurado (apenas em desktop)\n    if (this.options.showTooltip && !this.isMobile()) {\n      this.showTooltip(feature, event);\n    }\n\n    // Executar handler de hover\n    this.executeHoverHandler(feature, event);\n  }\n\n  /**\n   * Remove efeito de hover\n   */\n  clearHover() {\n    if (this.hoveredFeature) {\n      // Remover estilo de hover\n      this.clearHoverStyle(this.hoveredFeature);\n      \n      // Em mobile, no esconder tooltip automaticamente\n      // O tooltip  controlado pelo sistema de clique\n      if (!this.isMobile()) {\n        this.hideTooltip();\n      }\n      \n      // Executar handler de hover out\n      this.executeHoverOutHandler(this.hoveredFeature);\n      \n      this.hoveredFeature = null;\n    }\n  }\n\n  /**\n   * Aplica estilo de hover a um feature\n   * @param {Object} feature - Feature do OpenLayers\n   */\n  applyHoverStyle(feature) {\n    // Implementar lgica de estilo de hover\n    // Esta funo deve ser sobrescrita ou configurada\n    if (this.options.hoverStyleFunction) {\n      this.options.hoverStyleFunction(feature, true);\n    }\n  }\n\n  /**\n   * Remove estilo de hover de um feature\n   * @param {Object} feature - Feature do OpenLayers\n   */\n  clearHoverStyle(feature) {\n    // Implementar lgica de remoo de estilo de hover\n    if (this.options.hoverStyleFunction) {\n      this.options.hoverStyleFunction(feature, false);\n    }\n  }\n\n  /**\n   * Mostra tooltip para um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @param {Object} event - Evento do OpenLayers\n   */\n  showTooltip(feature, event) {\n    if (this.tooltipElement) {\n      this.hideTooltip();\n    }\n\n    const tooltipContent = this.getTooltipContent(feature);\n    console.log('[OpenLayersInteractions] Contedo do tooltip:', tooltipContent);\n    \n    if (!tooltipContent) {\n      console.log('[OpenLayersInteractions] Sem contedo para tooltip');\n      return;\n    }\n\n    this.tooltipElement = this.createTooltipElement(tooltipContent, event);\n    this.map.getTargetElement().appendChild(this.tooltipElement);\n    console.log('[OpenLayersInteractions] Tooltip criado e adicionado ao DOM');\n  }\n\n  /**\n   * Esconde tooltip\n   */\n  hideTooltip() {\n    if (this.tooltipElement) {\n      this.tooltipElement.remove();\n      this.tooltipElement = null;\n      console.log('[OpenLayersInteractions] Tooltip escondido');\n    }\n  }\n\n  /**\n   * Fora limpeza do tooltip (til para mobile)\n   */\n  forceHideTooltip() {\n    this.hideTooltip();\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n      this.clickTimeout = null;\n    }\n    this.clickedFeature = null;\n    console.log('[OpenLayersInteractions] Tooltip foradamente escondido e estado resetado');\n  }\n\n  /**\n   * Cria elemento de tooltip\n   * @param {string} content - Contedo do tooltip\n   * @param {Object} event - Evento do OpenLayers\n   * @returns {HTMLElement} Elemento do tooltip\n   */\n  createTooltipElement(content, event) {\n    const element = document.createElement('div');\n    element.className = 'ol-tooltip';\n    \n    // Detectar se  terra indgena baseado no contedo\n    const isTerraIndigena = content.includes('Terra Indgena');\n    \n    // Em mobile, tornar o nome clicvel\n    if (this.isMobile()) {\n      // Criar tooltip clicvel para mobile\n      const clickableContent = `<span class=\"tooltip-clickable\">${content}</span>`;\n      element.innerHTML = clickableContent;\n      \n      // Configurar estilos para mobile\n      const tooltipStyles = isTerraIndigena ? {\n        backgroundColor: '#fef2f2', // Fundo vermelho claro\n        borderColor: 'rgba(239, 68, 68, 0.3)' // Borda vermelha\n      } : {\n        backgroundColor: '#bbf7d0', // Fundo verde\n        borderColor: 'rgba(34, 197, 94, 0.3)' // Borda verde\n      };\n      \n      Object.assign(element.style, {\n        position: 'absolute',\n        padding: '8px 12px',\n        borderRadius: '8px',\n        fontSize: '14px',\n        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n        fontWeight: '700',\n        color: '#000000',\n        pointerEvents: 'auto', // IMPORTANTE: Permitir eventos de clique no mobile\n        zIndex: '1000',\n        maxWidth: '250px',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n        border: `2px solid ${tooltipStyles.borderColor}`,\n        cursor: 'default',\n        ...tooltipStyles\n      });\n      \n      // Configurar o span clicvel\n      const clickableSpan = element.querySelector('.tooltip-clickable');\n      if (clickableSpan) {\n        Object.assign(clickableSpan.style, {\n          cursor: 'pointer',\n          textDecoration: 'underline',\n          textDecorationColor: '#3B82F6',\n          textDecorationThickness: '2px',\n          transition: 'all 0.2s ease',\n          display: 'inline-block',\n          padding: '2px 4px',\n          borderRadius: '4px',\n          fontWeight: '800'\n        });\n        \n        // Adicionar evento de clique para abrir o painel\n        clickableSpan.addEventListener('click', () => {\n          console.log('[OpenLayersInteractions] Nome clicado no tooltip mobile');\n          // Emitir evento para abrir o painel\n          const feature = this.map.forEachFeatureAtPixel(event.pixel, (feature) => feature);\n          if (feature) {\n            this.executeClickHandler(feature, event);\n          }\n        });\n        \n        // Adicionar efeitos de hover\n        clickableSpan.addEventListener('mouseenter', () => {\n          clickableSpan.style.backgroundColor = 'rgba(59, 130, 246, 0.1)';\n          clickableSpan.style.textDecorationColor = '#1D4ED8';\n          clickableSpan.style.transform = 'scale(1.05)';\n        });\n        \n        clickableSpan.addEventListener('mouseleave', () => {\n          clickableSpan.style.backgroundColor = 'transparent';\n          clickableSpan.style.textDecorationColor = '#3B82F6';\n          clickableSpan.style.transform = 'scale(1)';\n        });\n      }\n    } else {\n      // Desktop: tooltip normal (no clicvel)\n      element.innerHTML = content;\n      \n      // Estilos do tooltip para desktop\n      const tooltipStyles = isTerraIndigena ? {\n        backgroundColor: '#fef2f2' // Fundo vermelho claro\n      } : {\n        backgroundColor: '#bbf7d0' // Fundo verde\n      };\n      \n      Object.assign(element.style, {\n        position: 'absolute',\n        padding: '6px 10px',\n        borderRadius: '6px',\n        fontSize: '12px',\n        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n        fontWeight: '700',\n        color: '#000000',\n        pointerEvents: 'none',\n        zIndex: '1000',\n        maxWidth: '200px',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n        ...tooltipStyles\n      });\n    }\n\n    // Posicionar tooltip\n    const coordinate = event.coordinate;\n    const pixel = this.map.getPixelFromCoordinate(coordinate);\n    \n    element.style.left = (pixel[0] + 10) + 'px';\n    element.style.top = (pixel[1] - 10) + 'px';\n\n    return element;\n  }\n\n  /**\n   * Obtm contedo do tooltip para um feature\n   * @param {Object} feature - Feature do OpenLayers\n   * @returns {string} Contedo do tooltip\n   */\n  getTooltipContent(feature) {\n    console.log('[OpenLayersInteractions] Obtendo contedo do tooltip para feature:', {\n      type: feature.get('type'),\n      schoolData: feature.get('schoolData'),\n      terraIndigenaInfo: feature.get('terraIndigenaInfo')\n    });\n\n    // Implementar lgica para obter contedo do tooltip\n    // Esta funo deve ser sobrescrita ou configurada\n    if (this.options.tooltipContentFunction) {\n      const content = this.options.tooltipContentFunction(feature);\n      console.log('[OpenLayersInteractions] Contedo do tooltip (funo customizada):', content);\n      return content;\n    }\n\n    // Contedo padro baseado no tipo de feature\n    const schoolData = feature.get('schoolData');\n    if (schoolData) {\n      // FORAR apenas o ttulo da escola, SEM municpio ou outras informaes\n      const titulo = schoolData.titulo || 'Escola Indgena';\n      console.log('[OpenLayersInteractions] Ttulo extrado (padro):', titulo);\n      console.log('[OpenLayersInteractions] Contedo do tooltip (padro escola - FORADO apenas ttulo):', titulo);\n      return titulo; // Retorna APENAS o ttulo\n    }\n\n    const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n    if (terraIndigenaInfo) {\n      const content = `Terra Indgena ${terraIndigenaInfo.titulo || 'Indgena'}`;\n      console.log('[OpenLayersInteractions] Contedo do tooltip (padro terra indgena):', content);\n      return content;\n    }\n\n    console.log('[OpenLayersInteractions] Nenhum contedo encontrado para tooltip');\n    return null;\n  }\n\n  /**\n   * Executa handler de clique\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeClickHandler(feature, event) {\n    const handler = this.eventHandlers.get('click');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de duplo clique\n   * @param {Object} feature - Feature clicado\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeDoubleClickHandler(feature, event) {\n    const handler = this.eventHandlers.get('doubleClick');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de hover\n   * @param {Object} feature - Feature em hover\n   * @param {Object} event - Evento do OpenLayers\n   */\n  executeHoverHandler(feature, event) {\n    const handler = this.eventHandlers.get('hover');\n    if (handler && typeof handler === 'function') {\n      handler(feature, event);\n    }\n  }\n\n  /**\n   * Executa handler de hover out\n   * @param {Object} feature - Feature que saiu do hover\n   */\n  executeHoverOutHandler(feature) {\n    const handler = this.eventHandlers.get('hoverOut');\n    if (handler && typeof handler === 'function') {\n      handler(feature);\n    }\n  }\n\n  /**\n   * Registra handler para um tipo de evento\n   * @param {string} eventType - Tipo do evento\n   * @param {Function} handler - Funo handler\n   */\n  on(eventType, handler) {\n    this.eventHandlers.set(eventType, handler);\n  }\n\n  /**\n   * Remove handler para um tipo de evento\n   * @param {string} eventType - Tipo do evento\n   */\n  off(eventType) {\n    this.eventHandlers.delete(eventType);\n  }\n\n  /**\n   * Remove todos os handlers\n   */\n  clearHandlers() {\n    this.eventHandlers.clear();\n  }\n\n  /**\n   * Atualiza opes de interao\n   * @param {Object} newOptions - Novas opes\n   */\n  updateOptions(newOptions) {\n    this.options = { ...this.options, ...newOptions };\n    \n    // Reconfigurar interaes se necessrio\n    if (newOptions.enableHover !== undefined) {\n      // Implementar lgica para habilitar/desabilitar hover\n    }\n    \n    if (newOptions.enableClick !== undefined) {\n      // Implementar lgica para habilitar/desabilitar clique\n    }\n  }\n\n  /**\n   * Limpa todas as interaes e handlers\n   */\n  destroy() {\n    // Limpar timeouts\n    if (this.clickTimeout) {\n      clearTimeout(this.clickTimeout);\n    }\n    if (this.hoverTimeout) {\n      clearTimeout(this.hoverTimeout);\n    }\n\n    // Esconder tooltip\n    this.hideTooltip();\n\n    // Limpar hover\n    this.clearHover();\n\n    // Limpar handlers\n    this.clearHandlers();\n\n    // Remover event listeners do mapa\n    // Nota: OpenLayers no tem mtodo un() para remover listeners especficos\n    // Seria necessrio recriar o mapa ou implementar controle manual\n  }\n}\n\n/**\n * Funo utilitria para criar interaes padro\n * @param {Object} map - Mapa OpenLayers\n * @param {Object} options - Opes de configurao\n * @returns {OpenLayersInteractions} Instncia de interaes\n */\nexport function createDefaultInteractions(map, options = {}) {\n  const defaultOptions = {\n    enableHover: true,\n    enableClick: true,\n    enableDoubleClick: true,\n    enableTouch: true,\n    showTooltip: true,\n    hoverDelay: 200,\n    clickDelay: 300\n  };\n\n  return new OpenLayersInteractions(map, { ...defaultOptions, ...options });\n}\n\n/**\n * Funo utilitria para configurar interaes especficas para marcadores\n * @param {Object} map - Mapa OpenLayers\n * @param {Function} onMarkerClick - Handler para clique em marcador (opcional)\n * @param {Function} onMarkerHover - Handler para hover em marcador\n * @returns {OpenLayersInteractions} Instncia de interaes configurada\n */\nexport function createMarkerInteractions(map, onMarkerClick, onMarkerHover) {\n  console.log('[createMarkerInteractions] Criando interaes para marcadores...');\n  \n  const interactions = createDefaultInteractions(map, {\n    showTooltip: true,\n    tooltipContentFunction: (feature) => {\n      console.log('[createMarkerInteractions] Funo de contedo do tooltip chamada para:', feature);\n      const schoolData = feature.get('schoolData');\n      if (schoolData) {\n        // FORAR apenas o ttulo da escola, SEM municpio\n        const titulo = schoolData.titulo || 'Escola Indgena';\n        console.log('[createMarkerInteractions] Ttulo extrado:', titulo);\n        console.log('[createMarkerInteractions] Contedo do tooltip gerado (FORADO apenas ttulo):', titulo);\n        return titulo; // Retorna APENAS o ttulo\n      }\n      console.log('[createMarkerInteractions] Sem dados de escola para tooltip');\n      return null;\n    }\n  });\n\n  // Configurar handler de clique se fornecido\n  if (onMarkerClick) {\n    console.log('[createMarkerInteractions] Configurando handler de clique personalizado');\n    interactions.on('click', onMarkerClick);\n  }\n\n  if (onMarkerHover) {\n    interactions.on('hover', onMarkerHover);\n  }\n\n  console.log('[createMarkerInteractions] Interaes criadas com sucesso');\n  return interactions;\n}\n\n/**\n * Funo utilitria para configurar interaes especficas para camadas GeoJSON\n * @param {Object} map - Mapa OpenLayers\n * @param {Function} onFeatureClick - Handler para clique em feature\n * @param {Function} onFeatureHover - Handler para hover em feature\n * @returns {OpenLayersInteractions} Instncia de interaes configurada\n */\nexport function createGeoJSONInteractions(map, onFeatureClick, onFeatureHover) {\n  const interactions = createDefaultInteractions(map, {\n    showTooltip: true,\n    tooltipContentFunction: (feature) => {\n      const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n      if (terraIndigenaInfo) {\n        return `Terra Indgena ${terraIndigenaInfo.titulo || 'Indgena'}`;\n      }\n      return null;\n    }\n  });\n\n  if (onFeatureClick) {\n    interactions.on('click', onFeatureClick);\n  }\n\n  if (onFeatureHover) {\n    interactions.on('hover', onFeatureHover);\n  }\n\n  return interactions;\n}\n","import Overlay from 'ol/Overlay';\n\n/**\n * Mostra um pulso visual no mapa na coordenada clicada.\n * @param {import('ol/Map').default} map - Instncia do mapa OpenLayers\n * @param {number[]} coordinate - Coordenada no projection do mapa (geralmente EPSG:3857)\n * @param {object} options - Opes (radiusPx, durationMs)\n */\nexport function showClickPulse(map, coordinate, options = {}) {\n  if (!map || !coordinate) return;\n\n  const radiusPx = options.radiusPx ?? 18;\n  const durationMs = options.durationMs ?? 900;\n\n  const element = document.createElement('div');\n  element.className = 'ol-click-pulse';\n  element.style.width = `${radiusPx * 2}px`;\n  element.style.height = `${radiusPx * 2}px`;\n  element.style.marginLeft = `${-radiusPx}px`;\n  element.style.marginTop = `${-radiusPx}px`;\n\n  const overlay = new Overlay({\n    element,\n    positioning: 'center-center',\n    stopEvent: false,\n  });\n\n  map.addOverlay(overlay);\n  overlay.setPosition(coordinate);\n\n  // Remover aps animao\n  const cleanup = () => {\n    try {\n      map.removeOverlay(overlay);\n    } catch {}\n  };\n\n  element.addEventListener('animationend', cleanup, { once: true });\n  // Fallback por segurana\n  setTimeout(cleanup, durationMs + 100);\n}\n\n/**\n * Anima suavemente a view at a coordenada (flyTo).\n * Mantm o zoom atual por padro.\n * @param {import('ol/Map').default} map\n * @param {number[]} coordinate - Coordenada no projection do mapa (EPSG:3857)\n * @param {{ durationMs?: number, zoom?: number }} options\n */\nexport function flyTo(map, coordinate, options = {}) {\n  if (!map || !coordinate) return;\n  const durationMs = options.durationMs ?? 350;\n  const view = map.getView();\n  const animateParams = { center: coordinate, duration: durationMs };\n  if (typeof options.zoom === 'number') {\n    animateParams.zoom = options.zoom;\n  }\n  view.animate(animateParams);\n}\n\n/**\n * FlyTo que centraliza o ponto na rea visvel quando h um painel lateral.\n * Por padro, considera um painel  direita com seletor '.mj-panel'.\n */\nexport function flyToConsideringPanel(map, coordinate, options = {}) {\n  if (!map || !coordinate) return;\n  const durationMs = options.durationMs ?? 350;\n  const zoom = options.zoom;\n  const side = options.panelSide ?? 'right';\n  const panelSelector = options.panelSelector ?? '.mj-panel';\n  const fractionWithinVisible = typeof options.fractionWithinVisible === 'number' ? options.fractionWithinVisible : 0.25; // 25% = metade da primeira metade\n\n  const mapSize = map.getSize();\n  if (!mapSize) return flyTo(map, coordinate, { durationMs, zoom });\n\n  const [mapWidth, mapHeight] = mapSize;\n  let panelWidth = 0;\n  const panelEl = typeof document !== 'undefined' ? document.querySelector(panelSelector) : null;\n  if (panelEl) {\n    const rect = panelEl.getBoundingClientRect();\n    // Considerar apenas se o painel estiver visvel (largura relevante)\n    if (rect.width > 0 && rect.height > 0) {\n      panelWidth = Math.min(rect.width, mapWidth * 0.95);\n    }\n  }\n\n  // Se no h painel, usa flyTo normal\n  if (panelWidth <= 0) {\n    return flyTo(map, coordinate, { durationMs, zoom });\n  }\n\n  // Posio alvo do ponto dentro da rea visvel\n  const visibleWidth = Math.max(1, mapWidth - panelWidth);\n  const desiredX = side === 'right'\n    ? visibleWidth * fractionWithinVisible\n    : panelWidth + visibleWidth * fractionWithinVisible; // painel  esquerda\n\n  const pointPx = map.getPixelFromCoordinate(coordinate);\n  if (!pointPx) {\n    return flyTo(map, coordinate, { durationMs, zoom });\n  }\n\n  // Centro atual em pixel\n  const currentCenterPx = [mapWidth / 2, mapHeight / 2];\n  // Novo centro em pixel que posiciona o ponto em desiredX\n  const newCenterPx = [\n    pointPx[0] - desiredX + (mapWidth / 2),\n    currentCenterPx[1]\n  ];\n\n  const newCenterCoord = map.getCoordinateFromPixel(newCenterPx);\n  if (!newCenterCoord) {\n    return flyTo(map, coordinate, { durationMs, zoom });\n  }\n\n  const view = map.getView();\n  const animateParams = { center: newCenterCoord, duration: durationMs };\n  if (typeof zoom === 'number') animateParams.zoom = zoom;\n  view.animate(animateParams);\n}\n\n/**\n * FlyTo posicionando o ponto em uma frao fixa da largura do mapa (0..1).\n * Ex.: fractionX=0.25 posiciona o ponto a 25% da largura (metade da primeira metade).\n */\nexport function flyToAtFractionX(map, coordinate, options = {}) {\n  if (!map || !coordinate) return;\n  const durationMs = options.durationMs ?? 350;\n  const zoom = options.zoom;\n  const fractionX = typeof options.fractionX === 'number' ? options.fractionX : 0.25;\n  const fractionY = typeof options.fractionY === 'number' ? options.fractionY : 0.5; // centralizado no eixo Y\n\n  const mapSize = map.getSize();\n  if (!mapSize) return flyTo(map, coordinate, { durationMs, zoom });\n\n  const [mapWidth, mapHeight] = mapSize;\n  const clampedFx = Math.max(0, Math.min(1, fractionX));\n  const clampedFy = Math.max(0, Math.min(1, fractionY));\n  const desiredX = clampedFx * mapWidth;\n  const desiredY = clampedFy * mapHeight;\n\n  const pointPx = map.getPixelFromCoordinate(coordinate);\n  if (!pointPx) return flyTo(map, coordinate, { durationMs, zoom });\n\n  const newCenterPx = [\n    pointPx[0] - desiredX + (mapWidth / 2),\n    pointPx[1] - desiredY + (mapHeight / 2)\n  ];\n\n  const newCenterCoord = map.getCoordinateFromPixel(newCenterPx);\n  if (!newCenterCoord) return flyTo(map, coordinate, { durationMs, zoom });\n\n  const view = map.getView();\n  const animateParams = { center: newCenterCoord, duration: durationMs };\n  if (typeof zoom === 'number') animateParams.zoom = zoom;\n  view.animate(animateParams);\n}\n\n\n","/**\n * Utilitrio de logging para o projeto OPIN\n * \n * Fornece uma API consistente para logging que pode ser desabilitada em produo.\n * Substitui console.log direto por uma soluo mais controlada.\n * \n * @module utils/logger\n */\n\nconst isDevelopment = process.env.NODE_ENV === 'development';\n\n/**\n * Nveis de log disponveis\n */\nconst LogLevel = {\n  DEBUG: 0,\n  INFO: 1,\n  WARN: 2,\n  ERROR: 3,\n};\n\n/**\n * Configurao de logging\n * Pode ser alterada para controlar quais logs so exibidos\n */\nconst LOG_LEVEL = isDevelopment ? LogLevel.DEBUG : LogLevel.ERROR;\n\n/**\n * Logger principal do sistema\n * \n * @example\n * import logger from '../utils/logger';\n * \n * logger.debug('Informao de debug');\n * logger.info('Informao geral');\n * logger.warn('Aviso');\n * logger.error('Erro crtico');\n */\nexport const logger = {\n  /**\n   * Log de debug - apenas em desenvolvimento\n   * @param {...any} args - Argumentos a serem logados\n   */\n  debug: (...args) => {\n    if (LOG_LEVEL <= LogLevel.DEBUG) {\n      console.log('[DEBUG]', ...args);\n    }\n  },\n\n  /**\n   * Log de informao - apenas em desenvolvimento\n   * @param {...any} args - Argumentos a serem logados\n   */\n  info: (...args) => {\n    if (LOG_LEVEL <= LogLevel.INFO) {\n      console.info('[INFO]', ...args);\n    }\n  },\n\n  /**\n   * Log de aviso - sempre exibido (mas pode ser filtrado)\n   * @param {...any} args - Argumentos a serem logados\n   */\n  warn: (...args) => {\n    if (LOG_LEVEL <= LogLevel.WARN) {\n      console.warn('[WARN]', ...args);\n    }\n  },\n\n  /**\n   * Log de erro - sempre exibido\n   * @param {...any} args - Argumentos a serem logados\n   */\n  error: (...args) => {\n    if (LOG_LEVEL <= LogLevel.ERROR) {\n      console.error('[ERROR]', ...args);\n    }\n  },\n\n  /**\n   * Grupo de logs - til para organizar logs relacionados\n   * @param {string} label - Label do grupo\n   */\n  group: (label) => {\n    if (LOG_LEVEL <= LogLevel.DEBUG) {\n      console.group(label);\n    }\n  },\n\n  /**\n   * Fecha um grupo de logs\n   */\n  groupEnd: () => {\n    if (LOG_LEVEL <= LogLevel.DEBUG) {\n      console.groupEnd();\n    }\n  },\n};\n\nexport default logger;\n\n\n","import React, { useEffect, useRef, useCallback } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { Feature } from 'ol';\nimport { Point } from 'ol/geom';\nimport { fromLonLat } from 'ol/proj';\nimport { \n  createMarkerStyle, \n  applyHoverStyle\n} from '../../utils/openlayers/markerStyles';\nimport { createMarkerInteractions } from '../../utils/openlayers/interactions';\nimport { flyToAtFractionX, showClickPulse } from '../../utils/openlayers/effects';\nimport logger from '../../utils/logger';\n\n/**\n * Componente OpenLayersMarkers - Substitui completamente o Marcadores.js do Leaflet\n * IMPLEMENTAO SIMPLIFICADA: Mostra todos os marcadores individuais sem clustering\n */\nconst OpenLayersMarkers = ({ \n  dataPoints = [], \n  onPainelOpen,\n  showMarcadores = true,\n  showNomesEscolas = false,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle das camadas e fontes\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n  \n  // Estados para controle de interaes\n  const [, setHoveredMarker] = React.useState(null);\n  // const [selectedMarker, setSelectedMarker] = React.useState(null); // Removido - no utilizado\n\n  // Verificar se  mobile - REMOVIDO: no utilizado\n  // const isMobileDevice = useMemo(() => isMobile(), []);\n\n  /**\n   * Inicializa a camada de marcadores (SEM clustering)\n   */\n  const initializeMarkers = useCallback(() => {\n    if (!map) return;\n\n    logger.debug('[OpenLayersMarkers] Inicializando marcadores individuais...');\n\n    // Criar fonte vetorial para marcadores\n    vectorSourceRef.current = new VectorSource();\n    \n    // Criar camada vetorial para marcadores INDIVIDUAIS (sem clustering)\n    vectorLayerRef.current = new VectorLayer({\n      source: vectorSourceRef.current,\n      style: (feature) => createMarkerStyle(feature, showNomesEscolas),\n      zIndex: 100\n    });\n\n    // Adicionar camada ao mapa\n    map.addLayer(vectorLayerRef.current);\n\n    // Configurar interaes\n    setupInteractions();\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, showNomesEscolas]);\n\n  /**\n   * Configura as interaes dos marcadores\n   */\n  const setupInteractions = useCallback(() => {\n    if (!map || !vectorLayerRef.current) return;\n\n    logger.debug('[OpenLayersMarkers] Configurando interaes com tooltips...');\n\n    // Criar interaes especficas para marcadores com tooltips\n    const interactions = createMarkerInteractions(\n      map,\n      handleMarkerClick,\n      handleMarkerHover\n    );\n\n    // Configurar handlers especficos\n    interactions.on('click', handleMarkerClick);\n    interactions.on('hover', handleMarkerHover);\n    interactions.on('hoverOut', handleMarkerHoverOut);\n\n    logger.debug('[OpenLayersMarkers] Interaes configuradas e integradas com o mapa');\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  /**\n   * Handler para clique em marcador\n   */\n  const handleMarkerClick = useCallback((feature, event) => {\n    // Usar schoolData em vez de markerData para consistncia com o sistema de interaes\n    const schoolData = feature.get('schoolData');\n    if (schoolData && onPainelOpen) {\n      const coord = feature.getGeometry()?.getCoordinates();\n      if (map && coord) {\n        // Posicionar o ponto a 25% da largura do mapa (metade da primeira metade)\n        flyToAtFractionX(map, coord, { durationMs: 550, fractionX: 0.25 });\n        showClickPulse(map, coord);\n      }\n      logger.debug('[OpenLayersMarkers] Marcador clicado:', schoolData.titulo);\n      onPainelOpen(schoolData);\n    }\n  }, [onPainelOpen]);\n\n  /**\n   * Handler para hover em marcador\n   */\n  const handleMarkerHover = useCallback((feature, event) => {\n    // IMPORTANTE: No desabilitar hover em mobile\n    // O sistema de interaes precisa do hover para funcionar corretamente\n    // O hover  usado para mostrar tooltips e aplicar estilos visuais\n    \n    setHoveredMarker(feature);\n    \n    // Aplicar estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => {\n        if (f === feature) {\n          return applyHoverStyle(f, createMarkerStyle(f, showNomesEscolas));\n        }\n        return createMarkerStyle(f, showNomesEscolas);\n      });\n      vectorLayerRef.current.changed();\n    }\n  }, [showNomesEscolas]);\n\n  /**\n   * Handler para sada do hover\n   */\n  const handleMarkerHoverOut = useCallback(() => {\n    setHoveredMarker(null);\n    \n    // Remover estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => createMarkerStyle(f, showNomesEscolas));\n      vectorLayerRef.current.changed();\n    }\n  }, [showNomesEscolas]);\n\n  /**\n   * Atualiza marcadores quando dataPoints mudar\n   */\n  const updateMarkers = useCallback(() => {\n    if (!vectorSourceRef.current || !dataPoints) return;\n\n    logger.debug('[OpenLayersMarkers] Atualizando marcadores...', dataPoints.length, 'showMarcadores:', showMarcadores);\n\n    // Limpar marcadores existentes\n    vectorSourceRef.current.clear();\n    \n    // Se showMarcadores for false, no adicionar marcadores\n    if (!showMarcadores) {\n      logger.debug('[OpenLayersMarkers] Marcadores desabilitados, removendo todos');\n      return;\n    }\n    \n    // Filtrar pontos vlidos\n    const pontosValidos = dataPoints.filter(point => {\n      if (!point.latitude || !point.longitude) return false;\n      const lat = parseFloat(point.latitude);\n      const lng = parseFloat(point.longitude);\n      return !isNaN(lat) && !isNaN(lng) && \n             lat >= -90 && lat <= 90 && \n             lng >= -180 && lng <= 180;\n    });\n\n    logger.debug('[OpenLayersMarkers] Pontos vlidos:', pontosValidos.length);\n\n    // Adicionar novos marcadores INDIVIDUAIS\n    pontosValidos.forEach((point, index) => {\n      if (point.latitude && point.longitude) {\n        const feature = new Feature({\n          geometry: new Point(fromLonLat([point.longitude, point.latitude]))\n        });\n        \n        feature.set('markerData', point);\n        feature.set('schoolData', point); // Dados para tooltips\n        feature.set('markerId', `marker_${index}`);\n        feature.set('type', 'marker');\n        \n        vectorSourceRef.current.addFeature(feature);\n      }\n    });\n\n    logger.debug(`[OpenLayersMarkers] ${pontosValidos.length} marcadores individuais adicionados`);\n\n  }, [dataPoints, showMarcadores]);\n\n  /**\n   * Atualiza estilo dos marcadores quando showNomesEscolas mudar\n   */\n  const updateMarkerStyles = useCallback(() => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((feature) => createMarkerStyle(feature, showNomesEscolas));\n    vectorLayerRef.current.changed();\n  }, [showNomesEscolas]);\n\n  // Inicializar marcadores quando componente montar\n  useEffect(() => {\n    if (map) {\n      initializeMarkers();\n    }\n\n    return () => {\n      // Cleanup\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, initializeMarkers]);\n\n  // Atualizar marcadores quando dataPoints mudar\n  useEffect(() => {\n    updateMarkers();\n  }, [updateMarkers]);\n\n  // Atualizar estilos quando showNomesEscolas mudar\n  useEffect(() => {\n    updateMarkerStyles();\n  }, [updateMarkerStyles]);\n\n  // Sempre renderizar o componente para manter a camada ativa\n  return (\n    <div className={className}>\n      {/* Este componente no renderiza elementos visuais diretamente,\n          apenas gerencia as camadas do OpenLayers */}\n    </div>\n  );\n};\n\nexport default OpenLayersMarkers;\n","import { Style, Fill, Stroke, Text } from 'ol/style';\n\n// Configuraes de cores para camadas GeoJSON\nexport const LAYER_COLORS = {\n  terrasIndigenas: {\n    regularizada: {\n      fill: 'rgba(220, 20, 60, 0.3)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(220, 20, 60, 0.45)',\n        stroke: '#FF0000'\n      }\n    },\n    declarada: {\n      fill: 'rgba(139, 0, 0, 0.25)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(139, 0, 0, 0.4)',\n        stroke: '#FF0000'\n      }\n    }\n  },\n  estadoSP: {\n    fill: 'rgba(0, 0, 0, 0.3)',\n    stroke: '#000000',\n    hover: {\n      fill: 'rgba(0, 0, 0, 0.4)',\n      stroke: '#333333'\n    }\n  }\n};\n\n/**\n * Cria estilo para terras indgenas baseado no status\n * @param {Object} feature - Feature do GeoJSON\n * @param {boolean} isHovered - Se est em estado hover\n * @returns {Style} Estilo da terra indgena\n */\nexport const createTerrasIndigenasStyle = (feature, isHovered = false) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: LAYER_COLORS.terrasIndigenas.regularizada.fill\n      }),\n      stroke: new Stroke({\n        color: LAYER_COLORS.terrasIndigenas.regularizada.stroke,\n        width: 2\n      })\n    });\n  }\n\n  const isRegularizada = feature.properties.fase_ti === 'Regularizada';\n  const colorConfig = isRegularizada \n    ? LAYER_COLORS.terrasIndigenas.regularizada \n    : LAYER_COLORS.terrasIndigenas.declarada;\n\n  const colors = isHovered ? colorConfig.hover : colorConfig;\n\n  return new Style({\n    fill: new Fill({\n      color: colors.fill\n    }),\n    stroke: new Stroke({\n      color: colors.stroke,\n      width: isHovered ? 3 : 2,\n      lineDash: isHovered ? [] : [3, 3]\n    })\n  });\n};\n\n/**\n * Cria estilo para estado de So Paulo\n * @param {Object} feature - Feature do GeoJSON\n * @param {boolean} isHovered - Se est em estado hover\n * @returns {Style} Estilo do estado\n */\nexport const createEstadoSPStyle = (feature, isHovered = false) => {\n  const colors = isHovered ? LAYER_COLORS.estadoSP.hover : LAYER_COLORS.estadoSP;\n\n  return new Style({\n    fill: new Fill({\n      color: colors.fill\n    }),\n    stroke: new Stroke({\n      color: colors.stroke,\n      width: isHovered ? 2 : 1\n    })\n  });\n};\n\n/**\n * Cria estilo para feature com label\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} labelProperty - Propriedade para usar como label\n * @param {Object} styleOptions - Opes de estilo\n * @returns {Style} Estilo com label\n */\nexport const createLabeledFeatureStyle = (feature, labelProperty, styleOptions = {}) => {\n  const {\n    fillColor = 'rgba(0, 0, 0, 0.1)',\n    strokeColor = '#000000',\n    strokeWidth = 1,\n    labelColor = '#000000',\n    labelSize = '12px',\n    labelFont = 'Arial'\n  } = styleOptions;\n\n  const labelText = feature.properties?.[labelProperty] || '';\n\n  const styles = [\n    new Style({\n      fill: new Fill({\n        color: fillColor\n      }),\n      stroke: new Stroke({\n        color: strokeColor,\n        width: strokeWidth\n      })\n    })\n  ];\n\n  // Adicionar label se houver texto\n  if (labelText) {\n    styles.push(new Style({\n      text: new Text({\n        text: labelText,\n        font: `${labelSize} ${labelFont}`,\n        fill: new Fill({\n          color: labelColor\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: 0,\n        textAlign: 'center'\n      })\n    }));\n  }\n\n  return styles;\n};\n\n/**\n * Cria estilo para feature com tooltip\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} tooltipText - Texto do tooltip\n * @param {Object} styleOptions - Opes de estilo\n * @returns {Style} Estilo com tooltip\n */\nexport const createFeatureWithTooltipStyle = (feature, tooltipText, styleOptions = {}) => {\n  const {\n    fillColor = 'rgba(0, 0, 0, 0.1)',\n    strokeColor = '#000000',\n    strokeWidth = 1,\n    tooltipColor = '#1F2937',\n    tooltipBackground = 'rgba(255, 255, 255, 0.95)',\n    tooltipBorder = '#E5E7EB'\n  } = styleOptions;\n\n  const styles = [\n    new Style({\n      fill: new Fill({\n        color: fillColor\n      }),\n      stroke: new Stroke({\n        color: strokeColor,\n        width: strokeWidth\n      })\n    })\n  ];\n\n  // Adicionar tooltip como texto\n  if (tooltipText) {\n    styles.push(new Style({\n      text: new Text({\n        text: tooltipText,\n        font: '11px Arial',\n        fill: new Fill({\n          color: tooltipColor\n        }),\n        stroke: new Stroke({\n          color: '#FFFFFF',\n          width: 2\n        }),\n        offsetY: -15,\n        textAlign: 'center',\n        backgroundFill: new Fill({\n          color: tooltipBackground\n        }),\n        backgroundStroke: new Stroke({\n          color: tooltipBorder,\n          width: 1\n        }),\n        padding: [4, 8]\n      })\n    }));\n  }\n\n  return styles;\n};\n\n/**\n * Cria estilo para feature selecionada\n * @param {Object} feature - Feature do GeoJSON\n * @param {Style} baseStyle - Estilo base\n * @param {Object} selectionOptions - Opes de seleo\n * @returns {Style} Estilo com efeito de seleo\n */\nexport const applySelectionStyle = (feature, baseStyle, selectionOptions = {}) => {\n  const {\n    fillColor = 'rgba(59, 130, 246, 0.3)',\n    strokeColor = '#1E40AF',\n    strokeWidth = 3,\n    lineDash = [5, 5]\n  } = selectionOptions;\n\n  const selectionStyle = new Style({\n    fill: new Fill({\n      color: fillColor\n    }),\n    stroke: new Stroke({\n      color: strokeColor,\n      width: strokeWidth,\n      lineDash: lineDash\n    })\n  });\n\n  return Array.isArray(baseStyle) ? [...baseStyle, selectionStyle] : [baseStyle, selectionStyle];\n};\n\n/**\n * Cria estilo para feature com indicador de status\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} statusProperty - Propriedade que indica o status\n * @param {Object} statusConfig - Configurao dos status\n * @returns {Style} Estilo com indicador de status\n */\nexport const createStatusFeatureStyle = (feature, statusProperty, statusConfig) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: 'rgba(0, 0, 0, 0.1)'\n      }),\n      stroke: new Stroke({\n        color: '#000000',\n        width: 1\n      })\n    });\n  }\n\n  const status = feature.properties[statusProperty];\n  const config = statusConfig[status] || statusConfig.default || {\n    fill: 'rgba(0, 0, 0, 0.1)',\n    stroke: '#000000'\n  };\n\n  return new Style({\n    fill: new Fill({\n      color: config.fill\n    }),\n    stroke: new Stroke({\n      color: config.stroke,\n      width: config.strokeWidth || 1\n    })\n  });\n};\n\n/**\n * Cria estilo para feature com gradiente baseado em valor numrico\n * @param {Object} feature - Feature do GeoJSON\n * @param {string} valueProperty - Propriedade com valor numrico\n * @param {Object} gradientConfig - Configurao do gradiente\n * @returns {Style} Estilo com gradiente\n */\nexport const createGradientFeatureStyle = (feature, valueProperty, gradientConfig) => {\n  if (!feature || !feature.properties) {\n    return new Style({\n      fill: new Fill({\n        color: gradientConfig.defaultColor || 'rgba(0, 0, 0, 0.1)'\n      }),\n      stroke: new Stroke({\n        color: gradientConfig.strokeColor || '#000000',\n        width: gradientConfig.strokeWidth || 1\n      })\n    });\n  }\n\n  const value = parseFloat(feature.properties[valueProperty]) || 0;\n  const { min, max, colors } = gradientConfig;\n\n  // Calcular cor baseada no valor\n  let color;\n  if (value <= min) {\n    color = colors.min;\n  } else if (value >= max) {\n    color = colors.max;\n  } else {\n    // Interpolao linear entre cores\n    const ratio = (value - min) / (max - min);\n    color = interpolateColor(colors.min, colors.max, ratio);\n  }\n\n  return new Style({\n    fill: new Fill({\n      color: color\n    }),\n    stroke: new Stroke({\n      color: gradientConfig.strokeColor || '#000000',\n      width: gradientConfig.strokeWidth || 1\n    })\n  });\n};\n\n/**\n * Interpola entre duas cores\n * @param {string} color1 - Primeira cor (hex)\n * @param {string} color2 - Segunda cor (hex)\n * @param {number} ratio - Razo de interpolao (0-1)\n * @returns {string} Cor interpolada\n */\nfunction interpolateColor(color1, color2, ratio) {\n  const hex1 = color1.replace('#', '');\n  const hex2 = color2.replace('#', '');\n  \n  const r1 = parseInt(hex1.substr(0, 2), 16);\n  const g1 = parseInt(hex1.substr(2, 2), 16);\n  const b1 = parseInt(hex1.substr(4, 2), 16);\n  \n  const r2 = parseInt(hex2.substr(0, 2), 16);\n  const g2 = parseInt(hex2.substr(2, 2), 16);\n  const b2 = parseInt(hex2.substr(4, 2), 16);\n  \n  const r = Math.round(r1 + (r2 - r1) * ratio);\n  const g = Math.round(g1 + (g2 - g1) * ratio);\n  const b = Math.round(b1 + (b2 - b1) * ratio);\n  \n  return `rgb(${r}, ${g}, ${b})`;\n}\n","// Configuraes centralizadas do mapa OpenLayers\n\nexport const MAP_CONFIG = {\n  // Configuraes iniciais\n  center: [-48.4129, -22.3794], // longitude, latitude\n  zoom: 7.63,\n  maxZoom: 18,\n  minZoom: 4,\n  \n  // Configuraes especficas para mobile\n  mobile: {\n    center: [-48.5935, -21.9212], // longitude, latitude - Coordenadas especificadas\n    zoom: 5.70 // Zoom ajustado para 5.70 conforme solicitado\n  },\n  \n  // Configuraes de clusterizao - Ajustadas para mostrar mais marcadores individuais\n  clusterDistance: 15, // Reduzido para mostrar mais marcadores individuais\n  clusterMinDistance: 3, // Reduzido para permitir marcadores mais prximos\n  clusterAnimationDuration: 300,\n  \n  // Configuraes de proximidade para pares prximos\n  proximityThreshold: 0.00005,\n  \n  // Configuraes de zoom para clusters\n  disableClusteringAtZoom: 12,\n  \n  // Configuraes de tooltip\n  tooltipOffset: 10,\n  tooltipDelay: 200,\n  \n  // Configuraes de interao\n  interaction: {\n    enableHover: true,\n    enableClick: true,\n    enableDoubleClick: true,\n    enableTouch: true,\n    clickDelay: 300,\n    hoverDelay: 200\n  },\n  \n  // Configuraes de performance\n  performance: {\n    enableLazyLoading: true,\n    maxFeaturesPerTile: 1000,\n    enableFeatureCulling: true,\n    enableTileCaching: true\n  },\n\n  // Configuraes de animao\n  ANIMATION_CONFIG: {\n    duration: {\n      marker: 300,\n      cluster: 500,\n      zoom: 800,\n      pan: 600\n    },\n    easing: {\n      marker: 'ease-out',\n      cluster: 'ease-in-out',\n      zoom: 'ease-out',\n      pan: 'ease-out'\n    }\n  }\n};\n\n// Configuraes de cores dos marcadores\nexport const MARKER_COLORS = {\n  individual: '#3B82F6',\n  individualBorder: '#1E40AF',\n  cluster: {\n    small: '#60A5FA',\n    medium: '#3B82F6',\n    large: '#2563EB',\n    xlarge: '#1E40AF'\n  },\n  nearbyPair: '#FF6B6B',\n  selected: '#10B981',\n  hover: '#F59E0B'\n};\n\n// Configuraes de tamanhos dos clusters\nexport const CLUSTER_SIZES = {\n  small: { min: 2, max: 10, size: 50 },\n  medium: { min: 11, max: 20, size: 52 },\n  large: { min: 21, max: 50, size: 56 },\n  xlarge: { min: 51, max: 100, size: 64 },\n  xxlarge: { min: 101, size: 72 }\n};\n\n// Configuraes de fontes para clusters\nexport const CLUSTER_FONTS = {\n  small: 'bold 14px Arial',\n  medium: 'bold 15px Arial',\n  large: 'bold 16px Arial',\n  xlarge: 'bold 18px Arial'\n};\n\n// Configuraes das camadas GeoJSON\nexport const GEOJSON_CONFIG = {\n  terrasIndigenas: {\n    regularizada: {\n      fill: 'rgba(220, 20, 60, 0.3)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(220, 20, 60, 0.45)',\n        stroke: '#FF0000'\n      }\n    },\n    declarada: {\n      fill: 'rgba(139, 0, 0, 0.25)',\n      stroke: '#B22222',\n      hover: {\n        fill: 'rgba(139, 0, 0, 0.4)',\n        stroke: '#FF0000'\n      }\n    }\n  },\n  estadoSP: {\n    fill: 'rgba(0, 0, 0, 0.3)',\n    stroke: '#000000',\n    hover: {\n      fill: 'rgba(0, 0, 0, 0.4)',\n      stroke: '#333333'\n    }\n  }\n};\n\n// Configuraes de projeo\nexport const PROJECTION_CONFIG = {\n  dataProjection: 'EPSG:4326',\n  featureProjection: 'EPSG:3857',\n  // Projeo SIRGAS 2000 (EPSG:4674) usada nos dados GeoJSON\n  sirgas2000: 'EPSG:4674'\n};\n\n// Configuraes de camadas base\nexport const BASE_LAYER_CONFIG = {\n  satellite: {\n    url: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n    attributions: ' <a href=\"https://www.esri.com/\">Esri</a>',\n    maxZoom: 19,\n    wrapX: false,\n    tilePixelRatio: 1,\n    tileSize: 256\n  },\n  osm: {\n    url: 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    attributions: ' <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    maxZoom: 19\n  },\n  terrain: {\n    url: 'https://{a-d}.tile.opentopomap.org/{z}/{x}/{y}.png',\n    attributions: ' <a href=\"https://opentopomap.org/\">OpenTopoMap</a> contributors',\n    maxZoom: 17\n  }\n};\n\n// Configuraes de estilos para diferentes tipos de marcadores\nexport const MARKER_STYLE_CONFIG = {\n  escola: {\n    default: {\n      radius: 6,\n      fillColor: MARKER_COLORS.individual,\n      strokeColor: MARKER_COLORS.individualBorder,\n      strokeWidth: 2\n    },\n    hover: {\n      radius: 8,\n      fillColor: MARKER_COLORS.hover,\n      strokeColor: '#D97706',\n      strokeWidth: 3\n    },\n    selected: {\n      radius: 10,\n      fillColor: MARKER_COLORS.selected,\n      strokeColor: '#059669',\n      strokeWidth: 3,\n      lineDash: [5, 5]\n    },\n    nearbyPair: {\n      radius: 8,\n      fillColor: MARKER_COLORS.nearbyPair,\n      strokeColor: '#DC2626',\n      strokeWidth: 2\n    }\n  },\n  cluster: {\n    small: {\n      radius: CLUSTER_SIZES.small.size / 2,\n      fillColor: MARKER_COLORS.cluster.small,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    medium: {\n      radius: CLUSTER_SIZES.medium.size / 2,\n      fillColor: MARKER_COLORS.cluster.medium,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    large: {\n      radius: CLUSTER_SIZES.large.size / 2,\n      fillColor: MARKER_COLORS.cluster.large,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    },\n    xlarge: {\n      radius: CLUSTER_SIZES.xlarge.size / 2,\n      fillColor: MARKER_COLORS.cluster.xlarge,\n      strokeColor: '#FFFFFF',\n      strokeWidth: 3\n    }\n  }\n};\n\n// Configuraes de animaes\nexport const ANIMATION_CONFIG = {\n  duration: {\n    marker: 300,\n    cluster: 500,\n    zoom: 800,\n    pan: 600\n  },\n  easing: {\n    marker: 'ease-out',\n    cluster: 'ease-in-out',\n    zoom: 'ease-out',\n    pan: 'ease-out'\n  }\n};\n\n// Configuraes de responsividade\nexport const RESPONSIVE_CONFIG = {\n  breakpoints: {\n    mobile: 768,\n    tablet: 1024,\n    desktop: 1200\n  },\n  mobile: {\n    clusterDistance: 12, // Reduzido para mobile\n    tooltipOffset: 8,\n    markerRadius: 5\n  },\n  tablet: {\n    clusterDistance: 15, // Reduzido para tablet\n    tooltipOffset: 10,\n    markerRadius: 6\n  },\n  desktop: {\n    clusterDistance: 15, // Reduzido para desktop\n    tooltipOffset: 10,\n    markerRadius: 6\n  }\n};\n\n// Configuraes de cache\nexport const CACHE_CONFIG = {\n  markers: {\n    maxSize: 1000,\n    ttl: 300000, // 5 minutos\n    enableCompression: true\n  },\n  tiles: {\n    maxSize: 100,\n    ttl: 600000, // 10 minutos\n    enableCompression: true\n  },\n  geojson: {\n    maxSize: 50,\n    ttl: 1800000, // 30 minutos\n    enableCompression: true\n  }\n};\n\n// Configuraes de debug\nexport const DEBUG_CONFIG = {\n  enableLogging: process.env.NODE_ENV === 'development',\n  enablePerformanceMonitoring: process.env.NODE_ENV === 'development',\n  enableFeatureCount: process.env.NODE_ENV === 'development',\n  logLevel: process.env.NODE_ENV === 'development' ? 'debug' : 'error'\n}; ","import React, { useEffect, useRef, useCallback, useMemo, forwardRef } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { GeoJSON } from 'ol/format';\nimport { \n  createTerrasIndigenasStyle,\n  applySelectionStyle \n} from '../../utils/openlayers/layerStyles';\nimport { createGeoJSONInteractions } from '../../utils/openlayers/interactions';\nimport { MAP_CONFIG, PROJECTION_CONFIG } from '../../utils/mapConfig';\nimport { isMobile } from '../../utils/mobileUtils';\n\n/**\n * Componente OpenLayersTerrasIndigenas - Substitui completamente o TerrasIndigenas.js do Leaflet\n * Implementa camada GeoJSON de terras indgenas com estilos dinmicos e interaes\n */\nconst OpenLayersTerrasIndigenas = forwardRef(({ \n  data,\n  onPainelOpen,\n  showTerrasIndigenas = true,\n  map,\n  className = \"h-full w-full\"\n}, ref) => {\n  // Refs para controle da camada\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n  const interactionsRef = useRef(null);\n  \n  // Estados para controle de interaes\n  const [, setHoveredFeature] = React.useState(null);\n  const [selectedFeature, setSelectedFeature] = React.useState(null);\n  // const [features, setFeatures] = React.useState([]); // Removido - no utilizado\n\n  // Verificar se  mobile\n  const isMobileDevice = useMemo(() => isMobile(), []);\n\n  /**\n   * Inicializa a camada de terras indgenas\n   */\n  const initializeLayer = useCallback(() => {\n    if (!map || !data) return;\n\n    // Verificar se os dados tm a estrutura correta\n    if (!data.features || !Array.isArray(data.features) || data.features.length === 0) {\n      console.warn('[OpenLayersTerrasIndigenas] Dados invlidos ou vazios:', data);\n      return;\n    }\n\n    try {\n      // Criar formato GeoJSON com projees corretas\n      const geoJSONFormat = new GeoJSON({\n        dataProjection: PROJECTION_CONFIG.sirgas2000 || PROJECTION_CONFIG.dataProjection,\n        featureProjection: PROJECTION_CONFIG.featureProjection\n      });\n\n      // Ler features do GeoJSON\n      const geoJSONFeatures = geoJSONFormat.readFeatures(data);\n      // setFeatures(geoJSONFeatures); // Removido - no utilizado\n\n      // Criar fonte vetorial\n      vectorSourceRef.current = new VectorSource({\n        features: geoJSONFeatures\n      });\n\n      // Criar camada vetorial\n      vectorLayerRef.current = new VectorLayer({\n        source: vectorSourceRef.current,\n        style: (feature) => createTerrasIndigenasStyle(feature, false),\n        zIndex: 10\n      });\n\n      // Adicionar dados de terra indgena a cada feature\n      geoJSONFeatures.forEach(feature => {\n        const properties = feature.getProperties();\n        feature.set('terraIndigenaInfo', {\n          titulo: properties.terrai_nom,\n          tipo: 'terra_indigena',\n          etnia: properties.etnia_nome,\n          municipio: properties.municipio_,\n          uf: properties.uf_sigla,\n          superficie: properties.superficie,\n          fase: properties.fase_ti,\n          modalidade: properties.modalidade,\n          reestudo: properties.reestudo_t,\n          cr: properties.cr,\n          faixa_fron: properties.faixa_fron,\n          undadm_nom: properties.undadm_nom,\n          undadm_sig: properties.undadm_sig,\n          dominio_un: properties.dominio_un,\n          data_atual: properties.data_atual,\n          terrai_cod: properties.terrai_cod,\n          undadm_cod: properties.undadm_cod\n        });\n      });\n\n      // Adicionar camada ao mapa\n      map.addLayer(vectorLayerRef.current);\n\n      // Configurar interaes\n      setupInteractions();\n\n      console.log(`[OpenLayersTerrasIndigenas] Camada criada com ${geoJSONFeatures.length} features`);\n\n    } catch (error) {\n      console.error('[OpenLayersTerrasIndigenas] Erro ao criar camada:', error);\n    }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, data]);\n\n  /**\n   * Configura as interaes da camada\n   */\n  const setupInteractions = useCallback(() => {\n    if (!map || !vectorLayerRef.current) return;\n\n    // Criar interaes especficas para camadas GeoJSON\n    interactionsRef.current = createGeoJSONInteractions(\n      map,\n      handleFeatureClick,\n      handleFeatureHover\n    );\n\n    // Configurar handlers especficos\n    interactionsRef.current.on('click', handleFeatureClick);\n    interactionsRef.current.on('hover', handleFeatureHover);\n    interactionsRef.current.on('hoverOut', handleFeatureHoverOut);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  /**\n   * Handler para clique em feature\n   */\n  const handleFeatureClick = useCallback((feature, event) => {\n    if (!feature) return;\n\n    const terraIndigenaInfo = feature.get('terraIndigenaInfo');\n    if (!terraIndigenaInfo) return;\n\n    if (isMobileDevice) {\n      // No mobile: clique nico abre o painel diretamente\n      if (onPainelOpen) {\n        onPainelOpen(terraIndigenaInfo);\n      }\n    } else {\n      // No desktop: primeiro clique faz zoom, segundo abre painel\n      if (selectedFeature === feature) {\n        // Segundo clique: abrir painel\n        if (onPainelOpen) {\n          onPainelOpen(terraIndigenaInfo);\n        }\n        setSelectedFeature(null);\n      } else {\n        // Primeiro clique: fazer zoom\n        setSelectedFeature(feature);\n        \n        const geometry = feature.getGeometry();\n        if (geometry) {\n          const extent = geometry.getExtent();\n          map.getView().fit(extent, {\n            duration: MAP_CONFIG.ANIMATION_CONFIG.duration.zoom,\n            padding: [50, 50, 50, 50],\n            maxZoom: 15\n          });\n        }\n      }\n    }\n  }, [isMobileDevice, onPainelOpen, selectedFeature, map]);\n\n  /**\n   * Handler para hover em feature\n   */\n  const handleFeatureHover = useCallback((feature, event) => {\n    if (isMobileDevice) return; // Desabilitar hover em mobile\n    \n    setHoveredFeature(feature);\n    \n    // Aplicar estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => {\n        if (f === feature) {\n          return createTerrasIndigenasStyle(f, true); // true = hover\n        }\n        return createTerrasIndigenasStyle(f, false);\n      });\n      vectorLayerRef.current.changed();\n    }\n  }, [isMobileDevice]);\n\n  /**\n   * Handler para sada do hover\n   */\n  const handleFeatureHoverOut = useCallback((feature) => {\n    setHoveredFeature(null);\n    \n    // Remover estilo de hover\n    if (vectorLayerRef.current) {\n      vectorLayerRef.current.setStyle((f) => createTerrasIndigenasStyle(f, false));\n      vectorLayerRef.current.changed();\n    }\n  }, []);\n\n  /**\n   * Aplica estilo de seleo a um feature\n   */\n  const applySelectionStyleToFeature = useCallback((feature) => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((f) => {\n      if (f === feature) {\n        const baseStyle = createTerrasIndigenasStyle(f, false);\n        return applySelectionStyle(f, baseStyle);\n      }\n      return createTerrasIndigenasStyle(f, false);\n    });\n    vectorLayerRef.current.changed();\n  }, []);\n\n  /**\n   * Remove estilo de seleo de um feature\n   */\n  const removeSelectionStyleFromFeature = useCallback((feature) => {\n    if (!vectorLayerRef.current) return;\n\n    vectorLayerRef.current.setStyle((f) => createTerrasIndigenasStyle(f, false));\n    vectorLayerRef.current.changed();\n  }, []);\n\n  // Inicializar camada quando componente montar\n  useEffect(() => {\n    if (map && data && showTerrasIndigenas) {\n      initializeLayer();\n    }\n\n    return () => {\n      // Cleanup\n      if (interactionsRef.current) {\n        interactionsRef.current.destroy();\n      }\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, data, showTerrasIndigenas, initializeLayer]);\n\n  // Aplicar/remover estilo de seleo quando selectedFeature mudar\n  useEffect(() => {\n    if (selectedFeature) {\n      applySelectionStyleToFeature(selectedFeature);\n    } else if (vectorLayerRef.current) {\n      // Remover seleo de todos os features\n      removeSelectionStyleFromFeature();\n    }\n  }, [selectedFeature, applySelectionStyleToFeature, removeSelectionStyleFromFeature]);\n\n  // Limpar seleo aps timeout (para comportamento de clique duplo)\n  useEffect(() => {\n    if (selectedFeature) {\n      const timeout = setTimeout(() => {\n        setSelectedFeature(null);\n      }, MAP_CONFIG.interaction.clickDelay);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [selectedFeature]);\n\n  // Se no deve mostrar terras indgenas, no renderizar nada\n  if (!showTerrasIndigenas || !data) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      {/* Este componente no renderiza elementos visuais diretamente,\n          apenas gerencia a camada GeoJSON do OpenLayers */}\n    </div>\n  );\n});\n\nexport default OpenLayersTerrasIndigenas;\n","import React, { useEffect, useRef, useCallback, forwardRef } from 'react';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { GeoJSON } from 'ol/format';\nimport { createEstadoSPStyle } from '../../utils/openlayers/layerStyles';\nimport { PROJECTION_CONFIG } from '../../utils/mapConfig';\n\n/**\n * Componente OpenLayersEstadoSP - Substitui completamente o EstadoSP.js do Leaflet\n * Implementa camada GeoJSON de fundo do estado de So Paulo (no-interativa)\n */\nconst OpenLayersEstadoSP = forwardRef(({ \n  data,\n  showEstadoSP = true,\n  map,\n  className = \"h-full w-full\"\n}, ref) => {\n  // Refs para controle da camada\n  const vectorSourceRef = useRef(null);\n  const vectorLayerRef = useRef(null);\n\n  /**\n   * Inicializa a camada do estado de So Paulo\n   */\n  const initializeLayer = useCallback(() => {\n    if (!map || !data) return;\n\n    // Verificar se os dados tm a estrutura correta\n    if (!data.features || !Array.isArray(data.features) || data.features.length === 0) {\n      console.warn('[OpenLayersEstadoSP] Dados invlidos ou vazios:', data);\n      return;\n    }\n\n    try {\n      // Criar formato GeoJSON com projees corretas\n      const geoJSONFormat = new GeoJSON({\n        dataProjection: PROJECTION_CONFIG.sirgas2000 || PROJECTION_CONFIG.dataProjection,\n        featureProjection: PROJECTION_CONFIG.featureProjection\n      });\n\n      // Ler features do GeoJSON\n      const geoJSONFeatures = geoJSONFormat.readFeatures(data);\n\n      // Criar fonte vetorial\n      vectorSourceRef.current = new VectorSource({\n        features: geoJSONFeatures\n      });\n\n      // Criar camada vetorial (no-interativa, apenas visual)\n      vectorLayerRef.current = new VectorLayer({\n        source: vectorSourceRef.current,\n        style: (feature) => createEstadoSPStyle(feature, false),\n        zIndex: 5, // Camada de fundo com zIndex baixo\n        interactive: false // Desabilitar interaes\n      });\n\n      // Adicionar camada ao mapa\n      map.addLayer(vectorLayerRef.current);\n\n      console.log(`[OpenLayersEstadoSP] Camada criada com ${geoJSONFeatures.length} features`);\n\n    } catch (error) {\n      console.error('[OpenLayersEstadoSP] Erro ao criar camada:', error);\n    }\n\n  }, [map, data]);\n\n  // Inicializar camada quando componente montar\n  useEffect(() => {\n    if (map && data && showEstadoSP) {\n      initializeLayer();\n    }\n\n    return () => {\n      // Cleanup\n      if (vectorLayerRef.current && map) {\n        map.removeLayer(vectorLayerRef.current);\n      }\n    };\n  }, [map, data, showEstadoSP, initializeLayer]);\n\n  // Se no deve mostrar estado SP, no renderizar nada\n  if (!showEstadoSP || !data) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      {/* Este componente no renderiza elementos visuais diretamente,\n          apenas gerencia a camada GeoJSON de fundo do OpenLayers */}\n    </div>\n  );\n});\n\nexport default OpenLayersEstadoSP;","import React, { useEffect, useRef, useCallback, useMemo } from 'react';\nimport OpenLayersTerrasIndigenas from './OpenLayersTerrasIndigenas';\nimport OpenLayersEstadoSP from './OpenLayersEstadoSP';\n\n/**\n * Componente OpenLayersLayers - Gerenciador unificado de todas as camadas GeoJSON\n * Centraliza o controle das camadas de terras indgenas e estado SP\n */\nconst OpenLayersLayers = ({ \n  terrasIndigenasData,\n  estadoSPData,\n  showTerrasIndigenas = true,\n  showEstadoSP = true,\n  onPainelOpen,\n  map,\n  className = \"h-full w-full\"\n}) => {\n  // Refs para controle das camadas\n  const terrasIndigenasRef = useRef(null);\n  const estadoSPRef = useRef(null);\n  \n  // Estados para controle das camadas\n  const [layersStatus, setLayersStatus] = React.useState({\n    terrasIndigenas: {\n      visible: showTerrasIndigenas,\n      loaded: false,\n      error: null\n    },\n    estadoSP: {\n      visible: showEstadoSP,\n      loaded: false,\n      error: null\n    }\n  });\n\n  // Verificar se h dados vlidos\n  const hasValidData = useMemo(() => {\n    return {\n      terrasIndigenas: terrasIndigenasData && terrasIndigenasData.features && terrasIndigenasData.features.length > 0,\n      estadoSP: estadoSPData && estadoSPData.features && estadoSPData.features.length > 0\n    };\n  }, [terrasIndigenasData, estadoSPData]);\n\n  /**\n   * Atualiza status de uma camada\n   */\n  const updateLayerStatus = useCallback((layerName, updates) => {\n    setLayersStatus(prev => ({\n      ...prev,\n      [layerName]: {\n        ...prev[layerName],\n        ...updates\n      }\n    }));\n  }, []);\n\n  /**\n   * Handler para mudanas na visibilidade das camadas - REMOVIDO: no utilizado\n   */\n  // const handleLayerVisibilityChange = useCallback((layerName, visible) => {\n  //   updateLayerStatus(layerName, { visible });\n  // }, [updateLayerStatus]);\n\n  /**\n   * Handler para erros nas camadas\n   */\n  const handleLayerError = useCallback((layerName, error) => {\n    console.error(`[OpenLayersLayers] Erro na camada ${layerName}:`, error);\n    updateLayerStatus(layerName, { error: error.message });\n  }, [updateLayerStatus]);\n\n  /**\n   * Handler para sucesso no carregamento das camadas\n   */\n  const handleLayerSuccess = useCallback((layerName) => {\n    updateLayerStatus(layerName, { loaded: true, error: null });\n  }, [updateLayerStatus]);\n\n  /**\n   * Obtm estatsticas das camadas\n   */\n  const getLayersStats = useCallback(() => {\n    const stats = {\n      total: 0,\n      visible: 0,\n      loaded: 0,\n      errors: 0\n    };\n\n    Object.values(layersStatus).forEach(layer => {\n      stats.total++;\n      if (layer.visible) stats.visible++;\n      if (layer.loaded) stats.loaded++;\n      if (layer.error) stats.errors++;\n    });\n\n    return stats;\n  }, [layersStatus]);\n\n  /**\n   * Obtm informaes detalhadas das camadas\n   */\n  const getLayersInfo = useCallback(() => {\n    return {\n      terrasIndigenas: {\n        ...layersStatus.terrasIndigenas,\n        hasData: hasValidData.terrasIndigenas,\n        featureCount: hasValidData.terrasIndigenas ? terrasIndigenasData.features.length : 0\n      },\n      estadoSP: {\n        ...layersStatus.estadoSP,\n        hasData: hasValidData.estadoSP,\n        featureCount: hasValidData.estadoSP ? estadoSPData.features.length : 0\n      }\n    };\n  }, [layersStatus, hasValidData, terrasIndigenasData, estadoSPData]);\n\n  // Log de status das camadas\n  useEffect(() => {\n    const stats = getLayersStats();\n    const info = getLayersInfo();\n    \n    console.log('[OpenLayersLayers] Status das camadas:', {\n      stats,\n      info,\n      hasValidData\n    });\n  }, [layersStatus, getLayersStats, getLayersInfo, hasValidData]);\n\n  // Atualizar status quando props mudarem\n  useEffect(() => {\n    setLayersStatus(prev => ({\n      terrasIndigenas: {\n        ...prev.terrasIndigenas,\n        visible: showTerrasIndigenas\n      },\n      estadoSP: {\n        ...prev.estadoSP,\n        visible: showEstadoSP\n      }\n    }));\n  }, [showTerrasIndigenas, showEstadoSP]);\n\n  // Se no h dados vlidos, no renderizar nada\n  if (!hasValidData.terrasIndigenas && !hasValidData.estadoSP) {\n    return (\n      <div className={className}>\n        <div className=\"text-center text-gray-500 p-4\">\n          Nenhuma camada GeoJSON disponvel\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      {/* Camada Terras Indgenas */}\n      {hasValidData.terrasIndigenas && (\n        <OpenLayersTerrasIndigenas\n          ref={terrasIndigenasRef}\n          data={terrasIndigenasData}\n          onPainelOpen={onPainelOpen}\n          showTerrasIndigenas={showTerrasIndigenas}\n          map={map}\n          onLoad={() => handleLayerSuccess('terrasIndigenas')}\n          onError={(error) => handleLayerError('terrasIndigenas', error)}\n        />\n      )}\n\n      {/* Camada Estado SP */}\n      {hasValidData.estadoSP && (\n        <OpenLayersEstadoSP\n          ref={estadoSPRef}\n          data={estadoSPData}\n          showEstadoSP={showEstadoSP}\n          map={map}\n          onLoad={() => handleLayerSuccess('estadoSP')}\n          onError={(error) => handleLayerError('estadoSP', error)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default OpenLayersLayers;\n","import { useState, useEffect } from 'react';\n\n/**\n * Hook para gerenciar controles de mapa responsivos\n * \n * @returns {Object} Configuraes de controles baseadas no tamanho da tela\n */\nexport const useMapControls = () => {\n  const [screenSize, setScreenSize] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 1024,\n    height: typeof window !== 'undefined' ? window.innerHeight : 768,\n  });\n\n  const [isMobile, setIsMobile] = useState(false);\n  const [isTablet, setIsTablet] = useState(false);\n  const [isDesktop, setIsDesktop] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      \n      setScreenSize({ width, height });\n      \n      // Definir breakpoints\n      setIsMobile(width <= 767);\n      setIsTablet(width >= 768 && width <= 1023);\n      setIsDesktop(width >= 1024);\n    };\n\n    // Configurar listener\n    window.addEventListener('resize', handleResize);\n    \n    // Configurar estado inicial\n    handleResize();\n\n    // Cleanup\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  /**\n   * Configuraes de zoom baseadas no dispositivo\n   */\n  const getZoomConfig = () => {\n    if (isMobile) {\n      return {\n        bottom: 120, // Aumentado para evitar sobreposio com menu de camadas\n        buttonSize: 44,\n        spacing: 8,\n        left: 0.25,\n      };\n    }\n    \n    if (isTablet) {\n      return {\n        bottom: 40,\n        buttonSize: 40,\n        spacing: 6,\n        left: 0.5,\n      };\n    }\n    \n    // Desktop\n    return {\n      bottom: 60,\n      buttonSize: 36,\n      spacing: 6,\n      left: 0.5,\n    };\n  };\n\n  /**\n   * Configuraes de acessibilidade\n   */\n  const getAccessibilityConfig = () => {\n    return {\n      prefersReducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,\n      prefersHighContrast: window.matchMedia('(prefers-contrast: high)').matches,\n      isLandscape: screenSize.width > screenSize.height,\n    };\n  };\n\n  return {\n    screenSize,\n    isMobile,\n    isTablet,\n    isDesktop,\n    zoomConfig: getZoomConfig(),\n    accessibility: getAccessibilityConfig(),\n  };\n};\n\nexport default useMapControls;","import React, { useEffect, useRef } from 'react';\nimport { useMapControls } from '../../hooks/useMapControls';\n\n/**\n * Componente wrapper para controles de zoom responsivos\n * \n * Este componente aplica estilos dinmicos baseados no tamanho da tela\n * e preferncias de acessibilidade do usurio.\n */\nconst ResponsiveZoomControls = ({ mapRef }) => {\n  const { zoomConfig, accessibility, isMobile, isTablet } = useMapControls();\n  const controlsRef = useRef(null);\n\n  useEffect(() => {\n    if (!controlsRef.current || !mapRef?.current) return;\n\n    const map = mapRef.current;\n    const controls = map.getControls().getArray();\n    \n    // Encontrar controles de zoom\n    const zoomControl = controls.find(control => \n      control.getClassName && control.getClassName().includes('ol-zoom')\n    );\n\n    if (zoomControl) {\n      const element = zoomControl.element;\n      \n      // Aplicar estilos dinmicos\n      element.style.bottom = `${zoomConfig.bottom}px`;\n      element.style.left = `${zoomConfig.left}em`;\n      \n      // Configurar botes\n      const buttons = element.querySelectorAll('.ol-zoom-in, .ol-zoom-out');\n      buttons.forEach(button => {\n        button.style.minHeight = `${zoomConfig.buttonSize}px`;\n        button.style.minWidth = `${zoomConfig.buttonSize}px`;\n        button.style.marginBottom = `${zoomConfig.spacing}px`;\n        \n        // Aplicar configuraes de acessibilidade\n        if (accessibility.prefersReducedMotion) {\n          button.style.transition = 'none';\n        }\n        \n        if (accessibility.prefersHighContrast) {\n          button.style.backgroundColor = 'white';\n          button.style.border = '2px solid black';\n          button.style.color = 'black';\n        }\n      });\n    }\n  }, [zoomConfig, accessibility, mapRef]);\n\n  // Em mobile, adicionar classe CSS especfica para otimizaes\n  useEffect(() => {\n    if (!controlsRef.current) return;\n\n    const element = controlsRef.current;\n    \n    // Limpar classes anteriores\n    element.classList.remove('mobile-optimized', 'tablet-optimized', 'desktop-optimized');\n    \n    // Adicionar classe baseada no dispositivo\n    if (isMobile) {\n      element.classList.add('mobile-optimized');\n    } else if (isTablet) {\n      element.classList.add('tablet-optimized');\n    } else {\n      element.classList.add('desktop-optimized');\n    }\n  }, [isMobile, isTablet]);\n\n  return (\n    <div \n      ref={controlsRef}\n      className=\"responsive-zoom-controls\"\n      data-device={isMobile ? 'mobile' : isTablet ? 'tablet' : 'desktop'}\n      data-accessibility={JSON.stringify(accessibility)}\n    />\n  );\n};\n\nexport default ResponsiveZoomControls;","import React from 'react';\n\nconst MapWrapper = React.forwardRef((props, ref) => {\n  return <div id=\"map\" className=\"w-full h-full\" ref={ref} {...props} />;\n});\n\nexport default MapWrapper; ","import React, { useEffect, useRef, useState, useCallback, useMemo } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport XYZ from 'ol/source/XYZ';\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport { defaults as defaultControls } from 'ol/control';\n// Remover import das interaes padro para evitar conflitos\n// import { defaults as defaultInteractions } from 'ol/interaction';\nimport { register } from 'ol/proj/proj4';\nimport proj4 from 'proj4';\nimport 'ol/ol.css';\n\n// Componentes OpenLayers\nimport OpenLayersMarkers from './OpenLayers/OpenLayersMarkers';\nimport OpenLayersLayers from './OpenLayers/OpenLayersLayers';\n\n// Componentes responsivos\nimport ResponsiveZoomControls from './map/ResponsiveZoomControls';\n\n// Configuraes e utilitrios\nimport { MAP_CONFIG, BASE_LAYER_CONFIG } from '../utils/mapConfig';\nimport { isMobile } from '../utils/mobileUtils';\nimport MapWrapper from './map/MapWrapper';\n\n// Registrar projeo SIRGAS 2000 (EPSG:4674) usada nos dados GeoJSON\nproj4.defs('EPSG:4674', '+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs');\nregister(proj4);\n\nconst OpenLayersMap = ({ \n  dataPoints = [], \n  onPainelOpen,\n  center = MAP_CONFIG.center,\n  zoom = MAP_CONFIG.zoom,\n  className = \"h-screen w-full\",\n  // Props para camadas GeoJSON\n  terrasIndigenasData = null,\n  estadoSPData = null,\n  showTerrasIndigenas = true,\n  showEstadoSP = true,\n  // Props para marcadores\n  showMarcadores = true,\n  showNomesEscolas = false\n}) => {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const baseLayer = useRef(null);\n  const [, setMapInfo] = useState({\n    lng: center[0],\n    lat: center[1],\n    zoom: zoom\n  });\n\n  // Verificar se  mobile e ajustar configuraes\n  const isMobileDevice = useMemo(() => isMobile(), []);\n  const initialCenter = isMobileDevice ? MAP_CONFIG.mobile.center : center;\n  const initialZoom = isMobileDevice ? MAP_CONFIG.mobile.zoom : zoom;\n\n  /**\n   * Cria camadas base do mapa\n   */\n  const createBaseLayers = useCallback(() => {\n    const satelliteLayer = new TileLayer({\n      source: new XYZ({\n        url: BASE_LAYER_CONFIG.satellite.url,\n        attributions: BASE_LAYER_CONFIG.satellite.attributions,\n        maxZoom: BASE_LAYER_CONFIG.satellite.maxZoom,\n        wrapX: BASE_LAYER_CONFIG.satellite.wrapX,\n        tilePixelRatio: BASE_LAYER_CONFIG.satellite.tilePixelRatio,\n        tileSize: BASE_LAYER_CONFIG.satellite.tileSize\n      }),\n      preload: 1,\n      useInterimTilesOnError: false\n    });\n\n    return { satelliteLayer };\n  }, []);\n\n  /**\n   * Inicializa o mapa OpenLayers\n   */\n  const initializeMap = useCallback(() => {\n    if (map.current) return;\n\n    // Criar camadas base\n    const { satelliteLayer } = createBaseLayers();\n    baseLayer.current = satelliteLayer;\n\n    // Criar mapa com configuraes ajustadas para mobile\n    map.current = new Map({\n      target: mapContainer.current,\n      layers: [baseLayer.current],\n      view: new View({\n        center: fromLonLat(initialCenter),\n        zoom: initialZoom,\n        maxZoom: MAP_CONFIG.maxZoom,\n        minZoom: MAP_CONFIG.minZoom,\n        enableRotation: false // Desabilitar rotao\n      }),\n      controls: defaultControls(),\n      // Remover interaes padro para evitar conflitos\n      // interactions: defaultInteractions({\n      //   dragRotate: false, // Desabilitar rotao com arraste\n      //   pinchRotate: false // Desabilitar rotao com pinch (dois dedos)\n      // })\n    });\n\n    // Event listeners para mudanas de view\n    map.current.on('moveend', () => {\n      const view = map.current.getView();\n      const center = toLonLat(view.getCenter());\n      const newView = {\n        lng: center[0].toFixed(4),\n        lat: center[1].toFixed(4),\n        zoom: view.getZoom().toFixed(2)\n      };\n      \n      setMapInfo(newView);\n    });\n\n    console.log('[OpenLayersMap] Mapa inicializado com sucesso');\n\n  }, [initialCenter, initialZoom, createBaseLayers]);\n\n  /**\n   * Atualiza configuraes do mapa quando props mudarem\n   */\n  const updateMapConfig = useCallback(() => {\n    if (!map.current) return;\n\n    const isMobileDevice = isMobile();\n    const newCenter = isMobileDevice ? MAP_CONFIG.mobile.center : center;\n    const newZoom = isMobileDevice ? MAP_CONFIG.mobile.zoom : zoom;\n\n    const view = map.current.getView();\n    const currentCenter = toLonLat(view.getCenter());\n    const currentZoom = view.getZoom();\n\n    // S atualizar se as configuraes realmente mudaram\n    if (currentCenter[0] !== newCenter[0] || currentCenter[1] !== newCenter[1] || currentZoom !== newZoom) {\n      view.setCenter(fromLonLat(newCenter));\n      view.setZoom(newZoom);\n    }\n  }, [center, zoom]);\n\n  // Inicializar mapa quando componente montar\n  useEffect(() => {\n    initializeMap();\n\n    return () => {\n      if (map.current) {\n        map.current.setTarget(undefined);\n        map.current = null;\n      }\n    };\n  }, [initializeMap]);\n\n  // Atualizar configuraes quando props mudarem\n  useEffect(() => {\n    updateMapConfig();\n  }, [updateMapConfig]);\n\n  return (\n    <MapWrapper ref={mapContainer}>\n      {/* Mapa base OpenLayers */}\n      {map.current && (\n        <>\n          {/* Componente de marcadores */}\n          <OpenLayersMarkers\n            dataPoints={dataPoints}\n            onPainelOpen={onPainelOpen}\n            showMarcadores={showMarcadores}\n            showNomesEscolas={showNomesEscolas}\n            map={map.current}\n          />\n\n          {/* Componente de camadas GeoJSON */}\n          <OpenLayersLayers\n            terrasIndigenasData={terrasIndigenasData}\n            estadoSPData={estadoSPData}\n            showTerrasIndigenas={showTerrasIndigenas}\n            showEstadoSP={showEstadoSP}\n            onPainelOpen={onPainelOpen}\n            map={map.current}\n          />\n\n          {/* Controles de zoom responsivos */}\n          <ResponsiveZoomControls mapRef={map} />\n        </>\n      )}\n    </MapWrapper>\n  );\n};\n\nexport default OpenLayersMap; ","import { useState, useEffect } from 'react';\nimport logger from '../utils/logger';\n\n// Um objeto simples para armazenar os dados GeoJSON em memria.\nconst cache = {};\n\n/**\n * Hook para carregar e cachear dados GeoJSON\n * \n * @param {string} key - Chave do arquivo GeoJSON (sem extenso)\n * @returns {Object} Objeto com data, loading e error\n */\nexport const useGeoJSONCache = (key) => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!key) return;\n\n    const fetchGeoJSON = async () => {\n      if (cache[key]) {\n         logger.debug(`useGeoJSONCache: Dados de ${key} encontrados no cache`);\n         setData(cache[key]);\n         return;\n      }\n      setLoading(true);\n      try {\n         const url = `${process.env.PUBLIC_URL}/${key}.geojson`;\n         logger.debug(`useGeoJSONCache: Carregando ${key} de:`, url);\n         const response = await fetch(url);\n         if (!response.ok) throw new Error(`Erro ao buscar GeoJSON (${response.status})`);\n         const geoJSON = await response.json();\n         logger.debug(`useGeoJSONCache: ${key} carregado com sucesso:`, {\n           type: geoJSON.type,\n           features: geoJSON.features?.length || 0,\n         });\n         cache[key] = geoJSON;\n         setData(geoJSON);\n      } catch (err) {\n         logger.error(`useGeoJSONCache: Erro ao carregar ${key}:`, err);\n         setError(err);\n      } finally {\n         setLoading(false);\n      }\n    };\n\n    fetchGeoJSON();\n  }, [key]);\n\n  return { data, loading, error };\n}; ","import { useMemo } from 'react';\n\n/**\n * Hook para gerenciar cones responsivos baseados no comportamento do dispositivo\n * \n * @param {boolean} isMobile - Se est em mobile\n * @param {boolean} isMinimized - Estado atual (minimizado/expandido)\n * @returns {Object} Configuraes do cone\n */\nexport const useResponsiveIcon = (isMobile, isMinimized) => {\n  return useMemo(() => {\n    if (isMobile) {\n      // Mobile: comportamento invertido\n      // Quando minimizado: seta para cima (indicando que pode expandir)\n      // Quando expandido: seta para baixo (indicando que pode minimizar)\n      return {\n        minimized: {\n          path: \"M5 15l7-7 7 7\",\n          ariaLabel: \"Expandir menu\"\n        },\n        expanded: {\n          path: \"M19 9l-7 7-7-7\",\n          ariaLabel: \"Minimizar menu\"\n        }\n      };\n    } else {\n      // Desktop: comportamento padro (mantido como estava)\n      // Quando minimizado: seta para baixo (indicando que pode expandir)\n      // Quando expandido: seta para cima (indicando que pode minimizar)\n      return {\n        minimized: {\n          path: \"M19 9l-7 7-7-7\",\n          ariaLabel: \"Expandir menu\"\n        },\n        expanded: {\n          path: \"M5 15l7-7 7 7\",\n          ariaLabel: \"Minimizar menu\"\n        }\n      };\n    }\n  }, [isMobile]);\n};\n\n/**\n * Componente de cone SVG responsivo\n */\nexport const ResponsiveIcon = ({ isMobile, isMinimized, className = \"w-4 h-4\" }) => {\n  const iconConfig = useResponsiveIcon(isMobile, isMinimized);\n  const currentConfig = isMinimized ? iconConfig.minimized : iconConfig.expanded;\n\n  return (\n    <svg \n      className={className} \n      fill=\"none\" \n      stroke=\"currentColor\" \n      viewBox=\"0 0 24 24\"\n      aria-label={currentConfig.ariaLabel}\n    >\n      <path \n        strokeLinecap=\"round\" \n        strokeLinejoin=\"round\" \n        strokeWidth={2} \n        d={currentConfig.path} \n      />\n    </svg>\n  );\n};\n\nexport default useResponsiveIcon;","import React, { useState, useEffect, useCallback } from 'react';\nimport OpenLayersMap from './OpenLayersMap';\nimport { useGeoJSONCache } from '../hooks/useGeoJSONCache';\nimport { MAP_CONFIG } from '../utils/mapConfig';\nimport { ResponsiveIcon } from '../hooks/useResponsiveIcon';\nimport { useBreakpoint } from '../hooks/responsive/useBreakpoint';\nimport logger from '../utils/logger';\n\nconst MapSelector = ({ \n  dataPoints, \n  onPainelOpen, \n  painelAberto = false,\n  className = \"h-screen w-full\",\n  isMainLoading = false\n}) => {\n  // Carregar dados GeoJSON\n  const { data: terrasIndigenasData, loading: terrasLoading, error: terrasError } = useGeoJSONCache('terras_indigenas');\n  const { data: estadoSPData, loading: estadoLoading, error: estadoError } = useGeoJSONCache('SP');\n\n  // Estados para controlar visibilidade das camadas\n  const [showTerrasIndigenas, setShowTerrasIndigenas] = useState(true);\n  const [showEstadoSP, setShowEstadoSP] = useState(true);\n\n  // Estado para controlar visibilidade dos marcadores\n  const [showMarcadores, setShowMarcadores] = useState(true);\n\n  // Estados para responsividade - usando hook centralizado\n  const { isMobile } = useBreakpoint();\n  const [isMinimized, setIsMinimized] = useState(false);\n\n  // Handler para minimizar/expandir\n  const handleMinimize = useCallback(() => setIsMinimized(prev => !prev), []);\n\n  // Log de status das camadas (apenas em desenvolvimento)\n  useEffect(() => {\n    logger.debug('MapSelector: Status das camadas GeoJSON:', {\n      terrasIndigenas: {\n        loading: terrasLoading,\n        error: terrasError,\n        hasData: !!terrasIndigenasData,\n        features: terrasIndigenasData?.features?.length || 0,\n      },\n      estadoSP: {\n        loading: estadoLoading,\n        error: estadoError,\n        hasData: !!estadoSPData,\n        features: estadoSPData?.features?.length || 0,\n      }\n    });\n  }, [terrasIndigenasData, estadoSPData, terrasLoading, estadoLoading, terrasError, estadoError]);\n\n  // Reativar marcadores quando painel fecha em mobile\n  useEffect(() => {\n    if (!painelAberto && isMobile) {\n      logger.debug('MapSelector: Painel fechado em mobile, reativando marcadores');\n      setShowMarcadores(true);\n    }\n  }, [painelAberto, isMobile]);\n\n    // Componente para o cabealho do menu\n  const CabecalhoMenu = ({ onMinimize, isMobile, isMinimized }) => (\n    <div className=\"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-green-700 to-green-800 text-white\">\n      <div className=\"flex items-center gap-2\">\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3\" />\n        </svg>\n        <h3 className=\"text-sm font-semibold tracking-wide\">Camadas do Mapa</h3>\n      </div>\n      <button\n        onClick={onMinimize}\n        className=\"text-green-100 hover:text-white hover:bg-green-600 transition-all duration-200 p-1.5 rounded-md\"\n        aria-label={isMinimized ? \"Expandir\" : \"Minimizar\"}\n        type=\"button\"\n      >\n        <ResponsiveIcon \n          isMobile={isMobile} \n          isMinimized={isMinimized} \n          className=\"w-4 h-4\" \n        />\n      </button>\n    </div>\n  );\n\n  // Componente para boto de camada\n  const BotaoCamada = ({ id, label, checked, onChange, disabled = false, loading = false, error = false, total, color, subItems = null }) => (\n    <button\n      type=\"button\"\n      onClick={onChange}\n      disabled={disabled}\n      className={`group w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${\n        checked \n          ? 'bg-green-50 shadow-sm' \n          : 'bg-white hover:bg-green-50/50'\n      } ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\n    >\n      {/* Indicador de cor principal */}\n      <div className=\"flex-shrink-0\">\n        {subItems ? (\n          // Para Terras Indgenas com subcategorias\n          <div className=\"flex flex-col gap-1.5\">\n            {subItems.map((item, index) => (\n              <div key={index} className=\"flex items-center gap-2\">\n                <div \n                  className=\"w-3 h-3 rounded-full shadow-sm\" \n                  style={{ backgroundColor: item.color }}\n                />\n                <span className=\"text-xs font-medium text-gray-700\">{item.label}</span>\n              </div>\n            ))}\n          </div>\n        ) : (\n          // Para outras camadas\n          <div \n            className={`w-4 h-4 rounded-full shadow-sm ${\n              checked ? 'ring-2 ring-green-200' : ''\n            }`}\n            style={{ backgroundColor: color }}\n          />\n        )}\n      </div>\n      \n      {/* Contedo principal */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-2\">\n          <span className={`text-sm font-medium ${\n            checked ? 'text-green-900' : 'text-gray-800'\n          }`}>\n            {label}\n          </span>\n          \n          {total !== undefined && (\n            <span className={`text-xs px-2 py-0.5 rounded-full ${\n              checked \n                ? 'bg-green-100 text-green-700' \n                : 'bg-gray-100 text-gray-600'\n            }`}>\n              {total}\n            </span>\n          )}\n        </div>\n        \n        {/* Status indicators */}\n        <div className=\"flex items-center gap-2 mt-1\">\n          {loading && !isMainLoading && (\n            <div className=\"flex items-center gap-1 text-blue-600\">\n              <span className=\"text-xs\">Carregando...</span>\n            </div>\n          )}\n          \n          {error && (\n            <div className=\"flex items-center gap-1 text-red-600\">\n              <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <span className=\"text-xs\">Erro</span>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Indicador de estado */}\n      <div className=\"flex-shrink-0\">\n        {subItems ? (\n          // Indicador para Terras Indgenas\n                  <div className={`w-3 h-3 rounded-full transition-colors duration-200 ${\n          checked ? 'bg-green-600' : 'bg-gray-300'\n        }`} />\n      ) : (\n        // Indicador para outras camadas\n        <div className={`w-3 h-3 rounded-full transition-colors duration-200 ${\n          checked ? 'bg-green-600' : 'bg-gray-300'\n        }`} />\n        )}\n      </div>\n    </button>\n  );\n\n  // Definir center/zoom iniciais conforme dispositivo\n  const mapCenter = isMobile ? MAP_CONFIG.mobile.center : MAP_CONFIG.center;\n  const mapZoom = isMobile ? MAP_CONFIG.mobile.zoom : MAP_CONFIG.zoom;\n\n  logger.debug('MapSelector - Configurao do mapa:', {\n    isMobile,\n    zoom: mapZoom,\n    center: mapCenter\n  });\n\n  return (\n    <div className={className} style={{ position: 'relative' }}>\n      {/* Controles de camadas responsivos */}\n      {isMobile ? (\n        // Menu mobile - fixo na parte inferior\n        <div className=\"fixed bottom-0 left-0 right-0 z-20\">\n          <div className=\"bg-white shadow-2xl rounded-t-2xl\">\n            <CabecalhoMenu\n              onMinimize={handleMinimize}\n              isMobile={true}\n              isMinimized={isMinimized}\n            />\n            {!isMinimized && (\n              <div className=\"p-4 flex flex-col gap-3 max-h-80 overflow-y-auto\">\n                <BotaoCamada\n                  id=\"estado-sp\"\n                  label=\"Estado de So Paulo\"\n                  checked={showEstadoSP}\n                  onChange={() => setShowEstadoSP(!showEstadoSP)}\n                  loading={estadoLoading}\n                  error={estadoError}\n                  color=\"#10B981\"\n                />\n                <BotaoCamada\n                  id=\"marcadores\"\n                  label=\"Escolas Indgenas\"\n                  checked={showMarcadores}\n                  onChange={() => setShowMarcadores(!showMarcadores)}\n                  color=\"#3B82F6\"\n                />\n                <BotaoCamada\n                  id=\"terras-indigenas\"\n                  label=\"Terras Indgenas\"\n                  checked={showTerrasIndigenas}\n                  onChange={() => setShowTerrasIndigenas(!showTerrasIndigenas)}\n                  loading={terrasLoading}\n                  error={terrasError}\n                  subItems={[\n                    { label: \"Regularizadas\", color: \"#DC143C\" },\n                    { label: \"Declaradas\", color: \"#8B0000\" }\n                  ]}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        // Menu desktop - fixo no topo direito\n        <div className=\"fixed top-24 right-4 w-72 bg-white rounded-2xl shadow-2xl z-20 overflow-hidden\">\n          <CabecalhoMenu\n            onMinimize={handleMinimize}\n            isMobile={false}\n            isMinimized={isMinimized}\n          />\n          {!isMinimized && (\n            <div className=\"p-4 flex flex-col gap-3 max-h-96 overflow-y-auto\">\n              <BotaoCamada\n                id=\"estado-sp\"\n                label=\"Estado de So Paulo\"\n                checked={showEstadoSP}\n                onChange={() => setShowEstadoSP(!showEstadoSP)}\n                loading={estadoLoading}\n                error={estadoError}\n                color=\"#10B981\"\n              />\n              <BotaoCamada\n                id=\"marcadores\"\n                label=\"Escolas Indgenas\"\n                checked={showMarcadores}\n                onChange={() => setShowMarcadores(!showMarcadores)}\n                total={dataPoints?.length}\n                color=\"#3B82F6\"\n              />\n              <BotaoCamada\n                id=\"terras-indigenas\"\n                label=\"Terras Indgenas\"\n                checked={showTerrasIndigenas}\n                onChange={() => setShowTerrasIndigenas(!showTerrasIndigenas)}\n                loading={terrasLoading}\n                error={terrasError}\n                subItems={[\n                  { label: \"Regularizadas\", color: \"#DC143C\" },\n                  { label: \"Declaradas\", color: \"#8B0000\" }\n                ]}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Mapa OpenLayers unificado */}\n      <OpenLayersMap\n        dataPoints={showMarcadores ? dataPoints : []}\n        onPainelOpen={onPainelOpen}\n        className=\"h-full w-full\"\n        center={mapCenter}\n        zoom={mapZoom}\n        // Props para camadas GeoJSON\n        terrasIndigenasData={terrasIndigenasData}\n        estadoSPData={estadoSPData}\n        showTerrasIndigenas={showTerrasIndigenas}\n        showEstadoSP={showEstadoSP}\n        // Props para marcadores\n        showMarcadores={showMarcadores}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(MapSelector); ","import { useState, useEffect } from 'react';\nimport { supabase } from '../../supabaseClient';\n\nconst useDocumentosEscola = (escolaId) => {\n  const [documentos, setDocumentos] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchDocumentos = async () => {\n      console.log(' Iniciando busca de documentos para escola:', escolaId, 'tipo:', typeof escolaId);\n      \n      if (!escolaId) {\n        console.log(' Nenhum ID de escola fornecido, retornando array vazio');\n        setDocumentos([]);\n        setIsLoading(false);\n        return;\n      }\n\n      try {\n        setIsLoading(true);\n        console.log(' Consultando tabela documentos_escola...');\n        \n        // Verificar conexo com Supabase\n        const { data: authData, error: authError } = await supabase.auth.getSession();\n        console.log(' Estado da autenticao:', {\n          temSessao: !!authData?.session,\n          error: authError\n        });\n\n        // Verificar permisses da tabela\n        const { error: rlsError } = await supabase\n          .from('documentos_escola')\n          .select('count')\n          .limit(1);\n\n        console.log(' Verificao de permisses:', {\n          podeAcessar: !rlsError,\n          error: rlsError ? {\n            code: rlsError.code,\n            message: rlsError.message,\n            details: rlsError.details,\n            hint: rlsError.hint\n          } : null\n        });\n\n        // Primeiro, vamos verificar todos os documentos para debug\n        const { data: allDocs, error: allDocsError } = await supabase\n          .from('documentos_escola')\n          .select('*');\n\n        if (allDocsError) {\n          console.error(' Erro ao buscar todos os documentos:', {\n            code: allDocsError.code,\n            message: allDocsError.message,\n            details: allDocsError.details,\n            hint: allDocsError.hint\n          });\n        } else {\n          console.log(' Todos os documentos na tabela:', allDocs);\n          if (allDocs && allDocs.length > 0) {\n            console.log(' Exemplo de documento:', allDocs[0]);\n            console.log(' Tipos de escola_id encontrados:', allDocs.map(doc => ({\n              id: doc.id,\n              escola_id: doc.escola_id,\n              tipo_escola_id: typeof doc.escola_id,\n              valor_escola_id: doc.escola_id\n            })));\n          } else {\n            console.log(' Tabela est vazia ou no temos permisso para ver os dados');\n          }\n        }\n        \n        // Agora vamos buscar os documentos especficos\n        console.log(' Buscando documentos para escola_id:', escolaId);\n        const { data, error } = await supabase\n          .from('documentos_escola')\n          .select('*')\n          .eq('escola_id', escolaId.toString()) // Convertendo para string para garantir\n          .order('created_at', { ascending: false });\n\n        if (error) {\n          console.error(' Erro na consulta Supabase:', {\n            code: error.code,\n            message: error.message,\n            details: error.details,\n            hint: error.hint\n          });\n          throw error;\n        }\n\n        console.log(' Documentos encontrados:', data?.length || 0);\n        if (data?.length === 0) {\n          console.log(' Nenhum documento encontrado para a escola ID:', escolaId);\n          console.log(' Tentando buscar com diferentes formatos de escola_id...');\n          \n          // Tentando diferentes formatos do ID\n          const { data: dataAsNumber, error: errorAsNumber } = await supabase\n            .from('documentos_escola')\n            .select('*')\n            .eq('escola_id', Number(escolaId));\n            \n          const { data: dataAsString, error: errorAsString } = await supabase\n            .from('documentos_escola')\n            .select('*')\n            .eq('escola_id', String(escolaId));\n            \n          console.log('Resultados com escola_id como nmero:', {\n            count: dataAsNumber?.length || 0,\n            error: errorAsNumber\n          });\n          console.log('Resultados com escola_id como string:', {\n            count: dataAsString?.length || 0,\n            error: errorAsString\n          });\n        } else {\n          console.log(' Dados dos documentos:', data);\n        }\n        \n        setDocumentos(data || []);\n      } catch (err) {\n        console.error(' Erro ao buscar documentos:', err);\n        setError(err.message);\n      } finally {\n        setIsLoading(false);\n        // console.log removido para evitar dependncias desnecessrias\n      }\n    };\n\n    fetchDocumentos();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [escolaId]);\n\n  return { documentos, isLoading, error };\n};\n\nexport default useDocumentosEscola; ","import React, { memo, useState } from 'react';\n\n// Componente InfoCard para informaes individuais\nconst InfoCard = memo(({ label, value, icon: Icon, type = 'text', className = '' }) => {\n  if (!value && value !== 0) return null;\n\n  const renderValue = () => {\n    switch (type) {\n      case 'number':\n        return (\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-medium text-green-800 mb-1\">\n              {value.toLocaleString('pt-BR')}\n            </div>\n          </div>\n        );\n      case 'boolean':\n        return (\n          <div className={`px-3 py-1 rounded-full text-xs font-medium ${\n            value ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'\n          }`}>\n            {value ? 'Sim' : 'No'}\n          </div>\n        );\n      case 'badge':\n        return (\n          <div className=\"flex flex-wrap gap-1\">\n            {Array.isArray(value) ? value.map((item, index) => (\n              <span key={index} className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                {item}\n              </span>\n            )) : (\n              <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                {value}\n              </span>\n            )}\n          </div>\n        );\n      case 'link':\n        return (\n          <a \n            href={value} \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"text-green-700 hover:text-green-800 underline text-sm\"\n          >\n            {value}\n          </a>\n        );\n      default:\n        return (\n          <div className=\"text-sm text-gray-700 leading-relaxed\">\n            {value}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className={`rounded-lg p-4 transition-all duration-200 ${className}`}>\n      <div className=\"flex items-center gap-2 mb-2\">\n        {Icon && <Icon className=\"w-5 h-5 text-gray-700\" />}\n        <span className=\"text-xs font-medium text-gray-600 uppercase tracking-wide\">\n          {label}\n        </span>\n      </div>\n      {renderValue()}\n    </div>\n  );\n});\n\n// Componente InfoGrid para layout em grid\nconst InfoGrid = memo(({ children, columns = 'auto-fit', gap = 4, className = '' }) => {\n  const gridClasses = {\n    'auto-fit': 'grid-cols-2 lg:grid-cols-3',\n    '2': 'grid-cols-2',\n    '3': 'grid-cols-2 lg:grid-cols-3',\n    '4': 'grid-cols-2 lg:grid-cols-4'\n  };\n\n  return (\n    <div className={`grid ${gridClasses[columns]} gap-${gap} ${className} [&>*]:bg-green-100`}>\n      {children}\n    </div>\n  );\n});\n\n// Componente InfoTable para dados tabulares\nconst InfoTable = memo(({ data, className = '' }) => {\n  if (!data || data.length === 0) return null;\n\n  return (\n    <div className={`bg-green-100 rounded-lg overflow-hidden ${className}`}>\n      <table className=\"w-full\">\n        <tbody>\n          {data.map((row, index) => (\n            <tr key={index} className={index % 2 === 0 ? 'bg-white' : 'bg-green-50'}>\n              <td className=\"px-4 py-3 text-sm font-medium text-gray-700 border-r border-green-200\">\n                {row.label}\n              </td>\n              <td className=\"px-4 py-3 text-sm text-gray-600\">\n                {row.value}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n});\n\n// Componente InfoStats para estatsticas com cones\nconst InfoStats = memo(({ stats, className = '' }) => {\n  if (!stats || stats.length === 0) return null;\n\n  return (\n    <div className={`grid grid-cols-2 sm:grid-cols-4 gap-4 ${className} [&>*]:border-b [&>*]:border-gray-200 [&>*]:pb-2 [&>*]:mb-2`}>\n      {stats.map((stat, index) => (\n        <div key={index} className=\"text-center rounded-lg p-4\">\n          <div className=\"flex justify-center mb-2\">\n            {stat.icon && <stat.icon className=\"w-6 h-6 text-gray-700\" />}\n          </div>\n          <div className=\"text-3xl font-medium text-green-800 mb-1\">\n            {stat.value}\n          </div>\n          <div className=\"text-xs text-gray-600 mt-1\">\n            {stat.label}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n});\n\n// Componente InfoSection refatorado\nconst InfoSection = memo(({ \n  title, \n  icon: Icon, \n  children, \n  description,\n  defaultCollapsed = false,\n  className = '',\n  layout = 'default', // 'default', 'grid', 'table', 'stats'\n  layoutProps = {}\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState(defaultCollapsed);\n\n  const renderContent = () => {\n    if (!children) return null;\n\n    switch (layout) {\n      case 'grid':\n        return (\n          <InfoGrid {...layoutProps}>\n            {children}\n          </InfoGrid>\n        );\n      case 'table':\n        return (\n          <InfoTable data={layoutProps.data} className={layoutProps.className} />\n        );\n      case 'stats':\n        return (\n          <InfoStats stats={layoutProps.stats} className={layoutProps.className} />\n        );\n      default:\n        return (\n          <div className=\"space-y-4\">\n            {children}\n          </div>\n        );\n    }\n  };\n\n  return (\n    <section \n      className={`\n        bg-white rounded-2xl p-5 \n        shadow-sm transition-all duration-200\n        ${className}\n      `}\n    >\n      <button\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"\n          w-full flex items-center justify-between \n          text-base font-semibold\n          mb-4 text-gray-900 hover:text-gray-800 \n          transition-colors focus:outline-none\n        \"\n        aria-expanded={!isCollapsed}\n        aria-controls={`${title}-content`}\n      >\n        <div className=\"flex items-center gap-2\">\n          {Icon && <Icon className=\"w-5 h-5 text-gray-700\" />}\n          <span className=\"tracking-wide\">{title}</span>\n        </div>\n      </button>\n      \n      {!isCollapsed && (\n        <div \n          id={`${title}-content`}\n          className=\"space-y-4\"\n          role=\"region\"\n          aria-labelledby={`${title}-button`}\n        >\n          {description && (\n            <div className=\"bg-green-100 rounded-lg p-4\">\n              <p className=\"text-gray-700 text-sm leading-relaxed\">\n                {description}\n              </p>\n            </div>\n          )}\n          {renderContent()}\n        </div>\n      )}\n    </section>\n  );\n});\n\n// Exportar todos os componentes\nexport { InfoCard, InfoGrid, InfoTable, InfoStats };\nexport default InfoSection; ","import React, { memo, useState } from 'react';\nimport {\n  MapPin,\n  Globe,\n  Calendar,\n  Building,\n  Link as LinkIcon,\n  ExternalLink,\n  ChevronRight,\n  Check,\n  X,\n  Navigation,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst capitalize = (str) => {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n};\n\nconst CompactCard = ({ icon: Icon, label, value, type = 'text' }) => {\n  const renderValue = () => {\n    switch (type) {\n      case 'boolean':\n        return value ? (\n          <span className=\"flex items-center gap-1 text-green-600 text-sm\">\n            <Check className=\"w-4 h-4 flex-shrink-0\" />\n            Sim\n          </span>\n        ) : (\n          <span className=\"flex items-center gap-1 text-red-500 text-sm\">\n            <X className=\"w-4 h-4 flex-shrink-0\" />\n            No\n          </span>\n        );\n      case 'number':\n        return (\n          <div className=\"text-center w-full flex items-center justify-center h-full\">\n            <div className=\"text-3xl font-medium text-green-800\" style={{fontSize: '1.875rem', fontWeight: '500', color: '#166534'}}>\n              {value || '0'}\n            </div>\n          </div>\n        );\n      default:\n        return <span className=\"text-sm text-gray-800 break-words text-center w-full\">{value}</span>;\n    }\n  };\n\n  return (\n    <div className=\"bg-green-50 hover:bg-green-100 rounded-lg p-2 sm:p-3 transition-all duration-200 hover:shadow-sm h-[120px] flex flex-col\">\n      {/* Header com cone e label */}\n      <div className=\"flex items-center justify-center gap-1 sm:gap-2 mb-2 sm:mb-3 flex-shrink-0 h-[40px]\">\n        <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 flex-shrink-0\" />\n        <span className=\"text-xs text-gray-600 font-medium leading-tight\">{label}</span>\n      </div>\n      {/* Contedo do valor */}\n      <div className=\"flex-1 flex items-center justify-center\">\n        {renderValue()}\n      </div>\n    </div>\n  );\n};\n\n// const InfoBlock = ({ icon: Icon, label, value }) => ( // Removido - no utilizado\n//   <div className=\"flex items-center gap-2 bg-green-100 p-1.5 rounded-md text-xs\">\n//     <Icon className=\"w-5 h-5 text-green-600\" />\n//     <span className=\"text-gray-700 font-medium\">{label}:</span>\n//     <span className=\"font-semibold text-green-800\">{capitalize(value)}</span>\n//   </div>\n// );\n\nconst AddressDetails = ({ escola }) => {\n  const hasDetailedAddress = escola.logradouro || escola.numero || escola.bairro || escola.cep;\n  \n  if (!hasDetailedAddress) {\n    return (\n      <div className=\"mt-2 p-2 bg-green-100 rounded-md\">\n        <p className=\"text-xs text-gray-700 leading-snug\">\n          {capitalize(escola.endereco)}\n        </p>\n      </div>\n    );\n  }\n\n  const addressFields = [\n    { field: 'logradouro', label: 'Logradouro' },\n    { field: 'numero', label: 'Nmero' },\n    { field: 'complemento', label: 'Complemento' },\n    { field: 'bairro', label: 'Bairro' },\n  ];\n\n  return (\n    <div className=\"mt-2 space-y-1\">\n      {addressFields.map(({ field, label }) => \n        escola[field] && (\n          <div key={field} className=\"flex items-start gap-2 p-1.5 bg-green-100 rounded-md\">\n            <MapPin className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" />\n            <div className=\"flex-1\">\n              <div className=\"text-xs font-medium text-gray-700 mb-0.5\">{label}</div>\n              <div className=\"text-xs text-gray-800 leading-snug\">{escola[field]}</div>\n            </div>\n          </div>\n        )\n      )}\n      \n      {(escola.cep || escola.estado) && (\n        <div className=\"flex items-start gap-2 p-1.5 bg-green-100 rounded-md\">\n          <MapPin className=\"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0\" />\n          <div className=\"flex-1\">\n            <div className=\"text-xs font-medium text-gray-700 mb-0.5\">Localizao</div>\n            <div className=\"text-xs text-gray-800 leading-snug\">\n              {[escola.municipio, escola.estado, escola.cep].filter(Boolean).join(', ')}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst MapButton = ({ escola }) => {\n  const hasCoordinates = escola.Latitude && escola.Longitude;\n  \n  if (!hasCoordinates) return null;\n\n  const openMap = () => {\n    window.open(`https://www.google.com/maps?q=${escola.Latitude},${escola.Longitude}`, '_blank');\n  };\n\n  return (\n    <button\n      onClick={openMap}\n      className=\"mt-2 w-full flex items-center justify-center gap-2 p-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors text-xs font-medium\"\n    >\n      <Navigation className=\"w-5 h-5\" />\n      Ver no Google Maps\n    </button>\n  );\n};\n\nconst SocialLinks = ({ links, expanded, onToggle }) => {\n  const socialLinks = (links || '').split(',').map(url => url.trim()).filter(Boolean);\n  \n  if (socialLinks.length === 0) return null;\n\n  return (\n    <div className=\"bg-green-100 rounded-md\">\n      <button\n        onClick={() => onToggle('social')}\n        className=\"w-full flex justify-between items-center p-1.5 hover:bg-green-200 text-xs\"\n        aria-expanded={expanded.social}\n      >\n        <span className=\"flex items-center gap-2 text-gray-700 font-medium\">\n          <Globe className=\"w-5 h-5 text-blue-600\" />\n          Redes sociais ({socialLinks.length})\n        </span>\n        <ChevronRight\n          className={`w-5 h-5 text-gray-400 transition-transform ${\n            expanded.social ? 'rotate-90' : ''\n          }`}\n        />\n      </button>\n      \n      {expanded.social && (\n        <div className=\"px-2 pb-2 border-t border-green-200 bg-white\">\n          <div className=\"mt-1 space-y-1\">\n            {socialLinks.map((link, index) => (\n              <a\n                key={index}\n                href={link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-1.5 p-1.5 bg-green-100 rounded-md hover:bg-green-200 group text-xs\"\n              >\n                <LinkIcon className=\"w-5 h-5 text-blue-600\" />\n                <span className=\"truncate flex-1 text-gray-700\">{link}</span>\n                <ExternalLink className=\"w-5 h-5 text-gray-400 group-hover:text-blue-600\" />\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst BasicInfo = memo(({ escola }) => {\n  const [expanded, setExpanded] = useState({});\n\n  if (!escola) return null;\n\n  const toggle = (key) => {\n    setExpanded(prev => ({ ...prev, [key]: !prev[key] }));\n  };\n\n  const basicInfoCards = [\n    {\n      icon: Building,\n      label: 'Municpio',\n      value: capitalize(escola.municipio),\n    },\n    {\n      icon: Calendar,\n      label: 'Fundao',\n      value: escola.ano_criacao,\n      type: 'number',\n    },\n    {\n      icon: Globe,\n      label: 'Redes sociais',\n      value: escola.usa_redes_sociais,\n      type: 'boolean',\n    },\n  ].filter(item => item.value);\n\n  return (\n    <>\n      {/* Povos Indgenas em destaque antes de tudo */}\n      {escola.povos_indigenas && (\n        <div className=\"mb-4\">\n          <div className=\"text-lg sm:text-xl font-bold text-green-800\">\n            Povos Indgenas: <span className=\"font-semibold text-black\">{escola.povos_indigenas}</span>\n          </div>\n        </div>\n      )}\n      <InfoSection title=\"Localizao\" icon={MapPin}>\n        {/* Cards informativos bsicos - Layout otimizado */}\n        <div className=\"grid grid-cols-3 lg:grid-cols-3 gap-0.5 sm:gap-1 mb-4 items-stretch\">\n          {basicInfoCards.map((item, index) => (\n            <CompactCard key={index} {...item} />\n          ))}\n          {/* Diretoria de ensino como card */}\n          {escola.diretoria_ensino && (\n            <CompactCard \n              icon={Building}\n              label=\"Diretoria de ensino\"\n              value={escola.diretoria_ensino}\n            />\n          )}\n        </div>\n\n        <div className=\"space-y-1.5\">\n\n          {/* Gaveta do endereo */}\n          {escola.endereco && (\n            <div className=\"bg-green-100 rounded-md\">\n              <button\n                onClick={() => toggle('endereco')}\n                className=\"w-full flex justify-between items-center p-1.5 hover:bg-green-200 text-xs\"\n                aria-expanded={expanded.endereco}\n              >\n                <span className=\"flex items-center gap-2 text-gray-700 font-medium\">\n                  <Building className=\"w-5 h-5\" />\n                  Endereo\n                </span>\n                <ChevronRight\n                  className={`w-5 h-5 text-gray-400 transition-transform ${\n                    expanded.endereco ? 'rotate-90' : ''\n                  }`}\n                />\n              </button>\n              {expanded.endereco && (\n                <div className=\"px-2 pb-2 border-t border-green-200 bg-white\">\n                  <AddressDetails escola={escola} />\n                  <MapButton escola={escola} />\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Redes sociais */}\n          <SocialLinks \n            links={escola.links_redes_sociais}\n            expanded={expanded}\n            onToggle={toggle}\n          />\n        </div>\n      </InfoSection>\n    </>\n  );\n});\n\nexport default BasicInfo;","import React from 'react';\n\nconst HistoriaEscolaContent = ({ htmlContent }) => (\n  <div\n    className=\"historia-escola-content prose prose-sm sm:prose-base md:prose-lg lg:prose-xl max-w-none\n      prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n      prose-img:rounded-xl prose-img:shadow-lg\n      prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n      prose-strong:text-green-800 prose-em:text-green-700\n      prose-blockquote:border-l-green-300 prose-blockquote:bg-green-50 prose-blockquote:pl-4 prose-blockquote:py-2 prose-blockquote:rounded-r-lg\n      prose-ul:text-black prose-ol:text-black prose-li:text-black\n      prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm\"\n    dangerouslySetInnerHTML={{ __html: htmlContent }}\n  />\n);\n\nexport default HistoriaEscolaContent;\n","import React from 'react';\n\nconst HistoriaEscolaHeader = () => (\n  <header className=\"mb-6 sm:mb-8 max-w-4xl mx-auto w-full\">\n    <div className=\"flex items-center gap-3 mb-3 sm:mb-4\">\n      <span className=\"bg-green-200 rounded-full flex items-center justify-center w-16 h-16 sm:w-28 sm:h-28\">\n        <img \n          src={`${process.env.PUBLIC_URL}/onca.svg`} \n          alt=\"cone de ona\" \n          className=\"w-18 h-18 sm:w-36 sm:h-36\" \n          style={{ \n            filter: 'none', \n            borderRadius: '0', \n            boxShadow: 'none', \n            margin: '0',\n            padding: '0',\n            border: 'none',\n            outline: 'none',\n            transform: 'translateY(17px)'\n          }}\n          aria-hidden=\"true\"\n        />\n      </span>\n      <h2 className=\"text-xl sm:text-2xl font-bold text-black m-0\">\n        Histria da Escola\n      </h2>\n    </div>\n    <div className=\"h-1 w-20 sm:w-24 bg-green-200 rounded-full\" />\n  </header>\n);\n\nexport default HistoriaEscolaHeader;\n","import React, { memo } from 'react';\nimport HistoriaEscolaContent from './HistoriaEscolaContent';\nimport HistoriaEscolaHeader from './HistoriaEscolaHeader';\nimport './HistoriaEscola.css';\n\nconst HistoriaEscola = memo(({ escola, refreshKey = 0 }) => {\n  if (!escola?.historia_da_escola) return null;\n\n  // Usar o HTML diretamente, igual  histria dos professores\n  const htmlContent = escola.historia_da_escola;\n\n  return (\n    <div className=\"mt-8 mb-12 flex flex-col items-center\">\n      <HistoriaEscolaHeader />\n\n      {/* Card com contedo centralizado */}\n      <article\n        className=\"\n          px-4 sm:px-6 md:px-8 py-6\n          bg-white rounded-2xl shadow-lg\n          prose prose-sm sm:prose-base md:prose-lg lg:prose-xl\n          prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n          prose-img:rounded-xl prose-img:shadow-lg\n          prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n          max-w-4xl mx-auto w-full\n        \"\n      >\n        <HistoriaEscolaContent htmlContent={htmlContent} />\n\n        \n      </article>\n    </div>\n  );\n});\n\nexport default HistoriaEscola; ","import React, { memo } from 'react';\n\nconst BooleanValue = memo(({ value }) => {\n  if (value === undefined || value === null) return null;\n\n  return (\n    <span className={`font-medium text-center w-full block ${value ? 'text-green-600' : 'text-neutral-400'}`}>\n      {value ? 'Sim' : 'No'}\n    </span>\n  );\n});\n\nexport default BooleanValue; ","import React, { memo } from 'react';\nimport { Sparkles, BookOpen, Users, MessageCircle, Clock } from 'lucide-react';\nimport InfoSection from '../InfoSection';\nimport BooleanValue from '../../components/BooleanValue';\n\n// Funo utilitria para transformar o texto em lista\nfunction parseModalidadeEnsino(text) {\n  if (!text || typeof text !== 'string') return [];\n  // Divide pelo trao longo (, U+2013) e remove espaos extras\n  return text\n    .split('')\n    .map(item => item.trim())\n    .filter(Boolean);\n}\n\n// Componente de lista expansvel\nconst ExpandableList = ({ items, maxVisible = 3 }) => {\n  if (!items || items.length === 0) return null;\n\n  return (\n    <div className=\"-mt-1\">\n      <ul className=\"list-none text-gray-800 text-xs pl-0 ml-0\">\n        {items.map((item, idx) => (\n          <li key={idx} className=\"leading-tight m-0 p-0 pl-0 ml-0 flex items-start\">\n            <span className=\"mr-1 text-green-700 select-none\" style={{minWidth: '1em', display: 'inline-block'}}></span>\n            <span>{item}</span>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\n// MiniCard padronizado\nconst MiniCard = ({ icon: Icon, label, value, type = 'text' }) => {\n  const renderValue = () => {\n    if (type === 'number') {\n      return (\n        <div className=\"text-center w-full flex items-center justify-center h-full\">\n          <div className=\"text-3xl font-medium text-green-800\" style={{fontSize: '1.875rem', fontWeight: '500', color: '#166534'}}>\n            {value || '0'}\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"text-sm text-gray-800 font-medium break-words text-center w-full\">{value}</div>\n    );\n  };\n\n  return (\n    <div className=\"bg-green-50 hover:bg-green-100 rounded-lg p-2 sm:p-3 transition-all duration-200 hover:shadow-sm h-[120px] flex flex-col\">\n      {/* Header com cone e label */}\n      <div className=\"flex items-center justify-center gap-1 sm:gap-2 mb-2 sm:mb-3 flex-shrink-0 h-[40px]\">\n        <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 flex-shrink-0\" />\n        <span className=\"text-xs text-gray-600 font-medium leading-tight\">{label}</span>\n      </div>\n      {/* Contedo do valor */}\n      <div className=\"flex-1 flex items-center justify-center\">\n        {renderValue()}\n      </div>\n    </div>\n  );\n};\n\nconst Modalidades = memo(({ escola }) => {\n  if (!escola) return null;\n\n  // Cards principais de Modalidades\n  const turnosValue = escola.turnos_funcionamento || escola['turnos_funcionamento'] || '';\n  const modalidadeList = parseModalidadeEnsino(escola.modalidade_ensino);\n  \n\n  // Outros cards para o grid\n  const gridItems = [\n    turnosValue && {\n      icon: Clock,\n      label: 'Turnos de Funcionamento',\n      value: turnosValue,\n    },\n    {\n      icon: Users,\n      label: 'Nmero de Alunos',\n      value: escola.numero_alunos || '0',\n      type: 'number',\n    },\n    {\n      icon: MessageCircle,\n      label: 'Lnguas Faladas',\n      value: escola.linguas_faladas,\n    },\n  ].filter(Boolean);\n\n  // Cards de Materiais Pedaggicos\n  const materiaisItems = [\n    {\n      icon: BookOpen,\n      label: 'Material Pedaggico No Indgena',\n      value: <BooleanValue value={escola.material_nao_indigena} />,\n    },\n    {\n      icon: BookOpen,\n      label: 'Material Pedaggico Indgena',\n      value: <BooleanValue value={escola.material_indigena} />,\n    },\n    {\n      icon: BookOpen,\n      label: 'PPP Prprio',\n      value: <BooleanValue value={escola.ppp_proprio} />,\n    },\n    {\n      icon: BookOpen,\n      label: 'PPP com Comunidade',\n      value: <BooleanValue value={escola.ppp_comunidade} />,\n    },\n  ];\n\n  return (\n    <>\n      <InfoSection>\n        {/* Modalidade de Ensino em linha inteira */}\n        <div className=\"mb-4 bg-green-50 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3 mb-2\">\n            <Sparkles className=\"w-5 h-5 text-gray-700 mt-0.5 flex-shrink-0\" />\n            <span className=\"text-sm font-medium text-gray-700\">Modalidade de Ensino</span>\n          </div>\n          <div className=\"ml-8\">\n            <ExpandableList items={modalidadeList} maxVisible={3} />\n          </div>\n        </div>\n        \n        {/* Grid com os outros cards */}\n        <div className=\"grid grid-cols-3 lg:grid-cols-3 gap-0.5 sm:gap-1 mt-1 items-stretch\">\n          {gridItems.map((item, idx) => (\n            <MiniCard key={idx} icon={item.icon} label={item.label} value={item.value} type={item.type} />\n          ))}\n        </div>\n      </InfoSection>\n      \n      <InfoSection \n        title=\"Materiais Pedaggicos\" \n        icon={BookOpen}\n        description=\"Diferenciados e no diferenciados, produzidos dentro e fora da comunidade.\"\n      >\n        {/* Primeiro card em linha inteira */}\n        <div className=\"mb-3\">\n          <MiniCard \n            icon={materiaisItems[0].icon} \n            label={materiaisItems[0].label} \n            value={materiaisItems[0].value} \n          />\n        </div>\n        \n        {/* Cards restantes - agrupados por mltiplos de 3 */}\n        {materiaisItems.length > 1 && (\n          <div className=\"space-y-3\">\n            {(() => {\n              const remainingCards = materiaisItems.slice(1);\n              const groups = [];\n              \n              // Agrupar em mltiplos de 3\n              for (let i = 0; i < remainingCards.length; i += 3) {\n                groups.push(remainingCards.slice(i, i + 3));\n              }\n              \n              return groups.map((group, groupIdx) => (\n                <div \n                  key={groupIdx}\n                  className={`grid gap-0.5 sm:gap-1 items-stretch ${\n                    group.length === 3 \n                      ? 'grid-cols-3' \n                      : group.length === 2 \n                        ? 'grid-cols-2' \n                        : 'grid-cols-1'\n                  }`}\n                >\n                  {group.map((item, idx) => (\n                    <MiniCard \n                      key={`${groupIdx}-${idx}`} \n                      icon={item.icon} \n                      label={item.label} \n                      value={item.value} \n                    />\n                  ))}\n                </div>\n              ));\n            })()}\n          </div>\n        )}\n      </InfoSection>\n    </>\n  );\n});\n\nexport default Modalidades; ","import React, { memo } from 'react';\nimport {\n  Home,\n  Droplet,\n  Trash2,\n  Wifi,\n  Monitor,\n  MapPin,\n  Utensils,\n  Apple,\n  ChefHat,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\nimport BooleanValue from '../BooleanValue';\n\nconst MiniCard = ({ icon: Icon, label, value }) => (\n  <div className=\"bg-green-50 hover:bg-green-100 rounded-lg p-2 sm:p-3 transition-all duration-200 hover:shadow-sm h-[120px] flex flex-col\">\n    {/* Header com cone e label */}\n    <div className=\"flex items-center justify-center gap-1 sm:gap-2 mb-2 sm:mb-3 flex-shrink-0 h-[40px]\">\n      <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 flex-shrink-0\" />\n      <span className=\"text-xs text-gray-600 font-medium leading-tight\">{label}</span>\n    </div>\n    {/* Contedo do valor */}\n    <div className=\"flex-1 flex items-center justify-center\">\n      <div className=\"text-sm text-gray-800 font-medium break-words text-center w-full\">{value}</div>\n    </div>\n  </div>\n);\n\nconst Infraestrutura = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const items = [\n    {\n      icon: Droplet,\n      label: 'Acesso  gua',\n      value: escola.acesso_agua,\n    },\n    {\n      icon: Trash2,\n      label: 'Coleta de Lixo',\n      value: escola.coleta_lixo,\n    },\n    {\n      icon: Wifi,\n      label: 'Acesso  Internet',\n      value: <BooleanValue value={escola.acesso_internet} />,\n    },\n    {\n      icon: Monitor,\n      label: 'Equipamentos Tecnolgicos',\n      value: escola.equipamentos,\n    },\n    {\n      icon: MapPin,\n      label: 'Modo de Acesso  Escola',\n      value: escola.modo_acesso,\n    },\n    {\n      icon: Utensils,\n      label: 'Cozinha',\n      value: <BooleanValue value={escola.cozinha} />,\n    },\n    {\n      icon: Apple,\n      label: 'Merenda Escolar',\n      value: <BooleanValue value={escola.merenda_escolar} />,\n    },\n    {\n      icon: ChefHat,\n      label: 'Merenda Diferenciada',\n      value: <BooleanValue value={escola.diferenciada} />,\n    },\n  ];\n\n  return (\n    <InfoSection title=\"Infraestrutura\" icon={Home}>\n      {escola.espaco_escolar && (\n        <div className=\"p-2 text-sm text-gray-800 border-b border-gray-200 whitespace-pre-wrap\">\n          {escola.espaco_escolar}\n        </div>\n      )}\n      <div className=\"grid grid-cols-3 lg:grid-cols-3 gap-0.5 sm:gap-1 mt-3 items-stretch\">\n        {items.map((item, idx) => (\n          <MiniCard\n            key={idx}\n            icon={item.icon}\n            label={item.label}\n            value={item.value}\n          />\n        ))}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default Infraestrutura;\n","import React, { memo } from 'react';\nimport {\n  UsersRound,\n  Star,\n  User,\n  UserCheck,\n  UserMinus,\n  MessageCircle,\n  NotebookPen,\n  Check,\n  X,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst MiniCard = ({ icon: Icon, label, value, description, type = 'text' }) => {\n  const renderValue = () => {\n    if (type === 'number') {\n      return (\n        <div className=\"text-center w-full flex items-center justify-center h-full\">\n          <div className=\"text-3xl font-medium text-green-800\" style={{fontSize: '1.875rem', fontWeight: '500', color: '#166534'}}>\n            {value || '0'}\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"text-sm text-gray-800 font-medium mb-2 break-words text-center w-full\">{value}</div>\n    );\n  };\n\n  return (\n    <div className=\"bg-green-50 hover:bg-green-100 rounded-lg p-2 sm:p-3 transition-all duration-200 hover:shadow-sm h-[120px] flex flex-col\">\n      {/* Header com cone e label */}\n      <div className=\"flex items-center justify-center gap-1 sm:gap-2 mb-2 sm:mb-3 flex-shrink-0 h-[40px]\">\n        <Icon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 flex-shrink-0\" />\n        <span className=\"text-xs text-gray-600 font-medium leading-tight\">{label}</span>\n      </div>\n      {/* Contedo do valor */}\n      <div className=\"flex-1 flex items-center justify-center\">\n        {renderValue()}\n      </div>\n      {description && (\n        <div className=\"text-xs text-gray-600 whitespace-pre-line leading-relaxed break-words mt-2\">\n          {description}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// const formatarNomeProfessor = (nome) => { // Removido - no utilizado\n//   if (!nome) return nome;\n\n//   const padroesIndigenas = [\n//     /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+\\(([^)]+)\\)/,\n//     /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+-\\s+([^)]+)/,\n//     /^([A-Z][a-z]+)\\s+([A-Z][a-z]+)\\s+ou\\s+([^)]+)/,\n//   ];\n\n//   for (const padrao of padroesIndigenas) {\n//     const match = nome.match(padrao);\n//     if (match) {\n//       const nomeIndigena = `${match[1]} ${match[2]}`;\n//       const nomePortugues = match[3];\n//       return `${nomeIndigena} (${nomePortugues})`;\n//     }\n//   }\n\n//   return nome.includes('(') && nome.includes(')') ? nome : nome;\n// };\n\nconst formatarFormacaoProfessores = (formacao) => {\n  if (!formacao) return null;\n\n  const [status, ...resto] = formacao.split('/');\n  const descricao = resto.join('/').trim();\n\n  return {\n    status: status.trim().toLowerCase() === 'sim' ? 'Sim' : status.trim(),\n    descricao: descricao || null,\n  };\n};\n\nconst formatarFormacaoContinuada = (valor) => {\n  if (!valor) return null;\n\n  const [status, ...resto] = valor.split('/');\n  const descricao = resto.join('/').trim();\n\n  return {\n    status: status.trim().toLowerCase() === 'sim' ? 'Sim' : status.trim(),\n    descricao: descricao || null,\n  };\n};\n\nconst renderBooleanStatus = (valor) => {\n  const normalizado = String(valor).trim().toLowerCase();\n  if (normalizado === 'sim') {\n    return (\n      <div className=\"flex items-center gap-1 text-green-700\">\n        <Check className=\"w-5 h-5\" />\n        Sim\n      </div>\n    );\n  } else if (normalizado === 'no' || normalizado === 'nao') {\n    return (\n      <div className=\"flex items-center gap-1 text-gray-500\">\n        <X className=\"w-5 h-5\" />\n        No\n      </div>\n    );\n  }\n  return valor;\n};\n\nconst GestaoProfessores = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const formacao = formatarFormacaoProfessores(escola.formacao_professores);\n  const continuada = formatarFormacaoContinuada(escola.formacao_continuada);\n\n  return (\n    <InfoSection title=\"Gestores\" icon={UsersRound}>\n      <div className=\"space-y-4 mt-1\">\n        {/* Cards em grid de 2 colunas em mobile, 3 em desktop */}\n        <div className=\"grid grid-cols-3 lg:grid-cols-3 gap-0.5 sm:gap-1 items-stretch\">\n          <MiniCard\n            icon={UserCheck}\n            label=\"Professores Indgenas\"\n            value={escola.professores_indigenas}\n            type=\"number\"\n          />\n          <MiniCard\n            icon={UserMinus}\n            label=\"Professores No Indgenas\"\n            value={escola.professores_nao_indigenas}\n            type=\"number\"\n          />\n          <MiniCard\n            icon={MessageCircle}\n            label=\"Professores que falam lngua indgena\"\n            value={renderBooleanStatus(escola.professores_falam_lingua)}\n          />\n        </div>\n        \n        {/* Card de Formao em linha inteira */}\n        {formacao?.status && (\n          <MiniCard\n            icon={Star}\n            label=\"Formao dos Professores\"\n            value={renderBooleanStatus(formacao.status)}\n            description={formacao.descricao}\n          />\n        )}\n      </div>\n\n      <div className=\"space-y-4 mt-4\">\n        <MiniCard\n          icon={User}\n          label=\"Gesto/Nome\"\n          value={escola.gestao}\n        />\n        <MiniCard\n          icon={UsersRound}\n          label=\"Outros Funcionrios\"\n          value={escola.outros_funcionarios}\n        />\n        {continuada?.status && (\n          <MiniCard\n            icon={NotebookPen}\n            label=\"Visitas de Supervisores e Formao Continuada\"\n            value={renderBooleanStatus(continuada.status)}\n            description={continuada.descricao}\n          />\n        )}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default GestaoProfessores;\n","import React, { memo } from 'react';\nimport {\n  Target,\n  BookOpen,\n  GraduationCap,\n  Users,\n  Heart,\n  X,\n} from 'lucide-react';\nimport InfoSection from '../InfoSection';\n\nconst ProjectCard = ({ icon: Icon, label, value }) => {\n  const isNegative = value?.trim().toLowerCase() === 'no';\n\n  return (\n    <div className=\"bg-green-50 hover:bg-green-100 rounded-lg p-5 transition-all duration-200 hover:shadow-sm min-h-[120px] flex flex-col\">\n      <div className=\"flex items-start gap-4 flex-1\">\n        <Icon className=\"w-5 h-5 text-gray-700 mt-0.5 flex-shrink-0\" />\n        <div className=\"flex-1 min-w-0 flex flex-col space-y-4\">\n          <div className=\"text-sm font-medium text-gray-700 flex-shrink-0\">{label}</div>\n          <div className=\"flex-1 flex items-start\">\n            {isNegative ? (\n              <div className=\"text-sm text-gray-500 flex items-center gap-1\">\n                <X className=\"w-4 h-4 text-gray-400 flex-shrink-0\" />\n                No\n              </div>\n            ) : (\n              <div className=\"text-sm text-gray-800 leading-relaxed break-words\">\n                {value}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ProjetosParcerias = memo(({ escola }) => {\n  if (!escola) return null;\n\n  const projectsData = [\n    {\n      field: 'projetos_andamento',\n      icon: BookOpen,\n      label: 'Projetos em andamento',\n    },\n    {\n      field: 'parcerias_universidades',\n      icon: GraduationCap,\n      label: 'Parcerias com universidades',\n    },\n    {\n      field: 'acoes_ongs',\n      icon: Users,\n      label: 'Aes com ONGs ou coletivos',\n    },\n    {\n      field: 'desejos_comunidade',\n      icon: Heart,\n      label: 'Desejos da comunidade para a escola',\n    },\n    {\n      field: 'parcerias_municipio',\n      icon: Target,\n      label: 'Parcerias com o municpio',\n    },\n  ];\n\n  const availableProjects = projectsData.filter(\n    project => escola[project.field] && escola[project.field].trim()\n  );\n\n  if (availableProjects.length === 0) return null;\n\n  return (\n    <InfoSection title=\"Projetos e Parcerias\" icon={Target}>\n      <div className=\"grid grid-cols-1 gap-6 items-stretch\">\n        {availableProjects.map((project) => (\n          <ProjectCard\n            key={project.field}\n            icon={project.icon}\n            label={project.label}\n            value={escola[project.field]}\n          />\n        ))}\n      </div>\n    </InfoSection>\n  );\n});\n\nexport default ProjetosParcerias;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { X, ZoomIn, ZoomOut, RotateCw, ChevronLeft, ChevronRight } from 'lucide-react';\n\nconst ReusableImageZoom = ({ \n  images = [], \n  currentImageIndex = 0, \n  isOpen = false, \n  onClose,\n  onImageChange,\n  showNavigation = true,\n  showControls = true,\n  showCounter = true,\n  showCaption = true\n}) => {\n  const [zoomLevel, setZoomLevel] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [currentIndex, setCurrentIndex] = useState(currentImageIndex);\n\n  // Reset zoom e rotao quando a imagem muda\n  useEffect(() => {\n    setZoomLevel(1);\n    setRotation(0);\n    setCurrentIndex(currentImageIndex);\n  }, [currentImageIndex, isOpen]);\n\n  const currentImage = images[currentIndex];\n\n  const fecharZoom = useCallback(() => {\n    setZoomLevel(1);\n    setRotation(0);\n    onClose();\n  }, [onClose]);\n\n  const resetImage = () => {\n    setZoomLevel(1);\n    setRotation(0);\n  };\n\n  const nextImage = useCallback(() => {\n    if (currentIndex < images.length - 1) {\n      const newIndex = currentIndex + 1;\n      setCurrentIndex(newIndex);\n      if (onImageChange) onImageChange(newIndex);\n    }\n  }, [currentIndex, images.length, onImageChange]);\n\n  const prevImage = useCallback(() => {\n    if (currentIndex > 0) {\n      const newIndex = currentIndex - 1;\n      setCurrentIndex(newIndex);\n      if (onImageChange) onImageChange(newIndex);\n    }\n  }, [currentIndex, onImageChange]);\n\n  // Fecha modal com tecla ESC\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') fecharZoom();\n    };\n    \n    if (isOpen) {\n      window.addEventListener('keydown', handleEsc);\n      return () => window.removeEventListener('keydown', handleEsc);\n    }\n  }, [isOpen, fecharZoom]);\n\n  // Navegao com teclado\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (!isOpen) return;\n      \n      switch (e.key) {\n        case 'ArrowLeft':\n          e.preventDefault();\n          prevImage();\n          break;\n        case 'ArrowRight':\n          e.preventDefault();\n          nextImage();\n          break;\n        case 'r':\n        case 'R':\n          e.preventDefault();\n          setRotation(prev => (prev + 90) % 360);\n          break;\n        case '+':\n        case '=':\n          e.preventDefault();\n          setZoomLevel(prev => Math.min(prev + 0.25, 3));\n          break;\n        case '-':\n          e.preventDefault();\n          setZoomLevel(prev => Math.max(prev - 0.25, 0.5));\n          break;\n        case '0':\n          e.preventDefault();\n          resetImage();\n          break;\n        default:\n          break;\n      }\n    };\n\n    if (isOpen) {\n      window.addEventListener('keydown', handleKeyDown);\n      return () => window.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [isOpen, currentIndex, images.length, nextImage, prevImage]);\n\n  if (!isOpen || !currentImage) return null;\n\n  return (\n    <div\n      className=\"image-zoom-modal\"\n      onClick={fecharZoom}\n    >\n      {/* Boto Fechar */}\n      <button\n        onClick={fecharZoom}\n        className=\"image-zoom-close\"\n        aria-label=\"Fechar\"\n      >\n        <X size={24} />\n      </button>\n\n      {/* Controles de Zoom */}\n      {showControls && (\n        <div className=\"image-zoom-controls\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setZoomLevel(prev => Math.min(prev + 0.25, 3));\n            }}\n            className=\"image-zoom-control-button\"\n            aria-label=\"Aumentar zoom\"\n          >\n            <ZoomIn size={20} />\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setZoomLevel(prev => Math.max(prev - 0.25, 0.5));\n            }}\n            className=\"image-zoom-control-button\"\n            aria-label=\"Diminuir zoom\"\n          >\n            <ZoomOut size={20} />\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setRotation(prev => (prev + 90) % 360);\n            }}\n            className=\"image-zoom-control-button\"\n            aria-label=\"Rotacionar\"\n          >\n            <RotateCw size={20} />\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              resetImage();\n            }}\n            className=\"image-zoom-control-button text-xs px-3\"\n            aria-label=\"Resetar\"\n          >\n            Reset\n          </button>\n        </div>\n      )}\n\n      {/* Navegao entre imagens */}\n      {showNavigation && images.length > 1 && (\n        <>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              prevImage();\n            }}\n            className=\"image-zoom-navigation prev\"\n            disabled={currentIndex === 0}\n            aria-label=\"Imagem anterior\"\n          >\n            <ChevronLeft size={24} />\n          </button>\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              nextImage();\n            }}\n            className=\"image-zoom-navigation next\"\n            disabled={currentIndex === images.length - 1}\n            aria-label=\"Prxima imagem\"\n          >\n            <ChevronRight size={24} />\n          </button>\n        </>\n      )}\n\n      {/* Contador de imagens */}\n      {showCounter && images.length > 1 && (\n        <div className=\"image-zoom-counter\">\n          {currentIndex + 1} / {images.length}\n        </div>\n      )}\n\n      {/* Container da imagem */}\n      <div className=\"image-zoom-container\">\n        <div className=\"image-zoom-image-wrapper\">\n          <img\n            src={currentImage.url || currentImage.publicURL || currentImage.imagem_public_url}\n            alt={currentImage.descricao || currentImage.descricao_imagem || 'Imagem'}\n            className=\"image-zoom-image\"\n            style={{\n              transform: `scale(${zoomLevel}) rotate(${rotation}deg)`,\n              cursor: 'grab'\n            }}\n            onClick={(e) => e.stopPropagation()}\n            onMouseDown={(e) => {\n              e.preventDefault();\n              // Implementar drag se necessrio\n            }}\n          />\n        </div>\n\n        {/* Legenda */}\n        {showCaption && (currentImage.descricao || currentImage.descricao_imagem) && (\n          <div className=\"image-zoom-caption\">\n            <h3 className=\"font-semibold text-gray-900 mb-2\">\n              {currentImage.descricao || currentImage.descricao_imagem}\n            </h3>\n            \n            {/* Informaes adicionais */}\n            <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-2\">\n              {currentImage.categoria && (\n                <span className=\"capitalize bg-gray-100 px-2 py-1 rounded text-gray-800\">\n                  {currentImage.categoria}\n                </span>\n              )}\n              {currentImage.autor && (\n                <span>Fotgrafo: {currentImage.autor}</span>\n              )}\n              {currentImage.dataFoto && (\n                <span>Data: {new Date(currentImage.dataFoto).toLocaleDateString('pt-BR')}</span>\n              )}\n            </div>\n            \n            {/* Descrio detalhada */}\n            {currentImage.descricaoDetalhada && (\n              <p className=\"text-gray-600 leading-relaxed\">\n                {currentImage.descricaoDetalhada}\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Instrues de teclado */}\n      <div className=\"image-zoom-instructions\">\n        <div className=\"text-xs text-gray-400 space-y-1\">\n          <div>ESC: Fechar |  : Navegar | R: Rotacionar</div>\n          <div>+ -: Zoom | 0: Reset</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nReusableImageZoom.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape({\n    url: PropTypes.string,\n    publicURL: PropTypes.string,\n    imagem_public_url: PropTypes.string,\n    descricao: PropTypes.string,\n    descricao_imagem: PropTypes.string,\n    categoria: PropTypes.string,\n    autor: PropTypes.string,\n    dataFoto: PropTypes.string,\n    descricaoDetalhada: PropTypes.string\n  })).isRequired,\n  currentImageIndex: PropTypes.number,\n  isOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onImageChange: PropTypes.func,\n  showNavigation: PropTypes.bool,\n  showControls: PropTypes.bool,\n  showCounter: PropTypes.bool,\n  showCaption: PropTypes.bool\n};\n\nexport default ReusableImageZoom;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Componente de imagem otimizada com preload\n * Mostra placeholder enquanto carrega e transio suave quando pronta\n */\nconst OptimizedImage = ({ \n  src, \n  alt, \n  className = '', \n  isPreloaded = false,\n  placeholder = null,\n  onLoad,\n  onError,\n  ...props \n}) => {\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const [showImage, setShowImage] = useState(false);\n\n  useEffect(() => {\n    // Se a imagem foi preloadada, mostrar imediatamente\n    if (isPreloaded) {\n      setImageLoaded(true);\n      setShowImage(true);\n    }\n  }, [isPreloaded]);\n\n  const handleImageLoad = () => {\n    setImageLoaded(true);\n    setImageError(false);\n    setShowImage(true);\n    if (onLoad) onLoad();\n  };\n\n  const handleImageError = () => {\n    setImageError(true);\n    setImageLoaded(false);\n    if (onError) onError();\n  };\n\n  // Se houve erro, mostrar placeholder ou nada\n  if (imageError) {\n    return placeholder || null;\n  }\n\n  return (\n    <div className={`relative overflow-hidden ${className}`}>\n      {/* Placeholder/Loading */}\n      {!imageLoaded && (\n        <div className=\"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center\">\n        <div className=\"flex flex-col items-center space-y-2\">\n          <div className=\"text-xs text-gray-500\">Carregando...</div>\n        </div>\n        </div>\n      )}\n\n      {/* Imagem */}\n      <img\n        src={src}\n        alt={alt}\n        className={`w-full h-full object-cover transition-all duration-500 ease-out ${\n          showImage \n            ? 'opacity-100 scale-100' \n            : 'opacity-0 scale-105'\n        }`}\n        onLoad={handleImageLoad}\n        onError={handleImageError}\n        {...props}\n      />\n    </div>\n  );\n};\n\nOptimizedImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  isPreloaded: PropTypes.bool,\n  placeholder: PropTypes.node,\n  onLoad: PropTypes.func,\n  onError: PropTypes.func,\n};\n\nexport default OptimizedImage;","import { useEffect, useRef, useState } from 'react';\nimport { supabase } from '../supabaseClient';\n\n/**\n * Hook para preload de imagens antecipado\n * Carrega imagens antes que o usurio role at elas\n */\nconst useImagePreloader = (escolaId, enabled = true) => {\n  const [preloadedImages, setPreloadedImages] = useState(new Map());\n  const [isPreloading, setIsPreloading] = useState(false);\n  const preloadTimeoutRef = useRef(null);\n\n  // Funo para preload de uma imagem especfica\n  const preloadImage = (url) => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve(url);\n      img.onerror = () => reject(new Error(`Failed to load image: ${url}`));\n      img.src = url;\n    });\n  };\n\n  // Funo para preload de mltiplas imagens\n  const preloadImages = async (urls) => {\n    const promises = urls.map(url => \n      preloadImage(url).catch(error => {\n        console.warn('Erro ao preload da imagem:', url, error);\n        return null; // Continua mesmo se uma imagem falhar\n      })\n    );\n    \n    const results = await Promise.all(promises);\n    return results.filter(Boolean); // Remove URLs que falharam\n  };\n\n  // Funo principal de preload\n  const startPreload = async () => {\n    if (!escolaId || !enabled) return;\n\n    setIsPreloading(true);\n    console.log(' Iniciando preload de imagens para escola:', escolaId);\n\n    try {\n      // Preload de imagens da escola\n      const { data: escolaFiles } = await supabase.storage\n        .from('imagens-das-escolas')\n        .list(`${escolaId}/`);\n\n      // Preload de imagens dos professores\n      const { data: professorFiles } = await supabase.storage\n        .from('imagens-professores')\n        .list(`${escolaId}/`);\n\n      const urlsToPreload = [];\n\n      // Adicionar URLs das imagens da escola\n      if (escolaFiles && escolaFiles.length > 0) {\n        escolaFiles.forEach(file => {\n          const { data: { publicUrl } } = supabase.storage\n            .from('imagens-das-escolas')\n            .getPublicUrl(`${escolaId}/${file.name}`);\n          urlsToPreload.push(publicUrl);\n        });\n      }\n\n      // Adicionar URLs das imagens dos professores\n      if (professorFiles && professorFiles.length > 0) {\n        professorFiles.forEach(file => {\n          const { data: { publicUrl } } = supabase.storage\n            .from('imagens-professores')\n            .getPublicUrl(`${escolaId}/${file.name}`);\n          urlsToPreload.push(publicUrl);\n        });\n      }\n\n      console.log(` Preload: ${urlsToPreload.length} imagens encontradas`);\n\n      if (urlsToPreload.length > 0) {\n        // Preload em lotes para no sobrecarregar\n        const batchSize = 5;\n        const batches = [];\n        \n        for (let i = 0; i < urlsToPreload.length; i += batchSize) {\n          batches.push(urlsToPreload.slice(i, i + batchSize));\n        }\n\n        // Processar lotes com delay entre eles\n        for (let i = 0; i < batches.length; i++) {\n          const batch = batches[i];\n          console.log(` Preload lote ${i + 1}/${batches.length}: ${batch.length} imagens`);\n          \n          await preloadImages(batch);\n          \n          // Delay entre lotes para no sobrecarregar\n          if (i < batches.length - 1) {\n            await new Promise(resolve => setTimeout(resolve, 200));\n          }\n        }\n\n        // Atualizar estado com imagens preloadadas\n        const preloadedMap = new Map();\n        urlsToPreload.forEach(url => {\n          preloadedMap.set(url, true);\n        });\n        setPreloadedImages(preloadedMap);\n\n        console.log(' Preload concludo:', urlsToPreload.length, 'imagens');\n      }\n\n    } catch (error) {\n      console.error(' Erro durante preload:', error);\n    } finally {\n      setIsPreloading(false);\n    }\n  };\n\n  // Iniciar preload quando escolaId mudar\n  useEffect(() => {\n    if (!escolaId || !enabled) return;\n\n    // Limpar timeout anterior se existir\n    if (preloadTimeoutRef.current) {\n      clearTimeout(preloadTimeoutRef.current);\n    }\n\n    // Delay inicial para no bloquear a UI\n    preloadTimeoutRef.current = setTimeout(() => {\n      startPreload();\n    }, 500); // 500ms de delay inicial\n\n    return () => {\n      if (preloadTimeoutRef.current) {\n        clearTimeout(preloadTimeoutRef.current);\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [escolaId, enabled]);\n\n  // Verificar se uma imagem especfica foi preloadada\n  const isImagePreloaded = (url) => {\n    return preloadedImages.has(url);\n  };\n\n  return {\n    isPreloading,\n    preloadedImages,\n    isImagePreloaded,\n    startPreload\n  };\n};\n\nexport default useImagePreloader;","import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { supabase } from '../../../supabaseClient';\nimport { getLegendaByImageUrlFlexivel } from '../../../services/legendasService';\nimport ReusableImageZoom from '../../ReusableImageZoom';\nimport OptimizedImage from '../../shared/OptimizedImage';\nimport useImagePreloader from '../../../hooks/useImagePreloader';\nimport '../../ReusableImageZoom.css';\n\nconst ImagemHistoriadoProfessor = ({ escola_id, refreshKey = 0 }) => {\n  const [imagens, setImagens] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [imagemZoom, setImagemZoom] = useState(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n  // Hook de preload de imagens\n  const { isImagePreloaded } = useImagePreloader(escola_id, true);\n\n  const fecharZoom = useCallback(() => {\n    setImagemZoom(null);\n    setCurrentImageIndex(0);\n  }, []);\n\n\n\n  // Forar recarga quando refreshKey mudar\n  useEffect(() => {\n    if (refreshKey > 0) {\n      console.log('ImagemHistoriadoProfessor: refreshKey mudou, forando recarga');\n      setImagens([]);\n      setLoading(true);\n      setError(null);\n    }\n  }, [refreshKey]);\n\n  useEffect(() => {\n    if (!escola_id) return;\n\n    setLoading(true);\n    setError(null);\n\n    // Busca arquivos do bucket diretamente\n    supabase\n      .storage\n      .from('imagens-professores')\n      .list(`${escola_id}/`)\n      .then(async ({ data, error }) => {\n        if (error) {\n          setError(error.message);\n          setLoading(false);\n          return;\n        }\n\n        if (data && data.length > 0) {\n          console.log('Arquivos de professores encontrados:', data.length);\n          const imagensComUrl = await Promise.all(data.map(async (file, idx) => {\n            const { data: { publicUrl } } = supabase\n              .storage\n              .from('imagens-professores')\n              .getPublicUrl(`${escola_id}/${file.name}`);\n            \n            // Extrair gnero do nome do arquivo\n            let genero = 'professor';\n            if (file.name.startsWith('professora_')) {\n              genero = 'professora';\n            } else if (file.name.startsWith('professor_')) {\n              genero = 'professor';\n            }\n\n            // Buscar legenda da nova tabela\n            let legenda = null;\n            try {\n              const caminhoRelativo = `${escola_id}/${file.name}`;\n              console.log('Buscando legenda para professor:', caminhoRelativo);\n              legenda = await getLegendaByImageUrlFlexivel(caminhoRelativo, escola_id, {\n                categoria: 'professor',\n                tipo_foto: 'professor'\n              });\n              console.log('Legenda encontrada:', legenda);\n            } catch (error) {\n              console.warn('Erro ao buscar legenda:', error);\n            }\n\n            return {\n              id: idx + 1,\n              publicURL: publicUrl,\n              genero,\n              nome: file.name,\n              created_at: file.created_at || '',\n              legenda: legenda?.legenda || `Imagem do ${genero}`,\n              descricaoDetalhada: legenda?.descricao_detalhada,\n              autor: legenda?.autor_foto,\n              dataFoto: legenda?.data_foto,\n              categoria: legenda?.categoria,\n            };\n          }));\n\n          setImagens(imagensComUrl);\n        } else {\n          setImagens([]);\n        }\n        setLoading(false);\n      })\n      .catch(err => {\n        setError(`Erro inesperado: ${err.message}`);\n        setLoading(false);\n      });\n  }, [escola_id]);\n\n\n  if (loading) {\n    return <div className=\"text-gray-500\">Carregando imagens do professor...</div>;\n  }\n\n  if (error) {\n    return <div className=\"text-red-600\">Erro ao carregar imagens: {error}</div>;\n  }\n\n  if (!imagens.length) {\n    return null;\n  }\n\n  return (\n    <section className=\"my-6\">\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n        {imagens.map((img, index) => (\n          <figure\n            key={img.id}\n            className=\"rounded-lg overflow-hidden bg-white shadow-sm flex flex-col cursor-pointer transition hover:shadow-md\"\n            onClick={() => {\n              if (img.publicURL) {\n                setCurrentImageIndex(index);\n                setImagemZoom(img);\n              }\n            }}\n          >\n            <div className=\"w-full aspect-[4/3] bg-gray-100 flex items-center justify-center\">\n              <OptimizedImage\n                src={img.publicURL}\n                alt={img.legenda}\n                className=\"w-full h-full object-cover object-center transition-transform duration-200 hover:scale-105\"\n                isPreloaded={isImagePreloaded(img.publicURL)}\n                style={{ maxHeight: '350px' }}\n              />\n            </div>\n            \n            {/* Legenda da imagem */}\n            {img.legenda && (\n              <figcaption className=\"p-3 bg-white\">\n                <h4 className=\"font-medium text-gray-900 text-sm mb-1\">\n                  {img.legenda}\n                </h4>\n                \n                {/* Informaes adicionais */}\n                <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                  {img.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {img.categoria}\n                    </span>\n                  )}\n                  {img.autor && (\n                    <span>Por: {img.autor}</span>\n                  )}\n                  {img.dataFoto && (\n                    <span>{new Date(img.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrio detalhada */}\n                {img.descricaoDetalhada && (\n                  <p className=\"text-xs text-gray-600 mt-2 line-clamp-2\">\n                    {img.descricaoDetalhada}\n                  </p>\n                )}\n              </figcaption>\n            )}\n          </figure>\n        ))}\n      </div>\n\n      {/* Modal de Zoom Reutilizvel */}\n      <ReusableImageZoom\n        images={imagens}\n        currentImageIndex={currentImageIndex}\n        isOpen={!!imagemZoom}\n        onClose={fecharZoom}\n        onImageChange={setCurrentImageIndex}\n        showNavigation={true}\n        showControls={true}\n        showCounter={true}\n        showCaption={true}\n      />\n    </section>\n  );\n};\n\nImagemHistoriadoProfessor.propTypes = {\n  escola_id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  refreshKey: PropTypes.number,\n};\n\nexport default React.memo(ImagemHistoriadoProfessor);\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { User, AlertCircle, Loader2 } from 'lucide-react';\n\n/**\n * Componente Avatar modular e expansvel\n * Suporta diferentes tamanhos, formas, temas e funcionalidades avanadas\n */\nconst Avatar = ({\n  // Props bsicas\n  src,\n  alt,\n  name,\n  \n  // Tamanhos\n  size = 'medium',\n  customSize,\n  \n  // Forma e estilo\n  shape = 'circle',\n  variant = 'default',\n  \n  // Estados e interaes\n  loading = false,\n  error = false,\n  clickable = false,\n  \n  // Customizao visual\n  className = '',\n  borderColor = 'border-green-200',\n  backgroundColor = 'bg-gray-100',\n  textColor = 'text-gray-600',\n  \n  // Funcionalidades avanadas\n  badge,\n  badgePosition = 'bottom-right',\n  badgeColor = 'bg-green-500',\n  badgeSize = 'small',\n  \n  // Callbacks\n  onClick,\n  onError,\n  onLoad,\n  \n  // Configuraes de fallback\n  fallbackIcon = 'user',\n  showInitials = true,\n  maxInitials = 2,\n  \n  // Configuraes de imagem\n  lazy = true,\n  priority = false,\n  \n  // Props adicionais\n  ...props\n}) => {\n  const [imageError, setImageError] = useState(false);\n  const [imageLoading, setImageLoading] = useState(!!src);\n\n  // Configuraes de tamanho\n  const sizeConfig = useMemo(() => {\n    if (customSize) {\n      return {\n        container: 'w-full h-full',\n        text: 'text-sm',\n        icon: 'w-6 h-6',\n        badge: 'w-3 h-3',\n        customSize: customSize\n      };\n    }\n\n    const sizes = {\n      xs: {\n        container: 'w-6 h-6',\n        text: 'text-xs',\n        icon: 'w-3 h-3',\n        badge: 'w-2 h-2'\n      },\n      small: {\n        container: 'w-8 h-8',\n        text: 'text-xs',\n        icon: 'w-4 h-4',\n        badge: 'w-2 h-2'\n      },\n      medium: {\n        container: 'w-12 h-12 sm:w-16 sm:h-16',\n        text: 'text-sm sm:text-base',\n        icon: 'w-6 h-6 sm:w-8 sm:h-8',\n        badge: 'w-3 h-3'\n      },\n      large: {\n        container: 'w-16 h-16 sm:w-20 sm:h-20',\n        text: 'text-base sm:text-lg',\n        icon: 'w-8 h-8 sm:w-10 sm:h-10',\n        badge: 'w-4 h-4'\n      },\n      xlarge: {\n        container: 'w-20 h-20 sm:w-24 sm:h-24',\n        text: 'text-lg sm:text-xl',\n        icon: 'w-10 h-10 sm:w-12 sm:h-12',\n        badge: 'w-5 h-5'\n      },\n      xxlarge: {\n        container: 'w-24 h-24 sm:w-32 sm:h-32',\n        text: 'text-xl sm:text-2xl',\n        icon: 'w-12 h-12 sm:w-16 sm:h-16',\n        badge: 'w-6 h-6'\n      }\n    };\n\n    return sizes[size] || sizes.medium;\n  }, [size, customSize]);\n\n  // Configuraes de forma\n  const shapeConfig = useMemo(() => {\n    const shapes = {\n      circle: 'rounded-full',\n      square: 'rounded-lg',\n      rounded: 'rounded-xl',\n      none: 'rounded-none'\n    };\n    return shapes[shape] || shapes.circle;\n  }, [shape]);\n\n  // Configuraes de variante\n  const variantConfig = useMemo(() => {\n    const variants = {\n      default: {\n        border: 'border-2',\n        shadow: 'shadow-md',\n        hover: 'hover:shadow-lg'\n      },\n      minimal: {\n        border: 'border',\n        shadow: 'shadow-sm',\n        hover: 'hover:shadow-md'\n      },\n      flat: {\n        border: 'border-2',\n        shadow: 'shadow-none',\n        hover: 'hover:shadow-sm'\n      },\n      elevated: {\n        border: 'border-2',\n        shadow: 'shadow-lg',\n        hover: 'hover:shadow-xl'\n      }\n    };\n    return variants[variant] || variants.default;\n  }, [variant]);\n\n  // Configuraes de badge\n  const badgeConfig = useMemo(() => {\n    const positions = {\n      'top-left': 'top-0 left-0',\n      'top-right': 'top-0 right-0',\n      'bottom-left': 'bottom-0 left-0',\n      'bottom-right': 'bottom-0 right-0',\n      'center': 'top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2'\n    };\n\n    const badgeSizes = {\n      small: 'w-3 h-3',\n      medium: 'w-4 h-4',\n      large: 'w-5 h-5'\n    };\n\n    return {\n      position: positions[badgePosition] || positions['bottom-right'],\n      size: badgeSizes[badgeSize] || badgeSizes.small\n    };\n  }, [badgePosition, badgeSize]);\n\n  // Gerar iniciais do nome\n  const initials = useMemo(() => {\n    if (!name || !showInitials) return '';\n    \n    const words = name.trim().split(' ');\n    const initialsArray = words\n      .slice(0, maxInitials)\n      .map(word => word.charAt(0).toUpperCase())\n      .filter(char => char.match(/[A-Z]/));\n    \n    return initialsArray.join('');\n  }, [name, showInitials, maxInitials]);\n\n  // Determinar cone de fallback\n  const FallbackIcon = useMemo(() => {\n    const icons = {\n      user: User,\n      alert: AlertCircle,\n      loading: Loader2\n    };\n    return icons[fallbackIcon] || icons.user;\n  }, [fallbackIcon]);\n\n  // Handlers\n  const handleImageLoad = () => {\n    setImageLoading(false);\n    setImageError(false);\n    onLoad?.();\n  };\n\n  const handleImageError = () => {\n    setImageLoading(false);\n    setImageError(true);\n    onError?.();\n  };\n\n  const handleClick = (e) => {\n    if (clickable || onClick) {\n      onClick?.(e);\n    }\n  };\n\n  // Determinar contedo a ser exibido\n  const shouldShowImage = src && !imageError && !loading;\n  const shouldShowInitials = !shouldShowImage && initials && !error;\n  const shouldShowIcon = !shouldShowImage && !shouldShowInitials && !error;\n\n  // Classes base\n  const baseClasses = `\n    ${sizeConfig.container}\n    ${shapeConfig}\n    ${variantConfig.border}\n    ${borderColor}\n    ${variantConfig.shadow}\n    ${clickable || onClick ? 'cursor-pointer' : ''}\n    ${variantConfig.hover}\n    transition-all duration-200\n    relative overflow-hidden\n    flex items-center justify-center\n    ${className}\n  `.trim().replace(/\\s+/g, ' ');\n\n  return (\n    <div \n      className={baseClasses}\n      style={customSize ? { width: customSize, height: customSize } : undefined}\n      onClick={handleClick}\n      role={clickable || onClick ? 'button' : undefined}\n      tabIndex={clickable || onClick ? 0 : undefined}\n      {...props}\n    >\n      {/* Estado de loading */}\n      {loading && (\n        <div className={`absolute inset-0 ${backgroundColor} flex items-center justify-center`}>\n          <span className=\"text-xs text-green-600\">Carregando...</span>\n        </div>\n      )}\n\n      {/* Imagem */}\n      {shouldShowImage && (\n        <img\n          src={src}\n          alt={alt || `Avatar de ${name}` || 'Avatar'}\n          className={`w-full h-full object-cover ${imageLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-200`}\n          onLoad={handleImageLoad}\n          onError={handleImageError}\n          loading={lazy ? 'lazy' : 'eager'}\n          {...(priority && { fetchPriority: 'high' })}\n        />\n      )}\n\n      {/* Estado de loading da imagem */}\n      {imageLoading && shouldShowImage && (\n        <div className={`absolute inset-0 ${backgroundColor} flex items-center justify-center`}>\n          <span className=\"text-xs text-green-600\">Carregando...</span>\n        </div>\n      )}\n\n      {/* Iniciais */}\n      {shouldShowInitials && (\n        <span className={`${sizeConfig.text} font-semibold ${textColor}`}>\n          {initials}\n        </span>\n      )}\n\n      {/* cone de fallback */}\n      {shouldShowIcon && (\n        <FallbackIcon className={`${sizeConfig.icon} ${textColor}`} />\n      )}\n\n      {/* Estado de erro */}\n      {error && (\n        <div className={`absolute inset-0 ${backgroundColor} flex items-center justify-center`}>\n          <AlertCircle className={`${sizeConfig.icon} text-red-500`} />\n        </div>\n      )}\n\n      {/* Badge */}\n      {badge && (\n        <div className={`absolute ${badgeConfig.position} ${badgeConfig.size} ${badgeColor} rounded-full border-2 border-white`}>\n          {typeof badge === 'string' ? (\n            <span className=\"text-xs text-white font-bold flex items-center justify-center h-full\">\n              {badge}\n            </span>\n          ) : (\n            badge\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nAvatar.propTypes = {\n  // Props bsicas\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  name: PropTypes.string,\n  \n  // Tamanhos\n  size: PropTypes.oneOf(['xs', 'small', 'medium', 'large', 'xlarge', 'xxlarge']),\n  customSize: PropTypes.string,\n  \n  // Forma e estilo\n  shape: PropTypes.oneOf(['circle', 'square', 'rounded', 'none']),\n  variant: PropTypes.oneOf(['default', 'minimal', 'flat', 'elevated']),\n  \n  // Estados e interaes\n  loading: PropTypes.bool,\n  error: PropTypes.bool,\n  clickable: PropTypes.bool,\n  \n  // Customizao visual\n  className: PropTypes.string,\n  borderColor: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  textColor: PropTypes.string,\n  \n  // Funcionalidades avanadas\n  badge: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n  badgePosition: PropTypes.oneOf(['top-left', 'top-right', 'bottom-left', 'bottom-right', 'center']),\n  badgeColor: PropTypes.string,\n  badgeSize: PropTypes.oneOf(['small', 'medium', 'large']),\n  \n  // Callbacks\n  onClick: PropTypes.func,\n  onError: PropTypes.func,\n  onLoad: PropTypes.func,\n  \n  // Configuraes de fallback\n  fallbackIcon: PropTypes.oneOf(['user', 'alert', 'loading']),\n  showInitials: PropTypes.bool,\n  maxInitials: PropTypes.number,\n  \n  // Configuraes de imagem\n  lazy: PropTypes.bool,\n  priority: PropTypes.bool\n};\n\nexport default Avatar;\n","/**\n * Configuraes de temas para o componente Avatar\n * Facilita a customizao visual e mantm consistncia\n */\n\nexport const avatarThemes = {\n  // Tema padro (verde)\n  default: {\n    borderColor: 'border-green-200',\n    backgroundColor: 'bg-green-50',\n    textColor: 'text-green-700',\n    badgeColor: 'bg-green-500',\n    hoverBorderColor: 'hover:border-green-300'\n  },\n\n  // Tema professor (azul)\n  professor: {\n    borderColor: 'border-blue-200',\n    backgroundColor: 'bg-blue-50',\n    textColor: 'text-blue-700',\n    badgeColor: 'bg-blue-500',\n    hoverBorderColor: 'hover:border-blue-300'\n  },\n\n  // Tema escola (laranja)\n  escola: {\n    borderColor: 'border-orange-200',\n    backgroundColor: 'bg-orange-50',\n    textColor: 'text-orange-700',\n    badgeColor: 'bg-orange-500',\n    hoverBorderColor: 'hover:border-orange-300'\n  },\n\n  // Tema neutro (cinza)\n  neutral: {\n    borderColor: 'border-gray-200',\n    backgroundColor: 'bg-gray-50',\n    textColor: 'text-gray-700',\n    badgeColor: 'bg-gray-500',\n    hoverBorderColor: 'hover:border-gray-300'\n  },\n\n  // Tema indgena (marrom/terra)\n  indigena: {\n    borderColor: 'border-amber-200',\n    backgroundColor: 'bg-amber-50',\n    textColor: 'text-amber-800',\n    badgeColor: 'bg-amber-600',\n    hoverBorderColor: 'hover:border-amber-300'\n  },\n\n  // Tema sucesso (verde escuro)\n  success: {\n    borderColor: 'border-emerald-200',\n    backgroundColor: 'bg-emerald-50',\n    textColor: 'text-emerald-700',\n    badgeColor: 'bg-emerald-500',\n    hoverBorderColor: 'hover:border-emerald-300'\n  },\n\n  // Tema aviso (amarelo)\n  warning: {\n    borderColor: 'border-yellow-200',\n    backgroundColor: 'bg-yellow-50',\n    textColor: 'text-yellow-800',\n    badgeColor: 'bg-yellow-500',\n    hoverBorderColor: 'hover:border-yellow-300'\n  },\n\n  // Tema erro (vermelho)\n  error: {\n    borderColor: 'border-red-200',\n    backgroundColor: 'bg-red-50',\n    textColor: 'text-red-700',\n    badgeColor: 'bg-red-500',\n    hoverBorderColor: 'hover:border-red-300'\n  }\n};\n\n/**\n * Configuraes de tamanhos predefinidos\n */\nexport const avatarSizes = {\n  xs: 'w-6 h-6',\n  small: 'w-8 h-8',\n  medium: 'w-12 h-12 sm:w-16 sm:h-16',\n  large: 'w-16 h-16 sm:w-20 sm:h-20',\n  xlarge: 'w-20 h-20 sm:w-24 sm:h-24',\n  xxlarge: 'w-24 h-24 sm:w-32 sm:h-32'\n};\n\n/**\n * Configuraes de formas\n */\nexport const avatarShapes = {\n  circle: 'rounded-full',\n  square: 'rounded-lg',\n  rounded: 'rounded-xl',\n  none: 'rounded-none'\n};\n\n/**\n * Configuraes de variantes de estilo\n */\nexport const avatarVariants = {\n  default: {\n    border: 'border-2',\n    shadow: 'shadow-md',\n    hover: 'hover:shadow-lg'\n  },\n  minimal: {\n    border: 'border',\n    shadow: 'shadow-sm',\n    hover: 'hover:shadow-md'\n  },\n  flat: {\n    border: 'border-2',\n    shadow: 'shadow-none',\n    hover: 'hover:shadow-sm'\n  },\n  elevated: {\n    border: 'border-2',\n    shadow: 'shadow-lg',\n    hover: 'hover:shadow-xl'\n  }\n};\n\n/**\n * Configuraes de badges\n */\nexport const badgePositions = {\n  'top-left': 'top-0 left-0',\n  'top-right': 'top-0 right-0',\n  'bottom-left': 'bottom-0 left-0',\n  'bottom-right': 'bottom-0 right-0',\n  'center': 'top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2'\n};\n\nexport const badgeSizes = {\n  small: 'w-3 h-3',\n  medium: 'w-4 h-4',\n  large: 'w-5 h-5'\n};\n\n/**\n * Funo helper para aplicar tema\n */\nexport const applyTheme = (themeName, customTheme = {}) => {\n  const baseTheme = avatarThemes[themeName] || avatarThemes.default;\n  return { ...baseTheme, ...customTheme };\n};\n\n/**\n * Funo helper para gerar classes CSS do tema\n */\nexport const getThemeClasses = (theme) => {\n  return {\n    container: `${theme.borderColor} ${theme.backgroundColor} ${theme.hoverBorderColor}`,\n    text: theme.textColor,\n    badge: theme.badgeColor\n  };\n};\n\nconst AvatarThemeConfig = {\n  themes: avatarThemes,\n  sizes: avatarSizes,\n  shapes: avatarShapes,\n  variants: avatarVariants,\n  badgePositions,\n  badgeSizes,\n  applyTheme,\n  getThemeClasses\n};\n\nexport default AvatarThemeConfig;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '../../shared/Avatar';\nimport { avatarThemes } from '../../shared/AvatarThemes';\nimport useImagePreloader from '../../../hooks/useImagePreloader';\n\nconst FotoProfessor = ({ \n  fotoUrl, \n  nomeProfessor, \n  tamanho = 'medium',\n  className = '',\n  showFallback = true,\n  // Novas props para customizao avanada\n  theme = 'professor',\n  variant = 'default',\n  shape = 'circle',\n  clickable = false,\n  badge,\n  badgePosition = 'bottom-right',\n  onClick,\n  onError,\n  onLoad,\n  // Props para compatibilidade com tamanhos antigos\n  size,\n  customSize,\n  // Props para preload\n  escolaId\n}) => {\n  // Mapear tamanhos antigos para novos\n  const sizeMapping = {\n    small: 'medium',\n    medium: 'large', \n    large: 'xlarge',\n    xlarge: 'xxlarge'\n  };\n\n  const mappedSize = size || sizeMapping[tamanho] || 'large';\n  \n  // Hook de preload de imagens\n  const { isImagePreloaded } = useImagePreloader(escolaId, !!escolaId);\n  \n  // Aplicar tema\n  const themeConfig = avatarThemes[theme] || avatarThemes.professor;\n  \n  // Se no h URL da foto e no deve mostrar fallback, no renderiza nada\n  if (!fotoUrl && !showFallback) {\n    return null;\n  }\n\n  return (\n    <Avatar\n      src={fotoUrl}\n      name={nomeProfessor}\n      alt={nomeProfessor ? `Foto de ${nomeProfessor}` : 'Foto do professor'}\n      size={customSize ? undefined : mappedSize}\n      customSize={customSize}\n      shape={shape}\n      variant={variant}\n      theme={theme}\n      clickable={clickable}\n      badge={badge}\n      badgePosition={badgePosition}\n      className={className}\n      onClick={onClick}\n      onError={onError}\n      onLoad={onLoad}\n      showInitials={true}\n      maxInitials={2}\n      fallbackIcon=\"user\"\n      lazy={!isImagePreloaded(fotoUrl)}\n      // Aplicar tema customizado\n      borderColor={themeConfig.borderColor}\n      backgroundColor={themeConfig.backgroundColor}\n      textColor={themeConfig.textColor}\n      badgeColor={themeConfig.badgeColor}\n    />\n  );\n};\n\nFotoProfessor.propTypes = {\n  // Props bsicas (compatibilidade)\n  fotoUrl: PropTypes.string,\n  nomeProfessor: PropTypes.string,\n  tamanho: PropTypes.oneOf(['small', 'medium', 'large', 'xlarge']),\n  className: PropTypes.string,\n  showFallback: PropTypes.bool,\n  \n  // Novas props para customizao avanada\n  theme: PropTypes.oneOf(['default', 'professor', 'escola', 'neutral', 'indigena', 'success', 'warning', 'error']),\n  variant: PropTypes.oneOf(['default', 'minimal', 'flat', 'elevated']),\n  shape: PropTypes.oneOf(['circle', 'square', 'rounded', 'none']),\n  clickable: PropTypes.bool,\n  badge: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n  badgePosition: PropTypes.oneOf(['top-left', 'top-right', 'bottom-left', 'bottom-right', 'center']),\n  onClick: PropTypes.func,\n  onError: PropTypes.func,\n  onLoad: PropTypes.func,\n  size: PropTypes.oneOf(['xs', 'small', 'medium', 'large', 'xlarge', 'xxlarge']),\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nexport default FotoProfessor;\n","import React, { memo, useEffect, useState, useCallback } from 'react';\nimport { ChevronLeft, ChevronRight, X } from 'lucide-react';\nimport { getHistoriasProfessor } from '../../../../services/historiaProfessorService';\nimport ImagemHistoriadoProfessor from '../ImagemHistoriadoProfessor';\nimport FotoProfessor from '../FotoProfessor';\nimport './HistoriadoProfessor.css';\n\nconst HistoriadoProfessor = memo(({ escola, refreshKey = 0 }) => {\n  const [historias, setHistorias] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentHistoriaIndex, setCurrentHistoriaIndex] = useState(0);\n  const [imagemZoom, setImagemZoom] = useState(null);\n\n  const fecharZoom = useCallback(() => setImagemZoom(null), []);\n\n  // Fecha modal com tecla ESC\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') {\n        fecharZoom();\n      }\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [fecharZoom]);\n\n  // Carregar histrias do professor\n  useEffect(() => {\n    if (!escola?.id) {\n      setLoading(false);\n      return;\n    }\n    const carregarHistorias = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const data = await getHistoriasProfessor(escola.id);\n        setHistorias(data || []);\n        setCurrentHistoriaIndex(0);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    carregarHistorias();\n  }, [escola?.id, refreshKey]);\n\n  // Navegao entre histrias\n  const nextHistoria = useCallback(() => {\n    setCurrentHistoriaIndex(prev =>\n      prev < historias.length - 1 ? prev + 1 : 0\n    );\n  }, [historias.length]);\n\n  const prevHistoria = useCallback(() => {\n    setCurrentHistoriaIndex(prev =>\n      prev > 0 ? prev - 1 : historias.length - 1\n    );\n  }, [historias.length]);\n\n  // (sem dots laterais aqui; manter navegao simples local)\n\n  // Navegao com teclado\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (historias.length <= 1) return;\n      if (e.key === 'ArrowRight') {\n        nextHistoria();\n      } else if (e.key === 'ArrowLeft') {\n        prevHistoria();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [historias.length, nextHistoria, prevHistoria]);\n\n  if (loading) {\n    return (\n      <div className=\"mt-8 mb-12 max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 bg-white rounded-2xl shadow-lg border border-green-100/50\">\n        <div className=\"flex items-center justify-center py-8\">\n          <span className=\"ml-2 text-gray-600\">Carregando histrias do professor...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"mt-8 mb-12 max-w-4xl mx-auto px-4 sm:px-6 md:px-8 py-6 bg-white rounded-2xl shadow-lg border border-red-100/50\">\n        <div className=\"text-center py-8\">\n          <p className=\"text-red-600\">Erro ao carregar histrias do professor: {error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!historias.length) {\n    return null;\n  }\n\n  const currentHistoria = historias[currentHistoriaIndex];\n  const hasMultipleHistorias = historias.length > 1;\n\n  return (\n    <div className=\"mt-8 mb-12 flex flex-col items-center\">\n      {/* Header externo ao card */}\n      <header className=\"mb-6 sm:mb-8 max-w-4xl mx-auto w-full\">\n        <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"bg-green-200 rounded-full flex items-center justify-center w-16 h-16 sm:w-28 sm:h-28\">\n              <img \n                src={`${process.env.PUBLIC_URL}/passaro.svg`} \n                alt=\"cone de pssaro\" \n                className=\"w-12 h-12 sm:w-24 sm:h-24\" \n                style={{ \n                  filter: 'none', \n                  borderRadius: '0', \n                  boxShadow: 'none', \n                  margin: '0',\n                  padding: '0',\n                  border: 'none',\n                  outline: 'none'\n                }}\n                aria-hidden=\"true\"\n              />\n            </span>\n            <h2 className=\"text-xl sm:text-2xl font-bold text-black m-0\">\n              Depoimento dos Professores\n            </h2>\n          </div>\n          {hasMultipleHistorias && (\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n              <span>{currentHistoriaIndex + 1} de {historias.length}</span>\n            </div>\n          )}\n        </div>\n        <div className=\"h-1 w-20 sm:w-24 bg-green-300 rounded-full\" />\n      </header>\n\n      {/* Card com contedo centralizado */}\n      <article\n        className=\"\n          px-4 sm:px-6 md:px-8 py-6\n          bg-white rounded-2xl shadow-lg\n          prose prose-sm sm:prose-base md:prose-lg lg:prose-xl\n          prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n          prose-img:rounded-xl prose-img:shadow-lg\n          prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n          max-w-4xl mx-auto w-full\n        \"\n      >\n\n      {/* Contedo da histria atual */}\n      <section className=\"text-base sm:text-lg leading-relaxed text-neutral-800\">\n        {currentHistoria.nome_professor && (\n          <div className=\"flex flex-col items-center mb-6\">\n            <div className=\"flex-shrink-0\">\n              <FotoProfessor \n                fotoUrl={currentHistoria.foto_rosto}\n                nomeProfessor={currentHistoria.nome_professor}\n                customSize=\"200px\"\n                className=\"shadow-lg\"\n                escolaId={escola.id}\n              />\n            </div>\n            <div className=\"w-full text-center\">\n              <h3 className=\"text-xl sm:text-2xl font-bold text-green-800 mb-4 m-0\">\n                {currentHistoria.nome_professor}\n              </h3>\n              <div \n                className=\"historia-professor-content prose prose-sm sm:prose-base md:prose-lg lg:prose-xl max-w-none\n                  prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n                  prose-img:rounded-xl prose-img:shadow-lg\n                  prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n                  prose-strong:text-green-800 prose-em:text-green-700\n                  prose-blockquote:border-l-green-300 prose-blockquote:bg-green-50 prose-blockquote:pl-4 prose-blockquote:py-2 prose-blockquote:rounded-r-lg\n                  prose-ul:text-black prose-ol:text-black prose-li:text-black\n                  prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm\"\n                dangerouslySetInnerHTML={{ __html: currentHistoria.historia }}\n              />\n            </div>\n          </div>\n        )}\n        {!currentHistoria.nome_professor && (\n          <div \n            className=\"historia-professor-content prose prose-sm sm:prose-base md:prose-lg lg:prose-xl max-w-none\n              prose-headings:text-green-900 prose-p:text-black prose-p:leading-relaxed prose-p:text-justify\n              prose-img:rounded-xl prose-img:shadow-lg\n              prose-a:text-green-700 prose-a:no-underline prose-a:border-b-2 prose-a:border-green-100 hover:prose-a:border-green-600\n              prose-strong:text-green-800 prose-em:text-green-700\n              prose-blockquote:border-l-green-300 prose-blockquote:bg-green-50 prose-blockquote:pl-4 prose-blockquote:py-2 prose-blockquote:rounded-r-lg\n              prose-ul:text-black prose-ol:text-black prose-li:text-black\n              prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm\"\n            dangerouslySetInnerHTML={{ __html: currentHistoria.historia }}\n          />\n        )}\n        {currentHistoria.imagem_public_url && (\n          <figure className=\"my-6\">\n            <div className=\"relative\">\n              <img\n                src={currentHistoria.imagem_public_url}\n                alt={currentHistoria.descricao_imagem || 'Imagem da histria do professor'}\n                className=\"w-full max-w-2xl mx-auto rounded-xl shadow-lg cursor-pointer transition-transform duration-200 hover:scale-105\"\n                onClick={() => setImagemZoom(currentHistoria)}\n                loading=\"lazy\"\n              />\n              {currentHistoria.descricao_imagem && (\n                <figcaption className=\"text-center text-sm text-gray-600 mt-2\">\n                  {currentHistoria.descricao_imagem}\n                </figcaption>\n              )}\n            </div>\n          </figure>\n        )}\n      </section>\n\n      {/* Navegao entre histrias */}\n      {hasMultipleHistorias && (\n        <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-gray-200\">\n          <button\n            onClick={prevHistoria}\n            className=\"flex items-center gap-2 px-4 py-2 text-green-700 hover:text-green-800 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"Histria anterior\"\n          >\n            <ChevronLeft className=\"w-5 h-5\" />\n            <span className=\"hidden sm:inline\">Anterior</span>\n          </button>\n          <div className=\"flex gap-2\">\n            {historias.map((_, index) => (\n              <button\n                key={index}\n                onClick={() => setCurrentHistoriaIndex(index)}\n                className={`w-3 h-3 rounded-full border-2 ${index === currentHistoriaIndex ? 'bg-green-600 border-green-600' : 'bg-white border-gray-300'} transition-colors`}\n                aria-label={`Ir para histria ${index + 1}`}\n              />\n            ))}\n          </div>\n          <button\n            onClick={nextHistoria}\n            className=\"flex items-center gap-2 px-4 py-2 text-green-700 hover:text-green-800 hover:bg-gray-100 rounded-lg transition-colors\"\n            aria-label=\"Prxima histria\"\n          >\n            <span className=\"hidden sm:inline\">Prxima</span>\n            <ChevronRight className=\"w-5 h-5\" />\n          </button>\n        </div>\n      )}\n\n      {/* Modal de zoom da imagem */}\n      {imagemZoom && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90\" onClick={fecharZoom}>\n          <div className=\"relative max-w-[90vw] max-h-[90vh] flex items-center justify-center p-4\" onClick={e => e.stopPropagation()}>\n            <button\n              className=\"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-80 z-10\"\n              onClick={fecharZoom}\n              aria-label=\"Fechar zoom\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n            <img\n              src={imagemZoom.imagem_public_url}\n              alt={imagemZoom.descricao_imagem || 'Imagem da histria do professor'}\n              className=\"max-w-full max-h-full object-contain rounded-xl shadow-2xl border-4 border-white\"\n            />\n            {imagemZoom.descricao_imagem && (\n              <figcaption className=\"absolute bottom-4 left-1/2 -translate-x-1/2 text-center text-sm text-white bg-black bg-opacity-50 rounded-lg px-3 py-1.5 max-w-2xl\">\n                {imagemZoom.descricao_imagem}\n              </figcaption>\n            )}\n          </div>\n        </div>\n      )}\n\n        <ImagemHistoriadoProfessor escola_id={escola.id} refreshKey={refreshKey} />\n      </article>\n    </div>\n  );\n});\n\nexport default HistoriadoProfessor;\n","import React, { useEffect, useState, useRef, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { RefreshCw } from 'lucide-react';\nimport { getLegendaByImageUrlFlexivel } from '../../../services/legendasService';\nimport { supabase } from '../../../supabaseClient';\nimport ReusableImageZoom from '../../ReusableImageZoom';\nimport OptimizedImage from '../../shared/OptimizedImage';\nimport useImagePreloader from '../../../hooks/useImagePreloader';\nimport '../../ReusableImageZoom.css';\n\nconst ImagensdasEscolas = ({ escola_id, refreshKey = 0 }) => {\n  const [imagens, setImagens] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [imagemZoom, setImagemZoom] = useState(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [error, setError] = useState('');\n  const cacheRef = useRef({});\n  const [cacheVersion, setCacheVersion] = useState(0); // Para forar recarga\n\n  // Hook de preload de imagens\n  const { isImagePreloaded } = useImagePreloader(escola_id, true);\n\n  // Funo para limpar cache e recarregar\n  const limparCacheERecarregar = useCallback(() => {\n    console.log('Limpando cache e recarregando imagens...');\n    cacheRef.current = {};\n    setCacheVersion(prev => prev + 1);\n  }, []);\n\n  // Forar recarga quando refreshKey mudar\n  useEffect(() => {\n    if (refreshKey > 0) {\n      console.log('ImagensdasEscolas: refreshKey mudou, forando recarga');\n      limparCacheERecarregar();\n    }\n  }, [refreshKey, limparCacheERecarregar]);\n\n  const fecharZoom = useCallback(() => {\n    setImagemZoom(null);\n    setCurrentImageIndex(0);\n    document.body.style.overflow = 'auto';\n  }, []);\n\n  // ESC para fechar\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') fecharZoom();\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [fecharZoom]);\n\n\n  useEffect(() => {\n    if (!escola_id) {\n      setLoading(false);\n      return;\n    }\n\n    // Verificar se h cache vlido (com verso)\n    const cacheKey = `${escola_id}_v${cacheVersion}`;\n    if (cacheRef.current[cacheKey]) {\n      console.log('Usando cache para escola', escola_id);\n      setImagens(cacheRef.current[cacheKey]);\n      setLoading(false);\n      return;\n    }\n\n    const buscarImagens = async () => {\n      console.log('Buscando imagens para escola', escola_id);\n      \n      try {\n        // Usar a mesma abordagem do painel de edio: listar arquivos do bucket\n        const { data: files, error } = await supabase.storage\n          .from('imagens-das-escolas')\n          .list(`${escola_id}/`);\n\n        if (error) {\n          throw error;\n        }\n\n        if (!files || files.length === 0) {\n          console.log('Nenhum arquivo encontrado para escola', escola_id);\n          setImagens([]);\n          setLoading(false);\n          return;\n        }\n\n        console.log('Arquivos encontrados:', files.length);\n\n        // Processar cada arquivo encontrado\n        const imagensEncontradas = await Promise.all(\n          files.map(async (file, index) => {\n            const filePath = `${escola_id}/${file.name}`;\n            const { data: { publicUrl } } = supabase.storage\n              .from('imagens-das-escolas')\n              .getPublicUrl(filePath);\n\n            // Buscar legenda da nova tabela (busca flexvel)\n            let legenda = null;\n            try {\n              console.log('Buscando legenda para:', filePath);\n              legenda = await getLegendaByImageUrlFlexivel(filePath, escola_id, {\n                categoria: 'escola',\n                tipo_foto: 'escola'\n              });\n              console.log('Legenda encontrada:', legenda);\n            } catch (error) {\n              console.warn('Erro ao buscar legenda para', filePath, ':', error);\n            }\n\n            return {\n              id: `${escola_id}-${file.name}`,\n              publicURL: publicUrl,\n              descricao: legenda?.legenda || `Imagem ${index + 1}`,\n              descricaoDetalhada: legenda?.descricao_detalhada,\n              autor: legenda?.autor_foto,\n              dataFoto: legenda?.data_foto,\n              categoria: legenda?.categoria,\n              urlError: null,\n            };\n          })\n        );\n\n        console.log('Imagens processadas:', imagensEncontradas.length);\n        \n        // Salvar no cache com verso\n        cacheRef.current[cacheKey] = imagensEncontradas;\n        setImagens(imagensEncontradas);\n        \n        if (imagensEncontradas.length === 0) {\n          setError('Nenhuma imagem encontrada para esta escola.');\n        }\n      } catch (error) {\n        console.error('Erro ao processar imagens:', error);\n        setError('Erro ao carregar imagens da escola.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    buscarImagens();\n  }, [escola_id, cacheVersion]);\n\n  if (loading) {\n    return (\n      <div className=\"text-gray-500 flex items-center gap-2\">\n        Carregando imagens da escola...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-red-600 flex items-center gap-2\">\n        <span>{error}</span>\n        <button \n          onClick={limparCacheERecarregar}\n          className=\"text-blue-600 hover:text-blue-800\"\n          title=\"Tentar novamente\"\n        >\n          <RefreshCw className=\"w-5 h-5\" />\n        </button>\n      </div>\n    );\n  }\n\n  if (!imagens.length) {\n    return (\n      <div className=\"text-yellow-700 flex items-center gap-2\">\n        <span>Nenhuma imagem encontrada para esta escola.</span>\n        <button \n          onClick={limparCacheERecarregar}\n          className=\"text-blue-600 hover:text-blue-800\"\n          title=\"Tentar novamente\"\n        >\n          <RefreshCw className=\"w-5 h-5\" />\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"my-6\">\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n        {imagens.map((img) => (\n          <figure\n            key={img.id}\n            className=\"rounded-lg overflow-hidden bg-white shadow-sm flex flex-col cursor-pointer transition hover:shadow-md\"\n            onClick={() => {\n              if (img.publicURL) {\n                const index = imagens.findIndex(i => i.publicURL === img.publicURL);\n                setCurrentImageIndex(index);\n                setImagemZoom(img);\n              }\n            }}\n          >\n            <div className=\"w-full aspect-[4/3] bg-gray-100 flex items-center justify-center\">\n              <OptimizedImage\n                src={img.publicURL}\n                alt={img.descricao}\n                className=\"w-full h-full object-cover object-center transition-transform duration-200 hover:scale-105\"\n                isPreloaded={isImagePreloaded(img.publicURL)}\n                style={{ maxHeight: '350px' }}\n              />\n            </div>\n            \n            {/* Legenda da imagem */}\n            {img.descricao && (\n              <figcaption className=\"p-3 bg-white\">\n                <h4 className=\"font-medium text-gray-900 text-sm mb-1\">\n                  {img.descricao}\n                </h4>\n                \n                {/* Informaes adicionais */}\n                <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                  {img.categoria && (\n                    <span className=\"capitalize bg-gray-100 px-2 py-1 rounded\">\n                      {img.categoria}\n                    </span>\n                  )}\n                  {img.autor && (\n                    <span>Por: {img.autor}</span>\n                  )}\n                  {img.dataFoto && (\n                    <span>{new Date(img.dataFoto).toLocaleDateString('pt-BR')}</span>\n                  )}\n                </div>\n                \n                {/* Descrio detalhada */}\n                {img.descricaoDetalhada && (\n                  <p className=\"text-xs text-gray-600 mt-2 line-clamp-2\">\n                    {img.descricaoDetalhada}\n                  </p>\n                )}\n              </figcaption>\n            )}\n          </figure>\n        ))}\n      </div>\n\n      {/* Modal de Zoom Reutilizvel */}\n      <ReusableImageZoom\n        images={imagens}\n        currentImageIndex={currentImageIndex}\n        isOpen={!!imagemZoom}\n        onClose={fecharZoom}\n        onImageChange={setCurrentImageIndex}\n        showNavigation={true}\n        showControls={true}\n        showCounter={true}\n        showCaption={true}\n      />\n    </section>\n  );\n};\n\nImagensdasEscolas.propTypes = {\n  escola_id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  refreshKey: PropTypes.number,\n};\n\nexport default React.memo(ImagensdasEscolas);\n","import React, { memo } from 'react';\n\n// Import all section components\nimport BasicInfo from './BasicInfo';\nimport HistoriaEscola from './HistoriaEscola';\n// import PovosLinguas from './PovosLinguas';\nimport Modalidades from './Modalidades';\nimport Infraestrutura from './Infraestrutura';\nimport GestaoProfessores from './GestaoProfessores';\nimport ProjetosParcerias from './ProjetosParcerias';\n// import ImagemHistoriadoProfessor from '../ImagemHistoriadoProfessor';\nimport HistoriadoProfessor from './HistoriadoProfessor';\nimport ImagensdasEscolas from '../ImagensdasEscolas';\n\n// CSS para layout Masonry real usando CSS columns\nconst masonryStyles = `\n  .masonry-grid {\n    column-count: 1;\n    column-gap: 1.5rem;\n    column-fill: balance;\n  }\n  \n  .masonry-grid > * {\n    display: block;\n    break-inside: avoid;\n    page-break-inside: avoid;\n    margin-bottom: 1.5rem;\n  }\n  \n  /* Mobile: 1 coluna */\n  @media (max-width: 767px) {\n    .masonry-grid {\n      column-count: 1;\n    }\n  }\n  \n  /* Tablet e Desktop: 2 colunas */\n  @media (min-width: 768px) {\n    .masonry-grid {\n      column-count: 2;\n    }\n  }\n`;\n\n// Componente wrapper para o grid\nconst GridLayoutWrapper = memo(({ children, shouldUseGrid }) => {\n  const containerClasses = shouldUseGrid\n    ? 'masonry-grid'\n    : 'space-y-4';\n\n  return (\n    <>\n      <style>{masonryStyles}</style>\n      <div className={`${containerClasses} transition-all duration-300 ease-in-out`}>\n        {children}\n      </div>\n    </>\n  );\n});\n\nconst EscolaInfo = memo(({ escola, shouldUseGrid = false, refreshKey = 0, sectionRefs }) => {\n  console.log(\"EscolaInfo recebeu:\", escola);\n  \n  if (!escola) {\n    console.log(\"EscolaInfo: escola  null ou undefined\");\n    return null;\n  }\n\n  // Componentes que sero renderizados no grid\n  const gridSections = [\n    { Component: BasicInfo, props: { escola } },\n    // { Component: PovosLinguas, props: { escola } },\n    { Component: Modalidades, props: { escola } },\n    { Component: Infraestrutura, props: { escola } },\n    { Component: GestaoProfessores, props: { escola } },\n    { Component: ProjetosParcerias, props: { escola } }\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Grid de cards */}\n      <div ref={(el) => sectionRefs && (sectionRefs.dados = el)}>\n        <GridLayoutWrapper shouldUseGrid={shouldUseGrid}>\n          {gridSections.map(({ Component, props }, index) => (\n            <Component key={index} {...props} />\n          ))}\n        </GridLayoutWrapper>\n      </div>\n\n      {/* Histria da Escola em destaque */}\n      <div ref={(el) => sectionRefs && (sectionRefs.historia = el)}>\n        <HistoriaEscola escola={escola} refreshKey={refreshKey} />\n      </div>\n      \n      {/* Imagens da escola, agora renderizadas independentemente da histria */}\n      <ImagensdasEscolas escola_id={escola.id} refreshKey={refreshKey} />\n\n      <div ref={(el) => sectionRefs && (sectionRefs.depoimentos = el)}>\n        <HistoriadoProfessor escola={escola} refreshKey={refreshKey} />\n      </div>\n    </div>\n  );\n});\n\nexport default EscolaInfo; ","import React from 'react';\n\nconst HandFistIcon = ({ className = 'w-5 h-5', ...props }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 256 256\"\n    fill=\"currentColor\"\n    className={className}\n    {...props}\n  >\n    <path d=\"M200,80H184V64a32,32,0,0,0-56-21.13A32,32,0,0,0,72.21,60.42,32,32,0,0,0,24,88v40a104,104,0,0,0,208,0V112A32,32,0,0,0,200,80ZM152,48a16,16,0,0,1,16,16V80H136V64A16,16,0,0,1,152,48ZM88,64a16,16,0,0,1,32,0v40a16,16,0,0,1-32,0ZM40,88a16,16,0,0,1,32,0v16a16,16,0,0,1-32,0Zm176,40a88,88,0,0,1-175.92,3.75A31.93,31.93,0,0,0,80,125.13a31.93,31.93,0,0,0,44.58,3.35,32.21,32.21,0,0,0,11.8,11.44A47.88,47.88,0,0,0,120,176a8,8,0,0,0,16,0,32,32,0,0,1,32-32,8,8,0,0,0,0-16H152a16,16,0,0,1-16-16V96h64a16,16,0,0,1,16,16Z\" />\n  </svg>\n);\n\nexport default HandFistIcon; ","import React, { memo } from 'react';\n\nconst InfoItem = memo(({ label, value, className = '', isTextArea = false }) => {\n  if (!value) return null;\n\n  const isFlexLayout = className.includes('flex flex-col');\n  const baseClasses = isFlexLayout \n    ? 'flex flex-col gap-1 text-sm py-0.5'\n    : 'grid grid-cols-[auto,1fr] gap-x-2 text-sm py-0.5';\n\n  return (\n    <div className={`${baseClasses} ${className}`}>\n      <span className=\"font-medium text-neutral-800\">{label}:</span>\n      {isTextArea ? (\n        <div className=\"text-neutral-600\">\n          <div className=\"whitespace-pre-wrap break-words text-sm leading-relaxed\">\n            {value}\n          </div>\n        </div>\n      ) : (\n        <span className=\"text-neutral-600 break-words\">{value}</span>\n      )}\n    </div>\n  );\n});\n\nexport default InfoItem; ","import React, { memo } from 'react';\nimport HandFistIcon from './icons/HandFistIcon';\nimport InfoSection from './components/InfoSection';\nimport InfoItem from './components/InfoItem';\n\n// Wrapper para passar className maior ao cone\nconst LargeHandFistIcon = (props) => <HandFistIcon className=\"w-8 h-8\" {...props} />;\n\nconst TerraIndigenaInfo = memo(({ terraIndigena }) => {\n  if (!terraIndigena) {\n    console.log(\"TerraIndigenaInfo: terraIndigena  null ou undefined\");\n    return null;\n  }\n\n  const formatarSuperficie = () => {\n    return terraIndigena.superficie ? \n      `Superfcie: ${parseFloat(terraIndigena.superficie).toFixed(2)} ha` : null;\n  };\n\n  const formatarLocalizacao = () => {\n    return `${terraIndigena.municipio || ''}, ${terraIndigena.uf || ''}`.trim();\n  };\n\n  return (\n    <InfoSection title=\"Informaes da Terra Indgena\" icon={LargeHandFistIcon}>\n      <InfoItem label=\"Povos Indgenas\" value={terraIndigena.etnia} />\n      <InfoItem label=\"Localizao\" value={formatarLocalizacao()} />\n      <InfoItem label=\"Superfcie\" value={formatarSuperficie()} />\n      <InfoItem label=\"Fase\" value={terraIndigena.fase} />\n      <InfoItem label=\"Modalidade\" value={terraIndigena.modalidade} />\n      <InfoItem label=\"Reestudo\" value={terraIndigena.reestudo} />\n      <InfoItem label=\"Coordenao Regional\" value={terraIndigena.cr} />\n      <InfoItem label=\"Faixa de Fronteira\" value={terraIndigena.faixa_fron} />\n      <InfoItem label=\"Unidade Administrativa\" value={terraIndigena.undadm_nom} />\n      <InfoItem label=\"Sigla Unidade\" value={terraIndigena.undadm_sig} />\n      <InfoItem label=\"Domnio\" value={terraIndigena.dominio_un} />\n      <InfoItem label=\"Data de Atualizao\" value={terraIndigena.data_atual} />\n      <InfoItem label=\"Cdigo Terra Indgena\" value={terraIndigena.terrai_cod} />\n      <InfoItem label=\"Cdigo Unidade Administrativa\" value={terraIndigena.undadm_cod} />\n    </InfoSection>\n  );\n});\n\nexport default TerraIndigenaInfo; ","import React, { useState } from \"react\";\nimport {\n  FacebookShareButton,\n  TwitterShareButton,\n  WhatsappShareButton,\n  LinkedinShareButton,\n} from \"react-share\";\nimport { Link, Check, MessageCircle, Facebook, Twitter, Linkedin } from \"lucide-react\";\n\n// Componente Tooltip melhorado\nconst Tooltip = ({ children, text, position = \"top\" }) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const positionClasses = {\n    top: \"bottom-full left-1/2 transform -translate-x-1/2 mb-3\",\n    bottom: \"top-full left-1/2 transform -translate-x-1/2 mt-3\",\n  };\n\n  return (\n    <div \n      className=\"relative inline-block\"\n      onMouseEnter={() => setIsVisible(true)}\n      onMouseLeave={() => setIsVisible(false)}\n      onFocus={() => setIsVisible(true)}\n      onBlur={() => setIsVisible(false)}\n    >\n      {children}\n      {isVisible && (\n        <div className={`\n          absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-xl whitespace-nowrap\n          ${positionClasses[position]}\n          animate-in fade-in-0 zoom-in-95 duration-200\n        `}>\n          {text}\n          <div className=\"absolute left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\"></div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ShareButton = ({ onClick, url, title, description = \"\" }) => {\n  const [copied, setCopied] = useState(false);\n  // const [showShareOptions, setShowShareOptions] = useState(false); // Removido - no utilizado\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(url);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 3000);\n    } catch (err) {\n      // Fallback para navegadores mais antigos\n      const input = document.createElement(\"input\");\n      input.value = url;\n      document.body.appendChild(input);\n      input.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(input);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 3000);\n    }\n  };\n\n  // Frases de compartilhamento mais atrativas\n  const shareTextOptions = [\n    `Conhea a escola indgena: ${title}`,\n    `Descubra esta escola indgena: ${title}`,\n    `Escola indgena incrvel: ${title}`,\n    `Educao indgena em destaque: ${title}`,\n    `Conhea esta escola: ${title}`,\n    `Escola indgena que inspira: ${title}`,\n    `Educao que transforma: ${title}`,\n    `Escola indgena de referncia: ${title}`\n  ];\n\n  // Seleciona uma frase aleatria para variar o contedo\n  const randomIndex = Math.floor(Math.random() * shareTextOptions.length);\n  const shareText = shareTextOptions[randomIndex];\n  const shareUrl = url || window.location.href;\n\n  const shareButtons = [\n    {\n      name: \"WhatsApp\",\n      icon: <MessageCircle className=\"w-5 h-5\" />,\n      color: \"bg-green-500 hover:bg-green-600\",\n      component: WhatsappShareButton,\n      props: { url: shareUrl, title: shareText }\n    },\n    {\n      name: \"Facebook\",\n      icon: <Facebook className=\"w-5 h-5\" />,\n      color: \"bg-blue-600 hover:bg-blue-700\",\n      component: FacebookShareButton,\n      props: { url: shareUrl, quote: shareText }\n    },\n    {\n      name: \"Twitter\",\n      icon: <Twitter className=\"w-5 h-5\" />,\n      color: \"bg-sky-500 hover:bg-sky-600\",\n      component: TwitterShareButton,\n      props: { url: shareUrl, title: shareText }\n    },\n    {\n      name: \"LinkedIn\",\n      icon: <Linkedin className=\"w-5 h-5\" />,\n      color: \"bg-blue-700 hover:bg-blue-800\",\n      component: LinkedinShareButton,\n      props: { url: shareUrl, title: title, summary: description }\n    }\n  ];\n\n  return (\n    <div className=\"px-4 py-4 border-t border-green-200 bg-gradient-to-b from-white to-green-50\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Ttulo da seo */}\n        <div className=\"text-center mb-3\">\n          <h3 className=\"text-sm font-medium text-green-800\">\n            Compartilhe esta escola\n          </h3>\n        </div>\n\n        {/* Botes em linha horizontal */}\n        <div className=\"flex items-center justify-center gap-2\">\n          {/* Boto Copiar Link */}\n          <Tooltip text={copied ? \"Link copiado!\" : \"Copiar link\"}>\n            <button\n              onClick={handleCopyLink}\n              className={`\n                flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg transition-all duration-200\n                focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1\n                ${copied\n                  ? 'bg-green-100 text-green-800'\n                  : 'bg-green-500 hover:bg-green-600 text-white'\n                }\n              `}\n              aria-label=\"Copiar link\"\n            >\n              {copied ? (\n                <Check className=\"w-4 h-4\" />\n              ) : (\n                <Link className=\"w-4 h-4\" />\n              )}\n              <span className=\"text-xs font-medium\">\n                {copied ? 'Copiado' : 'Link'}\n              </span>\n            </button>\n          </Tooltip>\n\n          {/* Botes de Redes Sociais */}\n          {shareButtons.map((button, index) => {\n            const ShareComponent = button.component;\n            return (\n              <Tooltip key={index} text={`Compartilhar no ${button.name}`}>\n                <ShareComponent\n                  {...button.props}\n                  className=\"transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1\"\n                  aria-label={`Compartilhar no ${button.name}`}\n                >\n                  <div className={`\n                    flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-white\n                    ${button.color}\n                  `}>\n                    {button.icon}\n                    <span className=\"text-xs font-medium\">{button.name}</span>\n                  </div>\n                </ShareComponent>\n              </Tooltip>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(ShareButton);","import React, { memo, useMemo } from 'react';\nimport ShareButton from '../ShareButton';\nimport { gerarUrlEscola, gerarTituloEscola, gerarDescricaoEscola } from '../../utils/metaTags';\n\nconst ShareSection = memo(({ copiarLink, compartilhar, painelInfo }) => {\n  // Gerar URL customizada para compartilhamento usando utilitrio centralizado\n  const gerarLinkCustomizado = useMemo(() => {\n    return gerarUrlEscola(painelInfo);\n  }, [painelInfo]);\n\n  // Gerar descrio otimizada para compartilhamento usando utilitrio centralizado\n  const gerarDescricao = useMemo(() => {\n    return gerarDescricaoEscola(painelInfo);\n  }, [painelInfo]);\n\n  // Gerar ttulo otimizado para compartilhamento usando utilitrio centralizado\n  const gerarTitulo = useMemo(() => {\n    return gerarTituloEscola(painelInfo);\n  }, [painelInfo]);\n\n  return (\n    <ShareButton \n      onClick={compartilhar}\n      url={gerarLinkCustomizado}\n      title={gerarTitulo}\n      description={gerarDescricao}\n    />\n  );\n});\n\nexport default ShareSection; ","import React, { useMemo } from \"react\";\nimport DOMPurify from \"dompurify\";\n\n/**\n * Componente PainelDescricao - Exibe contedo formatado com sanitizao HTML\n * \n * @param {Object} props - Propriedades do componente\n * @param {string} props.descricao - Texto HTML ou texto puro a ser exibido\n * @param {string} props.className - Classes CSS adicionais (opcional)\n * @returns {React.ReactElement|null} - Componente renderizado ou null\n */\nconst PainelDescricao = ({ descricao, className = \"\" }) => {\n  // Funo para formatar o texto com quebras de linha\n  const formatText = (text) => {\n    if (!text) return \"\";\n    \n    // Preserva pargrafos convertendo linhas duplas em tags <p>\n    let formattedText = text.replace(/\\n\\n+/g, \"</p><p>\");\n    \n    // Substitui quebras de linha simples por <br>\n    formattedText = formattedText.replace(/\\n/g, \"<br>\");\n    \n    // Adiciona tags <p> no incio e fim se no existirem\n    if (!formattedText.startsWith(\"<p>\")) {\n      formattedText = \"<p>\" + formattedText;\n    }\n    if (!formattedText.endsWith(\"</p>\")) {\n      formattedText = formattedText + \"</p>\";\n    }\n    \n    // Remove espaos extras entre tags HTML\n    formattedText = formattedText.replace(/>\\s+</g, \"><\");\n    \n    return formattedText;\n  };\n\n  // Usa useMemo para evitar sanitizao redundante em re-renders\n  const sanitizedHTML = useMemo(() => {\n    if (!descricao) return \"\";\n    \n    return DOMPurify.sanitize(formatText(descricao), {\n      ALLOWED_TAGS: [\n        'b', 'i', 'em', 'strong', 'a', 'p', 'br', 'ul', 'ol', 'li',\n        'div', 'span', 'img', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n        'center', 'blockquote', 'code', 'pre', 'hr', 'table', 'thead', \n        'tbody', 'tr', 'th', 'td'\n      ],\n      ALLOWED_ATTR: [\n        'href', 'target', 'rel', 'class', 'style', 'src', 'alt',\n        'width', 'height', 'id', 'title', 'aria-label', 'aria-describedby'\n      ],\n      ADD_TAGS: ['center', 'blockquote'],\n      ADD_ATTR: ['target', 'className', 'title'],\n      KEEP_CONTENT: true,\n      ALLOW_DATA_ATTR: false\n    });\n  }, [descricao]);\n\n  if (!descricao) return null;\n\n  return (\n    <div className={`mb-6 ${className}`}>\n      <div\n        className=\"prose prose-lg lg:prose-xl max-w-none px-1\"\n        style={{\n          '--tw-prose-body': '#1f2937',\n          '--tw-prose-headings': '#111827',\n          '--tw-prose-links': '#059669',\n          '--tw-prose-bold': '#111827',\n          '--tw-prose-counters': '#1f2937',\n          '--tw-prose-bullets': '#4b5563',\n          '--tw-prose-hr': '#e5e7eb',\n          '--tw-prose-quotes': '#111827',\n          '--tw-prose-quote-borders': '#10b981',\n          '--tw-prose-captions': '#6b7280',\n          '--tw-prose-code': '#111827',\n          '--tw-prose-pre-code': '#e5e7eb',\n          '--tw-prose-pre-bg': '#1f2937',\n          '--tw-prose-th-borders': '#d1d5db',\n          '--tw-prose-td-borders': '#e5e7eb',\n          lineHeight: '1.8',\n          fontSize: '1.125rem',\n          fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n          letterSpacing: '0.015em',\n        }}\n        dangerouslySetInnerHTML={{ __html: sanitizedHTML }}\n        aria-live=\"polite\"\n      />\n    </div>\n  );\n};\n\nexport default React.memo(PainelDescricao);","import React, { memo } from 'react';\nimport PainelDescricao from '../PainelDescricao';\n\nconst IntroPanel = memo(({ painelInfo }) => (\n  <div className=\"space-y-6\">\n    <div className=\"prose prose-lg lg:prose-xl max-w-none\">\n      <div className=\"bg-green-100 rounded-lg p-6\">\n        <PainelDescricao descricao={painelInfo.descricao_detalhada} />\n      </div>\n    </div>\n    {painelInfo.audioUrl && (\n      <div className=\"mt-6\">\n        <audio controls className=\"w-full\">\n          <source src={painelInfo.audioUrl} type=\"audio/mpeg\" />\n          Seu navegador no suporta o elemento de udio.\n        </audio>\n      </div>\n    )}\n  </div>\n));\n\nexport default IntroPanel; ","/**\n * Utility functions for text formatting\n */\n\n/**\n * Lista de siglas que devem permanecer em maisculas\n */\nconst SIGLAS_MAIUSCULAS = ['EE', 'EEI'];\n\n/**\n * Capitalizes the first letter of each word in a string, keeping specific acronyms in uppercase\n * @param {string} str - The string to capitalize\n * @returns {string} The capitalized string\n */\nexport const capitalizeWords = (str) => {\n  if (!str || typeof str !== 'string') return '';\n  \n  // Primeiro, divide a string em palavras\n  const words = str.split(/\\s+/);\n  \n  // Processa cada palavra\n  const processedWords = words.map(word => {\n    // Verifica se a palavra  uma sigla que deve permanecer em maisculas\n    if (SIGLAS_MAIUSCULAS.includes(word.toUpperCase())) {\n      return word.toUpperCase();\n    }\n    \n    // Para outras palavras, aplica a capitalizao normal\n    return word.charAt(0).toUpperCase() + word.substr(1).toLowerCase();\n  });\n  \n  // Junta as palavras de volta em uma string\n  return processedWords.join(' ');\n}; \n\n/**\n * Normalizes an address string by capitalizing words and handling common address abbreviations\n * @param {string} address - The address string to normalize\n * @returns {string} The normalized address string\n */\nexport const normalizeAddress = (address) => {\n  if (!address || typeof address !== 'string') return '';\n\n  // Lista de abreviaes comuns em endereos\n  const abbreviations = {\n    'r.': 'Rua',\n    'av.': 'Avenida',\n    'al.': 'Alameda',\n    'pr.': 'Praa',\n    'tr.': 'Travessa',\n    'rod.': 'Rodovia',\n    'est.': 'Estrada',\n    'n.': 'Nmero',\n    'n': 'Nmero',\n    'apt.': 'Apartamento',\n    'bl.': 'Bloco',\n    'qd.': 'Quadra',\n    'lt.': 'Lote',\n    'km': 'KM',\n    's/n': 'S/N'\n  };\n\n  // Primeiro, substitui as abreviaes\n  let normalized = address.toLowerCase();\n  Object.entries(abbreviations).forEach(([abbr, full]) => {\n    normalized = normalized.replace(new RegExp(`\\\\b${abbr}\\\\b`, 'g'), full);\n  });\n\n  // Depois aplica a capitalizao de palavras\n  return capitalizeWords(normalized);\n}; ","import React from \"react\";\nimport { X, Maximize2, Minimize2, MapPin } from \"lucide-react\";\nimport { capitalizeWords } from \"../utils/textFormatting\";\n\n// Funo para formatar o ttulo da escola\nconst formatarTituloEscola = (titulo) => {\n  if (!titulo) return '';\n  \n  // Converter para minsculas para facilitar a busca\n  const tituloLower = titulo.toLowerCase();\n  \n  // Verificar se contm \"escola estadual\" e \"aldeia\"\n  if (tituloLower.includes('escola estadual') && tituloLower.includes('aldeia')) {\n    // Extrair o nome da aldeia (parte aps \"aldeia\")\n    const partes = titulo.split(' ');\n    const indiceAldeia = partes.findIndex(parte => \n      parte.toLowerCase().includes('aldeia')\n    );\n    \n    if (indiceAldeia !== -1 && indiceAldeia < partes.length - 1) {\n      // Pegar a parte da aldeia (pode ter mais de uma palavra)\n      const nomeAldeia = partes.slice(indiceAldeia + 1).join(' ');\n      return `E.E.I ${capitalizeWords(nomeAldeia)}`;\n    }\n  }\n  \n  // Se no conseguir formatar, retorna o ttulo original capitalizado\n  return capitalizeWords(titulo);\n};\n\nconst PainelHeader = ({ titulo, closePainel, toggleMaximize, isMaximized, imagemHeader }) => {\n  const isMobile = window.innerWidth <= 768;\n  const isMobileLandscape = isMobile && window.innerWidth > window.innerHeight;\n  const isVerySmallLandscape = isMobileLandscape && window.innerWidth <= 850;\n\n  return (\n    <header className={`relative border-b border-green-100 ${isMobileLandscape ? 'min-h-[60px]' : ''}`}>\n      <div className=\"px-3 sm:px-4 md:px-6 lg:px-8 py-2 sm:py-2 md:py-3\">\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between pr-12\">\n          <div className=\"space-y-1\">\n            <h2 \n              id=\"painel-titulo\"\n              className={`font-bold text-gray-900 leading-tight tracking-tight break-words ${\n                isVerySmallLandscape\n                  ? 'text-lg' // Aumentado de text-base\n                  : isMobileLandscape \n                    ? 'text-xl sm:text-2xl' // Aumentado de text-lg sm:text-xl\n                    : 'text-2xl sm:text-3xl md:text-4xl' // Aumentado de text-xl sm:text-2xl md:text-3xl\n              }`}\n              style={isVerySmallLandscape ? { fontSize: 'clamp(1.125rem, 4.5vw, 1.5rem)' } : {}}\n            >\n              {formatarTituloEscola(titulo)}\n            </h2>\n            \n            {/* Subttulo decorativo */}\n            <div className=\"flex items-center space-x-2 text-gray-600\">\n              <MapPin className=\"w-3 h-3\" /> {/* Diminudo de w-4 h-4 */}\n              <span className=\"text-xs sm:text-sm font-medium\"> {/* Diminudo de text-sm sm:text-base */}\n                Escola Estadual Indgena\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"absolute top-2 sm:top-4 right-2 sm:right-4 flex items-center gap-2\">\n        {!isMobile && (\n          <button\n            onClick={toggleMaximize}\n            className=\"p-2 text-green-700 hover:text-green-900 hover:bg-green-100 transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n            aria-label={isMaximized ? \"Restaurar painel\" : \"Maximizar painel\"}\n            title={isMaximized ? \"Restaurar\" : \"Maximizar\"}\n          >\n            {isMaximized ? (\n              <Minimize2 size={18} className=\"stroke-2\" aria-hidden=\"true\" />\n            ) : (\n              <Maximize2 size={18} className=\"stroke-2\" aria-hidden=\"true\" />\n            )}\n          </button>\n        )}\n\n        <button\n          onClick={closePainel}\n          className={`text-gray-700 hover:text-gray-900 hover:bg-green-100 transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${\n            isMobileLandscape ? 'p-1.5' : 'p-2'\n          }`}\n          aria-label=\"Fechar painel\"\n        >\n          <X \n            size={isMobileLandscape ? 18 : 20} \n            aria-hidden=\"true\"\n            className=\"stroke-2\"\n          />\n        </button>\n      </div>\n    </header>\n  );\n};\n\nexport default PainelHeader;\n","import React, { useState } from 'react';\nimport OptimizedImage from '../../shared/OptimizedImage';\nimport './EscolaHeaderImage.css';\n\nconst EscolaHeaderImage = ({ imagemUrl, className = '', isPreloaded = false }) => {\n  const [imageError, setImageError] = useState(false);\n\n  const handleImageLoad = () => {\n    setImageError(false);\n  };\n\n  const handleImageError = () => {\n    setImageError(true);\n  };\n\n  // Se no h URL ou houve erro, no renderiza nada\n  if (!imagemUrl || imageError) {\n    return null;\n  }\n\n  return (\n    <div className={`escola-header-image escola-header-shimmer relative overflow-hidden ${className}`}>\n      {/* Imagem de fundo que rola com a pgina */}\n      <div className=\"absolute inset-0\">\n        <OptimizedImage\n          src={imagemUrl}\n          alt=\"Imagem da escola\"\n          className=\"w-full h-full object-cover transition-all duration-700 ease-out\"\n          isPreloaded={isPreloaded}\n          onLoad={handleImageLoad}\n          onError={handleImageError}\n        />\n      </div>\n\n      {/* Gradiente overlay mais sutil para preservar as cores */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-black/20 via-black/10 to-black/30\" />\n      <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent\" />\n      \n      {/* Padro decorativo muito sutil */}\n      <div className=\"absolute inset-0 opacity-5\">\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.05)_0%,transparent_50%)]\" />\n      </div>\n      \n      {/* Efeito de brilho muito sutil */}\n      <div className=\"absolute top-0 right-0 w-32 h-32 bg-gradient-radial from-white/5 to-transparent rounded-full blur-xl\"></div>\n    </div>\n  );\n};\n\nexport default EscolaHeaderImage;\n","import { useState, useEffect } from \"react\";\nimport { useBreakpoint } from \"../../hooks/responsive/useBreakpoint\";\nimport logger from \"../../utils/logger\";\n\n/**\n * Hook para controlar visibilidade do painel\n * \n * @param {Object|null} painelInfo - Informaes do painel a ser exibido\n * @returns {Object} Objeto com isVisible e isMobile\n */\nconst usePainelVisibility = (painelInfo) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const { isMobile } = useBreakpoint();\n\n  useEffect(() => {\n    logger.debug(\"usePainelVisibility - painelInfo mudou:\", painelInfo);\n    \n    if (painelInfo && typeof painelInfo === 'object') {\n      logger.debug(\"usePainelVisibility: Definindo visibilidade como true\");\n      setIsVisible(true);\n      document.body.style.overflow = \"hidden\";\n    } else {\n      logger.debug(\"usePainelVisibility: Definindo visibilidade como false\");\n      setIsVisible(false);\n      document.body.style.overflow = \"\";\n    }\n\n    return () => {\n      document.body.style.overflow = \"\";\n    };\n  }, [painelInfo]);\n\n  return { isVisible, isMobile };\n};\n\nexport default usePainelVisibility;","import React from 'react';\nimport '../PainelInformacoes.css';\nimport PainelHeader from '../../PainelHeader';\nimport EscolaHeaderImage from './EscolaHeaderImage';\nimport usePainelVisibility from '../../hooks/usePainelVisibility';\nimport { usePainelDimensions } from '../../hooks/usePainelDimensions';\nimport useImagePreloader from '../../../hooks/useImagePreloader';\n\nconst PainelContainer = ({ \n  painelInfo, \n  closePainel, \n  children,\n  isMaximized,\n  onToggleMaximize,\n  contentRef,\n  rightNav\n}) => {\n  const { isVisible, isMobile } = usePainelVisibility(painelInfo);\n  const painelDimensions = usePainelDimensions(isMobile, isMaximized);\n  \n  // Hook de preload de imagens\n  const { isImagePreloaded } = useImagePreloader(painelInfo?.id, true);\n\n  if (!painelInfo) return null;\n\n  // Determinar altura da navbar baseada no tamanho da tela\n  const isMobileLandscape = isMobile && window.innerWidth > window.innerHeight;\n  const navbarHeight = isMobileLandscape ? 48 : isMobile ? 56 : 72;\n\n  const baseClasses = `\n    fixed\n    ${isMobile \n      ? `inset-x-0 top-0 w-full h-full` \n      : 'top-30 bottom-0 right-0 w-full sm:w-3/4 lg:w-[49%] h-auto'\n    }\n    rounded-t-xl shadow-xl z-[9999] transform transition-all duration-500 ease-in-out\n    bg-white border-t-4 border-white mj-panel\n  `;\n  \n  const visibilityClasses = isVisible \n    ? isMobile \n      ? \"translate-y-0 opacity-100\" \n      : \"translate-y-0 opacity-100\"\n    : isMobile \n      ? \"translate-y-full opacity-0\" \n      : \"translate-y-full opacity-0\";\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-labelledby=\"painel-titulo\"\n      aria-describedby=\"painel-descricao\"\n      aria-modal=\"true\"\n      className={`${baseClasses} ${visibilityClasses}${isMobile ? ' painel-informacoes-mobile' : ''}`}\n      style={{\n        height: painelDimensions.height,\n        maxHeight: painelDimensions.maxHeight,\n        width: isMobile ? '100%' : painelDimensions.width,\n        top: isMobile ? `${navbarHeight}px` : 72,\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: 'fixed',\n        ...(isMobile && {\n          borderRadius: painelDimensions.isMobileLandscape ? '0' : '1rem 1rem 0 0',\n          boxShadow: painelDimensions.isMobileLandscape \n            ? '0 0 0 0' \n            : '0 -4px 6px -1px rgba(0, 0, 0, 0.1), 0 -2px 4px -1px rgba(0, 0, 0, 0.06)'\n        })\n      }}\n    >\n      <PainelHeader \n        titulo={painelInfo.titulo} \n        closePainel={closePainel}\n        toggleMaximize={onToggleMaximize}\n        isMaximized={isMaximized}\n        imagemHeader={painelInfo.imagem_header}\n      />\n      \n      {/* Navegao fixa  direita do painel */}\n      {rightNav && (\n        <div className=\"hidden sm:flex flex-col gap-1 absolute right-0 top-1/2 -translate-y-1/2 z-[10000]\">\n          {rightNav}\n        </div>\n      )}\n\n      <div ref={contentRef} className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-green-600/40 scrollbar-track-green-50/20 mj-panel-content\">\n        {/* Imagem do header que rola com a pgina */}\n        {painelInfo.imagem_header && (\n          <EscolaHeaderImage \n            imagemUrl={painelInfo.imagem_header}\n            className=\"h-56 sm:h-64 md:h-72 lg:h-80 xl:h-96 w-full\"\n            isPreloaded={isImagePreloaded(painelInfo.imagem_header)}\n          />\n        )}\n        \n        <div className={`${isMobile ? 'p-3 sm:p-4' : 'p-6'} space-y-4 sm:space-y-5 -mt-2`}>\n          <div className=\"prose prose-sm sm:prose-base md:prose-lg lg:prose-xl max-w-none mj-prose\">\n            {children}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(PainelContainer); ","import { useState, useEffect, useMemo } from 'react';\n\nexport const usePainelDimensions = (isMobile, isMaximized) => {\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const [windowHeight, setWindowHeight] = useState(window.innerHeight);\n  \n  // Breakpoints para responsividade\n  const breakpoints = {\n    sm: 640,\n    md: 768,\n    lg: 1024,\n    xl: 1280,\n    '2xl': 1536\n  };\n\n  // Detectar mudanas no tamanho da janela\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n      setWindowHeight(window.innerHeight);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Calcular dimenses base\n  const dimensions = useMemo(() => {\n    // Determinar altura da navbar baseada na orientao\n    const isMobileLandscape = isMobile && windowWidth > windowHeight;\n    const navbarHeight = isMobileLandscape ? 48 : isMobile ? 56 : 72;\n    const baseHeight = `calc(100vh - ${navbarHeight}px)`;\n    const baseMaxHeight = isMobile ? \"96vh\" : \"92vh\";\n\n    // Determinar se est em modo desktop\n    const isDesktop = windowWidth >= breakpoints.md;\n    \n    // Determinar se deve usar grid\n    const shouldUseGrid = isDesktop && isMaximized;\n\n    // Calcular largura do painel\n    let panelWidth;\n    if (isMobile) {\n      if (isMobileLandscape) {\n        // Mobile na horizontal: preencher toda a tela\n        panelWidth = '100%';\n      } else {\n        // Mobile na vertical: preencher toda a largura\n        panelWidth = '100%';\n      }\n    } else {\n      // Desktop\n      panelWidth = isMaximized \n      ? '100%' \n      : windowWidth >= breakpoints.lg \n        ? '49%' \n        : '75%';\n    }\n\n    return {\n      height: baseHeight,\n      maxHeight: baseMaxHeight,\n      width: panelWidth,\n      isDesktop,\n      isMobileLandscape,\n      shouldUseGrid,\n      breakpoints,\n      zIndex: 1000\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMobile, isMaximized, windowWidth, windowHeight]);\n\n  return dimensions;\n};","import React, { useRef, useState, useEffect } from 'react';\n\n/**\n * DocumentViewer\n * Componente para exibir uma lista de documentos (PDFs) associados a uma escola.\n * Permite visualizao via iframe (Google Drive/Docs) ou download externo, com tratamento de erros e fallback amigvel.\n * Props:\n *   - documentos: Array de objetos { id, titulo, autoria, tipo, link_pdf }\n *   - title: string (opcional)\n */\n\n// Utility function to transform Google Drive links\nconst transformarLinkGoogleDrive = (link) => {\n  if (!link || typeof link !== 'string') return null;\n  \n  const match = link.match(/\\/d\\/([a-zA-Z0-9-_]+)/);\n  if (!match) return null;\n  \n  const fileId = match[1];\n  return `https://docs.google.com/gview?url=https://drive.google.com/uc?id=${fileId}&embedded=true`;\n};\n\n/**\n * Componente de troca de visualizao (lista/grade) acessvel e reutilizvel\n */\nconst ViewModeToggle = ({ viewMode, setViewMode }) => (\n  <div className=\"flex items-center gap-2\" role=\"tablist\" aria-label=\"Modos de visualizao dos documentos\">\n    <button\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={viewMode === 'list'}\n      aria-label=\"Visualizar em lista\"\n      onClick={() => setViewMode('list')}\n      className={`p-2 rounded-lg flex items-center gap-1 transition-colors focus:outline-none focus:ring-2 focus:ring-green-600 ${\n        viewMode === 'list'\n          ? 'bg-green-100 text-green-800 font-semibold'\n          : 'text-gray-600 hover:bg-gray-100'\n      }`}\n      tabIndex={0}\n    >\n      {/* cone de lista */}\n      <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n      </svg>\n      <span className=\"hidden sm:inline\">Lista</span>\n    </button>\n    <button\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={viewMode === 'grid'}\n      aria-label=\"Visualizar em grade\"\n      onClick={() => setViewMode('grid')}\n      className={`p-2 rounded-lg flex items-center gap-1 transition-colors focus:outline-none focus:ring-2 focus:ring-green-600 ${\n        viewMode === 'grid'\n          ? 'bg-green-100 text-green-800 font-semibold'\n          : 'text-gray-600 hover:bg-gray-100'\n      }`}\n      tabIndex={0}\n    >\n      {/* cone de grade */}\n      <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\n      </svg>\n      <span className=\"hidden sm:inline\">Grade</span>\n    </button>\n  </div>\n);\n\nconst DocumentViewer = ({ documentos, title = \"Documentos\" }) => {\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [viewMode, setViewMode] = useState('list'); // 'list' ou 'grid'\n  const iframeRef = useRef(null);\n  const [iframeError, setIframeError] = useState(false);\n  const [useGoogleDocsViewer, setUseGoogleDocsViewer] = useState(false);\n\n  // Reset states when selected document changes\n  useEffect(() => {\n    if (selectedDoc) {\n      setIframeError(false);\n      setUseGoogleDocsViewer(false);\n    }\n  }, [selectedDoc]);\n\n  // Set first document as selected if none is selected\n  useEffect(() => {\n    if (!selectedDoc && documentos?.length > 0) {\n      setSelectedDoc(documentos[0]);\n    }\n  }, [documentos, selectedDoc]);\n\n  // Handle iframe events\n  useEffect(() => {\n    const iframe = iframeRef.current;\n    if (!iframe || !selectedDoc) return;\n\n    const handleLoad = () => {\n      setIframeError(false);\n    };\n\n    const handleError = () => {\n      setIframeError(true);\n      setUseGoogleDocsViewer(true);\n    };\n\n    iframe.addEventListener('load', handleLoad);\n    iframe.addEventListener('error', handleError);\n\n    return () => {\n      iframe.removeEventListener('load', handleLoad);\n      iframe.removeEventListener('error', handleError);\n    };\n  }, [selectedDoc]);\n\n  // Early return after all hooks\n  if (!documentos || documentos.length === 0) {\n    return null;\n  }\n\n  const renderDocumentGrid = () => {\n    return (\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6\">\n        {documentos.map((doc) => (\n          <div\n            key={doc.id}\n            className={`\n              flex flex-col justify-between h-full max-w-xs mx-auto\n              rounded-2xl transition-all duration-200 cursor-pointer\n              shadow-sm hover:shadow-lg\n              ${selectedDoc?.id === doc.id\n                ? 'bg-green-100 scale-[1.03]'\n                : 'bg-white hover:bg-green-50'\n              }\n            `}\n            onClick={() => {\n              setSelectedDoc(doc);\n            }}\n            tabIndex={0}\n            aria-label={`Selecionar documento: ${doc.titulo}`}\n          >\n            <div className=\"p-5 flex-1 flex flex-col justify-between\">\n              <h4 className=\"font-semibold text-green-800 mb-2 line-clamp-2 text-lg\">{doc.titulo}</h4>\n              {doc.autoria && (\n                <p className=\"text-sm text-gray-600 mb-2 line-clamp-1\">Por: {doc.autoria}</p>\n              )}\n              {doc.tipo && (\n                <span className=\"inline-block px-2 py-1 text-xs font-medium bg-green-200 text-green-800 rounded-full\">\n                  {doc.tipo}\n                </span>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const renderDocumentList = () => {\n    return (\n      <div className=\"space-y-2\">\n        {documentos.map((doc) => (\n          <button\n            key={doc.id}\n            onClick={() => {\n              setSelectedDoc(doc);\n            }}\n            className={`w-full text-left p-3 rounded-lg transition-colors duration-200 ${\n              selectedDoc?.id === doc.id\n                ? 'bg-green-100'\n                : 'hover:bg-green-50'\n            }`}\n          >\n            <h4 className=\"font-medium text-green-800\">{doc.titulo}</h4>\n            {doc.autoria && (\n              <p className=\"text-sm text-gray-600\">Por: {doc.autoria}</p>\n            )}\n            {doc.tipo && (\n              <span className=\"inline-block mt-1 px-2 py-1 text-xs font-medium bg-green-200 text-green-800 rounded-full\">\n                {doc.tipo}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n    );\n  };\n\n  const renderDocumentViewer = () => {\n    if (!selectedDoc) return null;\n\n    const isGoogleDriveLink = selectedDoc.link_pdf.includes('drive.google.com/file/d/');\n\n    return (\n      <div className=\"rounded-lg overflow-hidden shadow-lg bg-white\">\n        {isGoogleDriveLink ? (\n          <>\n            {!useGoogleDocsViewer ? (\n              <iframe \n                ref={iframeRef}\n                src={selectedDoc.link_pdf.replace('/view?usp=sharing', '/preview')}\n                width=\"100%\" \n                height=\"500px\"\n                allow=\"autoplay\"\n                loading=\"lazy\"\n                title={selectedDoc.titulo}\n                sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n                className=\"bg-white\"\n              />\n            ) : (\n              <iframe\n                ref={iframeRef}\n                src={transformarLinkGoogleDrive(selectedDoc.link_pdf)}\n                width=\"100%\"\n                height=\"500px\"\n                allow=\"autoplay\"\n                loading=\"lazy\"\n                title={`${selectedDoc.titulo} (Google Docs Viewer)`}\n                sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n                className=\"bg-white\"\n              />\n            )}\n            {iframeError && (\n              <div className=\"p-6 text-center text-gray-600 bg-green-100\">\n                <p className=\"mb-3 text-lg\">No foi possvel carregar o documento diretamente.</p>\n                <a\n                  href={selectedDoc.link_pdf}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center px-4 py-2 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n                >\n                  <svg \n                    className=\"w-5 h-5 mr-2\" \n                    fill=\"none\" \n                    stroke=\"currentColor\" \n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path \n                      strokeLinecap=\"round\" \n                      strokeLinejoin=\"round\" \n                      strokeWidth={2} \n                      d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" \n                    />\n                  </svg>\n                  Abrir em nova aba\n                </a>\n              </div>\n            )}\n          </>\n        ) : (\n          <div className=\"flex justify-center p-6\">\n            <a\n              href={selectedDoc.link_pdf}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center px-6 py-3 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n            >\n              <svg \n                className=\"w-5 h-5 mr-2\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" \n                />\n              </svg>\n              Ver documento PDF\n            </a>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"mt-8 max-w-4xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-xl font-semibold text-green-800\">{title}:</h3>\n        {documentos.length > 1 && (\n          <ViewModeToggle viewMode={viewMode} setViewMode={setViewMode} />\n        )}\n      </div>\n      \n      {documentos.length > 1 && (\n        <div className=\"mb-6\">\n          {viewMode === 'grid' ? renderDocumentGrid() : renderDocumentList()}\n        </div>\n      )}\n      \n      {renderDocumentViewer()}\n    </div>\n  );\n};\n\nexport default React.memo(DocumentViewer); ","import React, { useState, useEffect } from 'react';\nimport { getTituloByVideoUrl } from '../../../services/legendasService';\n\n/**\n * VideoPlayer\n * Componente para exibir vdeos do YouTube de forma responsiva e acessvel.\n * Faz extrao do ID do vdeo a partir de diferentes formatos de URL e exibe fallback amigvel em caso de erro.\n * Props:\n *   - videoUrl: string (URL do vdeo)\n *   - title: string (opcional)\n *   - escolaId: number (ID da escola para buscar ttulo personalizado)\n */\n\n// Utility function to extract YouTube video ID\nconst extrairIdYoutube = (url) => {\n  if (!url || typeof url !== 'string') {\n    return null;\n  }\n\n  // Remove query parameters to simplify\n  const baseUrl = url.split('?')[0];\n\n  // Patterns to extract video ID\n  const patterns = [\n    /youtube\\.com\\/embed\\/([^/?&]+)/,                 // embed/ID\n    /youtube\\.com\\/watch\\?v=([^&]+)/,                 // watch?v=ID\n    /youtu\\.be\\/([^?&]+)/,                            // youtu.be/ID\n    /youtube\\.com\\/v\\/([^?&]+)/                       // youtube.com/v/ID\n  ];\n\n  for (const pattern of patterns) {\n    const match = baseUrl.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n\n  return null;\n};\n\nconst VideoPlayer = ({ videoUrl, title = \"Vdeo\", escolaId }) => {\n  const [tituloPersonalizado, setTituloPersonalizado] = useState(null);\n  const [, setLoading] = useState(false);\n\n  // Buscar ttulo personalizado da nova tabela\n  useEffect(() => {\n    const buscarTitulo = async () => {\n      if (!videoUrl || !escolaId) return;\n\n      try {\n        setLoading(true);\n        const titulo = await getTituloByVideoUrl(videoUrl, escolaId);\n        setTituloPersonalizado(titulo);\n      } catch (error) {\n        console.warn('Erro ao buscar ttulo personalizado:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    buscarTitulo();\n  }, [videoUrl, escolaId]);\n\n  if (!videoUrl) return null;\n\n  const videoId = extrairIdYoutube(videoUrl);\n  \n  if (!videoId) {\n    return (\n      <div className=\"mt-8 max-w-4xl mx-auto\">\n        <h3 className=\"text-xl font-semibold text-green-800 mb-4\">\n          {tituloPersonalizado?.titulo || title}:\n        </h3>\n        <div className=\"p-6 text-center text-gray-600 bg-gray-50 rounded-lg\">\n          <p className=\"mb-3 text-lg\">Link do vdeo invlido ou no suportado.</p>\n          <a\n            href={videoUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"inline-flex items-center px-4 py-2 text-base font-medium text-white bg-green-700 hover:bg-green-800 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg\"\n          >\n            <svg \n              className=\"w-5 h-5 mr-2\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" \n              />\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" \n              />\n            </svg>\n            Tentar abrir no YouTube\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-8 max-w-4xl mx-auto\">\n      <h3 className=\"text-xl font-semibold text-green-800 mb-4\">\n        {tituloPersonalizado?.titulo || title}:\n      </h3>\n      \n      {/* Informaes adicionais do ttulo personalizado */}\n      {tituloPersonalizado && (\n        <div className=\"mb-4 p-4 bg-green-100 rounded-lg\">\n          {tituloPersonalizado.descricao && (\n            <p className=\"text-gray-700 mb-2\">{tituloPersonalizado.descricao}</p>\n          )}\n          \n          <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n            {tituloPersonalizado.categoria && (\n              <span className=\"capitalize bg-green-200 text-green-800 px-2 py-1 rounded\">\n                {tituloPersonalizado.categoria}\n              </span>\n            )}\n            {tituloPersonalizado.plataforma && (\n              <span className=\"capitalize\">\n                {tituloPersonalizado.plataforma}\n              </span>\n            )}\n            {tituloPersonalizado.duracao && (\n              <span>Durao: {tituloPersonalizado.duracao}</span>\n            )}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"rounded-lg overflow-hidden shadow-lg bg-white\">\n        <div className=\"relative pb-[56.25%] h-0\">\n          <iframe\n            className=\"absolute top-0 left-0 w-full h-full\"\n            src={`https://www.youtube.com/embed/${videoId}`}\n            title={tituloPersonalizado?.titulo || title}\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            loading=\"lazy\"\n            referrerPolicy=\"origin\"\n          />\n        </div>\n      </div>\n      \n\n    </div>\n  );\n};\n\nexport default React.memo(VideoPlayer); ","import React, { useRef, useState, useEffect, useMemo } from \"react\";\nimport { useShare } from \"../hooks/useShare\";\nimport { useDynamicURL } from \"../hooks/useDynamicURL\";\nimport { useClickOutside } from \"../hooks/useClickOutside\";\nimport useDocumentosEscola from \"../hooks/useDocumentosEscola\";\n\n// Import modular components\nimport EscolaInfo from \"./components/EscolaInfo\";\nimport TerraIndigenaInfo from \"./TerraIndigenaInfo\";\nimport ShareSection from \"./ShareSection\";\nimport IntroPanel from \"./IntroPanel\";\nimport PainelContainer from \"./components/PainelContainer\";\nimport DocumentViewer from \"./components/DocumentViewer\";\nimport VideoPlayer from \"./components/VideoPlayer\";\n\nconst PainelInformacoes = ({ painelInfo, closePainel, escola_id, refreshKey = 0 }) => {\n  const painelRef = useRef(null);\n  const contentRef = useRef(null);\n  const sectionRefs = useRef({});\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [isMaximized, setIsMaximized] = useState(false);\n  \n  const { gerarLinkCustomizado, copiarLink, compartilhar } = useShare(painelInfo);\n  const { documentos } = useDocumentosEscola(painelInfo?.id);\n  \n  const toggleMaximize = () => setIsMaximized(prev => !prev);\n  \n  useDynamicURL(painelInfo, gerarLinkCustomizado);\n  useClickOutside(painelRef, closePainel);\n\n  // Forar re-renderizao quando refreshKey mudar\n  useEffect(() => {\n    console.log('PainelInformacoes: refreshKey mudou para', refreshKey);\n  }, [refreshKey]);\n\n  const sections = useMemo(() => {\n    const list = [];\n    list.push({ key: 'dados', label: 'Dados' });\n    list.push({ key: 'historia', label: 'Histria' });\n    list.push({ key: 'depoimentos', label: 'Depoimentos' });\n    if (painelInfo && painelInfo.link_para_videos) list.push({ key: 'videos', label: 'Vdeos' });\n    return list;\n  }, [painelInfo?.link_para_videos]);\n\n  useEffect(() => {\n    const el = contentRef.current;\n    if (!el) return;\n    const handleScroll = () => {\n      const containerRect = el.getBoundingClientRect();\n      let bestIndex = 0;\n      let bestDelta = Infinity;\n      sections.forEach((s, idx) => {\n        const sec = sectionRefs.current[s.key];\n        if (!sec) return;\n        const r = sec.getBoundingClientRect();\n        const delta = Math.abs(r.top - containerRect.top - 80);\n        if (delta < bestDelta) {\n          bestDelta = delta;\n          bestIndex = idx;\n        }\n      });\n      setActiveIndex(bestIndex);\n    };\n    el.addEventListener('scroll', handleScroll, { passive: true });\n    handleScroll();\n    return () => el.removeEventListener('scroll', handleScroll);\n  }, [sections]);\n\n  const scrollToSection = (idx) => {\n    const el = contentRef.current;\n    if (!el) return;\n    const key = sections[idx]?.key;\n    const target = key ? sectionRefs.current[key] : null;\n    if (!target) return;\n    const containerTop = el.getBoundingClientRect().top;\n    const targetTop = target.getBoundingClientRect().top;\n    const scrollBy = targetTop - containerTop + el.scrollTop - 72; // pequeno offset sob header\n    el.scrollTo({ top: scrollBy, behavior: 'smooth' });\n  };\n\n  const prevSection = () => {\n    const nextIdx = activeIndex > 0 ? activeIndex - 1 : 0;\n    scrollToSection(nextIdx);\n  };\n\n  const nextSection = () => {\n    const last = sections.length - 1;\n    const nextIdx = activeIndex < last ? activeIndex + 1 : last;\n    scrollToSection(nextIdx);\n  };\n\n  const handleKeyActivate = (e, action) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      action();\n    }\n  };\n\n  if (!painelInfo) {\n    return null;\n  }\n\n  // Determine panel type\n  const isTerraIndigena = painelInfo.tipo === 'terra_indigena';\n  const isIntro = painelInfo.titulo === 'Sobre o site';\n\n  const renderContent = () => {\n    if (isIntro) {\n      return <IntroPanel painelInfo={painelInfo} />;\n    }\n    \n    if (isTerraIndigena) {\n      return <TerraIndigenaInfo terraIndigena={painelInfo} />;\n    }\n\n    return (\n      <div className=\"relative\">\n        <EscolaInfo \n          escola={painelInfo} \n          shouldUseGrid={true}\n          refreshKey={refreshKey}\n          sectionRefs={sectionRefs.current}\n        />\n        {documentos && documentos.length > 0 && (\n          <DocumentViewer \n            documentos={documentos}\n            title=\"Produes e materiais da escola\"\n          />\n        )}\n        {painelInfo.link_para_videos && (\n          <div ref={(el) => (sectionRefs.current['videos'] = el)}>\n            <VideoPlayer \n              videoUrl={painelInfo.link_para_videos}\n              title={<span style={{ fontSize: '0.75em' }}>{`Produes audiovisuais realizadas na ${painelInfo.titulo}`}</span>}\n              escolaId={painelInfo.id}\n            />\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div ref={painelRef}>\n      <PainelContainer\n        painelInfo={painelInfo}\n        closePainel={closePainel}\n        isMaximized={isMaximized}\n        onToggleMaximize={toggleMaximize}\n        contentRef={contentRef}\n        rightNav={sections.length > 1 ? (\n          <div className=\"navDotsInner\" role=\"navigation\" aria-label=\"Story sections\">\n            <div className=\"bg-green-100 rounded-lg px-1 py-1 shadow flex flex-col items-center gap-1\" style={{ WebkitTapHighlightColor: 'transparent' }}>\n              <div\n                className=\"navDotsNav navDotsUp w-5 h-5 rounded-full border border-green-300 bg-green-100 hover:bg-green-200 text-green-700 flex items-center justify-center outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0\"\n                role=\"button\"\n                tabIndex={0}\n                aria-label=\"Previous section\"\n                onClick={prevSection}\n                onKeyDown={(e) => handleKeyActivate(e, prevSection)}\n              />\n              <div className=\"navGroups navGroupUp disabled text-green-700\" />\n              <div className=\"dots flex flex-col items-center gap-1\">\n                {sections.map((s, idx) => (\n                  <div\n                    key={s.key}\n                    role=\"button\"\n                    tabIndex={0}\n                    className={`dot w-2 h-2 rounded-full border ${idx === activeIndex ? 'bg-green-600 border-green-600' : 'bg-white border-green-300 hover:border-green-400'} outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0`}\n                    title={s.label}\n                    data-index={idx}\n                    aria-label={`Go to section ${idx + 1}: ${s.label}`}\n                    onClick={() => scrollToSection(idx)}\n                    onKeyDown={(e) => handleKeyActivate(e, () => scrollToSection(idx))}\n                  />\n                ))}\n              </div>\n              <div className=\"navGroups navGroupDown disabled text-green-700\" />\n              <div\n                className=\"navDotsNav navDotsDown w-5 h-5 rounded-full border border-green-300 bg-green-100 hover:bg-green-200 text-green-700 flex items-center justify-center outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0\"\n                role=\"button\"\n                tabIndex={0}\n                aria-label=\"Next section\"\n                onClick={nextSection}\n                onKeyDown={(e) => handleKeyActivate(e, nextSection)}\n              />\n            </div>\n          </div>\n        ) : null}\n      >\n        {renderContent()}\n        <ShareSection \n          copiarLink={copiarLink} \n          compartilhar={compartilhar} \n          painelInfo={painelInfo}\n        />\n      </PainelContainer>\n    </div>\n  );\n};\n\nexport default React.memo(PainelInformacoes); ","import { criarSlug } from '../../utils/slug';\n\nexport const useShare = (painelInfo) => {\n  const gerarLinkCustomizado = () => {\n    return (\n      window.location.origin +\n      window.location.pathname +\n      \"?panel=\" +\n      criarSlug(painelInfo.titulo)\n    );\n  };\n\n  const copiarLink = async () => {\n    const url = gerarLinkCustomizado();\n    try {\n      await navigator.clipboard.writeText(url);\n      alert(\"Link copiado!\");\n    } catch (err) {\n      const input = document.createElement(\"input\");\n      input.value = url;\n      document.body.appendChild(input);\n      input.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(input);\n      alert(\"Link copiado!\");\n    }\n  };\n\n  const compartilhar = () => {\n    const url = gerarLinkCustomizado();\n    const texto = `Confira este painel: ${painelInfo.titulo}`;\n    \n    if (navigator.share) {\n      navigator.share({\n        title: painelInfo.titulo,\n        text: texto,\n        url: url,\n      });\n    } else {\n      window.open(\n        `https://twitter.com/intent/tweet?text=${encodeURIComponent(texto)}&url=${encodeURIComponent(url)}`,\n        \"_blank\"\n      );\n    }\n  };\n\n  return { gerarLinkCustomizado, copiarLink, compartilhar };\n};","import { useEffect } from 'react';\n\nexport const useClickOutside = (ref, handler) => {\n  useEffect(() => {\n    const listener = (event) => {\n      // S fecha se o clique for no mapa (openlayers-container)\n      const el = event.target;\n      if (el.classList && el.classList.contains('openlayers-container')) {\n        return;\n      }\n      \n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n      handler(event);\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n\n    return () => {\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler]);\n};","import { useEffect, useRef } from \"react\";\n\nexport const useDynamicURL = (painelInfo, gerarLinkCustomizado) => {\n  const lastUrlRef = useRef(null);\n  const timeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (!painelInfo) return;\n\n    // Limpa o timeout anterior se existir\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // Cria um novo timeout para debounce\n    timeoutRef.current = setTimeout(() => {\n      const newUrl = gerarLinkCustomizado();\n      \n      // S atualiza se a URL realmente mudou\n      if (newUrl !== lastUrlRef.current) {\n        try {\n          window.history.replaceState({}, \"\", newUrl);\n          lastUrlRef.current = newUrl;\n        } catch (error) {\n          console.warn('Erro ao atualizar URL:', error);\n        }\n      }\n    }, 300); // 300ms de debounce\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [painelInfo, gerarLinkCustomizado]);\n};","/**\n * Componente MapaEscolasIndigenas - Exibe o mapa interativo com escolas indgenas e terras indgenas\n * \n * @param {Object} props - Propriedades do componente\n * @param {Array} props.dataPoints - Array de pontos de dados das escolas\n * @param {Function} props.onPainelOpen - Funo para abrir o painel de informaes\n * @returns {React.ReactElement} - Componente renderizado\n */\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport MapSelector from \"./MapSelector\";\nimport PainelInformacoes from \"./PainelInformacoes\";\nimport \"./MapaEscolasIndigenas.css\";\nimport { criarSlug } from '../utils/slug';\nimport { useRefresh } from '../contexts/RefreshContext';\nimport logger from '../utils/logger';\n\nconst MapaEscolasIndigenas = ({ dataPoints, onPainelOpen, isLoading = false }) => {\n  logger.debug(\"DataPoints recebidos no MapaEscolasIndigenas:\", dataPoints ? {\n    quantidade: dataPoints.length,\n    exemplo: dataPoints[0] ? {\n      titulo: dataPoints[0].titulo,\n      latitude: dataPoints[0].Latitude,\n      longitude: dataPoints[0].Longitude,\n      tipo: dataPoints[0].tipo\n    } : 'Nenhum ponto'\n  } : 'Nenhum dataPoint');\n\n  const { refreshKey } = useRefresh();\n\n  const urlParams = useMemo(() => new URLSearchParams(window.location.search), []);\n  const panel = urlParams.get('panel');\n  const initialPanel = useMemo(() => {\n    if (panel && panel !== '' && dataPoints && dataPoints.length > 0) {\n      const pointFound = dataPoints.find((item) => criarSlug(item.titulo) === panel);\n      return pointFound || null;\n    }\n    return null;\n  }, [panel, dataPoints]);\n\n  const [painelInfo, setPainelInfo] = useState(initialPanel);\n  const [initialPanelOpened, setInitialPanelOpened] = useState(!!initialPanel);\n  \n  // Memoize escolasVisiveis para evitar reclculos desnecessrios\n  const escolasVisiveis = useMemo(() => \n    dataPoints ? dataPoints.filter(point => point.pontuacao >= 0) : [],\n    [dataPoints]\n  );\n\n  // Otimizar a funo de abrir painel\n  const abrirPainel = useCallback((info) => {\n    if (!info) return;\n    setPainelInfo(info);\n  }, []);\n\n  // Funo para forar refresh do painel\n  const refreshPainel = useCallback(() => {\n    logger.debug('Forando refresh do painel de informaes');\n    // O refresh ser disparado pelo contexto\n  }, []);\n\n  // Abrir painel automaticamente quando initialPanel for encontrado (apenas uma vez)\n  useEffect(() => {\n    if (initialPanel && !painelInfo && !initialPanelOpened) {\n      logger.debug('MapaEscolasIndigenas: Abrindo painel automaticamente para:', initialPanel.titulo);\n      setPainelInfo(initialPanel);\n      setInitialPanelOpened(true);\n    }\n  }, [initialPanel, painelInfo, initialPanelOpened]);\n\n  // Expor a funo abrirPainel e refreshPainel para componentes externos\n  useEffect(() => {\n    logger.debug('MapaEscolasIndigenas: onPainelOpen disponvel:', !!onPainelOpen);\n    logger.debug('MapaEscolasIndigenas: abrirPainel disponvel:', !!abrirPainel);\n    if (onPainelOpen && typeof onPainelOpen === 'function') {\n      logger.debug('MapaEscolasIndigenas: Expondo funo abrirPainel e refreshPainel');\n      onPainelOpen(abrirPainel, refreshPainel);\n    }\n  }, [abrirPainel, onPainelOpen, refreshPainel]);\n\n  // Otimizar a funo de fechar painel\n  const fecharPainel = useCallback(() => {\n    setPainelInfo(null);\n  }, []);\n\n  return (\n    <div className=\"relative h-screen w-full overflow-hidden\">\n      {/* Novo mapa sem gaps */}\n      <MapSelector\n        dataPoints={escolasVisiveis}\n        onPainelOpen={abrirPainel}\n        painelAberto={!!painelInfo}\n        className=\"h-full w-full\"\n        isMainLoading={isLoading}\n      />\n\n      {/* Painel de informaes */}\n      {painelInfo && (\n        <PainelInformacoes \n          painelInfo={painelInfo} \n          closePainel={fecharPainel} \n          refreshKey={refreshKey}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(MapaEscolasIndigenas);","import { supabase } from '../supabaseClient';\n\n// Configuraes para imagens das histrias do professor\nconst HISTORIA_PROFESSOR_CONFIG = {\n  BUCKET_NAME: 'historia-professor-imagens',\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_HISTORIA: 1,\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n/**\n * Valida um arquivo de imagem\n * @param {File} file - Arquivo a ser validado\n * @returns {Object} Resultado da validao\n */\nconst validateImageFile = (file) => {\n  // Verificar tipo MIME\n  if (!HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.includes(file.type)) {\n    return {\n      isValid: false,\n      error: `Tipo de arquivo no suportado. Use apenas: ${HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.map(t => t.split('/')[1].toUpperCase()).join(', ')}`\n    };\n  }\n\n  // Verificar tamanho\n  if (file.size > HISTORIA_PROFESSOR_CONFIG.MAX_FILE_SIZE) {\n    return {\n      isValid: false,\n      error: `Arquivo muito grande. Tamanho mximo: ${HISTORIA_PROFESSOR_CONFIG.MAX_FILE_SIZE / (1024 * 1024)}MB`\n    };\n  }\n\n  // Verificar extenso\n  const extension = file.name.split('.').pop().toLowerCase();\n  const allowedExtensions = HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.map(t => t.split('/')[1]);\n  if (!allowedExtensions.includes(extension)) {\n    return {\n      isValid: false,\n      error: `Extenso no permitida. Use apenas: ${allowedExtensions.join(', ')}`\n    };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Valida dimenses da imagem (opcional)\n * @param {File} file - Arquivo de imagem\n * @returns {Promise<boolean>} Se as dimenses so vlidas\n */\nconst validateImageDimensions = (file) => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.onload = () => {\n      const isValid = img.width >= HISTORIA_PROFESSOR_CONFIG.MIN_DIMENSIONS.width &&\n                     img.height >= HISTORIA_PROFESSOR_CONFIG.MIN_DIMENSIONS.height;\n      resolve(isValid);\n    };\n    img.onerror = () => resolve(false);\n    img.src = URL.createObjectURL(file);\n  });\n};\n\n/**\n * Gera nome nico para o arquivo\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @param {number} historiaId - ID da histria\n * @returns {string} Nome nico do arquivo\n */\nconst generateUniqueFileName = (file, escolaId, historiaId) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `historia_${historiaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Buscar todas as histrias do professor de uma escola\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Array>} Lista de histrias\n */\nexport const getHistoriasProfessor = async (escolaId) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .select('*')\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('ordem', { ascending: true })\n      .order('created_at', { ascending: true });\n\n    if (error) {\n      throw error;\n    }\n\n    if (!data || data.length === 0) {\n      return [];\n    }\n\n    // Adicionar URLs pblicas das imagens\n    const historiasComImagens = data.map((historia) => {\n      if (historia.imagem_url) {\n        try {\n          const { data: { publicUrl } } = supabase.storage\n            .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n            .getPublicUrl(historia.imagem_url);\n\n          return { ...historia, imagem_public_url: publicUrl };\n        } catch (err) {\n          return { ...historia, imagem_public_url: null, urlError: err.message };\n        }\n      }\n      return historia;\n    });\n\n    return historiasComImagens;\n\n  } catch (error) {\n    console.error('Erro ao buscar histrias do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Criar nova histria do professor\n * @param {Object} historiaData - Dados da histria\n * @returns {Promise<Object>} Histria criada\n */\nexport const createHistoriaProfessor = async (historiaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .insert([{\n        escola_id: historiaData.escola_id,\n        nome_professor: historiaData.nome_professor || null,\n        historia: historiaData.historia,\n        ordem: historiaData.ordem || 1,\n        ativo: historiaData.ativo !== false,\n        foto_rosto: historiaData.foto_rosto || null\n      }])\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n\n  } catch (error) {\n    console.error('Erro ao criar histria do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar histria do professor\n * @param {number} historiaId - ID da histria\n * @param {Object} historiaData - Dados atualizados\n * @returns {Promise<Object>} Histria atualizada\n */\nexport const updateHistoriaProfessor = async (historiaId, historiaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .update({\n        nome_professor: historiaData.nome_professor,\n        historia: historiaData.historia,\n        ordem: historiaData.ordem,\n        ativo: historiaData.ativo,\n        foto_rosto: historiaData.foto_rosto || null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId)\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n\n  } catch (error) {\n    console.error('Erro ao atualizar histria do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar histria do professor\n * @param {number} historiaId - ID da histria\n * @returns {Promise<void>}\n */\nexport const deleteHistoriaProfessor = async (historiaId) => {\n  try {\n    // Deletar a histria\n    const { error: deleteError } = await supabase\n      .from('historias_professor')\n      .delete()\n      .eq('id', historiaId);\n\n    if (deleteError) {\n      throw deleteError;\n    }\n  } catch (error) {\n    console.error('Erro ao deletar histria do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload de imagem para uma histria do professor\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {number} historiaId - ID da histria\n * @param {string} descricao - Descrio da imagem\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadHistoriaProfessorImage = async (file, escolaId, historiaId, descricao = '') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Validar dimenses (opcional)\n    const hasValidDimensions = await validateImageDimensions(file);\n    if (!hasValidDimensions) {\n      console.warn('Imagem com dimenses menores que o recomendado');\n    }\n\n    // Gerar nome nico\n    const fileName = generateUniqueFileName(file, escolaId, historiaId);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pblica - no usado\n    // const { data: { publicUrl } } = supabase.storage\n    //   .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n    //   .getPublicUrl(filePath);\n\n    // Atualizar a histria com a URL da imagem\n    const { data: historia, error: updateError } = await supabase\n      .from('historias_professor')\n      .update({\n        descricao_imagem: descricao.trim() || null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId)\n      .select()\n      .single();\n\n    if (updateError) {\n      // Se falhar ao atualizar, deletar o arquivo\n      await supabase.storage\n        .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n        .remove([filePath]);\n      throw new Error(`Erro ao salvar metadados: ${updateError.message}`);\n    }\n\n    return {\n      id: historia.id,\n      descricao_imagem: historia.descricao_imagem\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem da histria do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar imagem de uma histria do professor\n * @param {number} historiaId - ID da histria\n * @returns {Promise<void>}\n */\nexport const deleteHistoriaProfessorImage = async (historiaId) => {\n  try {\n    // Buscar a histria para obter a URL da imagem\n    const { data: historia, error: fetchError } = await supabase\n      .from('historias_professor')\n      .select('imagem_url')\n      .eq('id', historiaId)\n      .single();\n\n    if (fetchError) {\n      throw fetchError;\n    }\n\n    if (!historia.imagem_url) {\n      return; // No h imagem para deletar\n    }\n\n    // Atualizar a histria removendo a referncia da imagem\n    const { error: updateError } = await supabase\n      .from('historias_professor')\n      .update({\n        descricao_imagem: null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId);\n\n    if (updateError) {\n      throw updateError;\n    }\n\n    // Deletar arquivo do storage\n    const { error: storageError } = await supabase.storage\n      .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n      .remove([historia.imagem_url]);\n\n    if (storageError) {\n      console.warn('Erro ao deletar imagem do storage:', storageError);\n    }\n\n  } catch (error) {\n    console.error('Erro ao deletar imagem da histria do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Migrar dados existentes da tabela escolas_completa\n * @returns {Promise<Object>} Resultado da migrao\n */\nexport const migrarDadosExistentes = async () => {\n  try {\n    // Buscar escolas com histria do professor\n    const { data: escolas, error: fetchError } = await supabase\n      .from('escolas_completa')\n      .select('id, historia_do_prof')\n      .not('historia_do_prof', 'is', null)\n      .neq('historia_do_prof', '');\n\n    if (fetchError) {\n      throw fetchError;\n    }\n\n    if (!escolas || escolas.length === 0) {\n      return { migradas: 0, mensagem: 'Nenhuma histria para migrar' };\n    }\n\n    // Inserir histrias na nova tabela\n    const historiasParaInserir = escolas.map(escola => ({\n      escola_id: escola.id,\n      historia: escola.historia_do_prof,\n      ordem: 1,\n      ativo: true,\n      created_at: new Date().toISOString()\n    }));\n\n    const { data: historiasInseridas, error: insertError } = await supabase\n      .from('historias_professor')\n      .insert(historiasParaInserir)\n      .select();\n\n    if (insertError) {\n      throw insertError;\n    }\n\n    return {\n      migradas: historiasInseridas.length,\n      mensagem: `${historiasInseridas.length} histrias migradas com sucesso`\n    };\n\n  } catch (error) {\n    console.error('Erro na migrao de dados:', error);\n    throw error;\n  }\n};\n\n/**\n * Verificar se uma escola tem histrias do professor\n * @param {number} escolaId - ID da escola\n * @returns {Promise<boolean>} Se tem histrias\n */\nexport const escolaTemHistoriasProfessor = async (escolaId) => {\n  try {\n    const { count, error } = await supabase\n      .from('historias_professor')\n      .select('*', { count: 'exact', head: true })\n      .eq('escola_id', escolaId)\n      .eq('ativo', true);\n\n    if (error) {\n      throw error;\n    }\n\n    return (count || 0) > 0;\n\n  } catch (error) {\n    console.error('Erro ao verificar histrias do professor:', error);\n    return false;\n  }\n}; "],"names":["testLegendasTable","async","error","supabase","from","select","limit","console","warn","message","log","getLegendaByImageUrl","imageUrl","escolaId","options","arguments","length","undefined","query","eq","ativo","categoria","tipo_foto","data","order","ascending","getLegendaByImageUrlFlexivel","preferencias","concat","legenda","data2","error2","data3","error3","nomeArquivo","split","pop","data4","error4","ilike","addLegendaFoto","insert","legendaData","single","updateLegendaFoto","legendaId","updateData","update","getTituloByVideoUrl","videoUrl","code","MARKER_SVG_PATH","process","createMarkerStyle","feature","showNames","markerData","get","isNearbyPair","markerStyle","Style","image","Icon","src","scale","anchor","anchorXUnits","anchorYUnits","geometry","getGeometry","titulo","text","Text","font","fill","Fill","color","stroke","Stroke","width","offsetY","textAlign","isMobile","isMobileWidth","window","innerWidth","hasTouch","navigator","maxTouchPoints","isMobileUserAgent","test","userAgent","isMobileOrientation","orientation","mobileCriteria","filter","Boolean","OpenLayersInteractions","constructor","map","this","_objectSpread","enableHover","enableClick","enableDoubleClick","enableTouch","hoverDelay","clickDelay","eventHandlers","Map","hoveredFeature","clickedFeature","clickTimeout","hoverTimeout","tooltipElement","initializeInteractions","mobile","windowWidth","setupHoverInteraction","setupClickInteraction","setupDoubleClickInteraction","setupTouchInteraction","on","event","handlePointerMove","handlePointerLeave","handleClick","handleDoubleClick","forEachFeatureAtPixel","pixel","type","schoolData","terraIndigenaInfo","clearHover","applyHover","handleMobileClick","clearTimeout","setTimeout","executeClickHandler","executeDoubleClickHandler","handleTouchEnd","forceHideTooltip","showTooltip","executeHoverHandler","applyHoverStyle","clearHoverStyle","hideTooltip","executeHoverOutHandler","hoverStyleFunction","tooltipContent","getTooltipContent","createTooltipElement","getTargetElement","appendChild","remove","content","element","document","createElement","className","isTerraIndigena","includes","clickableContent","innerHTML","tooltipStyles","backgroundColor","borderColor","Object","assign","style","position","padding","borderRadius","fontSize","fontFamily","fontWeight","pointerEvents","zIndex","maxWidth","whiteSpace","overflow","textOverflow","boxShadow","border","cursor","clickableSpan","querySelector","textDecoration","textDecorationColor","textDecorationThickness","transition","display","addEventListener","transform","coordinate","getPixelFromCoordinate","left","top","tooltipContentFunction","handler","eventType","set","off","delete","clearHandlers","clear","updateOptions","newOptions","destroy","createDefaultInteractions","flyTo","_options$durationMs2","durationMs","view","getView","animateParams","center","duration","zoom","animate","LogLevel","LOG_LEVEL","debug","_len","args","Array","_key","info","_len2","_key2","_len3","_key3","_len4","_key4","group","label","groupEnd","_ref","dataPoints","onPainelOpen","showMarcadores","showNomesEscolas","vectorSourceRef","useRef","vectorLayerRef","setHoveredMarker","React","initializeMarkers","useCallback","logger","current","VectorSource","VectorLayer","source","addLayer","setupInteractions","interactions","onMarkerClick","onMarkerHover","createMarkerInteractions","handleMarkerClick","handleMarkerHover","handleMarkerHoverOut","_feature$getGeometry","coord","getCoordinates","_options$durationMs4","fractionX","fractionY","mapSize","getSize","mapWidth","mapHeight","desiredX","Math","max","min","desiredY","pointPx","newCenterPx","newCenterCoord","getCoordinateFromPixel","flyToAtFractionX","_options$radiusPx","_options$durationMs","radiusPx","height","marginLeft","marginTop","overlay","Overlay","positioning","stopEvent","addOverlay","setPosition","cleanup","removeOverlay","_unused","once","showClickPulse","setStyle","f","baseStyle","hoverStyle","isArray","changed","updateMarkers","pontosValidos","point","latitude","longitude","lat","parseFloat","lng","isNaN","forEach","index","Feature","Point","fromLonLat","addFeature","updateMarkerStyles","useEffect","removeLayer","_jsx","LAYER_COLORS","terrasIndigenas","regularizada","hover","declarada","estadoSP","createTerrasIndigenasStyle","isHovered","properties","colorConfig","fase_ti","colors","lineDash","MAP_CONFIG","maxZoom","minZoom","clusterDistance","clusterMinDistance","clusterAnimationDuration","proximityThreshold","disableClusteringAtZoom","tooltipOffset","tooltipDelay","interaction","performance","enableLazyLoading","maxFeaturesPerTile","enableFeatureCulling","enableTileCaching","ANIMATION_CONFIG","marker","cluster","pan","easing","MARKER_COLORS","small","medium","large","xlarge","CLUSTER_SIZES","size","PROJECTION_CONFIG","BASE_LAYER_CONFIG","url","attributions","wrapX","tilePixelRatio","tileSize","forwardRef","ref","showTerrasIndigenas","interactionsRef","setHoveredFeature","selectedFeature","setSelectedFeature","isMobileDevice","useMemo","initializeLayer","features","geoJSONFeatures","GeoJSON","dataProjection","featureProjection","readFeatures","getProperties","terrai_nom","tipo","etnia","etnia_nome","municipio","municipio_","uf","uf_sigla","superficie","fase","modalidade","reestudo","reestudo_t","cr","faixa_fron","undadm_nom","undadm_sig","dominio_un","data_atual","terrai_cod","undadm_cod","onFeatureClick","onFeatureHover","createGeoJSONInteractions","handleFeatureClick","handleFeatureHover","handleFeatureHoverOut","extent","getExtent","fit","applySelectionStyleToFeature","selectionOptions","fillColor","strokeColor","strokeWidth","selectionStyle","applySelectionStyle","removeSelectionStyleFromFeature","timeout","showEstadoSP","createEstadoSPStyle","interactive","terrasIndigenasData","estadoSPData","terrasIndigenasRef","estadoSPRef","layersStatus","setLayersStatus","visible","loaded","hasValidData","updateLayerStatus","layerName","updates","prev","handleLayerError","handleLayerSuccess","getLayersStats","stats","total","errors","values","layer","getLayersInfo","hasData","featureCount","_jsxs","children","OpenLayersTerrasIndigenas","onLoad","onError","OpenLayersEstadoSP","useMapControls","screenSize","setScreenSize","useState","innerHeight","setIsMobile","isTablet","setIsTablet","isDesktop","setIsDesktop","handleResize","removeEventListener","zoomConfig","bottom","buttonSize","spacing","accessibility","prefersReducedMotion","matchMedia","matches","prefersHighContrast","isLandscape","mapRef","controlsRef","zoomControl","getControls","getArray","find","control","getClassName","querySelectorAll","button","minHeight","minWidth","marginBottom","classList","add","JSON","stringify","props","id","proj4","defs","register","mapContainer","baseLayer","setMapInfo","initialCenter","initialZoom","createBaseLayers","satelliteLayer","TileLayer","XYZ","preload","useInterimTilesOnError","initializeMap","target","layers","View","enableRotation","controls","defaultControls","toLonLat","getCenter","newView","toFixed","getZoom","updateMapConfig","newCenter","newZoom","currentCenter","currentZoom","setCenter","setZoom","setTarget","MapWrapper","_Fragment","OpenLayersMarkers","OpenLayersLayers","ResponsiveZoomControls","cache","useGeoJSONCache","key","setData","loading","setLoading","setError","_geoJSON$features","response","fetch","ok","Error","status","geoJSON","json","err","fetchGeoJSON","useResponsiveIcon","isMinimized","minimized","path","ariaLabel","expanded","ResponsiveIcon","iconConfig","currentConfig","viewBox","strokeLinecap","strokeLinejoin","d","MapSelector","painelAberto","isMainLoading","terrasLoading","terrasError","estadoLoading","estadoError","setShowTerrasIndigenas","setShowEstadoSP","setShowMarcadores","useBreakpoint","setIsMinimized","handleMinimize","_terrasIndigenasData$","_estadoSPData$feature","CabecalhoMenu","_ref2","onMinimize","onClick","BotaoCamada","_ref3","checked","onChange","disabled","subItems","item","mapCenter","mapZoom","OpenLayersMap","documentos","setDocumentos","isLoading","setIsLoading","authData","authError","auth","getSession","temSessao","session","rlsError","podeAcessar","details","hint","allDocs","allDocsError","doc","escola_id","tipo_escola_id","valor_escola_id","toString","dataAsNumber","errorAsNumber","Number","dataAsString","errorAsString","String","count","fetchDocumentos","InfoGrid","memo","columns","gap","InfoTable","row","value","InfoStats","_ref4","stat","icon","_ref5","title","description","defaultCollapsed","layout","layoutProps","isCollapsed","setIsCollapsed","role","renderContent","capitalize","str","charAt","toUpperCase","slice","toLowerCase","CompactCard","renderValue","Check","X","AddressDetails","escola","logradouro","numero","bairro","cep","endereco","field","MapPin","estado","join","MapButton","Latitude","Longitude","openMap","open","Navigation","SocialLinks","links","onToggle","socialLinks","trim","social","Globe","ChevronRight","link","href","rel","LinkIcon","ExternalLink","_ref6","setExpanded","toggle","basicInfoCards","Building","Calendar","ano_criacao","usa_redes_sociais","povos_indigenas","InfoSection","diretoria_ensino","links_redes_sociais","htmlContent","dangerouslySetInnerHTML","__html","HistoriaEscolaHeader","alt","margin","outline","refreshKey","historia_da_escola","HistoriaEscolaContent","ExpandableList","items","maxVisible","idx","MiniCard","turnosValue","turnos_funcionamento","modalidadeList","modalidade_ensino","gridItems","Clock","Users","numero_alunos","MessageCircle","linguas_faladas","materiaisItems","BookOpen","BooleanValue","material_nao_indigena","material_indigena","ppp_proprio","ppp_comunidade","Sparkles","remainingCards","groups","i","push","groupIdx","Droplet","acesso_agua","Trash2","coleta_lixo","Wifi","acesso_internet","Monitor","equipamentos","modo_acesso","Utensils","cozinha","Apple","merenda_escolar","ChefHat","diferenciada","Home","espaco_escolar","renderBooleanStatus","valor","normalizado","formacao","resto","descricao","formatarFormacaoProfessores","formacao_professores","continuada","formatarFormacaoContinuada","formacao_continuada","UsersRound","UserCheck","professores_indigenas","UserMinus","professores_nao_indigenas","professores_falam_lingua","Star","User","gestao","outros_funcionarios","NotebookPen","ProjectCard","isNegative","availableProjects","GraduationCap","Heart","Target","project","images","currentImageIndex","isOpen","onClose","onImageChange","showNavigation","showControls","showCounter","showCaption","zoomLevel","setZoomLevel","rotation","setRotation","currentIndex","setCurrentIndex","currentImage","fecharZoom","resetImage","nextImage","newIndex","prevImage","handleEsc","e","handleKeyDown","preventDefault","stopPropagation","ZoomIn","ZoomOut","RotateCw","ChevronLeft","publicURL","imagem_public_url","descricao_imagem","onMouseDown","autor","dataFoto","Date","toLocaleDateString","descricaoDetalhada","isPreloaded","placeholder","_objectWithoutProperties","_excluded","imageLoaded","setImageLoaded","imageError","setImageError","showImage","setShowImage","handleImageLoad","handleImageError","enabled","preloadedImages","setPreloadedImages","isPreloading","setIsPreloading","preloadTimeoutRef","preloadImages","promises","urls","Promise","resolve","reject","img","Image","onload","onerror","preloadImage","catch","all","startPreload","escolaFiles","storage","list","professorFiles","urlsToPreload","file","publicUrl","getPublicUrl","name","batchSize","batches","batch","preloadedMap","isImagePreloaded","has","ImagemHistoriadoProfessor","imagens","setImagens","imagemZoom","setImagemZoom","setCurrentImageIndex","useImagePreloader","then","imagensComUrl","_legenda","_legenda2","_legenda3","_legenda4","_legenda5","genero","startsWith","caminhoRelativo","nome","created_at","descricao_detalhada","autor_foto","data_foto","OptimizedImage","maxHeight","ReusableImageZoom","customSize","shape","variant","clickable","textColor","badge","badgePosition","badgeColor","badgeSize","fallbackIcon","showInitials","maxInitials","lazy","priority","imageLoading","setImageLoading","sizeConfig","container","sizes","xs","xxlarge","shapeConfig","shapes","circle","square","rounded","none","variantConfig","variants","default","shadow","minimal","flat","elevated","badgeConfig","positions","badgeSizes","initials","word","char","match","FallbackIcon","icons","user","alert","AlertCircle","Loader2","shouldShowImage","shouldShowInitials","shouldShowIcon","baseClasses","replace","tabIndex","fetchPriority","avatarThemes","hoverBorderColor","professor","neutral","indigena","success","warning","fotoUrl","nomeProfessor","tamanho","showFallback","theme","mappedSize","themeConfig","Avatar","historias","setHistorias","currentHistoriaIndex","setCurrentHistoriaIndex","getHistoriasProfessor","carregarHistorias","nextHistoria","prevHistoria","currentHistoria","hasMultipleHistorias","nome_professor","FotoProfessor","foto_rosto","historia","_","ImagensdasEscolas","cacheRef","cacheVersion","setCacheVersion","limparCacheERecarregar","body","cacheKey","files","imagensEncontradas","filePath","urlError","buscarImagens","RefreshCw","findIndex","GridLayoutWrapper","shouldUseGrid","containerClasses","sectionRefs","gridSections","Component","BasicInfo","Modalidades","Infraestrutura","GestaoProfessores","ProjetosParcerias","el","dados","HistoriaEscola","depoimentos","HistoriadoProfessor","xmlns","isTextArea","LargeHandFistIcon","HandFistIcon","terraIndigena","InfoItem","Tooltip","isVisible","setIsVisible","onMouseEnter","onMouseLeave","onFocus","onBlur","ShareButton","copied","setCopied","shareTextOptions","shareText","floor","random","shareUrl","location","shareButtons","component","WhatsappShareButton","Facebook","FacebookShareButton","quote","Twitter","TwitterShareButton","Linkedin","LinkedinShareButton","summary","clipboard","writeText","input","execCommand","removeChild","Link","ShareComponent","copiarLink","compartilhar","painelInfo","gerarLinkCustomizado","gerarUrlEscola","gerarDescricao","gerarDescricaoEscola","gerarTitulo","gerarTituloEscola","PainelDescricao","sanitizedHTML","DOMPurify","sanitize","formattedText","endsWith","formatText","ALLOWED_TAGS","ALLOWED_ATTR","ADD_TAGS","ADD_ATTR","KEEP_CONTENT","ALLOW_DATA_ATTR","lineHeight","letterSpacing","audioUrl","SIGLAS_MAIUSCULAS","capitalizeWords","substr","formatarTituloEscola","tituloLower","partes","indiceAldeia","parte","nomeAldeia","closePainel","toggleMaximize","isMaximized","imagemHeader","isMobileLandscape","isVerySmallLandscape","Minimize2","Maximize2","imagemUrl","PainelContainer","onToggleMaximize","contentRef","rightNav","usePainelVisibility","painelDimensions","usePainelDimensions","setWindowWidth","windowHeight","setWindowHeight","breakpoints","sm","md","lg","xl","dimensions","baseHeight","panelWidth","navbarHeight","visibilityClasses","flexDirection","PainelHeader","imagem_header","EscolaHeaderImage","transformarLinkGoogleDrive","fileId","ViewModeToggle","viewMode","setViewMode","DocumentViewer","selectedDoc","setSelectedDoc","iframeRef","iframeError","setIframeError","useGoogleDocsViewer","setUseGoogleDocsViewer","iframe","handleLoad","handleError","autoria","renderDocumentViewer","isGoogleDriveLink","link_pdf","allow","sandbox","VideoPlayer","tituloPersonalizado","setTituloPersonalizado","buscarTitulo","videoId","baseUrl","patterns","pattern","extrairIdYoutube","plataforma","duracao","frameBorder","allowFullScreen","referrerPolicy","PainelInformacoes","painelRef","activeIndex","setActiveIndex","setIsMaximized","origin","pathname","criarSlug","texto","share","encodeURIComponent","useShare","useDocumentosEscola","useClickOutside","useDynamicURL","lastUrlRef","timeoutRef","newUrl","history","replaceState","listener","contains","sections","link_para_videos","handleScroll","containerRect","getBoundingClientRect","bestIndex","bestDelta","Infinity","s","sec","r","delta","abs","passive","scrollToSection","_sections$idx","containerTop","scrollBy","scrollTop","scrollTo","behavior","prevSection","nextSection","last","handleKeyActivate","action","isIntro","WebkitTapHighlightColor","onKeyDown","IntroPanel","TerraIndigenaInfo","EscolaInfo","ShareSection","MapaEscolasIndigenas","quantidade","exemplo","useRefresh","panel","URLSearchParams","search","initialPanel","setPainelInfo","initialPanelOpened","setInitialPanelOpened","escolasVisiveis","pontuacao","abrirPainel","refreshPainel","fecharPainel","HISTORIA_PROFESSOR_CONFIG","BUCKET_NAME","MAX_FILE_SIZE","ALLOWED_TYPES","MAX_IMAGES_PER_HISTORIA","MIN_DIMENSIONS","imagem_url","createHistoriaProfessor","historiaData","ordem","updateHistoriaProfessor","historiaId","updated_at","toISOString","deleteHistoriaProfessor","deleteError"],"sourceRoot":""}