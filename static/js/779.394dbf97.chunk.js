"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[779],{8779:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var i=o(9379),r=o(5043),a=o(9896),n=o(3986),s=o(1215),l=o(576),c=o(3391),d=o(228);const u=["data"],p=(0,s.Lt)((function(e,t){let{data:o}=e,i=(0,n.A)(e,u);const r=new d.GeoJSON(o,i);return(0,l.Q)(r,(0,c.W4)(t,{overlayContainer:r}))}),(function(e,t,o){t.style!==o.style&&(null==t.style?e.resetStyle():e.setStyle(t.style))}));var m=o(9845),h=o(579);const g=e=>{let{data:t,onClick:o}=e;const n=(0,a.ko)(),s=(0,r.useRef)(new m.uy),l=(0,r.useRef)(null);(0,r.useEffect)((()=>{t?console.log("TerrasIndigenas: Dados recebidos:",{type:t.type,features:t.features?t.features.length:0,properties:t.features?t.features[0].properties:null}):console.warn("TerrasIndigenas: Nenhum dado recebido")}),[t]);const c=(0,r.useCallback)(((e,t)=>{if(!(0,m.Fr)())return;l.current&&(l.current.remove(),l.current=null);const o=document.createElement("div");o.className="mobile-tooltip-terra",o.textContent=t,o.style.position="absolute",o.style.backgroundColor="rgba(139, 0, 0, 0.95)",o.style.color="white",o.style.padding="8px 12px",o.style.borderRadius="6px",o.style.fontSize="14px",o.style.fontFamily="Arial, sans-serif",o.style.fontWeight="500",o.style.maxWidth="250px",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.textOverflow="ellipsis",o.style.zIndex="1000",o.style.pointerEvents="none",o.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)",o.style.border="1px solid rgba(255, 255, 255, 0.2)";const i=e.latlng,r=n.latLngToLayerPoint(i);o.style.left=r.x+10+"px",o.style.top=r.y-10+"px",n.getContainer().appendChild(o),l.current=o,setTimeout((()=>{o.parentNode&&(o.remove(),l.current=null)}),2e3)}),[n]),d=(0,r.useMemo)((()=>({color:"#B22222",weight:2,fillOpacity:.3,fillColor:"#DC143C",dashArray:"3",zIndex:2})),[]),u=(0,r.useCallback)((e=>{if(!e||!e.properties)return console.warn("Feature sem propriedades:",e),d;const t="Regularizada"===e.properties.fase_ti;return console.log("Terra ind\xedgena ".concat(e.properties.terrai_nom,": ").concat(t?"Regularizada":"N\xe3o Regularizada")),(0,i.A)((0,i.A)({},d),{},{fillColor:t?"#DC143C":"#8B0000",fillOpacity:t?.3:.25})}),[d]),g={weight:3,color:"#FF0000",fillOpacity:.45,dashArray:""},f=(0,r.useCallback)(((e,t)=>{if(e&&e.properties){if(!(0,m.Fr)()){const o='\n          <div class="bg-white p-2 rounded shadow-md">\n            <strong>'.concat(e.properties.terrai_nom||"Nome n\xe3o dispon\xedvel","</strong><br/>\n            ").concat(e.properties.etnia_nome||"Etnia n\xe3o dispon\xedvel","<br/>\n            ").concat(e.properties.fase_ti||"Fase n\xe3o dispon\xedvel","\n          </div>\n        ");t.bindTooltip(o,{sticky:!0,className:"custom-tooltip"})}t.on({mouseover:e=>{if((0,m.Fr)())return;const t=e.target;t.setStyle(g),t.bringToFront()},mouseout:t=>{(0,m.Fr)()||t.target.setStyle(u(e))},click:t=>{t.target;const i={titulo:e.properties.terrai_nom,tipo:"terra_indigena",etnia:e.properties.etnia_nome,municipio:e.properties.municipio_,uf:e.properties.uf_sigla,superficie:e.properties.superficie,fase:e.properties.fase_ti,modalidade:e.properties.modalidade,reestudo:e.properties.reestudo_t,cr:e.properties.cr,faixa_fron:e.properties.faixa_fron,undadm_nom:e.properties.undadm_nom,undadm_sig:e.properties.undadm_sig,dominio_un:e.properties.dominio_un,data_atual:e.properties.data_atual,terrai_cod:e.properties.terrai_cod,undadm_cod:e.properties.undadm_cod};s.current.handleClick(e,(()=>c(t,e.properties.terrai_nom||"Terra Ind\xedgena")),(()=>null===o||void 0===o?void 0:o(i)))}})}else console.warn("Feature sem propriedades no onEachFeature:",e)}),[n,u,o,c]);return(0,r.useEffect)((()=>()=>{l.current&&(l.current.remove(),l.current=null),s.current.reset()}),[]),t?t.type&&"FeatureCollection"===t.type?t.features&&Array.isArray(t.features)&&0!==t.features.length?(0,h.jsx)(p,{data:t,style:u,onEachFeature:f}):(console.error("TerrasIndigenas: GeoJSON sem features v\xe1lidas"),null):(console.error("TerrasIndigenas: Formato de GeoJSON inv\xe1lido. Esperado FeatureCollection, recebido:",t.type),null):(console.warn("TerrasIndigenas: Nenhum dado recebido"),null)}},9845:(e,t,o)=>{o.d(t,{Fr:()=>i,uy:()=>r});const i=()=>{const e=navigator.userAgent||navigator.vendor||window.opera,t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e.toLowerCase()),o=window.innerWidth<=768,i="ontouchstart"in window||navigator.maxTouchPoints>0;return console.log("Mobile detection:",{userAgent:e,isMobileUserAgent:t,isMobileScreen:o,isTouchDevice:i,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),t||o||i};class r{constructor(){this.lastClickedFeature=null,this.clickTimeout=null,this.clickDelay=500,this.lastClickTime=0}handleClick(e,t,o){const r=Date.now(),a=i();if(console.log("MobileInteractionManager: handleClick chamado",{isMobile:a,feature:e?"presente":"ausente",lastClickedFeature:this.lastClickedFeature?"presente":"ausente",timeSinceLastClick:r-this.lastClickTime,clickDelay:this.clickDelay}),!a)return console.log("MobileInteractionManager: Desktop - executando a\xe7\xe3o direta"),void o(e);this.lastClickedFeature===e&&r-this.lastClickTime<this.clickDelay?(console.log("MobileInteractionManager: Segundo clique detectado - executando a\xe7\xe3o"),this.clearTimeout(),this.lastClickedFeature=null,this.lastClickTime=0,o(e)):(console.log("MobileInteractionManager: Primeiro clique detectado"),this.lastClickedFeature&&this.clearTimeout(),this.lastClickedFeature=e,this.lastClickTime=r,t(e),this.clickTimeout=setTimeout((()=>{console.log("MobileInteractionManager: Timeout expirado - limpando primeiro clique"),this.lastClickedFeature=null,this.lastClickTime=0}),this.clickDelay))}clearTimeout(){this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null)}reset(){console.log("MobileInteractionManager: Reset chamado"),this.clearTimeout(),this.lastClickedFeature=null,this.lastClickTime=0}}}}]);
//# sourceMappingURL=779.394dbf97.chunk.js.map