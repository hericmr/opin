{"version":3,"file":"static/js/462.7c45d5cc.chunk.js","mappings":"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","sources":["components/Homepage/index.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Search, X, MapPin, BookOpen, Users, FileText, Map } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport useSearch from '../../hooks/useSearch';\nimport { useSearch as useSearchContext } from '../../contexts/SearchContext';\n\n// Removed unused components Stat and Section\n\nconst HomepageSearch = ({ dataPoints }) => {\n  const [localSearchTerm, setLocalSearchTerm] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const searchRef = useRef(null);\n  const inputRef = useRef(null);\n  const navigate = useNavigate();\n  const { setSearch } = useSearchContext();\n  const { searchResults, isSearching, performSearch } = useSearch(dataPoints);\n\n  // Fechar resultados quando clicar fora\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowResults(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Buscar dados quando o termo mudar (busca em tempo real)\n  useEffect(() => {\n    if (localSearchTerm.length < 2) {\n      setShowResults(false);\n      return;\n    }\n\n    const searchData = async () => {\n      try {\n        await performSearch(localSearchTerm);\n        setShowResults(true);\n      } catch (error) {\n        console.error('Erro na busca:', error);\n      }\n    };\n\n    const debounceTimer = setTimeout(searchData, 300);\n    return () => clearTimeout(debounceTimer);\n  }, [localSearchTerm, performSearch]);\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    const termToSearch = localSearchTerm.trim();\n    if (termToSearch) {\n      setSearch(termToSearch);\n      navigate(`/search?q=${encodeURIComponent(termToSearch)}`);\n    }\n  };\n\n  const handleResultClick = (result) => {\n    // Se temos dados completos da escola, abrir o painel\n    if (result.data && result.coordinates) {\n      setSearch(result.title, result.coordinates, result.title);\n      navigate('/mapa', { \n        state: { \n          searchTerm: result.title, \n          coordinates: result.coordinates,\n          highlightSchool: result.title,\n          schoolData: result.data // Passar os dados completos da escola\n        } \n      });\n    } else if (result.coordinates) {\n      // Fallback: apenas coordenadas sem dados completos\n      setSearch(result.title, result.coordinates, result.title);\n      navigate('/mapa', { \n        state: { \n          searchTerm: result.title, \n          coordinates: result.coordinates,\n          highlightSchool: result.title \n        } \n      });\n    } else {\n      // Busca simples sem coordenadas\n      setSearch(result.title);\n      navigate(`/search?q=${encodeURIComponent(result.title)}`);\n    }\n    setShowResults(false);\n    setLocalSearchTerm('');\n  };\n\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setLocalSearchTerm(value);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleSearch(e);\n    } else if (e.key === 'Escape') {\n      setShowResults(false);\n      setLocalSearchTerm('');\n    }\n  };\n\n  const getIconForType = (type) => {\n    switch (type) {\n      case 'school': return <MapPin className=\"w-4 h-4\" />;\n      case 'land': return <BookOpen className=\"w-4 h-4\" />;\n      case 'teacher': return <Users className=\"w-4 h-4\" />;\n      case 'history': return <FileText className=\"w-4 h-4\" />;\n      default: return <MapPin className=\"w-4 h-4\" />;\n    }\n  };\n\n  const highlightText = (text, searchTerm) => {\n    if (!searchTerm) return text;\n    const regex = new RegExp(`(${searchTerm})`, 'gi');\n    const parts = text.split(regex);\n    return parts.map((part, index) => \n      regex.test(part) ? (\n        <span key={index} className=\"bg-yellow-200 font-semibold\">{part}</span>\n      ) : part\n    );\n  };\n\n  return (\n    <div ref={searchRef} className=\"relative w-full\">\n      <form onSubmit={handleSearch} className=\"relative\">\n        <div className=\"rounded-full bg-white/90 border border-green-200 px-4 py-2 flex items-center gap-2\">\n          <Search className=\"w-5 h-5 text-green-700 flex-shrink-0\" />\n          <input\n            ref={inputRef}\n            type=\"text\"\n            placeholder=\"Pesquisar escolas, territórios...\"\n            value={localSearchTerm}\n            onChange={handleInputChange}\n            onKeyDown={handleKeyDown}\n            onFocus={() => {\n              if (localSearchTerm.length >= 2 && searchResults.length > 0) {\n                setShowResults(true);\n              }\n            }}\n            className=\"w-full bg-transparent outline-none text-green-900 placeholder:text-green-800/60\"\n          />\n          {localSearchTerm && (\n            <button\n              type=\"button\"\n              onClick={() => {\n                setLocalSearchTerm('');\n                setShowResults(false);\n              }}\n              className=\"text-green-700 hover:text-green-900 flex-shrink-0\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          )}\n        </div>\n      </form>\n\n      {/* Resultados da busca */}\n      <AnimatePresence>\n        {showResults && searchResults.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: -10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -10, scale: 0.95 }}\n            transition={{ duration: 0.2 }}\n            className=\"absolute top-full mt-2 w-full bg-white rounded-lg shadow-xl border border-green-200 z-50 max-h-96 overflow-y-auto\"\n          >\n            <div className=\"p-2\">\n              {isSearching ? (\n                <div className=\"p-4 text-center text-gray-500\">\n                  <p className=\"text-sm\">Buscando...</p>\n                </div>\n              ) : (\n                <div className=\"space-y-1\">\n                  {searchResults.slice(0, 8).map((result) => (\n                    <button\n                      key={result.id}\n                      onClick={() => handleResultClick(result)}\n                      className=\"w-full p-3 text-left hover:bg-green-50 rounded-lg transition-colors flex items-center gap-3 group\"\n                    >\n                      <div className=\"text-green-600 group-hover:text-green-700 transition-colors flex-shrink-0\">\n                        {getIconForType(result.type)}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-medium text-green-900 text-sm truncate\">\n                          {highlightText(result.title, localSearchTerm)}\n                        </p>\n                        <p className=\"text-xs text-green-700 truncate\">\n                          {result.subtitle}\n                        </p>\n                      </div>\n                      {result.coordinates && (\n                        <Map className=\"w-4 h-4 text-green-400 group-hover:text-green-600 transition-colors flex-shrink-0\" />\n                      )}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default function Homepage({ dataPoints = [] }) {\n  const bgUrl = (process.env.PUBLIC_URL || '') + '/site_bg.png';\n  return (\n    <div className=\"flex-1 overflow-auto bg-white text-green-900\">\n      {/* Hero inspirado no native-land: fundo, título, busca/CTA */}\n      <section className=\"relative min-h-screen h-screen w-full bg-cover bg-center bg-no-repeat\" style={{ backgroundImage: `url('${bgUrl}')` }}>\n        <div className=\"absolute inset-0 bg-green-950/40\" />\n        <div className=\"relative max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 items-start lg:items-center h-full px-4 lg:px-12\">\n          <div className=\"pt-28 lg:pt-0 text-white\">\n            {/* Logo OPIN maior */}\n            <div className=\"mb-2\">\n              <img \n                src={`${process.env.PUBLIC_URL || ''}/logo_index.png`}\n                alt=\"OPIN - Observatório dos Professores Indígenas\"\n                className=\"h-32 md:h-48 lg:h-64 xl:h-80 w-auto object-contain\"\n                style={{ maxWidth: '100%' }}\n              />\n            </div>\n            \n            {/* Slogan abaixo do logo */}\n            <div className=\"mt-0.5\">\n              <p className=\"uppercase tracking-wide text-green-100 text-sm md:text-base lg:text-lg\" style={{fontFamily: 'Cinzel, serif'}}>Observatório dos Professores Indígenas</p>\n              <p className=\"uppercase tracking-wide text-green-100 text-sm md:text-base lg:text-lg\" style={{fontFamily: 'Cinzel, serif'}}>do Estado de São Paulo</p>\n            </div>\n            <p className=\"mt-4 text-green-100/90 text-lg max-w-2xl\">\n              Um espaço de memória, território e educação. Histórias, escolas e experiências narradas pelos próprios professores e comunidades indígenas do Estado de São Paulo.\n            </p>\n            <div className=\"mt-6 grid grid-cols-1 lg:grid-cols-6 gap-3 w-full\">\n              <div className=\"col-span-1 lg:col-span-4\">\n                <HomepageSearch dataPoints={dataPoints} />\n              </div>\n              <div className=\"col-span-1 lg:col-span-2\">\n                <Link to=\"/mapa\" className=\"block rounded-full bg-green-500 text-green-950 font-semibold px-4 py-2.5 text-center hover:bg-green-400 transition\">\n                  Explorar Mapa\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      \n\n      \n\n      \n\n      \n\n      \n      \n    </div>\n  );\n}\n\n\n\n\n"],"names":["HomepageSearch","_ref","dataPoints","localSearchTerm","setLocalSearchTerm","useState","showResults","setShowResults","searchRef","useRef","inputRef","navigate","useNavigate","setSearch","useSearchContext","searchResults","isSearching","performSearch","useSearch","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","length","debounceTimer","setTimeout","async","error","console","clearTimeout","handleSearch","e","preventDefault","termToSearch","trim","concat","encodeURIComponent","getIconForType","type","_jsx","MapPin","className","BookOpen","Users","FileText","highlightText","text","searchTerm","regex","RegExp","split","map","part","index","test","children","_jsxs","ref","onSubmit","Search","placeholder","value","onChange","onKeyDown","key","onFocus","onClick","X","AnimatePresence","motion","div","initial","opacity","y","scale","animate","exit","transition","duration","slice","result","data","coordinates","title","state","highlightSchool","schoolData","handleResultClick","subtitle","Map","id","Homepage","_ref2","style","backgroundImage","src","process","alt","maxWidth","fontFamily","Link","to"],"sourceRoot":""}