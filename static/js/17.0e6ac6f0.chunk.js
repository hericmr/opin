/*! For license information please see 17.0e6ac6f0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[17],{193:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1184:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1440:(e,a,s)=>{s.d(a,{BZ:()=>u,Gw:()=>n,gE:()=>i,vS:()=>d,vx:()=>m,wG:()=>c});var r=s(2880);const t={BUCKET_NAME:"imagens-das-escolas",MAX_FILE_SIZE:5242880,ALLOWED_TYPES:["image/jpeg","image/jpg","image/png","image/webp","image/gif"],MAX_IMAGES_PER_SCHOOL:10,MIN_DIMENSIONS:{width:200,height:200}},o={BUCKET_NAME:"imagens-professores",MAX_FILE_SIZE:5242880,ALLOWED_TYPES:["image/jpeg","image/jpg","image/png","image/webp","image/gif"],MAX_IMAGES_PER_SCHOOL:5,MIN_DIMENSIONS:{width:200,height:200}},l=(e,a)=>{if(!a.ALLOWED_TYPES.includes(e.type))return{isValid:!1,error:"Tipo de arquivo n\xe3o suportado. Use apenas: ".concat(a.ALLOWED_TYPES.map((e=>e.split("/")[1].toUpperCase())).join(", "))};if(e.size>a.MAX_FILE_SIZE)return{isValid:!1,error:"Arquivo muito grande. Tamanho m\xe1ximo: ".concat(a.MAX_FILE_SIZE/1048576,"MB")};const s=e.name.split(".").pop().toLowerCase(),r=a.ALLOWED_TYPES.map((e=>e.split("/")[1]));return r.includes(s)?{isValid:!0}:{isValid:!1,error:"Extens\xe3o n\xe3o permitida. Use apenas: ".concat(r.join(", "))}},i=async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const o=l(e,t);if(!o.isValid)throw new Error(o.error);const i=((e,a)=>{const s=Date.now(),r=Math.random().toString(36).substring(2,8),t=e.name.split(".").pop().toLowerCase();return"".concat(a,"_").concat(s,"_").concat(r,".").concat(t)})(e,a),c="".concat(a,"/").concat(i),{error:n}=await r.N.storage.from(t.BUCKET_NAME).upload(c,e,{cacheControl:"3600",upsert:!1});if(n)throw new Error("Erro no upload: ".concat(n.message));const{data:{publicUrl:d}}=r.N.storage.from(t.BUCKET_NAME).getPublicUrl(c);return{id:Date.now(),url:c,publicUrl:d,descricao:s.trim()||"Imagem da escola ".concat(a),created_at:(new Date).toISOString()}}catch(o){throw console.error("Erro no upload da imagem da escola:",o),o}},c=async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"professor";try{const i=l(e,o);if(!i.isValid)throw new Error(i.error);const c=((e,a,s)=>{const r=Date.now(),t=Math.random().toString(36).substring(2,8),o=e.name.split(".").pop().toLowerCase();return"".concat(s,"_").concat(a,"_").concat(r,"_").concat(t,".").concat(o)})(e,a,t),n="".concat(a,"/").concat(c),{error:d}=await r.N.storage.from(o.BUCKET_NAME).upload(n,e,{cacheControl:"3600",upsert:!1});if(d)throw console.error("Erro detalhado do upload:",d),new Error("Erro no upload: ".concat(d.message));const{data:{publicUrl:m}}=r.N.storage.from(o.BUCKET_NAME).getPublicUrl(n);return{id:Date.now(),url:n,publicUrl:m,descricao:s.trim()||"Imagem do ".concat(t," da escola ").concat(a),genero:t,created_at:(new Date).toISOString()}}catch(i){throw console.error("Erro no upload da imagem do professor:",i),i}},n=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.BUCKET_NAME;try{const{data:s,error:t}=await r.N.storage.from(a).list("".concat(e,"/"));if(t)throw t;if(!s||0===s.length)return[];return s.map(((s,t)=>{const o="".concat(e,"/").concat(s.name),{data:{publicUrl:l}}=r.N.storage.from(a).getPublicUrl(o);return{id:t+1,url:o,publicUrl:l,descricao:"Imagem ".concat(t+1),created_at:s.created_at||(new Date).toISOString()}}))}catch(s){throw console.error("Erro ao buscar imagens da escola:",s),s}},d=async(e,a,s)=>{try{const{error:e}=await r.N.storage.from(s).remove([a]);if(e)throw new Error("Erro ao deletar arquivo: ".concat(e.message))}catch(t){throw console.error("Erro ao deletar imagem:",t),t}},m=async(e,a)=>{try{return{id:e,descricao:a.trim()}}catch(s){throw console.error("Erro ao atualizar descri\xe7\xe3o da imagem:",s),s}},u=async(e,a)=>{try{const s=a===o.BUCKET_NAME?o:t,{data:l,error:i}=await r.N.storage.from(a).list("".concat(e,"/"));if(i)throw i;const c=l?l.length:0;return{current:c,limit:s.MAX_IMAGES_PER_SCHOOL,canUpload:c<s.MAX_IMAGES_PER_SCHOOL}}catch(s){throw console.error("Erro ao verificar limite de imagens:",s),s}}},2308:(e,a,s)=>{s.d(a,{A:()=>j});var r=s(2555),t=s(5043),o=s(6464),l=s(6637),i=s(1114);const c=(0,i.A)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),n=(0,i.A)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var d=s(6478),m=s(193),u=s(7669),g=s(4562);const x=(0,i.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var h=s(4488);const p=(0,i.A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),b=(0,i.A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var f=s(1184),v=s(237),y=s(579);const j=e=>{let{escolaId:a,onLegendasUpdate:s}=e;const[i,j]=(0,t.useState)([]),[N,w]=(0,t.useState)(!0),[A,E]=(0,t.useState)(""),[k,_]=(0,t.useState)(""),[C,S]=(0,t.useState)(!1),[I,M]=(0,t.useState)(null),[L,U]=(0,t.useState)("escola"),[P,z]=(0,t.useState)({imagem_url:"",legenda:"",descricao_detalhada:"",autor_foto:"",data_foto:"",categoria:"geral",tipo_foto:"escola"}),T=(0,t.useCallback)((async()=>{if(a)try{w(!0);const e=await(0,v.Fo)(a,L);j(e)}catch(e){console.error("Erro ao buscar legendas:",e),E("Erro ao carregar legendas de fotos")}finally{w(!1)}}),[a,L]);(0,t.useEffect)((()=>{T()}),[T]),(0,t.useEffect)((()=>{if(A||k){const e=setTimeout((()=>{E(""),_("")}),5e3);return()=>clearTimeout(e)}}),[A,k]);const D=()=>{z({imagem_url:"",legenda:"",descricao_detalhada:"",autor_foto:"",data_foto:"",categoria:"geral",tipo_foto:L}),M(null),S(!1)};return N?(0,y.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,y.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,y.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,y.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando legendas..."})]})}):(0,y.jsxs)("div",{className:"space-y-6",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)(o.A,{className:"w-5 h-5 text-blue-600"}),(0,y.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Legendas de Fotos"})]}),(0,y.jsxs)("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,y.jsx)(l.A,{className:"w-4 h-4"}),"Adicionar Legenda"]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,y.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Tipo de Foto:"}),(0,y.jsxs)("div",{className:"flex gap-2",children:[(0,y.jsxs)("button",{onClick:()=>U("escola"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("escola"===L?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:[(0,y.jsx)(c,{className:"w-4 h-4"}),"Fotos da Escola"]}),(0,y.jsxs)("button",{onClick:()=>U("professor"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat("professor"===L?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:[(0,y.jsx)(n,{className:"w-4 h-4"}),"Fotos dos Professores"]})]})]}),A&&(0,y.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,y.jsx)(d.A,{className:"w-5 h-5 text-red-600"}),(0,y.jsx)("span",{className:"text-red-700",children:A})]}),k&&(0,y.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,y.jsx)(m.A,{className:"w-5 h-5 text-green-600"}),(0,y.jsx)("span",{className:"text-green-700",children:k})]}),C&&(0,y.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,y.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:I?"Editar Legenda":"Adicionar Legenda"}),(0,y.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700",children:(0,y.jsx)(u.A,{className:"w-5 h-5"})})]}),(0,y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),P.imagem_url.trim()&&P.legenda.trim())try{if(I)await(0,v.w_)(I.id,(0,r.A)((0,r.A)({},P),{},{escola_id:a})),_("Legenda atualizada com sucesso!");else{if(await(0,v.qP)(P.imagem_url,a,L))return void E("J\xe1 existe uma legenda para esta imagem");await(0,v.eP)((0,r.A)((0,r.A)({},P),{},{escola_id:a,tipo_foto:L})),_("Legenda adicionada com sucesso!")}D(),T(),s&&s()}catch(t){console.error("Erro ao salvar legenda:",t),E("Erro ao salvar legenda: ".concat(t.message))}else E("URL da imagem e legenda s\xe3o obrigat\xf3rios")},className:"space-y-4",children:[(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Imagem *"}),(0,y.jsx)("input",{type:"url",value:P.imagem_url,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{imagem_url:e.target.value})),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"escola"===L?"https://exemplo.com/imagem-escola.jpg":"https://exemplo.com/imagem-professor.jpg",required:!0})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),(0,y.jsx)("select",{value:P.categoria,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{categoria:e.target.value})),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[{value:"geral",label:"Geral"},{value:"infraestrutura",label:"Infraestrutura"},{value:"atividades",label:"Atividades"},{value:"professores",label:"Professores"},{value:"alunos",label:"Alunos"},{value:"comunidade",label:"Comunidade"},{value:"eventos",label:"Eventos"},{value:"outros",label:"Outros"}].map((e=>(0,y.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legenda *"}),(0,y.jsx)("input",{type:"text",value:P.legenda,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{legenda:e.target.value})),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descri\xe7\xe3o curta da foto do ".concat(L),required:!0})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o Detalhada"}),(0,y.jsx)("textarea",{value:P.descricao_detalhada,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{descricao_detalhada:e.target.value})),className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Descri\xe7\xe3o mais detalhada da foto do ".concat(L,"...")})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Autor da Foto"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,y.jsx)("input",{type:"text",value:P.autor_foto,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{autor_foto:e.target.value})),className:"w-full border rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do fot\xf3grafo"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Foto"}),(0,y.jsxs)("div",{className:"relative",children:[(0,y.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,y.jsx)("input",{type:"date",value:P.data_foto,onChange:e=>z((0,r.A)((0,r.A)({},P),{},{data_foto:e.target.value})),className:"w-full border rounded-lg pl-10 pr-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,y.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,y.jsxs)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,y.jsx)(h.A,{className:"w-4 h-4"}),I?"Atualizar":"Salvar"]}),(0,y.jsx)("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})]}),i.length>0?(0,y.jsxs)("div",{className:"space-y-4",children:[(0,y.jsxs)("h4",{className:"font-medium text-gray-900",children:["Legendas de ","escola"===L?"Fotos da Escola":"Fotos dos Professores"," (",i.length,")"]}),(0,y.jsx)("div",{className:"grid gap-4",children:i.map((e=>(0,y.jsx)("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:(0,y.jsxs)("div",{className:"flex items-start justify-between",children:[(0,y.jsxs)("div",{className:"flex-1",children:[(0,y.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,y.jsx)(p,{className:"w-4 h-4 text-gray-400"}),(0,y.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.categoria}),(0,y.jsx)("span",{className:"text-gray-300",children:"\u2022"}),(0,y.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:"escola"===e.tipo_foto?"Escola":"Professor"})]}),(0,y.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:e.legenda}),e.descricao_detalhada&&(0,y.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.descricao_detalhada}),(0,y.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.autor_foto&&(0,y.jsxs)("span",{className:"flex items-center gap-1",children:[(0,y.jsx)(g.A,{className:"w-3 h-3"}),e.autor_foto]}),e.data_foto&&(0,y.jsxs)("span",{className:"flex items-center gap-1",children:[(0,y.jsx)(x,{className:"w-3 h-3"}),new Date(e.data_foto).toLocaleDateString("pt-BR")]})]}),(0,y.jsx)("p",{className:"text-xs text-blue-600 mt-2 truncate",children:e.imagem_url})]}),(0,y.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,y.jsx)("button",{onClick:()=>(e=>{M(e),z({imagem_url:e.imagem_url,legenda:e.legenda,descricao_detalhada:e.descricao_detalhada||"",autor_foto:e.autor_foto||"",data_foto:e.data_foto||"",categoria:e.categoria||"geral",tipo_foto:e.tipo_foto||L}),S(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar legenda",children:(0,y.jsx)(b,{className:"w-4 h-4"})}),(0,y.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja excluir esta legenda?"))try{await(0,v.YR)(e),_("Legenda exclu\xedda com sucesso!"),T(),s&&s()}catch(a){console.error("Erro ao deletar legenda:",a),E("Erro ao excluir legenda: ".concat(a.message))}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir legenda",children:(0,y.jsx)(f.A,{className:"w-4 h-4"})})]})]})},e.id)))})]}):(0,y.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,y.jsx)(o.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,y.jsxs)("p",{children:["Nenhuma legenda adicionada para ","escola"===L?"fotos da escola":"fotos dos professores","."]}),(0,y.jsx)("p",{className:"text-sm",children:"Adicione legendas para melhorar a descri\xe7\xe3o das fotos."})]})]})}},3701:(e,a,s)=>{s.d(a,{A:()=>x});var r=s(2555),t=s(5043),o=s(4562),l=s(6478),i=s(193),c=s(256),n=s(7669),d=s(1184),m=s(4488),u=s(1440),g=s(579);const x=e=>{let{escolaId:a,onImagesUpdate:s}=e;const[x,h]=(0,t.useState)([]),[p,b]=(0,t.useState)(!1),[f,v]=(0,t.useState)(0),[y,j]=(0,t.useState)(""),[N,w]=(0,t.useState)(""),[A,E]=(0,t.useState)([]),[k,_]=(0,t.useState)(!0),[C,S]=(0,t.useState)({current:0,limit:5,canUpload:!0}),[I,M]=(0,t.useState)(null),[L,U]=(0,t.useState)(""),[P,z]=(0,t.useState)("professor"),[T,D]=(0,t.useState)(""),q=(0,t.useCallback)((async()=>{if(a)try{_(!0);const e=await(0,u.Gw)(a,"imagens-professores");E(e);const s=await(0,u.BZ)(a,"imagens-professores");S(s)}catch(e){console.error("Erro ao buscar imagens dos professores:",e),j("Erro ao carregar imagens dos professores")}finally{_(!1)}}),[a]);(0,t.useEffect)((()=>{q()}),[q]),(0,t.useEffect)((()=>{if(y||N){const e=setTimeout((()=>{j(""),w("")}),5e3);return()=>clearTimeout(e)}}),[y,N]);const V=(0,t.useCallback)((e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files);if(0===a.length)return;if(!C.canUpload)return void j("Limite de ".concat(C.limit," imagens dos professores atingido. Remova algumas imagens antes de adicionar novas."));if(A.length+x.length+a.length>C.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(C.limit-A.length-x.length," imagens dos professores."));const s=a.filter((e=>e.type.startsWith("image/")));s.length>0&&(h((e=>[...e,...s])),j(""))}),[C,A.length,x.length]),B=(0,t.useCallback)((e=>{e.preventDefault()}),[]),F=async(e,a)=>{if(a.trim())try{await(0,u.vx)(e,a),E((s=>s.map((s=>s.id===e?(0,r.A)((0,r.A)({},s),{},{descricao:a.trim()}):s)))),w("Legenda atualizada com sucesso!"),s&&s()}catch(t){console.error("Erro ao atualizar descri\xe7\xe3o:",t),j("Erro ao atualizar legenda: ".concat(t.message))}};return k?(0,g.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,g.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),(0,g.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando imagens dos professores..."})]})}):(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(o.A,{className:"w-5 h-5 text-green-600"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens dos Professores"})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[C.current,"/",C.limit," imagens"]})]}),y&&(0,g.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,g.jsx)(l.A,{className:"w-5 h-5 text-red-600"}),(0,g.jsx)("span",{className:"text-red-700",children:y})]}),N&&(0,g.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,g.jsx)(i.A,{className:"w-5 h-5 text-green-600"}),(0,g.jsx)("span",{className:"text-green-700",children:N})]}),C.canUpload&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,g.jsx)("label",{htmlFor:"genero-professor",className:"text-sm font-medium text-gray-700",children:"G\xeanero:"}),(0,g.jsxs)("select",{id:"genero-professor",value:P,onChange:e=>z(e.target.value),className:"border rounded px-2 py-1 text-sm",disabled:p,children:[(0,g.jsx)("option",{value:"professor",children:"Professor"}),(0,g.jsx)("option",{value:"professora",children:"Professora"})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,g.jsx)("label",{htmlFor:"titulo-historia",className:"text-sm font-medium text-gray-700",children:"T\xedtulo da hist\xf3ria:"}),(0,g.jsx)("input",{id:"titulo-historia",type:"text",value:T,onChange:e=>D(e.target.value),className:"border rounded px-2 py-1 text-sm w-full",placeholder:"Ex: Hist\xf3ria da professora Mariza",disabled:p})]}),(0,g.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(p?"border-gray-300 bg-gray-50":"border-green-300 bg-green-50 hover:border-green-400 hover:bg-green-100"),onDrop:V,onDragOver:B,children:[(0,g.jsx)(c.A,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-gray-600 mb-2",children:"Arraste imagens dos professores aqui ou clique para selecionar"}),(0,g.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"JPG, PNG, WEBP, GIF \u2022 M\xe1ximo 5MB por arquivo \u2022 M\xe1ximo 5 imagens"}),(0,g.jsxs)("label",{className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors",children:[(0,g.jsx)("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:e=>{const a=Array.from(e.target.files);if(0===a.length)return;if(!C.canUpload)return void j("Limite de ".concat(C.limit," imagens dos professores atingido. Remova algumas imagens antes de adicionar novas."));if(A.length+x.length+a.length>C.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(C.limit-A.length-x.length," imagens dos professores."));const s=a.filter((e=>{const a=["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type),s=e.size<=5242880;return a||j('Arquivo "'.concat(e.name,'" n\xe3o \xe9 uma imagem v\xe1lida. Use apenas JPG, PNG, WEBP ou GIF.')),s||j('Arquivo "'.concat(e.name,'" \xe9 muito grande. Tamanho m\xe1ximo: 5MB.')),a&&s}));s.length>0&&(h((e=>[...e,...s])),j(""))},className:"hidden",disabled:p}),"Selecionar Arquivos"]})]}),p&&(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,g.jsx)("span",{children:"Fazendo upload das imagens dos professores..."}),(0,g.jsxs)("span",{children:[Math.round(f),"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(f,"%")}})})]}),x.length>0&&(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("h4",{className:"font-medium text-gray-900",children:["Arquivos selecionados (",x.length,")"]}),(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(((e,a)=>(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-24 object-cover rounded-lg border"}),(0,g.jsx)("button",{onClick:()=>(e=>{h((a=>a.filter(((a,s)=>s!==e))))})(a),className:"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,g.jsx)(n.A,{className:"w-3 h-3"})}),(0,g.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name})]},a)))}),(0,g.jsx)("button",{onClick:async()=>{if(0!==x.length){b(!0),v(0),j("");try{const e=[];for(let s=0;s<x.length;s++){const r=x[s],t=(s+1)/x.length*100;v(t);const o=await(0,u.wG)(r,a,"",P,T);e.push(o)}E((a=>[...a,...e])),h([]),v(0),w("".concat(e.length," imagem(ns) do(s) professor(es) carregada(s) com sucesso!"));const r=await(0,u.BZ)(a,"imagens-professores");S(r),s&&s()}catch(e){console.error("Erro no upload:",e),j("Erro ao fazer upload: ".concat(e.message))}finally{b(!1),v(0)}}},disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Fazendo Upload...":"Fazer Upload"})]})]}),A.length>0&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("h4",{className:"font-medium text-gray-900",children:["Imagens dos Professores (",A.length,")"]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((e=>(0,g.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:[(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsx)("img",{src:e.publicUrl,alt:e.descricao||"Imagem do professor",className:"w-full h-48 object-cover"}),(0,g.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center",children:(0,g.jsx)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,g.jsx)("button",{onClick:()=>(async(e,r)=>{if(window.confirm("Tem certeza que deseja excluir esta imagem do professor?"))try{await(0,u.vS)(e,r,"imagens-professores"),E((a=>a.filter((a=>a.id!==e))));const t=await(0,u.BZ)(a,"imagens-professores");S(t),w("Imagem do professor exclu\xedda com sucesso!"),s&&s()}catch(t){console.error("Erro ao deletar imagem:",t),j("Erro ao excluir imagem: ".concat(t.message))}})(e.id,e.url),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Excluir imagem",children:(0,g.jsx)(d.A,{className:"w-4 h-4"})})})})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Legenda da Imagem"}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("input",{type:"text",className:"flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:e.descricao||"",onChange:a=>{E((s=>s.map((s=>s.id===e.id?(0,r.A)((0,r.A)({},s),{},{descricao:a.target.value}):s))))},onBlur:a=>{a.target.value!==(e.descricao||"")&&F(e.id,a.target.value)},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()},placeholder:"Digite a legenda da imagem..."}),(0,g.jsx)("button",{onClick:()=>F(e.id,e.descricao||""),className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Salvar legenda",children:(0,g.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pressione Enter ou clique no \xedcone para salvar"})]})]},e.id)))})]}),0===A.length&&!p&&(0,g.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,g.jsx)(o.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,g.jsx)("p",{children:"Nenhuma imagem dos professores adicionada ainda."}),(0,g.jsx)("p",{className:"text-sm",children:"Adicione imagens para mostrar os professores da escola."})]})]})}},3882:(e,a,s)=>{s.d(a,{A:()=>h});var r=s(2555),t=s(5043);const o=(0,s(1114).A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var l=s(8590),i=s(6637),c=s(1184),n=s(7669),d=s(4488),m=s(6478),u=s(193),g=s(237),x=s(579);const h=e=>{var a;let{escolaId:s,videoUrl:h,onVideoUrlChange:p,onTitulosUpdate:b}=e;const[f,v]=(0,t.useState)([]),[y,j]=(0,t.useState)(!0),[N,w]=(0,t.useState)(""),[A,E]=(0,t.useState)(""),[k,_]=(0,t.useState)(!1),[C,S]=(0,t.useState)({url:"",titulo:""}),I=(0,t.useCallback)((async()=>{if(s)try{j(!0);const e=(await(0,g.L6)(s)).map((e=>({id:e.id,url:e.video_url,titulo:e.titulo,plataforma:e.plataforma,categoria:e.categoria})));v(e)}catch(e){console.error("Erro ao buscar v\xeddeos:",e),w("Erro ao carregar v\xeddeos")}finally{j(!1)}}),[s]);(0,t.useEffect)((()=>{I()}),[I]),(0,t.useEffect)((()=>{if(N||A){const e=setTimeout((()=>{w(""),E("")}),5e3);return()=>clearTimeout(e)}}),[N,A]);const M=async(e,a)=>{if(a.trim())try{await(0,g.KM)(e,{titulo:a,escola_id:s}),I(),b&&b()}catch(r){console.error("Erro ao atualizar t\xedtulo:",r),w("Erro ao atualizar t\xedtulo")}},L=e=>{if(!e)return"";const a=e.match(/(?:youtu.be\/|youtube.com\/(?:watch\?v=|embed\/|v\/))([\w-]{11})/);if(a)return"https://www.youtube.com/embed/".concat(a[1]);const s=e.match(/vimeo.com\/(\d+)/);return s?"https://player.vimeo.com/video/".concat(s[1]):e};return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(o,{className:"w-5 h-5 text-blue-600"}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"V\xeddeo Principal"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL do V\xeddeo"}),(0,x.jsx)("input",{type:"url",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h||"",onChange:e=>p(e.target.value),placeholder:"Cole aqui o link do v\xeddeo (YouTube, Vimeo, etc)"}),(0,x.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.youtube.com/watch?v=..."})]}),h&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo do V\xeddeo"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:(null===(a=f.find((e=>e.url===h)))||void 0===a?void 0:a.titulo)||"",onChange:e=>{const a=f.find((e=>e.url===h));a&&M(a.id,e.target.value)},placeholder:"Digite o t\xedtulo do v\xeddeo"}),(0,x.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Exemplo: "Aula de Matem\xe1tica na Escola Ind\xedgena"'})]}),h&&L(h)&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9-visualiza\xe7\xe3o"}),(0,x.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden",children:(0,x.jsx)("iframe",{src:L(h),title:"Pr\xe9-visualiza\xe7\xe3o do v\xeddeo",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})})]})]}),(0,x.jsxs)("div",{className:"border-t pt-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)(l.A,{className:"w-5 h-5 text-green-600"}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Outros V\xeddeos"})]}),(0,x.jsxs)("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,x.jsx)(i.A,{className:"w-4 h-4"}),"Adicionar Outro V\xeddeo"]})]}),f.filter((e=>e.url!==h)).length>0&&(0,x.jsx)("div",{className:"space-y-4",children:f.filter((e=>e.url!==h)).map((e=>(0,x.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,x.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo do V\xeddeo"}),(0,x.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:e.titulo,onChange:a=>M(e.id,a.target.value),placeholder:"Digite o t\xedtulo do v\xeddeo"})]}),(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja remover este v\xeddeo?"))try{await(0,g.qp)(e),E("V\xeddeo removido com sucesso!"),I(),b&&b()}catch(a){console.error("Erro ao remover v\xeddeo:",a),w("Erro ao remover v\xeddeo")}})(e.id),className:"ml-3 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remover v\xeddeo",children:(0,x.jsx)(c.A,{className:"w-4 h-4"})})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL do V\xeddeo"}),(0,x.jsx)("input",{type:"url",className:"w-full border rounded-lg px-3 py-2 bg-gray-100",value:e.url,disabled:!0})]}),L(e.url)&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pr\xe9-visualiza\xe7\xe3o"}),(0,x.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden",children:(0,x.jsx)("iframe",{src:L(e.url),title:e.titulo,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})})]})]},e.id)))}),0===f.filter((e=>e.url!==h)).length&&!k&&(0,x.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,x.jsx)(l.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,x.jsx)("p",{children:"Nenhum v\xeddeo adicional adicionado."}),(0,x.jsx)("p",{className:"text-sm",children:'Clique em "Adicionar Outro V\xeddeo" para incluir mais v\xeddeos.'})]}),k&&(0,x.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h4",{className:"text-lg font-medium text-blue-800",children:"Adicionar Novo V\xeddeo"}),(0,x.jsx)("button",{onClick:()=>{_(!1),S({url:"",titulo:""})},className:"text-blue-500 hover:text-blue-700",children:(0,x.jsx)(n.A,{className:"w-5 h-5"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{var a;if(e.preventDefault(),C.url.trim()&&C.titulo.trim())try{if(f.find((e=>e.url===C.url)))return void w("Este v\xeddeo j\xe1 foi adicionado");await(0,g.I5)({video_url:C.url,titulo:C.titulo,plataforma:(a=C.url,a.includes("youtube.com")||a.includes("youtu.be")?"youtube":a.includes("vimeo.com")?"vimeo":a.includes("facebook.com")?"facebook":a.includes("instagram.com")?"instagram":"outro"),categoria:"geral",escola_id:s}),E("V\xeddeo adicionado com sucesso!"),S({url:"",titulo:""}),_(!1),I(),b&&b()}catch(r){console.error("Erro ao adicionar v\xeddeo:",r),w("Erro ao adicionar v\xeddeo")}else w("URL e t\xedtulo s\xe3o obrigat\xf3rios")},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL do V\xeddeo *"}),(0,x.jsx)("input",{type:"url",required:!0,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:C.url,onChange:e=>S((0,r.A)((0,r.A)({},C),{},{url:e.target.value})),placeholder:"https://www.youtube.com/watch?v=..."})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xedtulo do V\xeddeo *"}),(0,x.jsx)("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",value:C.titulo,onChange:e=>S((0,r.A)((0,r.A)({},C),{},{titulo:e.target.value})),placeholder:"Digite o t\xedtulo do v\xeddeo"})]}),(0,x.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,x.jsxs)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,x.jsx)(d.A,{className:"w-4 h-4"}),"Adicionar V\xeddeo"]}),(0,x.jsx)("button",{type:"button",onClick:()=>{_(!1),S({url:"",titulo:""})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]})]})]}),N&&(0,x.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,x.jsx)(m.A,{className:"w-5 h-5 text-red-600"}),(0,x.jsx)("span",{className:"text-red-700",children:N})]}),A&&(0,x.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,x.jsx)(u.A,{className:"w-5 h-5 text-green-600"}),(0,x.jsx)("span",{className:"text-green-700",children:A})]})]})}},4488:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4562:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6017:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(2555),t=s(5043),o=s(197),l=s(6464),i=s(4562),c=s(2623),n=s(8590),d=s(1209),m=s(2065);const u=(0,s(1114).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=s(7484),x=s(3701),h=s(2308),p=s(3882),b=s(579);const f=e=>{let{escola:a,onClose:s,onSave:f}=e;const[v,y]=(0,t.useState)((null===a||void 0===a?void 0:a.Escola)||""),[j,N]=(0,t.useState)(!1),[w,A]=(0,t.useState)(""),[E,k]=(0,t.useState)("dados-basicos"),_=[{id:"dados-basicos",label:"Dados B\xe1sicos",icon:o.A,description:"Informa\xe7\xf5es principais da escola"},{id:"imagens-escola",label:"Imagens da Escola",icon:l.A,description:"Upload e gerenciamento de imagens da escola (m\xe1x. 10)"},{id:"imagens-professores",label:"Imagens dos Professores",icon:i.A,description:"Upload e gerenciamento de imagens dos professores (m\xe1x. 5)"},{id:"legendas-fotos",label:"Legendas de Fotos",icon:c.A,description:"Gerenciar legendas descritivas das fotos"},{id:"video",label:"V\xeddeo",icon:n.A,description:"Link do v\xeddeo e gerenciamento de t\xedtulos"},{id:"localizacao",label:"Localiza\xe7\xe3o",icon:d.A,description:"Coordenadas e endere\xe7o da escola"},{id:"gestao",label:"Gest\xe3o",icon:m.A,description:"Informa\xe7\xf5es sobre gest\xe3o e funcion\xe1rios"},{id:"configuracoes",label:"Configura\xe7\xf5es",icon:u,description:"Configura\xe7\xf5es avan\xe7adas da escola"}],C=()=>{console.log("Imagens atualizadas - PainelInformacoes deve ser atualizado")},S=()=>{console.log("Legendas atualizadas - PainelInformacoes deve ser atualizado")},I=()=>{console.log("T\xedtulos atualizados - PainelInformacoes deve ser atualizado")};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Editar Escola: ",(null===a||void 0===a?void 0:a.Escola)||"Nova Escola"]}),(0,b.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"flex border-b bg-gray-50",children:_.map((e=>{const a=e.icon;return(0,b.jsxs)("button",{onClick:()=>k(e.id),className:"flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors ".concat(E===e.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:e.description,children:[(0,b.jsx)(a,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id)}))}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,b.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v.trim()){A(""),N(!0);try{await f((0,r.A)((0,r.A)({},a),{},{Escola:v})),s()}catch(t){A("Erro ao salvar.")}finally{N(!1)}}else A("O nome da escola \xe9 obrigat\xf3rio.")},children:[(0,b.jsx)("div",{className:"min-h-[400px]",children:(()=>{switch(E){case"dados-basicos":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola *"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:v,onChange:e=>y(e.target.value),disabled:j,placeholder:"Digite o nome da escola"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Munic\xedpio"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a["Munic\xedpio"])||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{"Munic\xedpio":e.target.value})),placeholder:"Nome do munic\xedpio"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terra Ind\xedgena (TI)"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a["Terra Indigena (TI)"])||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{"Terra Indigena (TI)":e.target.value})),placeholder:"Nome da terra ind\xedgena"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o"}),(0,b.jsx)("textarea",{className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",value:(null===a||void 0===a?void 0:a["Endere\xe7o"])||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{"Endere\xe7o":e.target.value})),placeholder:"Endere\xe7o completo da escola"})]})]});case"imagens-escola":return(0,b.jsx)(g.A,{escolaId:null===a||void 0===a?void 0:a.id,onImagesUpdate:C});case"imagens-professores":return(0,b.jsx)(x.A,{escolaId:null===a||void 0===a?void 0:a.id,onImagesUpdate:C});case"legendas-fotos":return(0,b.jsx)(h.A,{escolaId:null===a||void 0===a?void 0:a.id,onLegendasUpdate:S});case"video":return(0,b.jsx)(p.A,{escolaId:null===a||void 0===a?void 0:a.id,videoUrl:(null===a||void 0===a?void 0:a.link_para_videos)||"",onVideoUrlChange:e=>f((0,r.A)((0,r.A)({},a),{},{link_para_videos:e})),onTitulosUpdate:I});case"localizacao":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,b.jsx)("input",{type:"number",step:"any",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.latitude)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{latitude:parseFloat(e.target.value)||null})),placeholder:"Ex: -23.5505"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,b.jsx)("input",{type:"number",step:"any",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.longitude)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{longitude:parseFloat(e.target.value)||null})),placeholder:"Ex: -46.6333"})]})]}),(0,b.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"Dica:"})," Use o Google Maps para encontrar as coordenadas exatas da escola. Clique com o bot\xe3o direito no local da escola e selecione as coordenadas."]})})]});case"gestao":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gest\xe3o/Nome"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.gestao)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{gestao:e.target.value})),placeholder:"Nome da gest\xe3o atual"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores Ind\xedgenas"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.professores_indigenas)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{professores_indigenas:e.target.value})),placeholder:"Quantidade ou nomes"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professores N\xe3o Ind\xedgenas"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:(null===a||void 0===a?void 0:a.professores_nao_indigenas)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{professores_nao_indigenas:e.target.value})),placeholder:"Quantidade ou nomes"})]})]})]});case"infraestrutura":return(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Merenda diferenciada"}),(0,b.jsx)("textarea",{className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",value:(null===a||void 0===a?void 0:a.merenda_diferenciada)||"",onChange:e=>f((0,r.A)((0,r.A)({},a),{},{merenda_diferenciada:e.target.value})),placeholder:"Descreva a situa\xe7\xe3o do fornecimento de merenda (ex: se a escola recebe, se h\xe1 interrup\xe7\xf5es, etc.)"})]})});case"configuracoes":return(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,b.jsx)("strong",{children:"Configura\xe7\xf5es Avan\xe7adas:"})," Esta se\xe7\xe3o ser\xe1 implementada em breve. Aqui voc\xea poder\xe1 configurar permiss\xf5es, notifica\xe7\xf5es e outras op\xe7\xf5es avan\xe7adas."]})})});default:return null}})()}),w&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-red-700 text-sm",children:w})}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:j,children:j?"Salvando...":"Salvar Altera\xe7\xf5es"}),(0,b.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",onClick:s,disabled:j,children:"Cancelar"})]})]})})]})})}},6464:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},6637:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7484:(e,a,s)=>{s.d(a,{A:()=>x});var r=s(2555),t=s(5043),o=s(6464),l=s(6478),i=s(193),c=s(256),n=s(7669),d=s(1184),m=s(4488),u=s(1440),g=s(579);const x=e=>{let{escolaId:a,onImagesUpdate:s}=e;const[x,h]=(0,t.useState)([]),[p,b]=(0,t.useState)(!1),[f,v]=(0,t.useState)(0),[y,j]=(0,t.useState)(""),[N,w]=(0,t.useState)(""),[A,E]=(0,t.useState)([]),[k,_]=(0,t.useState)(!0),[C,S]=(0,t.useState)({current:0,limit:10,canUpload:!0}),[I,M]=(0,t.useState)(null),[L,U]=(0,t.useState)(""),P=(0,t.useCallback)((async()=>{if(a)try{_(!0);const e=await(0,u.Gw)(a,"imagens-das-escolas");E(e);const s=await(0,u.BZ)(a,"imagens-das-escolas");S(s)}catch(e){console.error("Erro ao buscar imagens:",e),j("Erro ao carregar imagens existentes")}finally{_(!1)}}),[a]);(0,t.useEffect)((()=>{P()}),[P]),(0,t.useEffect)((()=>{if(y||N){const e=setTimeout((()=>{j(""),w("")}),5e3);return()=>clearTimeout(e)}}),[y,N]);const z=(0,t.useCallback)((e=>{e.preventDefault();const a=Array.from(e.dataTransfer.files);if(0===a.length)return;if(!C.canUpload)return void j("Limite de ".concat(C.limit," imagens atingido. Remova algumas imagens antes de adicionar novas."));if(A.length+x.length+a.length>C.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(C.limit-A.length-x.length," imagens."));const s=a.filter((e=>e.type.startsWith("image/")));s.length>0&&(h((e=>[...e,...s])),j(""))}),[C,A.length,x.length]),T=(0,t.useCallback)((e=>{e.preventDefault()}),[]),D=async(e,a)=>{if(a.trim())try{await(0,u.vx)(e,a),E((s=>s.map((s=>s.id===e?(0,r.A)((0,r.A)({},s),{},{descricao:a.trim()}):s)))),w("Legenda atualizada com sucesso!"),s&&s()}catch(t){console.error("Erro ao atualizar descri\xe7\xe3o:",t),j("Erro ao atualizar legenda: ".concat(t.message))}};return k?(0,g.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,g.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,g.jsx)("span",{className:"ml-2 text-gray-600",children:"Carregando imagens..."})]})}):(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(o.A,{className:"w-5 h-5 text-blue-600"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Imagens da Escola"})]}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[C.current,"/",C.limit," imagens"]})]}),y&&(0,g.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,g.jsx)(l.A,{className:"w-5 h-5 text-red-600"}),(0,g.jsx)("span",{className:"text-red-700",children:y})]}),N&&(0,g.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,g.jsx)(i.A,{className:"w-5 h-5 text-green-600"}),(0,g.jsx)("span",{className:"text-green-700",children:N})]}),C.canUpload&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(p?"border-gray-300 bg-gray-50":"border-blue-300 bg-blue-50 hover:border-blue-400 hover:bg-blue-100"),onDrop:z,onDragOver:T,children:[(0,g.jsx)(c.A,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-gray-600 mb-2",children:"Arraste imagens aqui ou clique para selecionar"}),(0,g.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"JPG, PNG, WEBP, GIF \u2022 M\xe1ximo 5MB por arquivo"}),(0,g.jsxs)("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[(0,g.jsx)("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:e=>{const a=Array.from(e.target.files);if(0===a.length)return;if(!C.canUpload)return void j("Limite de ".concat(C.limit," imagens atingido. Remova algumas imagens antes de adicionar novas."));if(A.length+x.length+a.length>C.limit)return void j("Voc\xea pode adicionar no m\xe1ximo ".concat(C.limit-A.length-x.length," imagens."));const s=a.filter((e=>{const a=["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(e.type),s=e.size<=5242880;return a||j('Arquivo "'.concat(e.name,'" n\xe3o \xe9 uma imagem v\xe1lida. Use apenas JPG, PNG, WEBP ou GIF.')),s||j('Arquivo "'.concat(e.name,'" \xe9 muito grande. Tamanho m\xe1ximo: 5MB.')),a&&s}));s.length>0&&(h((e=>[...e,...s])),j(""))},className:"hidden",disabled:p}),"Selecionar Arquivos"]})]}),p&&(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,g.jsx)("span",{children:"Fazendo upload..."}),(0,g.jsxs)("span",{children:[Math.round(f),"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(f,"%")}})})]}),x.length>0&&(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("h4",{className:"font-medium text-gray-900",children:["Arquivos selecionados (",x.length,")"]}),(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(((e,a)=>(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-24 object-cover rounded-lg border"}),(0,g.jsx)("button",{onClick:()=>(e=>{h((a=>a.filter(((a,s)=>s!==e))))})(a),className:"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,g.jsx)(n.A,{className:"w-3 h-3"})}),(0,g.jsx)("p",{className:"text-xs text-gray-600 mt-1 truncate",children:e.name})]},a)))}),(0,g.jsx)("button",{onClick:async()=>{if(0!==x.length){b(!0),v(0),j("");try{const e=[];for(let s=0;s<x.length;s++){const r=x[s],t=(s+1)/x.length*100;v(t);const o=await(0,u.gE)(r,a);e.push(o)}E((a=>[...a,...e])),h([]),v(0),w("".concat(e.length," imagem(ns) carregada(s) com sucesso!"));const r=await(0,u.BZ)(a,"imagens-das-escolas");S(r),s&&s()}catch(e){console.error("Erro no upload:",e),j("Erro ao fazer upload: ".concat(e.message))}finally{b(!1),v(0)}}},disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Fazendo Upload...":"Fazer Upload"})]})]}),A.length>0&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("h4",{className:"font-medium text-gray-900",children:["Imagens da Escola (",A.length,")"]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((e=>(0,g.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:[(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsx)("img",{src:e.publicUrl,alt:e.descricao||"Imagem da escola",className:"w-full h-48 object-cover"}),(0,g.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center",children:(0,g.jsx)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,g.jsx)("button",{onClick:()=>(async(e,r)=>{if(window.confirm("Tem certeza que deseja excluir esta imagem?"))try{await(0,u.vS)(e,r,"imagens-das-escolas"),E((a=>a.filter((a=>a.id!==e))));const t=await(0,u.BZ)(a,"imagens-das-escolas");S(t),w("Imagem exclu\xedda com sucesso!"),s&&s()}catch(t){console.error("Erro ao deletar imagem:",t),j("Erro ao excluir imagem: ".concat(t.message))}})(e.id,e.url),className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700",title:"Excluir imagem",children:(0,g.jsx)(d.A,{className:"w-4 h-4"})})})})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Legenda da Imagem"}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("input",{type:"text",className:"flex-1 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:e.descricao||"",onChange:a=>{E((s=>s.map((s=>s.id===e.id?(0,r.A)((0,r.A)({},s),{},{descricao:a.target.value}):s))))},onBlur:a=>{a.target.value!==(e.descricao||"")&&D(e.id,a.target.value)},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()},placeholder:"Digite a legenda da imagem..."}),(0,g.jsx)("button",{onClick:()=>D(e.id,e.descricao||""),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Salvar legenda",children:(0,g.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Pressione Enter ou clique no \xedcone para salvar"})]})]},e.id)))})]}),0===A.length&&!p&&(0,g.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,g.jsx)(o.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),(0,g.jsx)("p",{children:"Nenhuma imagem adicionada ainda."}),(0,g.jsx)("p",{className:"text-sm",children:"Adicione imagens para mostrar a escola."})]})]})}},8590:(e,a,s)=>{s.d(a,{A:()=>r});const r=(0,s(1114).A)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])}}]);
//# sourceMappingURL=17.0e6ac6f0.chunk.js.map