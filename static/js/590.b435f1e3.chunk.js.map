{"version":3,"file":"static/js/590.b435f1e3.chunk.js","mappings":"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","sources":["components/AdminPanel/hooks/useEscolas.js","components/AdminPanel/utils/modalidadesOptions.js","components/AdminPanel/hooks/useModalidades.js","components/AdminPanel/constants/adminConstants.js","components/AdminPanel/AdminSidebar.js","components/AdminPanel/AdminToolbar.js","components/Auth/LoginModal.js","components/Auth/ProtectedRoute.js","components/AdminPanel/tabs/ModalidadesTab.js","components/AdminPanel/tabs/DadosBasicosTab.js","components/AdminPanel/tabs/PovosLinguasTab.js","components/AdminPanel/tabs/InfraestruturaTab.js","components/AdminPanel/tabs/GestaoProfessoresTab.js","components/AdminPanel/tabs/MaterialPedagogicoTab.js","components/AdminPanel/tabs/ProjetosParceriasTab.js","components/AdminPanel/tabs/RedesSociaisTab.js","components/AdminPanel/VideoManager.js","services/videoService.js","components/AdminPanel/tabs/VideoTab.js","components/shared/QuillEditor.js","components/AdminPanel/tabs/RichTextEditor.js","components/AdminPanel/tabs/HistoriasTab.js","services/fotoProfessorService.js","components/AdminPanel/tabs/HistoriaProfessoresTab.js","components/AdminPanel/tabs/CoordenadasTab.js","components/AdminPanel/tabs/TabelasIntegraisTab.js","components/AdminPanel/components/EditableTable.js","components/AdminPanel/tabs/TabelaEditavelTab.js","components/AdminPanel/components/CompletenessDashboard.js","components/AdminPanel/index.js","services/professorImageMetaService.js","components/EditEscolaPanel/ProfessorImageUploadSection.js","components/AdminPanel/tabs/ImagensProfessoresTab.js","components/AddLocationPanel/components/PDFUploadSection.js","components/AdminPanel/tabs/DocumentosTab.js","services/uploadService.js","services/legendasService.js","config/storage.js","services/escolaImageService.js","services/historiaProfessorService.js","services/headerImageService.js","components/EditEscolaPanel/ImageUploadSection.js","components/AdminPanel/tabs/ImagensEscolaTab.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../../../supabaseClient';\n\nexport const useEscolas = () => {\n  const [escolas, setEscolas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedType, setSelectedType] = useState('todos');\n\n  // Buscar todas as escolas\n  const fetchEscolas = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('*')\n        .order('Escola', { ascending: true });\n\n      if (error) throw error;\n      \n      // Mapear os dados para usar os nomes originais das colunas\n      const escolasMapeadas = data.map(escola => ({\n        ...escola,\n        // Garantir que os novos campos de endereço existam\n        logradouro: escola.logradouro || '',\n        numero: escola.numero || '',\n        complemento: escola.complemento || '',\n        bairro: escola.bairro || '',\n        cep: escola.cep || '',\n        estado: escola.estado || 'SP'\n      }));\n      \n      setEscolas(escolasMapeadas);\n    } catch (err) {\n      console.error('Erro ao buscar escolas:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Filtrar escolas baseado no termo de busca\n  const filteredEscolas = useCallback(() => {\n    return escolas.filter(escola => \n      escola.Escola?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  }, [escolas, searchTerm]);\n\n  // Atualizar escola na lista local\n  const updateEscolaInList = useCallback((escolaId, updatedData) => {\n    setEscolas(prev => prev.map(escola => \n      escola.id === escolaId ? { ...escola, ...updatedData } : escola\n    ));\n  }, []);\n\n  // Adicionar nova escola à lista\n  const addEscolaToList = useCallback((novaEscola) => {\n    setEscolas(prev => [...prev, novaEscola]);\n  }, []);\n\n  // Remover escola da lista\n  const removeEscolaFromList = useCallback((escolaId) => {\n    setEscolas(prev => prev.filter(escola => escola.id !== escolaId));\n  }, []);\n\n  // Buscar escola por ID\n  const getEscolaById = useCallback((escolaId) => {\n    return escolas.find(escola => escola.id === escolaId);\n  }, [escolas]);\n\n  // Buscar escola por nome\n  const getEscolaByName = useCallback((nome) => {\n    return escolas.find(escola => \n      escola.Escola?.toLowerCase() === nome.toLowerCase()\n    );\n  }, [escolas]);\n\n  // Salvar escola no Supabase\n  const saveEscola = useCallback(async (escolaData) => {\n    try {\n      setError(null);\n      \n      if (escolaData.id) {\n        // Atualizar escola existente\n        const { data, error } = await supabase\n          .from('escolas_completa')\n          .update({\n            'Escola': escolaData.Escola,\n            'Município': escolaData['Município'],\n            'Endereço': escolaData['Endereço'],\n            'Terra Indigena (TI)': escolaData['Terra Indigena (TI)'],\n            'Escola Estadual ou Municipal': escolaData['Escola Estadual ou Municipal'],\n            'Parcerias com o município': escolaData['Parcerias com o município'],\n            'Diretoria de Ensino': escolaData['Diretoria de Ensino'],\n            'Ano de criação da escola': escolaData['Ano de criação da escola'],\n            'Povos indigenas': escolaData['Povos indigenas'],\n            'Linguas faladas': escolaData['Linguas faladas'],\n            'Modalidade de Ensino/turnos de funcionamento': escolaData['Modalidade de Ensino/turnos de funcionamento'],\n            'Numero de alunos': escolaData['Numero de alunos'],\n            'turnos_funcionamento': escolaData['turnos_funcionamento'],\n            'Espaço escolar e estrutura': escolaData['Espaço escolar e estrutura'],\n            'Acesso à água': escolaData['Acesso à água'],\n            'Tem coleta de lixo?': escolaData['Tem coleta de lixo?'],\n            'Acesso à internet': escolaData['Acesso à internet'],\n            'Equipamentos Tecs': escolaData['Equipamentos Tecs'],\n            'Modo de acesso à escola': escolaData['Modo de acesso à escola'],\n            'Gestão/Nome': escolaData['Gestão/Nome'],\n            'Outros funcionários': escolaData['Outros funcionários'],\n            'Quantidade de professores indígenas': escolaData['Quantidade de professores indígenas'],\n            'Quantidade de professores não indígenas': escolaData['Quantidade de professores não indígenas'],\n            'Professores falam a língua indígena?': escolaData['Professores falam a língua indígena?'],\n            'Formação dos professores': escolaData['Formação dos professores'],\n            'Formação continuada oferecida': escolaData['Formação continuada oferecida'],\n            'A escola possui PPP próprio?': escolaData['A escola possui PPP próprio?'],\n            'PPP elaborado com a comunidade?': escolaData['PPP elaborado com a comunidade?'],\n            'Material pedagógico não indígena': escolaData['Material pedagógico não indígena'],\n            'Material pedagógico indígena': escolaData['Material pedagógico indígena'],\n            'Práticas pedagógicas indígenas': escolaData['Práticas pedagógicas indígenas'],\n            'Formas de avaliação': escolaData['Formas de avaliação'],\n            'Projetos em andamento': escolaData['Projetos em andamento'],\n            'Parcerias com universidades?': escolaData['Parcerias com universidades?'],\n            'Ações com ONGs ou coletivos?': escolaData['Ações com ONGs ou coletivos?'],\n            'Desejos da comunidade para a escola': escolaData['Desejos da comunidade para a escola'],\n            'Escola utiliza redes sociais?': escolaData['Escola utiliza redes sociais?'],\n            'Links das redes sociais': escolaData['Links das redes sociais'],\n            'historia_da_escola': escolaData['historia_da_escola'],\n            'Latitude': escolaData['Latitude'],\n            'Longitude': escolaData['Longitude'],\n            'link_para_videos': escolaData['link_para_videos'],\n            'logradouro': escolaData['logradouro'],\n            'numero': escolaData['numero'],\n            'complemento': escolaData['complemento'],\n            'bairro': escolaData['bairro'],\n            'cep': escolaData['cep'],\n            'estado': escolaData['estado'],\n            'Cozinha': escolaData['cozinha'],\n            'Merenda_escolar': escolaData['merenda_escolar'],\n            'diferenciada': escolaData['diferenciada'],\n            'imagem_header': escolaData['imagem_header']\n          })\n          .eq('id', escolaData.id)\n          .select();\n\n        if (error) throw error;\n        \n        // Atualizar na lista local\n        updateEscolaInList(escolaData.id, data[0]);\n        return { success: true, data: data[0] };\n      } else {\n        // Criar nova escola\n        const { data, error } = await supabase\n          .from('escolas_completa')\n          .insert({\n            'Escola': escolaData.Escola,\n            'Município': escolaData['Município'],\n            'Endereço': escolaData['Endereço'],\n            'Terra Indigena (TI)': escolaData['Terra Indigena (TI)'],\n            'Escola Estadual ou Municipal': escolaData['Escola Estadual ou Municipal'],\n            'Parcerias com o município': escolaData['Parcerias com o município'],\n            'Diretoria de Ensino': escolaData['Diretoria de Ensino'],\n            'Ano de criação da escola': escolaData['Ano de criação da escola'],\n            'Povos indigenas': escolaData['Povos indigenas'],\n            'Linguas faladas': escolaData['Linguas faladas'],\n            'Modalidade de Ensino/turnos de funcionamento': escolaData['Modalidade de Ensino/turnos de funcionamento'],\n            'Numero de alunos': escolaData['Numero de alunos'],\n            'turnos_funcionamento': escolaData['turnos_funcionamento'],\n            'Espaço escolar e estrutura': escolaData['Espaço escolar e estrutura'],\n            'Acesso à água': escolaData['Acesso à água'],\n            'Tem coleta de lixo?': escolaData['Tem coleta de lixo?'],\n            'Acesso à internet': escolaData['Acesso à internet'],\n            'Equipamentos Tecs': escolaData['Equipamentos Tecs'],\n            'Modo de acesso à escola': escolaData['Modo de acesso à escola'],\n            'Gestão/Nome': escolaData['Gestão/Nome'],\n            'Outros funcionários': escolaData['Outros funcionários'],\n            'Quantidade de professores indígenas': escolaData['Quantidade de professores indígenas'],\n            'Quantidade de professores não indígenas': escolaData['Quantidade de professores não indígenas'],\n            'Professores falam a língua indígena?': escolaData['Professores falam a língua indígena?'],\n            'Formação dos professores': escolaData['Formação dos professores'],\n            'Formação continuada oferecida': escolaData['Formação continuada oferecida'],\n            'A escola possui PPP próprio?': escolaData['A escola possui PPP próprio?'],\n            'PPP elaborado com a comunidade?': escolaData['PPP elaborado com a comunidade?'],\n            'Material pedagógico não indígena': escolaData['Material pedagógico não indígena'],\n            'Material pedagógico indígena': escolaData['Material pedagógico indígena'],\n            'Práticas pedagógicas indígenas': escolaData['Práticas pedagógicas indígenas'],\n            'Formas de avaliação': escolaData['Formas de avaliação'],\n            'Projetos em andamento': escolaData['Projetos em andamento'],\n            'Parcerias com universidades?': escolaData['Parcerias com universidades?'],\n            'Ações com ONGs ou coletivos?': escolaData['Ações com ONGs ou coletivos?'],\n            'Desejos da comunidade para a escola': escolaData['Desejos da comunidade para a escola'],\n            'Escola utiliza redes sociais?': escolaData['Escola utiliza redes sociais?'],\n            'Links das redes sociais': escolaData['Links das redes sociais'],\n            'historia_da_escola': escolaData['historia_da_escola'],\n            'Latitude': escolaData['Latitude'],\n            'Longitude': escolaData['Longitude'],\n            'link_para_videos': escolaData['link_para_videos'],\n            'logradouro': escolaData['logradouro'],\n            'numero': escolaData['numero'],\n            'complemento': escolaData['complemento'],\n            'bairro': escolaData['bairro'],\n            'cep': escolaData['cep'],\n            'estado': escolaData['estado'],\n            'Cozinha': escolaData['cozinha'],\n            'Merenda_escolar': escolaData['merenda_escolar'],\n            'diferenciada': escolaData['diferenciada'],\n            'imagem_header': escolaData['imagem_header']\n          })\n          .select();\n\n        if (error) throw error;\n        \n        // Adicionar à lista local\n        addEscolaToList(data[0]);\n        return { success: true, data: data[0] };\n      }\n    } catch (err) {\n      console.error('Erro ao salvar escola:', err);\n      setError(err.message);\n      return { success: false, error: err.message };\n    }\n  }, [updateEscolaInList, addEscolaToList]);\n\n  // Deletar escola do banco de dados\n  const deleteEscola = useCallback(async (escolaId) => {\n    try {\n      setError(null);\n      \n      const { error } = await supabase\n        .from('escolas_completa')\n        .delete()\n        .eq('id', escolaId);\n\n      if (error) throw error;\n      \n      // Remover da lista local\n      removeEscolaFromList(escolaId);\n      return { success: true };\n    } catch (err) {\n      console.error('Erro ao deletar escola:', err);\n      setError(err.message);\n      return { success: false, error: err.message };\n    }\n  }, [removeEscolaFromList]);\n\n  // Carregar escolas na inicialização\n  useEffect(() => {\n    fetchEscolas();\n  }, [fetchEscolas]);\n\n  return {\n    // Estado\n    escolas,\n    loading,\n    error,\n    searchTerm,\n    selectedType,\n    \n    // Ações\n    setSearchTerm,\n    setSelectedType,\n    fetchEscolas,\n    updateEscolaInList,\n    addEscolaToList,\n    removeEscolaFromList,\n    saveEscola,\n    deleteEscola,\n    \n    // Utilitários\n    filteredEscolas: filteredEscolas(),\n    getEscolaById,\n    getEscolaByName,\n  };\n}; ","// Lista de modalidades de ensino organizadas por categoria\nexport const MODALIDADES_OPTIONS = [\n  // 1. Educação Infantil\n  'Educação Infantil',\n  'Educação Infantil (Idade 0 a 6 anos)',\n  'Educação Infantil (Pré-escola I e II) – 1 sala multisseriada',\n  'Educação Infantil (Pré-escola I) – 1 sala regular',\n  'Educação Infantil + Ensino Fundamental – multisseriado',\n  'Educação Infantil + Ensino Fundamental – regular e multisseriado',\n  \n  // 2. Educação Infantil + Ensino Fundamental\n  'Educação Infantil + Ensino Fundamental',\n  'Educação Infantil + Ensino Fundamental (Anos Iniciais e Anos Finais)',\n  'Educação Infantil + Ensino Fundamental (Anos Iniciais multisseriado + Anos Finais multisseriado)',\n  'Educação Infantil + Ensino Fundamental (1º ao 9º ano) – Salas multisseriadas',\n  'Educação Infantil + Ensino Fundamental (Pré I + 1º ao 4º ano) – 1 sala multisseriada',\n  'Educação Infantil + Ensino Fundamental com EJA – Multisseriado',\n  \n  // 3. Ensino Fundamental - Anos Iniciais\n  'Ensino Fundamental Anos Iniciais (1º ao 3º)',\n  'Ensino Fundamental Anos Iniciais (1º ao 5º ano) – 1 sala multisseriada',\n  'Ensino Fundamental Anos Iniciais (4º e 5º ano) – 1 sala multisseriada',\n  'Ensino Fundamental Anos Iniciais – EJA (1º ao 5º ano) – multisseriado',\n  \n  // 3. Ensino Fundamental - Anos Finais\n  'Ensino Fundamental Anos Finais (6º ao 9º ano) – 1 sala multisseriada',\n  'Ensino Fundamental Anos Finais – EJA (6º ao 9º ano) – multisseriado',\n  \n  // 3. Ensino Fundamental - Ambos\n  'Ensino Fundamental (Anos Iniciais e Finais) – regular e multisseriado',\n  'Ensino Fundamental – Atendimento temporário em escola não indígena',\n  \n  // 4. Ensino Médio\n  'Ensino Médio (1º ao 3º ano) – regular',\n  'Ensino Médio (1º ao 3º ano) – multisseriado',\n  'Ensino Médio – EJA (1º ao 3º ano) – multisseriado',\n  'Ensino Médio – Não há atendimento'\n];\n\n// Categorias para organização visual\nexport const MODALIDADES_CATEGORIAS = [\n  {\n    id: 'educacao-infantil',\n    titulo: '1. Educação Infantil',\n    indices: [0, 1, 2, 3, 4, 5]\n  },\n  {\n    id: 'educacao-infantil-fundamental',\n    titulo: '2. Educação Infantil + Ensino Fundamental',\n    indices: [6, 7, 8, 9, 10, 11, 12]\n  },\n  {\n    id: 'ensino-fundamental',\n    titulo: '3. Ensino Fundamental',\n    indices: [13, 14, 15, 16, 17, 18, 19, 20]\n  },\n  {\n    id: 'ensino-medio',\n    titulo: '4. Ensino Médio',\n    indices: [21, 22, 23, 24]\n  }\n];\n\n// Função para obter modalidades por categoria\nexport const getModalidadesByCategoria = (categoriaId) => {\n  const categoria = MODALIDADES_CATEGORIAS.find(cat => cat.id === categoriaId);\n  if (!categoria) return [];\n  \n  return categoria.indices.map(index => MODALIDADES_OPTIONS[index]);\n};\n\n// Função para validar se uma modalidade existe na lista\nexport const isValidModalidade = (modalidade) => {\n  return MODALIDADES_OPTIONS.includes(modalidade);\n};\n\n// Função para obter categoria de uma modalidade\nexport const getCategoriaByModalidade = (modalidade) => {\n  const index = MODALIDADES_OPTIONS.indexOf(modalidade);\n  if (index === -1) return null;\n  \n  return MODALIDADES_CATEGORIAS.find(cat => \n    cat.indices.includes(index)\n  );\n}; ","import { useState, useCallback } from 'react';\nimport { MODALIDADES_OPTIONS } from '../utils/modalidadesOptions';\n\nexport const useModalidades = () => {\n  const [selectedModalidades, setSelectedModalidades] = useState([]);\n  const [outroModalidade, setOutroModalidade] = useState('');\n\n  // Função para alternar seleção de modalidade\n  const handleModalidadeChange = useCallback((modalidade) => {\n    setSelectedModalidades(prev => {\n      if (prev.includes(modalidade)) {\n        return prev.filter(m => m !== modalidade);\n      } else {\n        return [...prev, modalidade];\n      }\n    });\n  }, []);\n\n  // Função para gerenciar campo \"Outro (especificar)\"\n  const handleOutroModalidadeChange = useCallback((value) => {\n    setOutroModalidade(value);\n    \n    setSelectedModalidades(prev => {\n      const hasOutro = prev.some(m => m.startsWith('Outro:'));\n      \n      if (value.trim()) {\n        if (hasOutro) {\n          return prev.map(m => m.startsWith('Outro:') ? `Outro: ${value}` : m);\n        } else {\n          return [...prev, `Outro: ${value}`];\n        }\n      } else {\n        return prev.filter(m => !m.startsWith('Outro:'));\n      }\n    });\n  }, []);\n\n  // Função para salvar modalidades no editingLocation\n  const saveModalidades = useCallback(() => {\n    const modalidadesText = selectedModalidades.join('; ');\n    return modalidadesText;\n  }, [selectedModalidades]);\n\n  // Função para carregar modalidades existentes\n  const loadExistingModalidades = useCallback((modalidadesText) => {\n    if (!modalidadesText) {\n      setSelectedModalidades([]);\n      setOutroModalidade('');\n      return;\n    }\n\n    const parts = modalidadesText.split(';').map(part => part.trim());\n    const modalidades = [];\n    let outro = '';\n\n    parts.forEach(part => {\n      if (part.startsWith('Outro:')) {\n        outro = part.replace('Outro:', '').trim();\n        modalidades.push(part);\n      } else if (MODALIDADES_OPTIONS.includes(part)) {\n        modalidades.push(part);\n      } else if (part) {\n        // Se não está na lista padrão, tratar como \"outro\"\n        outro = part;\n        modalidades.push(`Outro: ${part}`);\n      }\n    });\n\n    setSelectedModalidades(modalidades);\n    setOutroModalidade(outro);\n  }, []);\n\n  // Função para limpar modalidades\n  const clearModalidades = useCallback(() => {\n    setSelectedModalidades([]);\n    setOutroModalidade('');\n  }, []);\n\n  // Função para obter preview do texto final\n  const getModalidadesPreview = useCallback(() => {\n    return selectedModalidades.join('; ') || 'Nenhuma modalidade selecionada';\n  }, [selectedModalidades]);\n\n  // Função para verificar se há modalidades selecionadas\n  const hasSelectedModalidades = useCallback(() => {\n    return selectedModalidades.length > 0;\n  }, [selectedModalidades]);\n\n  return {\n    // Estado\n    selectedModalidades,\n    outroModalidade,\n    \n    // Ações\n    handleModalidadeChange,\n    handleOutroModalidadeChange,\n    saveModalidades,\n    loadExistingModalidades,\n    clearModalidades,\n    \n    // Utilitários\n    getModalidadesPreview,\n    hasSelectedModalidades,\n  };\n}; ","// Configuração das abas do painel de administração\nexport const ADMIN_TABS = [\n  { id: 'dados-basicos', label: 'Dados Básicos' },\n  { id: 'povos-linguas', label: 'Povos' },\n  { id: 'modalidades', label: 'Modalidades' },\n  { id: 'infraestrutura', label: 'Infraestrutura' },\n  { id: 'gestao-professores', label: 'Gestores' },\n  { id: 'material-pedagogico', label: 'Material Pedagógico' },\n  { id: 'projetos-parcerias', label: 'Projetos e Parcerias' },\n  { id: 'redes-sociais', label: 'Redes Sociais' },\n  { id: 'video', label: 'Vídeo' },\n  { id: 'historias', label: 'Histórias' },\n  { id: 'historia-professores', label: 'História dos Professores' },\n  \n  { id: 'coordenadas', label: 'Coordenadas' },\n  { id: 'imagens-escola', label: 'Imagens da Escola' },\n  { id: 'imagens-professores', label: 'Imagens dos Professores' },\n  { id: 'documentos', label: 'Documentos' }\n];\n\n// Configurações de UI\nexport const UI_CONFIG = {\n  MOBILE_BREAKPOINT: 768,\n  SIDEBAR_WIDTH: 'w-64',\n  SIDEBAR_WIDTH_MOBILE: 'max-w-[80vw]',\n  SIDEBAR_TOP_OFFSET: 72,\n};\n\n// Estados de salvamento\nexport const SAVE_STATES = {\n  IDLE: 'idle',\n  SAVING: 'saving',\n  SUCCESS: 'success',\n  ERROR: 'error',\n};\n\n// Configurações de formulário\nexport const FORM_CONFIG = {\n  DEFAULT_ACTIVE_TAB: 'dados-basicos',\n  VALIDATION_RULES: {\n    REQUIRED_FIELDS: ['Escola'],\n  },\n};\n\n// Configurações de busca\nexport const SEARCH_CONFIG = {\n  DEBOUNCE_DELAY: 300,\n  MIN_SEARCH_LENGTH: 2,\n}; ","import React from 'react';\nimport { Menu, Search, X } from 'lucide-react';\nimport { useEscolas } from './hooks/useEscolas';\nimport { UI_CONFIG } from './constants/adminConstants';\n\nconst AdminSidebar = ({ \n  isMobile, \n  sidebarOpen, \n  setSidebarOpen, \n  editingLocation, \n  onEscolaSelect \n}) => {\n  const { \n    searchTerm, \n    setSearchTerm, \n    filteredEscolas \n  } = useEscolas();\n\n  return (\n    <>\n      {/* Overlay para mobile */}\n      {isMobile && sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-30\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Botão de menu para mobile */}\n      {isMobile && !sidebarOpen && (\n        <button\n          className=\"fixed top-4 left-4 z-50 bg-gray-900/90 backdrop-blur-sm rounded-full shadow-lg p-3 border border-gray-800/50 hover:bg-gray-800/90 transition-all duration-200\"\n          onClick={() => setSidebarOpen(true)}\n          aria-label=\"Abrir menu lateral\"\n        >\n          <Menu className=\"w-6 h-6 text-gray-200\" />\n        </button>\n      )}\n\n      {/* Menu lateral */}\n      {(!isMobile || sidebarOpen) && (\n        <aside\n          className={`bg-gray-900/95 backdrop-blur-sm border-r border-gray-800/50 rounded-r-2xl shadow-2xl p-6 overflow-y-auto h-screen sticky top-0 z-40 transition-all duration-300 ${\n            isMobile ? `fixed left-0 top-0 w-80 max-w-[85vw] shadow-2xl` : 'w-80'\n          }`}\n          style={{\n            transform: isMobile && !sidebarOpen ? 'translateX(-100%)' : 'translateX(0)',\n            top: isMobile ? 0 : UI_CONFIG.SIDEBAR_TOP_OFFSET,\n          }}\n        >\n          {/* Header do sidebar */}\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h2 className=\"text-2xl font-bold tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300 uppercase\">\n                Escolas\n              </h2>\n              <p className=\"text-gray-400 text-sm mt-1\">\n                {filteredEscolas.length} escola{filteredEscolas.length !== 1 ? 's' : ''}\n              </p>\n            </div>\n            \n            {/* Botão de fechar para mobile */}\n            {isMobile && (\n              <button\n                className=\"text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg p-2 transition-colors\"\n                onClick={() => setSidebarOpen(false)}\n                aria-label=\"Fechar menu lateral\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n\n          {/* Busca no menu lateral */}\n          <div className=\"mb-6\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Buscar escola...\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-700/50 rounded-xl text-sm bg-gray-800/50 text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-200 backdrop-blur-sm\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n          </div>\n\n          {/* Lista de escolas */}\n          <div className=\"space-y-2\">\n            {filteredEscolas.length > 0 ? (\n              filteredEscolas.map(escola => (\n                <button\n                  key={escola.id}\n                  className={`w-full text-left p-4 rounded-xl hover:bg-gray-800/50 transition-all duration-200 border border-transparent hover:border-gray-700/50 ${\n                    editingLocation?.id === escola.id \n                      ? 'bg-gradient-to-r from-green-600/20 to-green-700/20 border-green-500/50 text-white shadow-lg' \n                      : 'text-gray-200 hover:text-white'\n                  }`}\n                  onClick={() => {\n                    onEscolaSelect(escola);\n                    if (isMobile) setSidebarOpen(false);\n                  }}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className={`font-medium truncate ${\n                        editingLocation?.id === escola.id ? 'text-green-300' : 'text-gray-200'\n                      }`}>\n                        {escola.Escola}\n                      </h3>\n                      {escola['Município'] && (\n                        <p className=\"text-sm text-gray-400 truncate mt-1\">\n                          {escola['Município']}\n                        </p>\n                      )}\n                    </div>\n                    {editingLocation?.id === escola.id && (\n                      <div className=\"ml-2 flex-shrink-0\">\n                        <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                      </div>\n                    )}\n                  </div>\n                </button>\n              ))\n            ) : searchTerm ? (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Search className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <p className=\"text-gray-400 text-sm\">\n                  Nenhuma escola encontrada\n                </p>\n                <p className=\"text-gray-500 text-xs mt-1\">\n                  Tente ajustar sua busca\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                  </svg>\n                </div>\n                <p className=\"text-gray-400 text-sm\">\n                  Nenhuma escola disponível\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Footer do sidebar */}\n          <div className=\"mt-auto pt-6 border-t border-gray-800/50\">\n            <div className=\"text-center\">\n              <p className=\"text-gray-500 text-xs\">\n                Opin - desenvolvido por <a href=\"https://hericmr.github.io/me/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-gray-400\">Heric mr</a>\n              </p>\n            </div>\n          </div>\n        </aside>\n      )}\n    </>\n  );\n};\n\nexport default AdminSidebar; ","\nconst AdminToolbar = ({ \n  searchTerm, \n  setSearchTerm, \n  selectedType, \n  setSelectedType, \n  onNovaEscola \n}) => {\n  return null;\n};\n\nexport default AdminToolbar; ","import React, { useState, useRef, useEffect } from 'react';\nimport { X, Eye, EyeOff, AlertCircle, CheckCircle } from 'lucide-react';\nimport { AuthService } from '../../services/authService';\n\nconst LoginModal = ({ isOpen, onClose, onSuccess }) => {\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [attempts, setAttempts] = useState(0);\n  const [isLocked, setIsLocked] = useState(false);\n  const [lockTime, setLockTime] = useState(0);\n  \n  const passwordRef = useRef(null);\n\n  // Limpar formulário quando modal abre/fecha\n  useEffect(() => {\n    if (isOpen) {\n      setPassword('');\n      setError('');\n      setSuccess('');\n      setShowPassword(false);\n      \n      // Focar no campo de senha\n      setTimeout(() => {\n        if (passwordRef.current) {\n          passwordRef.current.focus();\n        }\n      }, 100);\n    }\n  }, [isOpen]);\n\n  // Verificar se está bloqueado\n  useEffect(() => {\n    if (isLocked && lockTime > 0) {\n      const timer = setTimeout(() => {\n        setLockTime(prev => prev - 1);\n      }, 1000);\n      \n      if (lockTime === 1) {\n        setIsLocked(false);\n        setLockTime(0);\n        setAttempts(0);\n      }\n      \n      return () => clearTimeout(timer);\n    }\n  }, [isLocked, lockTime]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (isLocked) return;\n    \n    if (!password.trim()) {\n      setError('Por favor, digite a senha');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const result = await AuthService.authenticate(password);\n      \n      if (result.success) {\n        AuthService.setToken(result.token);\n        setSuccess('Login realizado com sucesso!');\n        \n        setTimeout(() => {\n          onSuccess(result.user);\n          onClose();\n        }, 1000);\n      } else {\n        const newAttempts = attempts + 1;\n        setAttempts(newAttempts);\n        \n        if (newAttempts >= 3) {\n          setIsLocked(true);\n          setLockTime(30);\n          setError('Muitas tentativas. Aguarde 30 segundos.');\n        } else {\n          setError(result.error || 'Erro na autenticação');\n        }\n      }\n    } catch (err) {\n      console.error('Erro no login:', err);\n      setError('Erro interno. Tente novamente.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (loading) return;\n    \n    setPassword('');\n    setError('');\n    setSuccess('');\n    setShowPassword(false);\n    onClose();\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      handleClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\"\n      onClick={(e) => e.target === e.currentTarget && handleClose()}\n      onKeyDown={handleKeyDown}\n      tabIndex={-1}\n    >\n      <div className=\"bg-gray-900 rounded-lg shadow-2xl border border-gray-800 max-w-sm w-full\">\n        {/* Header minimalista */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n          <h3 className=\"text-lg font-medium text-gray-100\">\n            Acesso Administrativo\n          </h3>\n          <button\n            onClick={handleClose}\n            className=\"p-1 hover:bg-gray-800 rounded transition-colors\"\n            disabled={loading}\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-4\">\n          <div className=\"space-y-4\">\n            {/* Campo de senha */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                Senha\n              </label>\n              <div className=\"relative\">\n                <input\n                  ref={passwordRef}\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-3 py-2 pr-10 bg-gray-800 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors\"\n                  placeholder=\"Digite sua senha...\"\n                  disabled={loading || isLocked}\n                  autoComplete=\"current-password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-700 rounded transition-colors\"\n                  disabled={loading || isLocked}\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"w-4 h-4 text-gray-400\" />\n                  ) : (\n                    <Eye className=\"w-4 h-4 text-gray-400\" />\n                  )}\n                </button>\n              </div>\n              \n              {/* Indicador visual de caracteres */}\n              {password && (\n                <div className=\"mt-2 flex items-center gap-1\">\n                  <span className=\"text-xs text-gray-500\">Caracteres:</span>\n                  <div className=\"flex gap-1\">\n                    {password.split('').map((char, index) => (\n                      <span key={index} className=\"text-lg font-mono text-gray-300\">\n                        {showPassword ? char : '•'}\n                      </span>\n                    ))}\n                  </div>\n                  <span className=\"text-xs text-gray-400 ml-2\">\n                    ({password.length})\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Contador de tentativas */}\n            {attempts > 0 && attempts < 3 && (\n              <div className=\"text-sm text-orange-400\">\n                Tentativas: {attempts}/3\n              </div>\n            )}\n\n            {/* Tempo de bloqueio */}\n            {isLocked && (\n              <div className=\"text-sm text-red-400\">\n                Bloqueado por {lockTime} segundos\n              </div>\n            )}\n\n            {/* Mensagens */}\n            {error && (\n              <div className=\"flex items-center gap-2 p-2 bg-red-900/30 border border-red-700 rounded text-sm\">\n                <AlertCircle className=\"w-4 h-4 text-red-400 flex-shrink-0\" />\n                <span className=\"text-red-300\">{error}</span>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"flex items-center gap-2 p-2 bg-green-900/30 border border-green-700 rounded text-sm\">\n                <CheckCircle className=\"w-4 h-4 text-green-400 flex-shrink-0\" />\n                <span className=\"text-green-300\">{success}</span>\n              </div>\n            )}\n\n            {/* Botões */}\n            <div className=\"flex gap-2 pt-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"flex-1 px-3 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition-colors text-sm\"\n                disabled={loading || isLocked}\n              >\n                Cancelar\n              </button>\n              <button\n                type=\"submit\"\n                className=\"flex-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm flex items-center justify-center gap-2\"\n                disabled={loading || isLocked || !password.trim()}\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    Entrando...\n                  </>\n                ) : (\n                  'Entrar'\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginModal;\n","import React from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport LoginModal from './LoginModal';\n\nconst ProtectedRoute = ({ children }) => {\n  const { isAuthenticated, loading } = useAuth();\n  const [showLoginModal, setShowLoginModal] = React.useState(false);\n\n  // Mostrar loading enquanto verifica autenticação\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Verificando autenticação...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Se não estiver autenticado, mostrar modal de login\n  if (!isAuthenticated) {\n    return (\n      <>\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n          <div className=\"text-center max-w-md mx-auto p-6\">\n            <div className=\"mb-6\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                Acesso Restrito\n              </h1>\n              <p className=\"text-gray-600 mb-6\">\n                Esta área é restrita a administradores autorizados.\n                <br />\n                Faça login para continuar.\n              </p>\n            </div>\n            \n            <button\n              onClick={() => setShowLoginModal(true)}\n              className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\"\n            >\n              Fazer Login\n            </button>\n          </div>\n        </div>\n\n        <LoginModal\n          isOpen={showLoginModal}\n          onClose={() => setShowLoginModal(false)}\n          onSuccess={() => {\n            setShowLoginModal(false);\n            // O componente será re-renderizado automaticamente\n          }}\n        />\n      </>\n    );\n  }\n\n  // Se estiver autenticado, mostrar o conteúdo protegido\n  return children;\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { useModalidades } from '../hooks/useModalidades';\nimport { MODALIDADES_OPTIONS, MODALIDADES_CATEGORIAS } from '../utils/modalidadesOptions';\n\nconst ModalidadesTab = ({ \n  editingLocation, \n  setEditingLocation \n}) => {\n  const {\n    selectedModalidades,\n    outroModalidade,\n    handleModalidadeChange,\n    handleOutroModalidadeChange,\n    saveModalidades,\n    getModalidadesPreview,\n    hasSelectedModalidades,\n  } = useModalidades();\n\n  // Função para salvar modalidades no editingLocation\n  const handleSaveModalidades = () => {\n    const modalidadesText = saveModalidades();\n    setEditingLocation(prev => ({\n      ...prev,\n      'Modalidade de Ensino/turnos de funcionamento': modalidadesText\n    }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Modalidades de Ensino */}\n      <div className=\"md:col-span-2\">\n        <label className=\"block text-sm font-medium text-gray-200 mb-4 text-base\">\n          Modalidades de Ensino\n        </label>\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4 max-h-96 overflow-y-auto\">\n          <div className=\"space-y-4\">\n            {MODALIDADES_CATEGORIAS.map((categoria) => (\n              <div key={categoria.id}>\n                <h4 className=\"text-sm font-semibold text-green-400 mb-2 border-b border-gray-600 pb-1\">\n                  {categoria.titulo}\n                </h4>\n                <div className=\"space-y-2 ml-2\">\n                  {categoria.indices.map((index) => {\n                    const modalidade = MODALIDADES_OPTIONS[index];\n                    return (\n                      <label key={index} className=\"flex items-start space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded transition-colors\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"mt-1 h-4 w-4 text-green-600 bg-gray-700 border-gray-600 rounded focus:ring-green-500 focus:ring-2\"\n                          checked={selectedModalidades.includes(modalidade)}\n                          onChange={() => handleModalidadeChange(modalidade)}\n                        />\n                        <span className=\"text-sm text-gray-200 leading-relaxed\">{modalidade}</span>\n                      </label>\n                    );\n                  })}\n                </div>\n              </div>\n            ))}\n            \n            {/* Opção \"Outro\" */}\n            <div className=\"border-t border-gray-600 pt-3 mt-3\">\n              <label className=\"flex items-start space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded transition-colors\">\n                <input\n                  type=\"checkbox\"\n                  className=\"mt-1 h-4 w-4 text-green-600 bg-gray-700 border-gray-600 rounded focus:ring-green-500 focus:ring-2\"\n                  checked={selectedModalidades.some(m => m.startsWith('Outro:')) || outroModalidade.trim() !== ''}\n                  onChange={(e) => {\n                    if (e.target.checked && !outroModalidade.trim()) {\n                      // Se está marcando o checkbox mas não há valor, adicionar um valor padrão\n                      handleOutroModalidadeChange('Modalidade específica');\n                    } else if (!e.target.checked) {\n                      // Se está desmarcando o checkbox, limpar o valor\n                      handleOutroModalidadeChange('');\n                    }\n                  }}\n                />\n                <div className=\"flex-1\">\n                  <span className=\"text-sm text-gray-200\">Outro (especificar):</span>\n                  <input\n                    type=\"text\"\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-600 rounded text-sm bg-gray-700 text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    placeholder=\"Digite a modalidade específica...\"\n                    value={outroModalidade}\n                    onChange={(e) => handleOutroModalidadeChange(e.target.value)}\n                  />\n                </div>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Número de Alunos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">Número de Alunos</label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation['Numero de alunos'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Numero de alunos': e.target.value })}\n        />\n      </div>\n\n      {/* Turnos de Funcionamento */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">Turnos de Funcionamento</label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation.turnos_funcionamento || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, turnos_funcionamento: e.target.value })}\n          placeholder=\"Ex: Diurno, Noturno, Vespertino, etc.\"\n        />\n      </div>\n\n      {/* Botão para salvar modalidades */}\n      <div className=\"md:col-span-2\">\n        <button\n          type=\"button\"\n          onClick={handleSaveModalidades}\n          className=\"px-4 py-2 bg-green-700 text-white rounded-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-400 transition-colors\"\n        >\n          Salvar Modalidades Selecionadas\n        </button>\n      </div>\n\n      {/* Preview do texto final */}\n      {hasSelectedModalidades() && (\n        <div className=\"md:col-span-2\">\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Preview do Texto Final\n          </label>\n          <div className=\"bg-gray-800 border border-gray-700 rounded px-3 py-2 text-gray-200 text-sm min-h-[60px]\">\n            {getModalidadesPreview()}\n          </div>\n        </div>\n      )}\n\n\n    </div>\n  );\n};\n\nexport default ModalidadesTab; ","import React from 'react';\n\nconst DadosBasicosTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-8\">\n      {/* Seção: Informações Principais */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n          </svg>\n          Informações Principais\n        </h3>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Nome da Escola */}\n          <div className=\"lg:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Nome da Escola *\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.Escola || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, Escola: e.target.value })}\n              placeholder=\"Digite o nome da escola\"\n            />\n          </div>\n\n          {/* Município */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Município\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Município'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Município': e.target.value })}\n              placeholder=\"Digite o município\"\n            />\n          </div>\n\n          {/* Ano de Criação */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Ano de Criação da Escola\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Ano de criação da escola'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Ano de criação da escola': e.target.value })}\n              placeholder=\"Ex: 1995\"\n            />\n          </div>\n\n          {/* Terra Indígena */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Terra Indígena (TI)\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Terra Indigena (TI)'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Terra Indigena (TI)': e.target.value })}\n              placeholder=\"Digite o nome da Terra Indígena\"\n            />\n          </div>\n\n          {/* Diretoria de Ensino */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Diretoria de Ensino\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Diretoria de Ensino'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Diretoria de Ensino': e.target.value })}\n              placeholder=\"Digite a diretoria de ensino\"\n            />\n          </div>\n\n          {/* Parcerias com o Município */}\n          <div className=\"lg:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Parcerias com o Município\n            </label>\n            <textarea\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 h-32 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm resize-none\"\n              value={editingLocation['Parcerias com o município'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Parcerias com o município': e.target.value })}\n              placeholder=\"Descreva as parcerias com o município...\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Seção: Endereço Completo */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          Endereço Completo\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {/* Logradouro */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Logradouro\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.logradouro || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, logradouro: e.target.value })}\n              placeholder=\"Rua, Avenida, etc.\"\n            />\n          </div>\n\n          {/* Número */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Número\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.numero || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, numero: e.target.value })}\n              placeholder=\"Número\"\n            />\n          </div>\n\n          {/* Complemento */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Complemento\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.complemento || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, complemento: e.target.value })}\n              placeholder=\"Apto, Casa, etc.\"\n            />\n          </div>\n\n          {/* Bairro */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Bairro\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.bairro || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, bairro: e.target.value })}\n              placeholder=\"Nome do bairro\"\n            />\n          </div>\n\n          {/* CEP */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              CEP\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.cep || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, cep: e.target.value })}\n              placeholder=\"00000-000\"\n            />\n          </div>\n\n          {/* Estado */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Estado\n            </label>\n            <select\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.estado || 'SP'}\n              onChange={e => setEditingLocation({ ...editingLocation, estado: e.target.value })}\n            >\n              <option value=\"SP\">São Paulo</option>\n              <option value=\"RJ\">Rio de Janeiro</option>\n              <option value=\"MG\">Minas Gerais</option>\n              <option value=\"ES\">Espírito Santo</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Seção: Endereço Antigo (para compatibilidade) */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n          </svg>\n          Endereço (Campo Legado)\n        </h3>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n            Endereço Completo\n          </label>\n          <textarea\n            className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 h-24 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm resize-none\"\n            value={editingLocation['Endereço'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Endereço': e.target.value })}\n            placeholder=\"Endereço completo da escola...\"\n          />\n          <p className=\"text-gray-500 text-xs mt-2\">\n            Este campo é mantido para compatibilidade com dados existentes\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DadosBasicosTab; ","import React from 'react';\n\nconst PovosLinguasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Povos Indígenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Povos Indígenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Povos indigenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Povos indigenas': e.target.value })}\n          placeholder=\"Descreva os povos indígenas atendidos pela escola...\"\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Ex: Guarani, Kaingang, Terena, etc.\n        </p>\n      </div>\n\n      {/* Línguas Faladas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Línguas Faladas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Linguas faladas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Linguas faladas': e.target.value })}\n          placeholder=\"Descreva as línguas faladas na comunidade escolar...\"\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Ex: Português, Guarani, Kaingang, etc.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default PovosLinguasTab; ","import React from 'react';\n\nconst InfraestruturaTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Acesso à Água */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Acesso à Água\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Acesso à água'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Acesso à água': e.target.value })}\n          placeholder=\"Descreva como é o acesso à água na escola...\"\n        />\n      </div>\n\n      {/* Coleta de Lixo */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Coleta de Lixo\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Tem coleta de lixo?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Tem coleta de lixo?': e.target.value })}\n          placeholder=\"Descreva como é feita a coleta de lixo...\"\n        />\n      </div>\n\n      {/* Acesso à Internet */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Acesso à Internet\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Acesso à internet'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Acesso à internet': e.target.value })}\n          placeholder=\"Descreva o acesso à internet na escola...\"\n        />\n      </div>\n\n      {/* Equipamentos Tecnológicos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Equipamentos Tecnológicos\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Equipamentos Tecs'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Equipamentos Tecs': e.target.value })}\n          placeholder=\"Descreva os equipamentos tecnológicos disponíveis...\"\n        />\n      </div>\n\n      {/* Modo de Acesso à Escola */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Modo de Acesso à Escola\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Modo de acesso à escola'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Modo de acesso à escola': e.target.value })}\n          placeholder=\"Descreva como é o acesso à escola...\"\n        />\n      </div>\n\n      {/* Cozinha */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Cozinha\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.cozinha || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, cozinha: e.target.value })}\n          placeholder=\"Descreva a estrutura da cozinha...\"\n        />\n      </div>\n\n      {/* Merenda Escolar */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Escolar\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.merenda_escolar || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, merenda_escolar: e.target.value })}\n          placeholder=\"Descreva como é fornecida a merenda escolar...\"\n        />\n      </div>\n\n      {/* Merenda Diferenciada */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Diferenciada\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.diferenciada || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, diferenciada: e.target.value })}\n          placeholder=\"Descreva se há merenda diferenciada (cultural, religiosa, etc.)...\"\n        />\n      </div>\n\n      {/* Merenda Diferenciada (Detalhes) */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Diferenciada (Detalhes)\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.merenda_diferenciada || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, merenda_diferenciada: e.target.value })}\n          placeholder=\"Descreva detalhes sobre a merenda diferenciada...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default InfraestruturaTab; ","import React from 'react';\n\nconst GestaoProfessoresTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Gestão/Nome */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Gestão/Nome\n        </label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation['Gestão/Nome'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Gestão/Nome': e.target.value })}\n          placeholder=\"Digite o nome do gestor/diretor\"\n        />\n      </div>\n\n      {/* Professores Indígenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores Indígenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Quantidade de professores indígenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Quantidade de professores indígenas': e.target.value })}\n          placeholder=\"Descreva os professores indígenas...\"\n        />\n      </div>\n\n      {/* Professores Não Indígenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores Não Indígenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Quantidade de professores não indígenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Quantidade de professores não indígenas': e.target.value })}\n          placeholder=\"Descreva os professores não indígenas...\"\n        />\n      </div>\n\n      {/* Professores Falam Língua Indígena? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores Falam Língua Indígena?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Professores falam a língua indígena?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Professores falam a língua indígena?': e.target.value })}\n          placeholder=\"Descreva se os professores falam a língua indígena...\"\n        />\n      </div>\n\n      {/* Formação dos Professores */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Formação dos Professores\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Formação dos professores'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Formação dos professores': e.target.value })}\n          placeholder=\"Descreva a formação dos professores...\"\n        />\n      </div>\n\n      {/* Formação Continuada */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Formação Continuada\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Formação continuada oferecida'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Formação continuada oferecida': e.target.value })}\n          placeholder=\"Descreva a formação continuada oferecida aos professores...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default GestaoProfessoresTab; ","import React from 'react';\n\nconst MaterialPedagogicoTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* A escola possui PPP próprio? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          A escola possui PPP próprio?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['A escola possui PPP próprio?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'A escola possui PPP próprio?': e.target.value })}\n          placeholder=\"Descreva se a escola possui PPP próprio...\"\n        />\n      </div>\n\n      {/* PPP elaborado com a comunidade? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          PPP elaborado com a comunidade?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['PPP elaborado com a comunidade?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'PPP elaborado com a comunidade?': e.target.value })}\n          placeholder=\"Descreva se o PPP foi elaborado com a comunidade...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MaterialPedagogicoTab; ","import React from 'react';\n\nconst ProjetosParceriasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Projetos em Andamento */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Projetos em Andamento\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Projetos em andamento'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Projetos em andamento': e.target.value })}\n          placeholder=\"Descreva os projetos em andamento na escola...\"\n        />\n      </div>\n\n      {/* Parcerias com Universidades */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Parcerias com Universidades\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Parcerias com universidades?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Parcerias com universidades?': e.target.value })}\n          placeholder=\"Descreva as parcerias com universidades...\"\n        />\n      </div>\n\n      {/* Ações com ONGs ou Coletivos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Ações com ONGs ou Coletivos\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Ações com ONGs ou coletivos?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Ações com ONGs ou coletivos?': e.target.value })}\n          placeholder=\"Descreva as ações com ONGs ou coletivos...\"\n        />\n      </div>\n\n      {/* Desejos da Comunidade */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Desejos da Comunidade\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Desejos da comunidade para a escola'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Desejos da comunidade para a escola': e.target.value })}\n          placeholder=\"Descreva os desejos da comunidade para a escola...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ProjetosParceriasTab; ","import React from 'react';\n\nconst RedesSociaisTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Escola utiliza redes sociais? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Escola utiliza redes sociais?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Escola utiliza redes sociais?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Escola utiliza redes sociais?': e.target.value })}\n          placeholder=\"Descreva se a escola utiliza redes sociais...\"\n        />\n      </div>\n\n      {/* Links das Redes Sociais */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Links das Redes Sociais\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Links das redes sociais'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Links das redes sociais': e.target.value })}\n          placeholder=\"Cole aqui os links das redes sociais da escola (Facebook, Instagram, YouTube, etc.)...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default RedesSociaisTab; ","import React, { useState, useEffect, useCallback } from 'react';\nimport { getVideosEscola, createVideoEscola, updateVideoEscola, deleteVideoEscola } from '../../services/videoService';\nimport { Plus, Edit3, Trash2, Save } from 'lucide-react';\n\nconst VideoManager = ({ escolaId }) => {\n  const [videos, setVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editingVideo, setEditingVideo] = useState(null);\n  const [formData, setFormData] = useState({\n    titulo: '',\n    video_url: '',\n    descricao: '',\n    plataforma: 'youtube',\n    categoria: 'geral',\n    ativo: true\n  });\n\n  // Carregar vídeos\n  const carregarVideos = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getVideosEscola(escolaId);\n      setVideos(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    if (escolaId) carregarVideos();\n  }, [escolaId, carregarVideos]);\n\n  // Reset form\n  const resetForm = () => {\n    setFormData({\n      titulo: '',\n      video_url: '',\n      descricao: '',\n      plataforma: 'youtube',\n      categoria: 'geral',\n      ativo: true\n    });\n    setEditingVideo(null);\n    setShowForm(false);\n  };\n\n  // Handle submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!formData.titulo.trim() || !formData.video_url.trim()) {\n      setError('Título e URL do vídeo são obrigatórios.');\n      return;\n    }\n    const payload = {\n      escola_id: Number(escolaId),\n      ...formData,\n      ativo: Boolean(formData.ativo)\n    };\n    try {\n      setError('');\n      setSuccess('');\n      if (editingVideo) {\n        await updateVideoEscola(editingVideo.id, payload);\n        setSuccess('Vídeo atualizado com sucesso!');\n      } else {\n        await createVideoEscola(payload);\n        setSuccess('Vídeo criado com sucesso!');\n      }\n      resetForm();\n      carregarVideos();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Handle edit\n  const handleEdit = (video) => {\n    setEditingVideo(video);\n    setFormData({\n      titulo: video.titulo || '',\n      video_url: video.video_url || '',\n      descricao: video.descricao || '',\n      plataforma: video.plataforma || 'youtube',\n      categoria: video.categoria || 'geral',\n      ativo: video.ativo\n    });\n    setShowForm(true);\n  };\n\n  // Handle delete\n  const handleDelete = async (id) => {\n    if (!window.confirm('Tem certeza que deseja excluir este vídeo?')) return;\n    try {\n      await deleteVideoEscola(id);\n      setSuccess('Vídeo excluído com sucesso!');\n      carregarVideos();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"p-6 text-center\">Carregando vídeos...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Vídeos da Escola</h3>\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Novo Vídeo\n        </button>\n      </div>\n\n      {error && <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">{error}</div>}\n      {success && <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg text-green-600\">{success}</div>}\n\n      {/* Lista de vídeos */}\n      <div className=\"space-y-4\">\n        {videos.length === 0 ? (\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n            <p className=\"text-gray-500\">Nenhum vídeo cadastrado.</p>\n            <button\n              onClick={() => setShowForm(true)}\n              className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Adicionar vídeo\n            </button>\n          </div>\n        ) : (\n          videos.map((video) => (\n            <div key={video.id} className={`p-6 bg-white rounded-lg border ${!video.ativo ? 'opacity-60' : ''}`}>\n              <div className=\"flex items-start justify-between mb-2\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h4 className=\"font-medium text-gray-900\">{video.titulo}</h4>\n                    {!video.ativo && (\n                      <span className=\"flex items-center gap-1 text-orange-600 text-sm\">\n                        Inativo\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-gray-700 text-sm mb-2\">{video.descricao}</p>\n                  <div className=\"mb-2\">\n                    <iframe\n                      src={video.video_url}\n                      title={video.titulo}\n                      className=\"w-full aspect-video rounded-lg border\"\n                      allowFullScreen\n                    />\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    Plataforma: {video.plataforma} | Categoria: {video.categoria}\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-2 ml-4\">\n                  <button\n                    onClick={() => handleEdit(video)}\n                    className=\"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg\"\n                    title=\"Editar\"\n                  >\n                    <Edit3 className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(video.id)}\n                    className=\"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg\"\n                    title=\"Excluir\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Formulário de adicionar/editar vídeo */}\n      {showForm && (\n        <div className=\"p-6 bg-gray-50 rounded-lg border\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"text-lg font-medium text-gray-900\">\n              {editingVideo ? 'Editar Vídeo' : 'Novo Vídeo'}\n            </h4>\n            <button\n              onClick={resetForm}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <span className=\"sr-only\">Fechar</span>\n              ×\n            </button>\n          </div>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Título *</label>\n                <input\n                  type=\"text\"\n                  value={formData.titulo}\n                  onChange={e => setFormData({ ...formData, titulo: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  placeholder=\"Título do vídeo\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">URL do Vídeo *</label>\n                <input\n                  type=\"url\"\n                  value={formData.video_url}\n                  onChange={e => setFormData({ ...formData, video_url: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  placeholder=\"https://www.youtube.com/embed/...\"\n                  required\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descrição</label>\n              <textarea\n                value={formData.descricao}\n                onChange={e => setFormData({ ...formData, descricao: e.target.value })}\n                rows={3}\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                placeholder=\"Descrição do vídeo (opcional)\"\n              />\n            </div>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Plataforma</label>\n                <input\n                  type=\"text\"\n                  value={formData.plataforma}\n                  onChange={e => setFormData({ ...formData, plataforma: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2\"\n                  placeholder=\"youtube, vimeo...\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Categoria</label>\n                <input\n                  type=\"text\"\n                  value={formData.categoria}\n                  onChange={e => setFormData({ ...formData, categoria: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2\"\n                  placeholder=\"geral, institucional...\"\n                />\n              </div>\n              <div className=\"flex items-center gap-2 mt-6\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.ativo}\n                  onChange={e => setFormData({ ...formData, ativo: e.target.checked })}\n                  className=\"rounded border-gray-300 text-green-600 focus:ring-green-500\"\n                />\n                <span className=\"text-sm text-gray-700\">Ativo</span>\n              </div>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                type=\"submit\"\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                <Save className=\"w-5 h-5\" />\n                {editingVideo ? 'Atualizar' : 'Criar'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={resetForm}\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VideoManager; ","import { supabase } from '../supabaseClient';\n\n// Buscar todos os vídeos de uma escola\nexport async function getVideosEscola(escolaId) {\n  const { data, error } = await supabase\n    .from('titulos_videos')\n    .select('*')\n    .eq('escola_id', escolaId)\n    .eq('ativo', true)\n    .order('created_at', { ascending: false });\n  if (error) throw error;\n  return data;\n}\n\n// Criar novo vídeo\nexport async function createVideoEscola(video) {\n  const { data, error } = await supabase\n    .from('titulos_videos')\n    .insert([video])\n    .select();\n  if (error) throw error;\n  return data?.[0];\n}\n\n// Atualizar vídeo existente\nexport async function updateVideoEscola(id, updates) {\n  const { data, error } = await supabase\n    .from('titulos_videos')\n    .update(updates)\n    .eq('id', id)\n    .select();\n  if (error) throw error;\n  return data?.[0];\n}\n\n// Remover vídeo\nexport async function deleteVideoEscola(id) {\n  const { error } = await supabase\n    .from('titulos_videos')\n    .delete()\n    .eq('id', id);\n  if (error) throw error;\n  return true;\n} ","import React from 'react';\nimport VideoManager from '../VideoManager';\n\nconst VideoTab = ({ editingLocation }) => {\n  // Extrair o ID da escola do editingLocation\n  const escolaId = editingLocation?.id || editingLocation?.escola_id;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Informações sobre Vídeos */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Gerenciamento de Vídeos\n        </h3>\n        <p className=\"text-gray-300 text-sm mb-4\">\n          Aqui você pode adicionar, editar e gerenciar vídeos relacionados à escola. \n          Os vídeos podem ser do YouTube, Vimeo ou outras plataformas.\n        </p>\n      </div>\n\n      {/* VideoManager Component */}\n      {escolaId ? (\n        <div className=\"bg-white rounded-lg shadow-sm\">\n          <VideoManager escolaId={escolaId} />\n        </div>\n      ) : (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6 text-center\">\n          <p className=\"text-gray-300\">\n            Selecione uma escola para gerenciar os vídeos.\n          </p>\n        </div>\n      )}\n\n      {/* Instruções de Uso */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Como Adicionar Vídeos\n        </h3>\n        \n        <div className=\"space-y-3 text-sm text-gray-300\">\n          <div>\n            <strong className=\"text-amber-400\">YouTube:</strong>\n            <p>Use o formato: https://www.youtube.com/embed/VIDEO_ID</p>\n            <p className=\"text-xs text-gray-400\">Exemplo: https://www.youtube.com/embed/dQw4w9WgXcQ</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Vimeo:</strong>\n            <p>Use o formato: https://player.vimeo.com/video/VIDEO_ID</p>\n            <p className=\"text-xs text-gray-400\">Exemplo: https://player.vimeo.com/video/123456789</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Outras plataformas:</strong>\n            <p>Use o URL de embed fornecido pela plataforma</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoTab; ","import React, { useRef, useCallback } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport './QuillEditor.css';\nimport { uploadImage } from '../../services/uploadService';\n\nconst QuillEditor = ({ value, onChange, placeholder, label, style = {} }) => {\n  const quillRef = useRef(null);\n  const [quillInstance, setQuillInstance] = React.useState(null);\n\n  // Handler customizado para upload de imagens\n  const imageHandler = useCallback(async () => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n\n    input.onchange = async () => {\n      const file = input.files[0];\n      if (file && quillInstance) {\n        try {\n          // Mostrar loading\n          const range = quillInstance.getSelection();\n          \n          // Inserir placeholder de loading\n          quillInstance.insertEmbed(range.index, 'image', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');\n          \n          // Fazer upload da imagem\n          const imageUrl = await uploadImage(file);\n          \n          // Substituir placeholder pela imagem real\n          quillInstance.deleteText(range.index, 1);\n          quillInstance.insertEmbed(range.index, 'image', imageUrl);\n          \n          // Mover cursor para depois da imagem\n          quillInstance.setSelection(range.index + 1);\n        } catch (error) {\n          console.error('Erro ao fazer upload da imagem:', error);\n          alert('Erro ao fazer upload da imagem. Tente novamente.');\n        }\n      }\n    };\n  }, [quillInstance]);\n\n  // Configuração dos módulos do Quill\n  const modules = React.useMemo(() => ({\n    toolbar: {\n      container: [\n        [{ 'header': [1, 2, 3, false] }],\n        ['bold', 'italic', 'underline', 'strike'],\n        [{ 'color': [] }, { 'background': [] }],\n        [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n        [{ 'align': [] }],\n        ['link'],\n        ['image'],\n        ['clean']\n      ],\n      handlers: {\n        image: imageHandler\n      }\n    },\n  }), [imageHandler]);\n\n  // Configuração dos formatos permitidos\n  const formats = [\n    'header',\n    'bold', 'italic', 'underline', 'strike',\n    'color', 'background',\n    'list', 'bullet',\n    'align',\n    'link', 'image'\n  ];\n\n  // Callback quando o editor é montado\n  const handleEditorChange = useCallback((content, delta, source, editor) => {\n    if (onChange) {\n      onChange(content, delta, source, editor);\n    }\n  }, [onChange]);\n\n  // Callback quando o editor é montado\n  const handleEditorReady = useCallback((quill) => {\n    setQuillInstance(quill);\n  }, []);\n\n  return (\n    <div className=\"rich-text-editor\">\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          {label}\n        </label>\n      )}\n      \n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n        <ReactQuill\n          ref={quillRef}\n          theme=\"snow\"\n          value={value || ''}\n          onChange={handleEditorChange}\n          onEditorReady={handleEditorReady}\n          modules={modules}\n          formats={formats}\n          placeholder={placeholder}\n          style={{\n            height: '300px',\n            backgroundColor: '#1f2937', // bg-gray-800\n            color: '#f3f4f6', // text-gray-100\n            ...style\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default QuillEditor;\n","import React from 'react';\nimport QuillEditor from '../../shared/QuillEditor';\nimport './RichTextEditor.css';\n\nconst RichTextEditor = ({ value, onChange, placeholder, label }) => {\n  return (\n    <QuillEditor\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n      label={label}\n    />\n  );\n};\n\nexport default RichTextEditor; ","import React from 'react';\nimport RichTextEditor from './RichTextEditor';\n\nconst HistoriasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* História da Escola */}\n      <RichTextEditor\n        label=\"História da Escola\"\n        value={editingLocation['historia_da_escola'] || ''}\n        onChange={(value) => setEditingLocation({ ...editingLocation, 'historia_da_escola': value })}\n        placeholder=\"Digite a história da escola...\"\n      />\n    </div>\n  );\n};\n\nexport default HistoriasTab; ","import { supabase } from '../supabaseClient';\n\n/**\n * Serviço para gerenciar fotos dos professores\n * Usa o bucket 'avatar' do Supabase Storage\n */\nexport class FotoProfessorService {\n  \n  /**\n   * Faz upload da foto do professor para o Supabase Storage\n   * @param {File} arquivo - Arquivo da foto\n   * @param {string} nomeProfessor - Nome do professor (para nomear o arquivo)\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<{success: boolean, url?: string, error?: string}>}\n   */\n  static async uploadFotoProfessor(arquivo, nomeProfessor, escolaId) {\n    try {\n      // Validar arquivo\n      if (!arquivo) {\n        throw new Error('Arquivo não fornecido');\n      }\n\n      // Validar tipo de arquivo\n      const tiposPermitidos = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n      if (!tiposPermitidos.includes(arquivo.type)) {\n        throw new Error('Tipo de arquivo não permitido. Use JPEG, PNG ou WebP.');\n      }\n\n      // Validar tamanho (máximo 5MB)\n      const tamanhoMaximo = 5 * 1024 * 1024; // 5MB\n      if (arquivo.size > tamanhoMaximo) {\n        throw new Error('Arquivo muito grande. Tamanho máximo: 5MB');\n      }\n\n      // Gerar nome único para o arquivo\n      const timestamp = Date.now();\n      const extensao = arquivo.name.split('.').pop().toLowerCase();\n      \n      // Sanitizar nome do professor para evitar caracteres inválidos\n      const nomeSanitizado = nomeProfessor\n        .toLowerCase()\n        .replace(/[áàâãä]/g, 'a')\n        .replace(/[éèêë]/g, 'e')\n        .replace(/[íìîï]/g, 'i')\n        .replace(/[óòôõö]/g, 'o')\n        .replace(/[úùûü]/g, 'u')\n        .replace(/[ç]/g, 'c')\n        .replace(/[ñ]/g, 'n')\n        .replace(/[^a-z0-9\\s]/g, '') // Remove caracteres especiais\n        .replace(/\\s+/g, '_') // Substitui espaços por underscore\n        .substring(0, 50); // Limita tamanho\n      \n      const nomeArquivo = `${nomeSanitizado}_${timestamp}.${extensao}`;\n      const caminhoArquivo = `${escolaId}/${nomeArquivo}`;\n\n      // Validar se o nome do arquivo é válido\n      if (!nomeArquivo || nomeArquivo.length === 0) {\n        throw new Error('Nome do arquivo inválido gerado');\n      }\n\n      console.log('Upload da foto:', {\n        nomeOriginal: arquivo.name,\n        nomeSanitizado,\n        nomeArquivo,\n        caminhoArquivo,\n        escolaId,\n        nomeProfessor\n      });\n\n      // Fazer upload para o Supabase Storage\n      const { error } = await supabase.storage\n        .from('avatar')\n        .upload(caminhoArquivo, arquivo, {\n          cacheControl: '3600',\n          upsert: false\n        });\n\n      if (error) {\n        throw new Error(`Erro no upload: ${error.message}`);\n      }\n\n      // Obter URL pública\n      const { data: { publicUrl } } = supabase.storage\n        .from('avatar')\n        .getPublicUrl(caminhoArquivo);\n      \n      return {\n        success: true,\n        url: publicUrl,\n        caminho: caminhoArquivo\n      };\n\n    } catch (error) {\n      console.error('Erro no upload da foto:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Atualiza a URL da foto do professor na tabela historia_professor\n   * @param {number} historiaId - ID da história do professor\n   * @param {string} fotoUrl - URL da foto\n   * @returns {Promise<{success: boolean, error?: string}>}\n   */\n  static async atualizarFotoProfessor(historiaId, fotoUrl) {\n    try {\n      const { error } = await supabase\n        .from('historias_professor')\n        .update({ foto_rosto: fotoUrl })\n        .eq('id', historiaId);\n\n      if (error) {\n        throw new Error(`Erro ao atualizar foto: ${error.message}`);\n      }\n\n      return { success: true };\n\n    } catch (error) {\n      console.error('Erro ao atualizar foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Remove a foto do professor do storage e atualiza a tabela\n   * @param {string} caminhoArquivo - Caminho do arquivo no storage\n   * @param {number} historiaId - ID da história do professor\n   * @returns {Promise<{success: boolean, error?: string}>}\n   */\n  static async removerFotoProfessor(caminhoArquivo, historiaId) {\n    try {\n      // Remover do storage\n      const { error: storageError } = await supabase.storage\n        .from('avatar')\n        .remove([caminhoArquivo]);\n\n      if (storageError) {\n        console.warn('Erro ao remover arquivo do storage:', storageError);\n      }\n\n      // Atualizar tabela (remover URL)\n      const { error: dbError } = await supabase\n        .from('historias_professor')\n        .update({ foto_rosto: null })\n        .eq('id', historiaId);\n\n      if (dbError) {\n        throw new Error(`Erro ao atualizar banco de dados: ${dbError.message}`);\n      }\n\n      return { success: true };\n\n    } catch (error) {\n      console.error('Erro ao remover foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Busca a foto do professor pela URL\n   * @param {string} fotoUrl - URL da foto\n   * @returns {Promise<{success: boolean, url?: string, error?: string}>}\n   */\n  static async buscarFotoProfessor(fotoUrl) {\n    try {\n      if (!fotoUrl) {\n        return { success: false, error: 'URL da foto não fornecida' };\n      }\n\n      // Verificar se a URL é válida\n      const urlValida = fotoUrl.startsWith('http') || fotoUrl.startsWith('data:');\n      if (!urlValida) {\n        return { success: false, error: 'URL da foto inválida' };\n      }\n\n      return {\n        success: true,\n        url: fotoUrl\n      };\n\n    } catch (error) {\n      console.error('Erro ao buscar foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Lista todas as fotos de professores de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<{success: boolean, fotos?: Array, error?: string}>}\n   */\n  static async listarFotosProfessores(escolaId) {\n    try {\n      const { data, error } = await supabase.storage\n        .from('avatar')\n        .list(`${escolaId}/`);\n\n      if (error) {\n        throw new Error(`Erro ao listar fotos: ${error.message}`);\n      }\n\n      // Gerar URLs públicas para cada arquivo\n      const fotosComUrl = data.map(file => {\n        const { data: { publicUrl } } = supabase.storage\n          .from('avatar')\n          .getPublicUrl(`${escolaId}/${file.name}`);\n        \n        return {\n          nome: file.name,\n          url: publicUrl,\n          tamanho: file.metadata?.size || 0,\n          criadoEm: file.created_at\n        };\n      });\n\n      return {\n        success: true,\n        fotos: fotosComUrl\n      };\n\n    } catch (error) {\n      console.error('Erro ao listar fotos dos professores:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Valida se uma imagem pode ser carregada\n   * @param {string} url - URL da imagem\n   * @returns {Promise<boolean>}\n   */\n  static async validarImagem(url) {\n    return new Promise((resolve) => {\n      if (!url) {\n        resolve(false);\n        return;\n      }\n\n      const img = new Image();\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = url;\n    });\n  }\n}\n\nexport default FotoProfessorService;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { getHistoriasProfessor, createHistoriaProfessor, updateHistoriaProfessor, deleteHistoriaProfessor } from '../../../services/historiaProfessorService';\nimport FotoProfessorService from '../../../services/fotoProfessorService';\nimport RichTextEditor from './RichTextEditor';\nimport { Upload, X, User, AlertCircle } from 'lucide-react';\n\nconst HistoriaProfessoresTab = ({ editingLocation, setEditingLocation }) => {\n  const [historias, setHistorias] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [editingHistoria, setEditingHistoria] = useState(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\n  const [photoError, setPhotoError] = useState('');\n  const [photoSuccess, setPhotoSuccess] = useState('');\n\n  const loadHistorias = useCallback(async () => {\n    if (!editingLocation?.id) return;\n    \n    setLoading(true);\n    try {\n      const data = await getHistoriasProfessor(editingLocation.id);\n      setHistorias(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar histórias:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [editingLocation?.id]);\n\n  // Carregar histórias existentes\n  useEffect(() => {\n    if (editingLocation?.id) {\n      loadHistorias();\n    }\n  }, [editingLocation?.id, loadHistorias]);\n\n  const handleSaveHistoria = async (historiaData) => {\n    if (!editingLocation?.id) return;\n\n    try {\n      if (editingHistoria?.id) {\n        // Atualizar história existente\n        await updateHistoriaProfessor(editingHistoria.id, historiaData);\n      } else {\n        // Criar nova história\n        await createHistoriaProfessor({\n          ...historiaData,\n          escola_id: editingLocation.id\n        });\n      }\n      \n      // Recarregar histórias\n      await loadHistorias();\n      \n      // Limpar estado de edição\n      setEditingHistoria(null);\n      setIsCreating(false);\n    } catch (error) {\n      console.error('Erro ao salvar história:', error);\n      alert('Erro ao salvar história: ' + error.message);\n    }\n  };\n\n  const handleDeleteHistoria = async (historiaId) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta história?')) return;\n\n    try {\n      await deleteHistoriaProfessor(historiaId);\n      await loadHistorias();\n    } catch (error) {\n      console.error('Erro ao deletar história:', error);\n      alert('Erro ao deletar história: ' + error.message);\n    }\n  };\n\n  const handleEditHistoria = (historia) => {\n    setEditingHistoria(historia);\n    setIsCreating(false);\n  };\n\n  const handleNewHistoria = () => {\n    setEditingHistoria({\n      nome_professor: '',\n      historia: ''\n    });\n    setIsCreating(true);\n  };\n\n  const handleCancelEdit = () => {\n    setEditingHistoria(null);\n    setIsCreating(false);\n    setPhotoError('');\n    setPhotoSuccess('');\n  };\n\n  // Função para lidar com upload da foto de rosto\n  const handlePhotoUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validar arquivo\n    const tiposPermitidos = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n    if (!tiposPermitidos.includes(file.type)) {\n      setPhotoError('Tipo de arquivo não permitido. Use JPEG, PNG ou WebP.');\n      return;\n    }\n\n    // Validar tamanho (máximo 5MB)\n    const tamanhoMaximo = 5 * 1024 * 1024; // 5MB\n    if (file.size > tamanhoMaximo) {\n      setPhotoError('Arquivo muito grande. Tamanho máximo: 5MB');\n      return;\n    }\n\n    try {\n      setUploadingPhoto(true);\n      setPhotoError('');\n      setPhotoSuccess('');\n\n      // Fazer upload da foto\n      console.log('=== HistoriaProfessoresTab.handlePhotoUpload ===');\n      console.log('Arquivo:', file.name);\n      console.log('Nome Professor:', editingHistoria?.nome_professor || 'professor');\n      console.log('Escola ID:', editingLocation.id);\n      \n      const result = await FotoProfessorService.uploadFotoProfessor(\n        file, \n        editingHistoria?.nome_professor || 'professor', \n        editingLocation.id\n      );\n\n      console.log('Resultado do upload:', result);\n      \n      if (result.success) {\n        console.log('Atualizando editingHistoria com URL:', result.url);\n        console.log('Estado atual editingHistoria:', editingHistoria);\n        \n        const novoEstado = { ...editingHistoria, foto_rosto: result.url };\n        console.log('Novo estado que será definido:', novoEstado);\n        \n        // Atualizar editingHistoria com a URL da foto\n        setEditingHistoria(novoEstado);\n        setPhotoSuccess('Foto carregada com sucesso!');\n        \n        // Verificar se o estado foi atualizado\n        setTimeout(() => {\n          console.log('Estado após atualização (deve mostrar foto_rosto):', editingHistoria);\n        }, 100);\n        \n        // Limpar mensagem de sucesso após 3 segundos\n        setTimeout(() => setPhotoSuccess(''), 3000);\n      } else {\n        setPhotoError(result.error || 'Erro ao fazer upload da foto');\n      }\n    } catch (error) {\n      console.error('Erro no upload da foto:', error);\n      setPhotoError('Erro inesperado ao fazer upload da foto');\n    } finally {\n      setUploadingPhoto(false);\n    }\n  };\n\n  // Função para remover foto\n  const handleRemovePhoto = () => {\n    setEditingHistoria({ ...editingHistoria, foto_rosto: '' });\n    setPhotoError('');\n    setPhotoSuccess('');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n        <span className=\"ml-2 text-gray-600\">Carregando histórias...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Cabeçalho */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-200\">Depoimentos dos Professores</h3>\n        <button\n          onClick={handleNewHistoria}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n        >\n          + Nova História\n        </button>\n      </div>\n\n      {/* Formulário de edição/criação */}\n      {editingHistoria && (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6\">\n          <h4 className=\"text-md font-medium text-gray-200 mb-4\">\n            {isCreating ? 'Nova História do Professor' : 'Editar História do Professor'}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            {/* Nome do Professor */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Nome do Professor\n              </label>\n              <input\n                type=\"text\"\n                value={editingHistoria.nome_professor || ''}\n                onChange={(e) => setEditingHistoria({\n                  ...editingHistoria,\n                  nome_professor: e.target.value\n                })}\n                className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500\"\n                placeholder=\"Nome do professor (opcional)\"\n              />\n            </div>\n\n            {/* Upload de foto de rosto do professor */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Foto de Rosto do Professor <span className=\"text-gray-400\">(opcional)</span>\n              </label>\n              \n              {/* Preview da foto atual */}\n              {editingHistoria.foto_rosto && (\n                <div className=\"mb-4 p-4 border border-gray-600 rounded-lg bg-gray-700\">\n                  <div className=\"flex items-center gap-4\">\n                    <img \n                      src={editingHistoria.foto_rosto} \n                      alt=\"Foto do professor\" \n                      className=\"w-20 h-20 object-cover rounded-full border-2 border-green-400 shadow-sm\" \n                    />\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-300 mb-1\">Foto de rosto atual:</p>\n                      <p className=\"text-xs text-gray-400 break-all\">{editingHistoria.foto_rosto}</p>\n                    </div>\n                    <button \n                      type=\"button\" \n                      onClick={handleRemovePhoto} \n                      className=\"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-md transition-colors\"\n                      disabled={uploadingPhoto}\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Mensagens de status */}\n              {photoError && (\n                <div className=\"mb-4 p-3 bg-red-900/20 border border-red-600 rounded-lg flex items-center gap-2\">\n                  <AlertCircle className=\"w-4 h-4 text-red-400\" />\n                  <span className=\"text-sm text-red-400\">{photoError}</span>\n                </div>\n              )}\n\n              {photoSuccess && (\n                <div className=\"mb-4 p-3 bg-green-900/20 border border-green-600 rounded-lg flex items-center gap-2\">\n                  <User className=\"w-4 h-4 text-green-400\" />\n                  <span className=\"text-sm text-green-400\">{photoSuccess}</span>\n                </div>\n              )}\n\n              {/* Campo de upload */}\n              <div className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n                uploadingPhoto \n                  ? 'border-blue-400 bg-blue-900/20' \n                  : 'border-gray-600 hover:border-green-400'\n              }`}>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp\"\n                  onChange={handlePhotoUpload}\n                  disabled={uploadingPhoto}\n                  className=\"hidden\"\n                  id=\"foto-rosto-input\"\n                />\n                <label \n                  htmlFor=\"foto-rosto-input\" \n                  className={`cursor-pointer block ${uploadingPhoto ? 'cursor-not-allowed' : ''}`}\n                >\n                  <div className=\"flex flex-col items-center gap-2\">\n                    {uploadingPhoto ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400\"></div>\n                        <span className=\"text-sm text-blue-400\">Enviando foto...</span>\n                      </>\n                    ) : (\n                      <>\n                        <Upload className=\"w-8 h-8 text-gray-400\" />\n                        <span className=\"text-sm text-gray-300\">\n                          {editingHistoria.foto_rosto ? 'Alterar foto de rosto' : 'Adicionar foto de rosto'}\n                        </span>\n                        <span className=\"text-xs text-gray-500\">\n                          JPEG, PNG ou WebP (máx. 5MB)\n                        </span>\n                      </>\n                    )}\n                  </div>\n                </label>\n              </div>\n              \n              {/* Informações sobre o upload */}\n              <div className=\"mt-2 text-xs text-gray-500\">\n                <p>• A foto de rosto será exibida junto com o depoimento do professor</p>\n                <p>• Recomendado: foto quadrada ou retrato, boa qualidade</p>\n                <p>• A foto será salva no bucket 'avatar' e vinculada ao depoimento</p>\n              </div>\n            </div>\n\n            {/* História/Depoimento */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Depoimento/História\n              </label>\n              <RichTextEditor\n                value={editingHistoria.historia || ''}\n                onChange={(value) => setEditingHistoria({\n                  ...editingHistoria,\n                  historia: value\n                })}\n                placeholder=\"Digite o depoimento ou história do professor...\"\n              />\n            </div>\n\n            {/* Botões de ação */}\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                onClick={() => handleSaveHistoria(editingHistoria)}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                {isCreating ? 'Criar' : 'Salvar'}\n              </button>\n              <button\n                onClick={handleCancelEdit}\n                className=\"px-4 py-2 bg-gray-600 text-gray-200 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Lista de histórias existentes */}\n      {historias.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"text-md font-medium text-gray-200\">Histórias Existentes</h4>\n          {historias.map((historia) => (\n            <div key={historia.id} className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  {historia.nome_professor && (\n                    <h5 className=\"font-medium text-green-400 mb-2\">\n                      {historia.nome_professor}\n                    </h5>\n                  )}\n                  <div \n                    className=\"text-gray-300 prose prose-invert max-w-none\"\n                    dangerouslySetInnerHTML={{ __html: historia.historia }}\n                  />\n                </div>\n                <div className=\"flex gap-2 ml-4\">\n                  <button\n                    onClick={() => handleEditHistoria(historia)}\n                    className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors\"\n                  >\n                    Editar\n                  </button>\n                  <button\n                    onClick={() => handleDeleteHistoria(historia.id)}\n                    className=\"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors\"\n                  >\n                    Excluir\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Mensagem quando não há histórias */}\n      {historias.length === 0 && !editingHistoria && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <p>Nenhuma história de professor cadastrada ainda.</p>\n          <p className=\"text-sm mt-2\">Clique em \"Nova História\" para começar.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HistoriaProfessoresTab; ","import React, { useEffect, useRef, useCallback } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport XYZ from 'ol/source/XYZ';\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport { Point } from 'ol/geom';\nimport { Feature } from 'ol';\nimport { Style, Icon } from 'ol/style';\nimport 'ol/ol.css';\n\n// Caminho para o marcador SVG\nconst MARKER_SVG_PATH = `${process.env.PUBLIC_URL || ''}/map-marker.svg`;\n\nconst CoordenadasTab = ({ editingLocation, setEditingLocation }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markerRef = useRef(null);\n\n  // Função para atualizar o mapa quando as coordenadas mudam\n  const updateMap = (lat, lng) => {\n    if (!mapInstanceRef.current) return;\n\n    const view = mapInstanceRef.current.getView();\n    \n    if (lat && lng && !isNaN(lat) && !isNaN(lng)) {\n      const coordinates = fromLonLat([parseFloat(lng), parseFloat(lat)]);\n      \n      // Atualizar o centro do mapa\n      view.setCenter(coordinates);\n      view.setZoom(15);\n\n      // Atualizar ou criar o marcador\n      const vectorSource = mapInstanceRef.current.getLayers().getArray()\n        .find(layer => layer instanceof VectorLayer)?.getSource();\n\n      if (vectorSource) {\n        // Remover marcador anterior\n        if (markerRef.current) {\n          vectorSource.removeFeature(markerRef.current);\n        }\n\n        // Criar novo marcador\n        const marker = new Feature({\n          geometry: new Point(coordinates)\n        });\n\n        marker.setStyle(new Style({\n          image: new Icon({\n            src: MARKER_SVG_PATH,\n            scale: 0.6,\n            anchor: [0.5, 0.5],\n            anchorXUnits: 'fraction',\n            anchorYUnits: 'fraction',\n            color: '#fbbf24'\n          })\n        }));\n\n        vectorSource.addFeature(marker);\n        markerRef.current = marker;\n      }\n    }\n  };\n\n  // Função para atualizar coordenadas quando o mapa é clicado\n  const handleMapClick = useCallback((event) => {\n    const coordinates = toLonLat(event.coordinate);\n    const [lng, lat] = coordinates;\n    \n    setEditingLocation({\n      ...editingLocation,\n      'latitude': lat.toFixed(6),\n      'longitude': lng.toFixed(6)\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editingLocation]);\n\n  // Inicializar mapa\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Criar mapa\n    const map = new Map({\n      target: mapRef.current,\n      layers: [\n        new TileLayer({\n          source: new XYZ({\n            url: 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n          })\n        }),\n        new VectorLayer({\n          source: new VectorSource()\n        })\n      ],\n      view: new View({\n        center: fromLonLat([-46.6388, -23.5489]), // São Paulo\n        zoom: 8\n      })\n    });\n\n    mapInstanceRef.current = map;\n\n    // Adicionar evento de clique\n    map.on('click', handleMapClick);\n\n    // Atualizar mapa com coordenadas iniciais\n    const lat = editingLocation['Latitude'];\n    const lng = editingLocation['Longitude'];\n    if (lat && lng) {\n      updateMap(lat, lng);\n    }\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.setTarget(undefined);\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [handleMapClick]);\n\n  // Atualizar mapa quando coordenadas mudam\n  useEffect(() => {\n    const lat = editingLocation['Latitude'];\n    const lng = editingLocation['Longitude'];\n    updateMap(lat, lng);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editingLocation['Latitude'], editingLocation['Longitude']]);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Campos de Coordenadas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {/* Latitude */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Latitude\n          </label>\n          <input\n            type=\"number\"\n            step=\"any\"\n            className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n            value={editingLocation['Latitude'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Latitude': e.target.value })}\n            placeholder=\"Ex: -23.5489\"\n          />\n          <p className=\"text-xs text-gray-400 mt-1\">\n            Valor entre -90 e 90 (ex: -23.5489 para São Paulo)\n          </p>\n        </div>\n\n        {/* Longitude */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Longitude\n          </label>\n          <input\n            type=\"number\"\n            step=\"any\"\n            className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n            value={editingLocation['Longitude'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Longitude': e.target.value })}\n            placeholder=\"Ex: -46.6388\"\n          />\n          <p className=\"text-xs text-gray-400 mt-1\">\n            Valor entre -180 e 180 (ex: -46.6388 para São Paulo)\n          </p>\n        </div>\n      </div>\n\n      {/* Mapa */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Mapa - Clique para definir a localização\n        </label>\n        <div \n          ref={mapRef}\n          className=\"w-full h-64 border border-gray-700 rounded-lg bg-gray-800\"\n          style={{ minHeight: '256px' }}\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Clique no mapa para definir as coordenadas automaticamente\n        </p>\n      </div>\n\n      {/* Informações sobre Coordenadas */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Como Usar as Coordenadas\n        </h3>\n        \n        <div className=\"space-y-3 text-sm text-gray-300\">\n          <div>\n            <strong className=\"text-amber-400\">Método 1 - Digite manualmente:</strong>\n            <p>Digite as coordenadas nos campos acima. Use ponto decimal (ex: -23.5489).</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Método 2 - Clique no mapa:</strong>\n            <p>Clique no mapa para definir automaticamente as coordenadas da localização.</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Formato das coordenadas:</strong>\n            <p>Latitude: -90 a +90 | Longitude: -180 a +180</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Exemplos para São Paulo:</strong>\n            <p>Latitude: -23.5489 | Longitude: -46.6388</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CoordenadasTab; ","import React, { useState, useEffect } from 'react';\nimport { Download, Eye, RefreshCw, Database, FileText, Users, Image, Video, Archive, FileDown, CheckCircle, AlertCircle } from 'lucide-react';\nimport { supabase } from '../../../supabaseClient';\n\nconst TabelasIntegraisTab = () => {\n  const [tabelas, setTabelas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedTabela, setSelectedTabela] = useState(null);\n  const [dadosTabela, setDadosTabela] = useState([]);\n  const [loadingDados, setLoadingDados] = useState(false);\n  const [backupStatus, setBackupStatus] = useState({});\n  const [backupProgress, setBackupProgress] = useState(0);\n\n  // Lista das tabelas principais do sistema\n  const TABELAS_SISTEMA = [\n    {\n      id: 'escolas_completa',\n      nome: 'Escolas Completas',\n      descricao: 'Dados principais de todas as escolas indígenas',\n      icone: Database,\n      cor: 'bg-blue-500',\n      registros: 0\n    },\n    {\n      id: 'historias_professor',\n      nome: 'Histórias dos Professores',\n      descricao: 'Depoimentos e histórias dos professores indígenas',\n      icone: Users,\n      cor: 'bg-green-500',\n      registros: 0\n    },\n    {\n      id: 'documentos_escola',\n      nome: 'Documentos das Escolas',\n      descricao: 'PDFs e documentos das escolas',\n      icone: FileText,\n      cor: 'bg-purple-500',\n      registros: 0\n    },\n    {\n      id: 'titulos_videos',\n      nome: 'Vídeos das Escolas',\n      descricao: 'Links e títulos dos vídeos das escolas',\n      icone: Video,\n      cor: 'bg-red-500',\n      registros: 0\n    },\n    {\n      id: 'legendas_fotos',\n      nome: 'Legendas das Fotos',\n      descricao: 'Legendas e descrições das imagens',\n      icone: Image,\n      cor: 'bg-yellow-500',\n      registros: 0\n    },\n    {\n      id: 'imagens_professores',\n      nome: 'Imagens dos Professores',\n      descricao: 'Metadados das imagens dos professores',\n      icone: Users,\n      cor: 'bg-teal-500',\n      registros: 0\n    },\n    {\n      id: 'imagens_escola',\n      nome: 'Imagens das Escolas',\n      descricao: 'Metadados das imagens das escolas',\n      icone: Image,\n      cor: 'bg-indigo-500',\n      registros: 0\n    }\n  ];\n\n  // Buckets do Supabase para backup\n  const BUCKETS_BACKUP = [\n    {\n      id: 'imagens-das-escolas',\n      nome: 'Imagens das Escolas',\n      descricao: 'Fotos das escolas indígenas',\n      icone: Image,\n      cor: 'bg-indigo-500',\n      arquivos: 0\n    },\n    {\n      id: 'imagens-professores',\n      nome: 'Imagens dos Professores',\n      descricao: 'Fotos dos professores indígenas',\n      icone: Users,\n      cor: 'bg-teal-500',\n      arquivos: 0\n    },\n    {\n      id: 'pdfs',\n      nome: 'Documentos PDF',\n      descricao: 'Documentos das escolas em PDF',\n      icone: FileText,\n      cor: 'bg-orange-500',\n      arquivos: 0\n    },\n    {\n      id: 'historias-professor',\n      nome: 'Histórias dos Professores',\n      descricao: 'Imagens das histórias dos professores',\n      icone: Users,\n      cor: 'bg-green-500',\n      arquivos: 0\n    }\n  ];\n\n  // Função para testar buckets\n  const testarBuckets = async () => {\n    console.log('Testando buckets do Supabase...');\n    setBackupStatus({ status: 'testando', message: 'Testando buckets...' });\n    \n    const resultados = [];\n    \n    for (const bucket of BUCKETS_BACKUP) {\n      try {\n        console.log(`Testando bucket: ${bucket.id}`);\n        \n        // Tentar listar arquivos do bucket\n        const { data, error } = await supabase.storage\n          .from(bucket.id)\n          .list('', { limit: 1000 });\n        \n        if (error) {\n          console.error(`❌ Erro no bucket ${bucket.id}:`, error);\n          resultados.push({ bucket: bucket.id, status: 'erro', mensagem: error.message });\n        } else {\n          console.log(`✅ Bucket ${bucket.id} OK - ${data?.length || 0} arquivos encontrados`);\n          if (data && data.length > 0) {\n            console.log(`📁 Arquivos no bucket ${bucket.id}:`, data.map(f => f.name));\n          }\n          resultados.push({ bucket: bucket.id, status: 'ok', arquivos: data?.length || 0 });\n        }\n      } catch (err) {\n        console.error(`❌ Exceção no bucket ${bucket.id}:`, err);\n        resultados.push({ bucket: bucket.id, status: 'excecao', mensagem: err.message });\n      }\n    }\n    \n    // Mostrar resultados\n    console.log('Resultados dos testes:', resultados);\n    \n    const bucketsOk = resultados.filter(r => r.status === 'ok').length;\n    const bucketsErro = resultados.filter(r => r.status === 'erro' || r.status === 'excecao').length;\n    const totalArquivos = resultados.reduce((acc, r) => acc + (r.arquivos || 0), 0);\n    \n    if (bucketsErro === 0) {\n      setBackupStatus({ \n        status: 'concluido', \n        message: `✅ Todos os buckets estão funcionando! ${bucketsOk} buckets testados, ${totalArquivos} arquivos encontrados.` \n      });\n    } else {\n      setBackupStatus({ \n        status: 'erro', \n        message: `⚠️ ${bucketsErro} bucket(s) com problema. Verifique o console para detalhes.` \n      });\n    }\n    \n    setTimeout(() => {\n      setBackupStatus({});\n    }, 5000);\n  };\n\n  // Função para testar tabelas\n  const testarTabelas = async () => {\n    console.log('Testando tabelas do Supabase...');\n    setBackupStatus({ status: 'testando', message: 'Testando tabelas...' });\n    \n    const resultados = [];\n    \n    for (const tabela of TABELAS_SISTEMA) {\n      try {\n        console.log(`Testando tabela: ${tabela.id}`);\n        \n        // Tentar buscar dados da tabela\n        const { data, error } = await supabase\n          .from(tabela.id)\n          .select('*')\n          .limit(5);\n        \n        if (error) {\n          console.error(`❌ Erro na tabela ${tabela.id}:`, error);\n          resultados.push({ tabela: tabela.id, status: 'erro', mensagem: error.message });\n        } else {\n          console.log(`✅ Tabela ${tabela.id} OK - ${data?.length || 0} registros encontrados`);\n          resultados.push({ tabela: tabela.id, status: 'ok', registros: data?.length || 0 });\n        }\n      } catch (err) {\n        console.error(`❌ Exceção na tabela ${tabela.id}:`, err);\n        resultados.push({ tabela: tabela.id, status: 'excecao', mensagem: err.message });\n      }\n    }\n    \n    // Mostrar resultados\n    console.log('Resultados dos testes de tabelas:', resultados);\n    \n    const tabelasOk = resultados.filter(r => r.status === 'ok').length;\n    const tabelasErro = resultados.filter(r => r.status === 'erro' || r.status === 'excecao').length;\n    \n    if (tabelasErro === 0) {\n      setBackupStatus({ \n        status: 'concluido', \n        message: `✅ Todas as tabelas estão funcionando! ${tabelasOk} tabelas testadas.` \n      });\n    } else {\n      setBackupStatus({ \n        status: 'erro', \n        message: `⚠️ ${tabelasErro} tabela(s) com problema. Verifique o console para detalhes.` \n      });\n    }\n    \n    setTimeout(() => {\n      setBackupStatus({});\n    }, 5000);\n  };\n\n  useEffect(() => {\n    setTabelas(TABELAS_SISTEMA);\n    setLoading(false);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Carregar dados de uma tabela específica\n  const carregarDadosTabela = async (tabelaId) => {\n    try {\n      setLoadingDados(true);\n      setError(null);\n      \n      const { data, error } = await supabase\n        .from(tabelaId)\n        .select('*')\n        .order('id', { ascending: true });\n\n      if (error) throw error;\n      \n      setDadosTabela(data || []);\n      setSelectedTabela(tabelaId);\n    } catch (err) {\n      console.error(`Erro ao carregar dados da tabela ${tabelaId}:`, err);\n      setError(`Erro ao carregar dados: ${err.message}`);\n    } finally {\n      setLoadingDados(false);\n    }\n  };\n\n  // Função para baixar arquivo individual\n  const downloadFile = async (url, filename) => {\n    try {\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error(`Erro ao baixar ${filename}:`, error);\n    }\n  };\n\n  // Função para criar e baixar ZIP\n  const createAndDownloadZip = async (files, zipName) => {\n    try {\n      console.log('Iniciando criação do ZIP com', files.length, 'arquivos');\n      \n      // Importar JSZip dinamicamente\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n\n      // Adicionar arquivos ao ZIP\n      let arquivosAdicionados = 0;\n      for (const file of files) {\n        try {\n          console.log(`Baixando arquivo: ${file.name} de ${file.url}`);\n          \n          const response = await fetch(file.url);\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n          }\n          \n          const blob = await response.blob();\n          console.log(`Arquivo ${file.name} baixado, tamanho: ${blob.size} bytes`);\n          \n          zip.file(file.name, blob);\n          arquivosAdicionados++;\n          \n          // Atualizar progresso\n          const progress = (arquivosAdicionados / files.length) * 100;\n          setBackupProgress(progress);\n          \n        } catch (error) {\n          console.error(`Erro ao adicionar ${file.name} ao ZIP:`, error);\n          // Continuar com outros arquivos\n        }\n      }\n\n      if (arquivosAdicionados === 0) {\n        throw new Error('Nenhum arquivo foi adicionado ao ZIP');\n      }\n\n      console.log(`Gerando ZIP com ${arquivosAdicionados} arquivos...`);\n      \n      // Gerar e baixar ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      console.log(`ZIP gerado, tamanho: ${zipBlob.size} bytes`);\n      \n      const downloadUrl = window.URL.createObjectURL(zipBlob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = zipName;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      console.log('ZIP baixado com sucesso:', zipName);\n      \n    } catch (error) {\n      console.error('Erro ao criar ZIP:', error);\n      \n      // Fallback: baixar arquivos individualmente\n      console.log('Tentando download individual dos arquivos...');\n      for (const file of files) {\n        try {\n          await downloadFile(file.url, file.name);\n          await new Promise(resolve => setTimeout(resolve, 200)); // Delay maior para evitar sobrecarga\n        } catch (downloadError) {\n          console.error(`Erro ao baixar ${file.name}:`, downloadError);\n        }\n      }\n    }\n  };\n\n  // Backup completo do site com download das imagens\n  const backupCompletoSite = async () => {\n    try {\n      setBackupStatus({ status: 'iniciando', message: 'Iniciando backup completo...' });\n      setBackupProgress(0);\n\n      // 1. Backup das tabelas (25% do progresso)\n      setBackupStatus({ status: 'tabelas', message: 'Fazendo backup das tabelas...' });\n      setBackupProgress(10);\n      \n      const backupTabelas = {};\n      for (const tabela of TABELAS_SISTEMA) {\n        try {\n          const { data, error } = await supabase\n            .from(tabela.id)\n            .select('*');\n          \n          if (error) throw error;\n          backupTabelas[tabela.id] = data || [];\n        } catch (err) {\n          console.error(`Erro ao fazer backup da tabela ${tabela.id}:`, err);\n        }\n      }\n      setBackupProgress(25);\n\n      // 2. Backup dos buckets com URLs para download (50% do progresso)\n      setBackupStatus({ status: 'buckets', message: 'Preparando download das imagens...' });\n      setBackupProgress(30);\n\n      const backupArquivos = {};\n      const todosArquivos = [];\n      \n      for (const bucket of BUCKETS_BACKUP) {\n        try {\n          console.log(`Listando arquivos do bucket: ${bucket.id}`);\n          const { data, error } = await supabase.storage\n            .from(bucket.id)\n            .list('', { limit: 1000 });\n          \n          if (error) throw error;\n          \n          console.log(`Bucket ${bucket.id}: ${data?.length || 0} arquivos encontrados`);\n          console.log('Arquivos encontrados:', data);\n          \n          const arquivosComUrls = [];\n          for (const arquivo of data) {\n            try {\n              console.log(`Gerando URL para: ${arquivo.name}`);\n              const { data: urlData } = await supabase.storage\n                .from(bucket.id)\n                .createSignedUrl(arquivo.name, 3600); // URL válida por 1 hora\n              \n              if (urlData?.signedUrl) {\n                const arquivoCompleto = {\n                  ...arquivo,\n                  url: urlData.signedUrl,\n                  bucket: bucket.id,\n                  bucketNome: bucket.nome\n                };\n                arquivosComUrls.push(arquivoCompleto);\n                todosArquivos.push(arquivoCompleto);\n                console.log(`URL gerada para ${arquivo.name}: ${urlData.signedUrl.substring(0, 50)}...`);\n              } else {\n                console.warn(`URL não gerada para ${arquivo.name}`);\n              }\n            } catch (err) {\n              console.error(`Erro ao gerar URL para ${arquivo.name}:`, err);\n            }\n          }\n          \n          console.log(`Bucket ${bucket.id}: ${arquivosComUrls.length} URLs geradas`);\n          backupArquivos[bucket.id] = arquivosComUrls;\n        } catch (err) {\n          console.error(`Erro ao fazer backup do bucket ${bucket.id}:`, err);\n        }\n      }\n      setBackupProgress(75);\n\n      // 3. Criar arquivo de backup completo (25% do progresso)\n      setBackupStatus({ status: 'finalizando', message: 'Criando arquivo de backup...' });\n      setBackupProgress(80);\n\n      const backupCompleto = {\n        metadata: {\n          dataBackup: new Date().toISOString(),\n          versao: '1.0',\n          descricao: 'Backup completo do sistema OPIN - Observatório dos Professores Indígenas',\n          tabelas: TABELAS_SISTEMA.map(t => ({ id: t.id, nome: t.nome })),\n          buckets: BUCKETS_BACKUP.map(b => ({ id: b.id, nome: b.nome })),\n          totalRegistros: Object.values(backupTabelas).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n          totalArquivos: Object.values(backupArquivos).reduce((acc, bucket) => acc + (bucket?.length || 0), 0)\n        },\n        dados: backupTabelas,\n        arquivos: backupArquivos\n      };\n\n      // 4. Download do backup completo\n      setBackupStatus({ status: 'download', message: 'Preparando download...' });\n      setBackupProgress(90);\n\n      const jsonContent = JSON.stringify(backupCompleto, null, 2);\n      const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8;' });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `backup_completo_opin_${new Date().toISOString().split('T')[0]}.json`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      // 5. Download das imagens em ZIP\n      console.log(`Total de arquivos para download: ${todosArquivos.length}`);\n      console.log('Arquivos para download:', todosArquivos);\n      \n      if (todosArquivos.length > 0) {\n        setBackupStatus({ status: 'imagens', message: 'Baixando imagens...' });\n        setBackupProgress(95);\n        \n        await createAndDownloadZip(\n          todosArquivos, \n          `imagens_opin_${new Date().toISOString().split('T')[0]}.zip`\n        );\n      } else {\n        console.warn('Nenhuma imagem encontrada para backup');\n        setBackupStatus({ \n          status: 'erro', \n          message: 'Nenhuma imagem encontrada para backup. Verifique se há arquivos nos buckets.' \n        });\n      }\n\n      setBackupProgress(100);\n      setBackupStatus({ \n        status: 'concluido', \n        message: 'Backup completo realizado com sucesso!',\n        detalhes: {\n          tabelas: Object.keys(backupTabelas).length,\n          registros: Object.values(backupTabelas).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n          arquivos: Object.values(backupArquivos).reduce((acc, bucket) => acc + (bucket?.length || 0), 0)\n        }\n      });\n\n      // Limpar status após 5 segundos\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 5000);\n\n    } catch (err) {\n      console.error('Erro no backup completo:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Backup apenas das tabelas em formato CSV\n  const backupApenasTabelas = async () => {\n    try {\n      setBackupStatus({ status: 'tabelas', message: 'Fazendo backup das tabelas em CSV...' });\n      setBackupProgress(0);\n\n      const backupTabelasData = {};\n      for (let i = 0; i < TABELAS_SISTEMA.length; i++) {\n        const tabela = TABELAS_SISTEMA[i];\n        try {\n          const { data, error } = await supabase\n            .from(tabela.id)\n            .select('*');\n          \n          if (error) throw error;\n          backupTabelasData[tabela.id] = data || [];\n          \n          setBackupProgress((i + 1) / TABELAS_SISTEMA.length * 100);\n        } catch (err) {\n          console.error(`Erro ao fazer backup da tabela ${tabela.id}:`, err);\n        }\n      }\n\n      // Criar arquivo CSV para cada tabela\n      const dataAtual = new Date().toISOString().split('T')[0];\n      \n      // Importar JSZip dinamicamente para criar um arquivo ZIP com todos os CSVs\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n\n      // Adicionar cada tabela como um arquivo CSV separado\n      for (const [tabelaId, dados] of Object.entries(backupTabelasData)) {\n        if (dados && dados.length > 0) {\n          // Obter cabeçalhos das colunas\n          const headers = Object.keys(dados[0]);\n          \n          // Criar conteúdo CSV\n          const csvContent = [\n            headers.join(','),\n            ...dados.map(row => \n              headers.map(header => {\n                const value = row[header];\n                // Escapar vírgulas e quebras de linha\n                if (typeof value === 'string' && (value.includes(',') || value.includes('\\n') || value.includes('\"'))) {\n                  return `\"${value.replace(/\"/g, '\"\"')}\"`;\n                }\n                return value || '';\n              }).join(',')\n            )\n          ].join('\\n');\n\n          // Adicionar ao ZIP\n          zip.file(`${tabelaId}_${dataAtual}.csv`, csvContent);\n        }\n      }\n\n      // Adicionar arquivo de metadados\n      const metadata = {\n        dataBackup: new Date().toISOString(),\n        tipo: 'backup_tabelas_csv',\n        tabelas: Object.keys(backupTabelasData),\n        totalRegistros: Object.values(backupTabelasData).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n        formato: 'CSV',\n        descricao: 'Backup das tabelas do sistema OPIN em formato CSV'\n      };\n      \n      zip.file(`metadata_${dataAtual}.json`, JSON.stringify(metadata, null, 2));\n\n      // Gerar e baixar ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      const downloadUrl = window.URL.createObjectURL(zipBlob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `backup_tabelas_csv_opin_${dataAtual}.zip`;\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n\n      setBackupStatus({ \n        status: 'concluido', \n        message: 'Backup das tabelas em CSV realizado com sucesso!' \n      });\n\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 3000);\n\n    } catch (err) {\n      console.error('Erro no backup das tabelas:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Backup apenas das imagens\n  const backupImagens = async () => {\n    try {\n      console.log('Iniciando backup das imagens...');\n      setBackupStatus({ status: 'imagens', message: 'Preparando backup das imagens...' });\n      setBackupProgress(0);\n\n      const todosArquivos = [];\n      \n      for (let i = 0; i < BUCKETS_BACKUP.length; i++) {\n        const bucket = BUCKETS_BACKUP[i];\n        try {\n          console.log(`Processando bucket: ${bucket.id} (${bucket.nome})`);\n          setBackupStatus({ \n            status: 'imagens', \n            message: `Processando bucket: ${bucket.nome}...` \n          });\n          \n          // Listar arquivos do bucket\n          const { data: arquivos, error } = await supabase.storage\n            .from(bucket.id)\n            .list('', { limit: 1000 });\n          \n          if (error) {\n            console.error(`Erro ao listar arquivos do bucket ${bucket.id}:`, error);\n            throw error;\n          }\n          \n          console.log(`Bucket ${bucket.id} tem ${arquivos?.length || 0} arquivos`);\n          \n          if (arquivos && arquivos.length > 0) {\n            // Gerar URLs assinadas para cada arquivo\n            for (const arquivo of arquivos) {\n              try {\n                console.log(`Gerando URL para: ${arquivo.name}`);\n                \n                const { data: urlData, error: urlError } = await supabase.storage\n                  .from(bucket.id)\n                  .createSignedUrl(arquivo.name, 3600);\n                \n                if (urlError) {\n                  console.error(`Erro ao gerar URL para ${arquivo.name}:`, urlError);\n                  continue;\n                }\n                \n                if (urlData?.signedUrl) {\n                  const arquivoCompleto = {\n                    ...arquivo,\n                    url: urlData.signedUrl,\n                    bucket: bucket.id,\n                    bucketNome: bucket.nome\n                  };\n                  todosArquivos.push(arquivoCompleto);\n                  console.log(`URL gerada para ${arquivo.name}: ${urlData.signedUrl.substring(0, 50)}...`);\n                } else {\n                  console.warn(`URL não gerada para ${arquivo.name}`);\n                }\n              } catch (err) {\n                console.error(`Erro ao gerar URL para ${arquivo.name}:`, err);\n              }\n            }\n          } else {\n            console.log(`Bucket ${bucket.id} está vazio`);\n          }\n          \n          setBackupProgress((i + 1) / BUCKETS_BACKUP.length * 100);\n        } catch (err) {\n          console.error(`Erro ao processar bucket ${bucket.id}:`, err);\n          // Continuar com outros buckets\n        }\n      }\n\n      console.log(`Total de arquivos encontrados: ${todosArquivos.length}`);\n\n      if (todosArquivos.length > 0) {\n        setBackupStatus({ \n          status: 'download', \n          message: `Criando arquivo ZIP com ${todosArquivos.length} imagens...` \n        });\n        \n        await createAndDownloadZip(\n          todosArquivos, \n          `imagens_opin_${new Date().toISOString().split('T')[0]}.zip`\n        );\n\n        setBackupStatus({ \n          status: 'concluido', \n          message: `Backup das imagens realizado com sucesso! ${todosArquivos.length} arquivos baixados.` \n        });\n      } else {\n        setBackupStatus({ \n          status: 'concluido', \n          message: 'Nenhuma imagem encontrada para backup.' \n        });\n      }\n\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 3000);\n\n    } catch (err) {\n      console.error('Erro no backup das imagens:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Download dos dados em formato CSV\n  const downloadCSV = (tabelaId, dados) => {\n    if (!dados || dados.length === 0) {\n      alert('Nenhum dado para baixar');\n      return;\n    }\n\n    // Obter cabeçalhos das colunas\n    const headers = Object.keys(dados[0]);\n    \n    // Criar conteúdo CSV\n    const csvContent = [\n      headers.join(','),\n      ...dados.map(row => \n        headers.map(header => {\n          const value = row[header];\n          // Escapar vírgulas e quebras de linha\n          if (typeof value === 'string' && (value.includes(',') || value.includes('\\n') || value.includes('\"'))) {\n            return `\"${value.replace(/\"/g, '\"\"')}\"`;\n          }\n          return value || '';\n        }).join(',')\n      )\n    ].join('\\n');\n\n    // Criar blob e download\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${tabelaId}_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Download dos dados em formato JSON\n  const downloadJSON = (tabelaId, dados) => {\n    if (!dados || dados.length === 0) {\n      alert('Nenhum dado para baixar');\n      return;\n    }\n\n    const jsonContent = JSON.stringify(dados, null, 2);\n    const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${tabelaId}_${new Date().toISOString().split('T')[0]}.json`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-400 mx-auto mb-4\"></div>\n        <div className=\"text-gray-400 text-lg\">Carregando tabelas...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n\n      {/* Seção de Backup */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h4 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <Archive className=\"w-5 h-5 text-blue-400\" />\n          Backup Completo do Sistema\n        </h4>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* Backup Completo */}\n          <div className=\"bg-gradient-to-br from-blue-600/20 to-blue-700/20 rounded-xl p-6 border border-blue-500/30 hover:border-blue-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-blue-500 p-3 rounded-lg mr-3\">\n                <Archive className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup Completo</h5>\n                <p className=\"text-sm text-gray-400\">Sistema completo</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Inclui todas as tabelas, imagens dos buckets e metadados do sistema\n            </p>\n            <button\n              onClick={backupCompletoSite}\n              disabled={backupStatus.status === 'iniciando' || backupStatus.status === 'tabelas' || backupStatus.status === 'buckets' || backupStatus.status === 'finalizando' || backupStatus.status === 'download' || backupStatus.status === 'imagens'}\n              className=\"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n            >\n              <Archive className=\"w-4 h-4 inline mr-2\" />\n              Backup Completo\n            </button>\n          </div>\n\n          {/* Backup das Tabelas */}\n          <div className=\"bg-gradient-to-br from-green-600/20 to-green-700/20 rounded-xl p-6 border border-green-500/30 hover:border-green-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-green-500 p-3 rounded-lg mr-3\">\n                <Database className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup das Tabelas</h5>\n                <p className=\"text-sm text-gray-400\">Apenas dados</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Apenas os dados das tabelas em formato CSV\n            </p>\n            <div className=\"space-y-2\">\n              <button\n                onClick={backupApenasTabelas}\n                disabled={backupStatus.status === 'tabelas'}\n                className=\"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n              >\n                <Database className=\"w-4 h-4 inline mr-2\" />\n                Backup Tabelas\n              </button>\n              <button\n                onClick={testarTabelas}\n                className=\"w-full px-3 py-2 bg-gray-700/50 text-gray-300 rounded-lg hover:bg-gray-600/50 transition-colors border border-gray-600/50 text-sm\"\n              >\n                🔍 Testar Tabelas\n              </button>\n            </div>\n          </div>\n\n          {/* Backup das Imagens */}\n          <div className=\"bg-gradient-to-br from-purple-600/20 to-purple-700/20 rounded-xl p-6 border border-purple-500/30 hover:border-purple-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-purple-500 p-3 rounded-lg mr-3\">\n                <FileDown className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup das Imagens</h5>\n                <p className=\"text-sm text-gray-400\">Apenas arquivos</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Apenas as imagens dos buckets em arquivo ZIP\n            </p>\n            <div className=\"space-y-2\">\n              <button\n                onClick={backupImagens}\n                disabled={backupStatus.status === 'imagens' || backupStatus.status === 'download'}\n                className=\"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n              >\n                <FileDown className=\"w-4 h-4 inline mr-2\" />\n                Backup Imagens\n              </button>\n              <button\n                onClick={testarBuckets}\n                className=\"w-full px-3 py-2 bg-gray-700/50 text-gray-300 rounded-lg hover:bg-gray-600/50 transition-colors border border-gray-600/50 text-sm\"\n              >\n                🔍 Testar Buckets\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Status do Backup */}\n        {backupStatus.status && (\n          <div className={`p-6 rounded-xl border backdrop-blur-sm ${\n            backupStatus.status === 'concluido' \n              ? 'bg-green-900/50 border-green-700/50 text-green-200' \n              : backupStatus.status === 'erro' \n                ? 'bg-red-900/50 border-red-700/50 text-red-200'\n                : 'bg-blue-900/50 border-blue-700/50 text-blue-200'\n          }`}>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {backupStatus.status === 'concluido' ? (\n                  <CheckCircle className=\"w-6 h-6 text-green-400\" />\n                ) : backupStatus.status === 'erro' ? (\n                  <AlertCircle className=\"w-6 h-6 text-red-400\" />\n                ) : (\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400\"></div>\n                )}\n                <div>\n                  <p className=\"font-semibold\">{backupStatus.message}</p>\n                  {backupStatus.detalhes && (\n                    <p className=\"text-sm mt-1 text-gray-300\">\n                      Tabelas: {backupStatus.detalhes.tabelas} | \n                      Registros: {backupStatus.detalhes.registros} | \n                      Arquivos: {backupStatus.detalhes.arquivos}\n                    </p>\n                  )}\n                </div>\n              </div>\n              {backupProgress > 0 && backupProgress < 100 && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-32 bg-gray-700 rounded-full h-2\">\n                    <div \n                      className=\"bg-green-400 h-2 rounded-full transition-all duration-300\" \n                      style={{ width: `${backupProgress}%` }}\n                    ></div>\n                  </div>\n                  <span className=\"text-sm font-medium\">{Math.round(backupProgress)}%</span>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Lista de Tabelas */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h4 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <Database className=\"w-5 h-5 text-gray-400\" />\n          Tabelas do Sistema\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {tabelas.map((tabela) => {\n            const Icone = tabela.icone;\n            const isSelected = selectedTabela === tabela.id;\n            \n            return (\n              <div\n                key={tabela.id}\n                className={`bg-gray-800/50 backdrop-blur-sm rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-lg ${\n                  isSelected \n                    ? 'border-green-500/50 bg-green-600/20' \n                    : 'border-gray-700/50 hover:border-gray-600/50 hover:bg-gray-700/30'\n                }`}\n                onClick={() => carregarDadosTabela(tabela.id)}\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className={`${tabela.cor} p-3 rounded-lg mr-3 shadow-lg`}>\n                      <Icone className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-gray-100\">{tabela.nome}</h4>\n                      <p className=\"text-sm text-gray-400\">{tabela.registros} registros</p>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-300 mb-4\">{tabela.descricao}</p>\n                  \n                  <div className=\"flex space-x-2\">\n                    <button\n                      className=\"flex items-center px-3 py-2 text-xs bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/30 transition-colors border border-blue-500/30\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        carregarDadosTabela(tabela.id);\n                      }}\n                    >\n                      <Eye className=\"w-3 h-3 mr-1\" />\n                      Visualizar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n\n\n      {/* Visualização dos Dados */}\n      {selectedTabela && (\n        <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h4 className=\"text-lg font-semibold text-gray-100\">\n                Dados da Tabela: {tabelas.find(t => t.id === selectedTabela)?.nome}\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                {dadosTabela.length} registros encontrados\n              </p>\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => carregarDadosTabela(selectedTabela)}\n                disabled={loadingDados}\n                className=\"flex items-center px-4 py-2 text-sm bg-gray-700/50 text-gray-200 rounded-lg hover:bg-gray-600/50 transition-colors disabled:opacity-50 border border-gray-600/50\"\n              >\n                <RefreshCw className={`w-4 h-4 mr-2 ${loadingDados ? 'animate-spin' : ''}`} />\n                Atualizar\n              </button>\n              \n              <button\n                onClick={() => downloadCSV(selectedTabela, dadosTabela)}\n                disabled={loadingDados || dadosTabela.length === 0}\n                className=\"flex items-center px-4 py-2 text-sm bg-green-600/20 text-green-300 rounded-lg hover:bg-green-600/30 transition-colors disabled:opacity-50 border border-green-500/30\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                CSV\n              </button>\n              \n              <button\n                onClick={() => downloadJSON(selectedTabela, dadosTabela)}\n                disabled={loadingDados || dadosTabela.length === 0}\n                className=\"flex items-center px-4 py-2 text-sm bg-purple-600/20 text-purple-300 rounded-lg hover:bg-purple-600/30 transition-colors disabled:opacity-50 border border-purple-500/30\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                JSON\n              </button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-900/50 border border-red-700/50 text-red-200 rounded-xl backdrop-blur-sm\">\n              <div className=\"flex items-center gap-3\">\n                <AlertCircle className=\"w-5 h-5 text-red-400\" />\n                <span>{error}</span>\n              </div>\n            </div>\n          )}\n\n          {loadingDados ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-400\"></div>\n              <span className=\"ml-3 text-gray-400\">Carregando dados...</span>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              {dadosTabela.length > 0 ? (\n                <table className=\"min-w-full divide-y divide-gray-700\">\n                  <thead className=\"bg-gray-700/30\">\n                    <tr>\n                      {Object.keys(dadosTabela[0]).map((header) => (\n                        <th\n                          key={header}\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\"\n                        >\n                          {header}\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-gray-800/20 divide-y divide-gray-700\">\n                    {dadosTabela.slice(0, 100).map((row, index) => (\n                      <tr key={index} className=\"hover:bg-gray-700/30 transition-colors\">\n                        {Object.values(row).map((value, cellIndex) => (\n                          <td\n                            key={cellIndex}\n                            className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-200 max-w-xs truncate\"\n                            title={typeof value === 'string' && value.length > 50 ? value : ''}\n                          >\n                            {typeof value === 'string' && value.length > 50 \n                              ? `${value.substring(0, 50)}...` \n                              : value || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ) : (\n                <div className=\"text-center py-12 text-gray-400\">\n                  <div className=\"w-16 h-16 bg-gray-700/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Database className=\"w-8 h-8 text-gray-500\" />\n                  </div>\n                  <p>Nenhum dado encontrado nesta tabela</p>\n                </div>\n              )}\n              \n              {dadosTabela.length > 100 && (\n                <div className=\"mt-6 text-center text-sm text-gray-400 bg-gray-700/20 p-4 rounded-lg\">\n                  Mostrando os primeiros 100 registros de {dadosTabela.length} total.\n                  Use os botões de download para acessar todos os dados.\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TabelasIntegraisTab;\n\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { Edit2, X, Check, AlertCircle } from 'lucide-react';\n\nconst EditableTable = ({ \n  escolas, \n  onSave, \n  loading = false,\n  error = null \n}) => {\n  const [canScroll, setCanScroll] = useState(false);\n  const scrollRef = useRef(null);\n\n  // Verificar se há scroll horizontal ou vertical\n  useEffect(() => {\n    const checkScroll = () => {\n      if (scrollRef.current) {\n        const hasHorizontalScroll = scrollRef.current.scrollWidth > scrollRef.current.clientWidth;\n        const hasVerticalScroll = scrollRef.current.scrollHeight > scrollRef.current.clientHeight;\n        setCanScroll(hasHorizontalScroll || hasVerticalScroll);\n      }\n    };\n\n    checkScroll();\n    window.addEventListener('resize', checkScroll);\n    return () => window.removeEventListener('resize', checkScroll);\n  }, [escolas]);\n  const [editingCell, setEditingCell] = useState(null);\n  const [editValue, setEditValue] = useState('');\n  const [originalValue, setOriginalValue] = useState('');\n\n  // Iniciar edição de uma célula\n  const startEditing = useCallback((rowIndex, columnKey, value) => {\n    setEditingCell({ rowIndex, columnKey });\n    setEditValue(value || '');\n    setOriginalValue(value || '');\n  }, []);\n\n  // Cancelar edição\n  const cancelEditing = useCallback(() => {\n    setEditingCell(null);\n    setEditValue('');\n    setOriginalValue('');\n  }, []);\n\n  // Salvar edição\n  const saveEdit = useCallback(async () => {\n    if (!editingCell) return;\n\n    const { rowIndex, columnKey } = editingCell;\n    const escola = escolas[rowIndex];\n    \n    // Só salvar se o valor mudou\n    if (editValue !== originalValue) {\n      const updatedEscola = {\n        ...escola,\n        [columnKey]: editValue\n      };\n      \n      await onSave(updatedEscola);\n    }\n    \n    cancelEditing();\n  }, [editingCell, editValue, originalValue, escolas, onSave, cancelEditing]);\n\n  // Lidar com tecla Enter para salvar\n  const handleKeyDown = useCallback((e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      saveEdit();\n    } else if (e.key === 'Escape') {\n      e.preventDefault();\n      cancelEditing();\n    }\n  }, [saveEdit, cancelEditing]);\n\n  // Colunas da tabela\n  const columns = [\n    { key: 'Escola', label: 'Escola', width: 'w-32' },\n    { key: 'Município', label: 'Município', width: 'w-28' },\n    { key: 'Endereço', label: 'Endereço', width: 'w-40' },\n    { key: 'Terra Indigena (TI)', label: 'Terra Indígena', width: 'w-32' },\n    { key: 'Parcerias com o município', label: 'Parcerias', width: 'w-32' },\n    { key: 'Diretoria de Ensino', label: 'Diretoria', width: 'w-32' },\n    { key: 'Ano de criação da escola', label: 'Ano Criação', width: 'w-24' },\n    { key: 'Povos indigenas', label: 'Povos', width: 'w-32' },\n    { key: 'Linguas faladas', label: 'Línguas', width: 'w-32' },\n    { key: 'Modalidade de Ensino/turnos de funcionamento', label: 'Modalidade', width: 'w-48' },\n    { key: 'Numero de alunos', label: 'Alunos', width: 'w-20' },\n    { key: 'turnos_funcionamento', label: 'Turnos', width: 'w-24' },\n    { key: 'Espaço escolar e estrutura', label: 'Estrutura', width: 'w-40' },\n    { key: 'Acesso à água', label: 'Água', width: 'w-24' },\n    { key: 'Tem coleta de lixo?', label: 'Coleta Lixo', width: 'w-24' },\n    { key: 'Acesso à internet', label: 'Internet', width: 'w-24' },\n    { key: 'Equipamentos Tecs', label: 'Equipamentos', width: 'w-32' },\n    { key: 'Modo de acesso à escola', label: 'Acesso', width: 'w-32' },\n    { key: 'Gestão/Nome', label: 'Gestão', width: 'w-32' },\n    { key: 'Outros funcionários', label: 'Funcionários', width: 'w-32' },\n    { key: 'Quantidade de professores indígenas', label: 'Prof. Indígenas', width: 'w-28' },\n    { key: 'Quantidade de professores não indígenas', label: 'Prof. Não Indígenas', width: 'w-32' },\n    { key: 'Professores falam a língua indígena?', label: 'Falam Língua', width: 'w-24' },\n    { key: 'Formação dos professores', label: 'Formação', width: 'w-32' },\n    { key: 'Formação continuada oferecida', label: 'Formação Cont.', width: 'w-32' },\n    { key: 'A escola possui PPP próprio?', label: 'PPP Próprio', width: 'w-24' },\n    { key: 'PPP elaborado com a comunidade?', label: 'PPP Comunidade', width: 'w-28' },\n    { key: 'Projetos em andamento', label: 'Projetos', width: 'w-32' },\n    { key: 'Parcerias com universidades?', label: 'Parcerias Univ.', width: 'w-28' },\n    { key: 'Ações com ONGs ou coletivos?', label: 'ONGs', width: 'w-24' },\n    { key: 'Desejos da comunidade para a escola', label: 'Desejos', width: 'w-40' },\n    { key: 'Escola utiliza redes sociais?', label: 'Redes Sociais', width: 'w-24' },\n    { key: 'Links das redes sociais', label: 'Links Redes', width: 'w-40' },\n    { key: 'historia_da_escola', label: 'História', width: 'w-40' },\n    { key: 'Latitude', label: 'Latitude', width: 'w-20' },\n    { key: 'Longitude', label: 'Longitude', width: 'w-20' },\n    { key: 'links', label: 'Links', width: 'w-32' },\n    { key: 'link_para_videos', label: 'Vídeos', width: 'w-32' },\n    { key: 'logradouro', label: 'Logradouro', width: 'w-32' },\n    { key: 'numero', label: 'Número', width: 'w-16' },\n    { key: 'complemento', label: 'Complemento', width: 'w-24' },\n    { key: 'bairro', label: 'Bairro', width: 'w-24' },\n    { key: 'cep', label: 'CEP', width: 'w-20' },\n    { key: 'estado', label: 'Estado', width: 'w-16' },\n    { key: 'nome_professor', label: 'Nome Professor', width: 'w-32' },\n    { key: 'professores_indigenas', label: 'Prof. Indígenas (Det.)', width: 'w-32' },\n    { key: 'professores_nao_indigenas', label: 'Prof. Não Indígenas (Det.)', width: 'w-32' },\n    { key: 'professores_falam_lingua_indigena', label: 'Falam Língua (Det.)', width: 'w-32' },\n    { key: 'formacao_professores', label: 'Formação (Det.)', width: 'w-32' },\n    { key: 'visitas_supervisores_formacao', label: 'Visitas Supervisores', width: 'w-32' },\n    { key: 'outros_funcionarios', label: 'Outros Funcionários (Det.)', width: 'w-32' },\n    { key: 'gestao', label: 'Gestão (Det.)', width: 'w-32' },\n    { key: 'merenda_diferenciada', label: 'Merenda Diferenciada', width: 'w-32' },\n    { key: 'cozinha', label: 'Cozinha', width: 'w-24' },\n    { key: 'merenda_escolar', label: 'Merenda Escolar', width: 'w-28' },\n    { key: 'diferenciada', label: 'Diferenciada', width: 'w-24' },\n    { key: 'actions', label: 'Ações', width: 'w-20' }\n  ];\n\n  // Renderizar célula editável\n  const renderCell = (escola, column, rowIndex) => {\n    const isEditing = editingCell?.rowIndex === rowIndex && editingCell?.columnKey === column.key;\n    const value = escola[column.key] || '';\n\n    if (column.key === 'actions') {\n      return (\n        <div className=\"flex items-center space-x-1\">\n          {isEditing ? (\n            <>\n              <button\n                onClick={saveEdit}\n                className=\"p-1 text-green-500 hover:text-green-600 transition-colors\"\n                title=\"Salvar\"\n              >\n                <Check size={16} />\n              </button>\n              <button\n                onClick={cancelEditing}\n                className=\"p-1 text-red-500 hover:text-red-600 transition-colors\"\n                title=\"Cancelar\"\n              >\n                <X size={16} />\n              </button>\n            </>\n          ) : (\n            <div className=\"flex items-center space-x-1\">\n              <button\n                onClick={() => startEditing(rowIndex, 'Escola', escola.Escola)}\n                className=\"p-1 text-blue-500 hover:text-blue-600 transition-colors\"\n                title=\"Editar Escola\"\n              >\n                <Edit2 size={14} />\n              </button>\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    if (isEditing) {\n      // Determinar o tipo de input baseado na coluna\n      let inputType = 'text';\n      let inputProps = {};\n      \n      if (column.key === 'Numero de alunos') {\n        inputType = 'number';\n        inputProps = { min: 0, step: 1 };\n      } else if (column.key === 'Modalidade de Ensino/turnos de funcionamento') {\n        inputType = 'textarea';\n      }\n\n      if (inputType === 'textarea') {\n        return (\n          <textarea\n            value={editValue}\n            onChange={(e) => setEditValue(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onBlur={saveEdit}\n            className=\"w-full px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none\"\n            rows={3}\n            autoFocus\n          />\n        );\n      }\n\n      return (\n        <input\n          type={inputType}\n          value={editValue}\n          onChange={(e) => setEditValue(e.target.value)}\n          onKeyDown={handleKeyDown}\n          onBlur={saveEdit}\n          className=\"w-full px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n          autoFocus\n          {...inputProps}\n        />\n      );\n    }\n\n    return (\n      <div \n        className=\"cursor-pointer hover:bg-gray-700 px-2 py-1 rounded transition-colors group\"\n        onClick={() => startEditing(rowIndex, column.key, value)}\n        title=\"Clique para editar\"\n      >\n        <span className=\"text-gray-200 group-hover:text-white text-xs whitespace-nowrap overflow-hidden\">\n          {value && value.length > 30 \n            ? `${value.substring(0, 30)}...` \n            : value || '-'}\n        </span>\n        <Edit2 size={10} className=\"inline ml-1 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"bg-gray-900 rounded-lg overflow-hidden h-full flex flex-col\">\n      {/* Header com status */}\n      <div className=\"bg-gray-800 px-4 py-3 border-b border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-gray-200\">\n            Tabela Editável das Escolas\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            {loading && (\n              <div className=\"flex items-center text-yellow-400\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-2\"></div>\n                Salvando...\n              </div>\n            )}\n            {error && (\n              <div className=\"flex items-center text-red-400\">\n                <AlertCircle size={16} className=\"mr-1\" />\n                {error}\n              </div>\n            )}\n          </div>\n        </div>\n        <p className=\"text-sm text-gray-400 mt-1\">\n          Clique em qualquer célula para editar. Pressione Enter para salvar ou Esc para cancelar.\n        </p>\n      </div>\n\n      {/* Tabela */}\n      <div \n        ref={scrollRef}\n        className={`editable-table-scroll flex-1 relative ${canScroll ? 'can-scroll' : ''}`}\n        style={{ overflowY: 'auto', maxHeight: 'calc(100vh - 300px)' }}\n      >\n        <table className=\"w-full min-w-[3000px]\">\n                      <thead className=\"bg-gray-800\">\n              <tr>\n                {columns.map((column) => (\n                  <th\n                    key={column.key}\n                    className={`${column.width} px-2 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider border-b border-gray-700`}\n                  >\n                    <div className=\"truncate\" title={column.label}>\n                      {column.label}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n          <tbody className=\"bg-gray-900 divide-y divide-gray-700\">\n            {escolas.map((escola, rowIndex) => (\n              <tr key={escola.id} className=\"hover:bg-gray-800 transition-colors\">\n                {columns.map((column) => (\n                                  <td\n                  key={column.key}\n                  className=\"px-2 py-2 text-xs\"\n                >\n                    {renderCell(escola, column, rowIndex)}\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n\n    </div>\n  );\n};\n\nexport default EditableTable;\n","import React, { useState } from 'react';\nimport EditableTable from '../components/EditableTable';\nimport { useEscolas } from '../hooks/useEscolas';\nimport { Search, Download } from 'lucide-react';\n\nconst TabelaEditavelTab = ({ setEditingLocation }) => {\n  const { \n    escolas, \n    loading: escolasLoading, \n    error: escolasError,\n    saveEscola,\n    searchTerm, \n    setSearchTerm \n  } = useEscolas();\n\n  const [tableLoading, setTableLoading] = useState(false);\n  const [tableError, setTableError] = useState(null);\n  const [updateSuccess, setUpdateSuccess] = useState(false);\n\n  // Função para exportar dados como CSV\n  const exportToCSV = () => {\n    const headers = [\n      'Escola',\n      'Município',\n      'Endereço',\n      'Terra Indígena',\n      'Parcerias',\n      'Diretoria de Ensino',\n      'Ano Criação',\n      'Povos',\n      'Línguas',\n      'Modalidade',\n      'Alunos',\n      'Turnos',\n      'Estrutura',\n      'Água',\n      'Coleta Lixo',\n      'Internet',\n      'Equipamentos',\n      'Acesso',\n      'Gestão',\n      'Funcionários',\n      'Prof. Indígenas',\n      'Prof. Não Indígenas',\n      'Falam Língua',\n      'Formação',\n      'Formação Cont.',\n      'PPP Próprio',\n      'PPP Comunidade',\n      'Projetos',\n      'Parcerias Univ.',\n      'ONGs',\n      'Desejos',\n      'Redes Sociais',\n      'Links Redes',\n      'História',\n      'Latitude',\n      'Longitude',\n      'Links',\n      'Vídeos',\n      'Logradouro',\n      'Número',\n      'Complemento',\n      'Bairro',\n      'CEP',\n      'Estado',\n      'Nome Professor',\n      'Prof. Indígenas (Det.)',\n      'Prof. Não Indígenas (Det.)',\n      'Falam Língua (Det.)',\n      'Formação (Det.)',\n      'Visitas Supervisores',\n      'Outros Funcionários (Det.)',\n      'Gestão (Det.)',\n      'Merenda Diferenciada',\n      'Cozinha',\n      'Merenda Escolar',\n      'Diferenciada'\n    ];\n    \n    const csvContent = [\n      headers.join(','),\n      ...escolas.map(escola => [\n        `\"${escola.nome_escola || ''}\"`,\n        `\"${escola.municipio || ''}\"`,\n        `\"${escola.endereco || ''}\"`,\n        `\"${escola.terra_indigena || ''}\"`,\n        `\"${escola.parcerias || ''}\"`,\n        `\"${escola.diretoria_ensino || ''}\"`,\n        `\"${escola.ano_criacao || ''}\"`,\n        `\"${escola.povos || ''}\"`,\n        `\"${escola.linguas || ''}\"`,\n        `\"${escola.modalidade || ''}\"`,\n        `\"${escola.numero_alunos || ''}\"`,\n        `\"${escola.turnos || ''}\"`,\n        `\"${escola.estrutura || ''}\"`,\n        `\"${escola.agua || ''}\"`,\n        `\"${escola.coleta_lixo || ''}\"`,\n        `\"${escola.internet || ''}\"`,\n        `\"${escola.equipamentos || ''}\"`,\n        `\"${escola.acesso || ''}\"`,\n        `\"${escola.gestao || ''}\"`,\n        `\"${escola.funcionarios || ''}\"`,\n        `\"${escola.professores_indigenas || ''}\"`,\n        `\"${escola.professores_nao_indigenas || ''}\"`,\n        `\"${escola.falam_lingua_indigena || ''}\"`,\n        `\"${escola.formacao_professores || ''}\"`,\n        `\"${escola.formacao_continuada || ''}\"`,\n        `\"${escola.ppp_proprio || ''}\"`,\n        `\"${escola.ppp_comunidade || ''}\"`,\n        `\"${escola.projetos || ''}\"`,\n        `\"${escola.parcerias_universidades || ''}\"`,\n        `\"${escola.parcerias_ongs || ''}\"`,\n        `\"${escola.desejos_comunidade || ''}\"`,\n        `\"${escola.redes_sociais || ''}\"`,\n        `\"${escola.links_redes_sociais || ''}\"`,\n        `\"${escola.historia_escola || ''}\"`,\n        `\"${escola.latitude || ''}\"`,\n        `\"${escola.longitude || ''}\"`,\n        `\"${escola.links_uteis || ''}\"`,\n        `\"${escola.link_para_videos || ''}\"`,\n        `\"${escola.logradouro || ''}\"`,\n        `\"${escola.numero || ''}\"`,\n        `\"${escola.complemento || ''}\"`,\n        `\"${escola.bairro || ''}\"`,\n        `\"${escola.cep || ''}\"`,\n        `\"${escola.estado || ''}\"`,\n        `\"${escola.nome_professor || ''}\"`,\n        `\"${escola.professores_indigenas_detalhado || ''}\"`,\n        `\"${escola.professores_nao_indigenas_detalhado || ''}\"`,\n        `\"${escola.falam_lingua_indigena_detalhado || ''}\"`,\n        `\"${escola.formacao_professores_detalhado || ''}\"`,\n        `\"${escola.visitas_supervisores || ''}\"`,\n        `\"${escola.outros_funcionarios_detalhado || ''}\"`,\n        `\"${escola.gestao_detalhado || ''}\"`,\n        `\"${escola.merenda_diferenciada || ''}\"`,\n        `\"${escola.cozinha || ''}\"`,\n        `\"${escola.merenda_escolar || ''}\"`,\n        `\"${escola.merenda_diferenciada_detalhado || ''}\"`\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'escolas_indigenas.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Filtrar escolas baseado no termo de busca\n  const filteredEscolas = escolas.filter(escola => {\n    if (!searchTerm) return true;\n    \n    const term = searchTerm.toLowerCase();\n    return (\n      escola.nome_escola?.toLowerCase().includes(term) ||\n      escola.municipio?.toLowerCase().includes(term) ||\n      escola.terra_indigena?.toLowerCase().includes(term) ||\n      escola.povos?.toLowerCase().includes(term) ||\n      escola.linguas?.toLowerCase().includes(term)\n    );\n  });\n\n  // Função para salvar alterações na tabela\n  const handleTableSave = async (escolaId, updatedData) => {\n    try {\n      setTableLoading(true);\n      setTableError(null);\n      \n      await saveEscola(escolaId, updatedData);\n      \n      setUpdateSuccess(true);\n      setTimeout(() => setUpdateSuccess(false), 3000);\n      \n    } catch (error) {\n      console.error('Erro ao salvar escola:', error);\n      setTableError(error.message);\n    } finally {\n      setTableLoading(false);\n    }\n  };\n\n  if (escolasLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n        <span className=\"ml-2 text-gray-400\">Carregando escolas...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800\">\n      {/* Cabeçalho */}\n      <div className=\"flex-shrink-0 p-6 border-b border-gray-700\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              Tabela Editável\n            </h2>\n            <p className=\"text-gray-400\">\n              Edite os dados das escolas diretamente na tabela\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            {updateSuccess && (\n              <div className=\"text-green-400 text-sm\">\n                ✓ Dados salvos com sucesso!\n              </div>\n            )}\n            \n            <button\n              onClick={exportToCSV}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors\"\n            >\n              <Download size={16} />\n              <span>Exportar CSV</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Barra de busca */}\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex-1 relative\">\n            <Search size={20} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Buscar escolas, municípios ou terras indígenas...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Tabela Editável */}\n      <div className=\"flex-1 overflow-hidden\">\n        {escolasError ? (\n          <div className=\"bg-red-900 border border-red-700 rounded-lg p-4 m-4\">\n            <div className=\"flex items-center space-x-2 text-red-400\">\n              <span className=\"text-lg\">⚠️</span>\n              <span>Erro ao carregar escolas: {escolasError}</span>\n            </div>\n          </div>\n        ) : (\n          <div className=\"h-full\">\n            <EditableTable\n              escolas={filteredEscolas}\n              onSave={handleTableSave}\n              loading={tableLoading}\n              error={tableError}\n            />\n          </div>\n        )}\n      </div>\n\n    </div>\n  );\n};\n\nexport default TabelaEditavelTab;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../../../supabaseClient';\nimport { X, MapPin, Users, AlertCircle } from 'lucide-react';\n\nconst CompletenessDashboard = () => {\n  const [completenessData, setCompletenessData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [incompleteSchools, setIncompleteSchools] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n\n  // Definição das categorias de campos para o dashboard\n  const fieldCategories = {\n    'Dados Básicos': [\n      'Escola',\n      'Município',\n      'Endereço',\n      'Terra Indigena (TI)',\n      'Escola Estadual ou Municipal',\n      'Parcerias com o município',\n      'Diretoria de Ensino',\n      'Ano de criação da escola'\n    ],\n    'Povos e Línguas': [\n      'Povos indigenas',\n      'Linguas faladas'\n    ],\n    'Modalidades e Alunos': [\n      'Modalidade de Ensino/turnos de funcionamento',\n      'Numero de alunos',\n      'turnos_funcionamento'\n    ],\n    'Infraestrutura': [\n      'Espaço escolar e estrutura',\n      'Acesso à água',\n      'Tem coleta de lixo?',\n      'Acesso à internet',\n      'Equipamentos Tecs',\n      'Modo de acesso à escola',\n      'Cozinha',\n      'Merenda_escolar',\n      'diferenciada'\n    ],\n    'Gestão e Professores': [\n      'Gestão/Nome',\n      'Outros funcionários',\n      'Quantidade de professores indígenas',\n      'Quantidade de professores não indígenas',\n      'Professores falam a língua indígena?',\n      'Formação dos professores',\n      'Formação continuada oferecida'\n    ],\n    'Material Pedagógico': [\n      'A escola possui PPP próprio?',\n      'PPP elaborado com a comunidade?',\n      'Material pedagógico não indígena',\n      'Material pedagógico indígena',\n      'Práticas pedagógicas indígenas',\n      'Formas de avaliação'\n    ],\n    'Projetos e Parcerias': [\n      'Projetos em andamento',\n      'Parcerias com universidades?',\n      'Ações com ONGs ou coletivos?',\n      'Desejos da comunidade para a escola'\n    ],\n    'Redes Sociais e Mídia': [\n      'Escola utiliza redes sociais?',\n      'Links das redes sociais',\n      'link_para_videos'\n    ],\n    'Histórias': [\n      'historia_da_escola'\n    ],\n    'Localização': [\n      'Latitude',\n      'Longitude',\n      'logradouro',\n      'numero',\n      'complemento',\n      'bairro',\n      'cep',\n      'estado'\n    ],\n    'Mídia': [\n      'imagem_header'\n    ]\n  };\n\n  // Função para calcular completude de um campo\n  const calculateFieldCompleteness = (data, fieldName) => {\n    if (!data || data.length === 0) return 0;\n    \n    const totalRecords = data.length;\n    const filledRecords = data.filter(record => {\n      const value = record[fieldName];\n      return value !== null && value !== undefined && value !== '' && value !== 'null';\n    }).length;\n    \n    return Math.round((filledRecords / totalRecords) * 100);\n  };\n\n  // Função para calcular completude de uma categoria\n  const calculateCategoryCompleteness = (data, fields) => {\n    if (!data || data.length === 0) return 0;\n    \n    const fieldCompleteness = fields.map(field => \n      calculateFieldCompleteness(data, field)\n    );\n    \n    return Math.round(\n      fieldCompleteness.reduce((sum, completeness) => sum + completeness, 0) / fields.length\n    );\n  };\n\n  // Função para obter cor baseada na completude\n  const getCompletenessColor = (percentage) => {\n    if (percentage >= 80) return 'text-green-400 bg-green-400/10';\n    if (percentage >= 60) return 'text-yellow-400 bg-yellow-400/10';\n    if (percentage >= 40) return 'text-orange-400 bg-orange-400/10';\n    return 'text-red-400 bg-red-400/10';\n  };\n\n  // Função para obter ícone baseado na completude\n  const getCompletenessIcon = (percentage) => {\n    if (percentage >= 80) return '✅';\n    if (percentage >= 60) return '⚠️';\n    if (percentage >= 40) return '🔶';\n    return '❌';\n  };\n\n  // Função para encontrar escolas sem informação em uma categoria\n  const findIncompleteSchools = (data, categoryFields) => {\n    if (!data || data.length === 0) return [];\n    \n    return data.filter(school => {\n      // Verifica se pelo menos um campo da categoria está vazio\n      return categoryFields.some(field => {\n        const value = school[field];\n        return value === null || value === undefined || value === '' || value === 'null';\n      });\n    }).map(school => {\n      // Identifica quais campos específicos estão vazios\n      const missingFields = categoryFields.filter(field => {\n        const value = school[field];\n        return value === null || value === undefined || value === '' || value === 'null';\n      });\n      \n      return {\n        ...school,\n        missingFields\n      };\n    });\n  };\n\n  // Função para lidar com clique em uma categoria\n  const handleCategoryClick = (category) => {\n    const categoryFields = fieldCategories[category];\n    const incomplete = findIncompleteSchools(completenessData.rawData, categoryFields);\n    \n    setSelectedCategory(category);\n    setIncompleteSchools(incomplete);\n    setShowModal(true);\n  };\n\n  // Buscar dados de completude\n  const fetchCompletenessData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('*');\n\n      if (error) throw error;\n\n      // Calcular completude para cada categoria\n      const categoryCompleteness = {};\n      Object.keys(fieldCategories).forEach(category => {\n        categoryCompleteness[category] = calculateCategoryCompleteness(data, fieldCategories[category]);\n      });\n\n      // Calcular completude geral\n      const allFields = Object.values(fieldCategories).flat();\n      const overallCompleteness = calculateCategoryCompleteness(data, allFields);\n\n      setCompletenessData({\n        totalRecords: data.length,\n        overallCompleteness,\n        categoryCompleteness,\n        rawData: data\n      });\n\n    } catch (err) {\n      console.error('Erro ao buscar dados de completude:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    fetchCompletenessData();\n  }, [fetchCompletenessData]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-400 mx-auto mb-4\"></div>\n          <div className=\"text-gray-400 text-lg\">Carregando dashboard de completude...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-900/50 border border-red-700/50 text-red-200 px-6 py-4 rounded-xl mb-6 backdrop-blur-sm\">\n        <div className=\"flex items-center gap-3\">\n          <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <div>\n            <h3 className=\"font-semibold\">Erro ao carregar dashboard</h3>\n            <p className=\"text-red-300\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!completenessData) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        Nenhum dado encontrado para análise de completude.\n      </div>\n    );\n  }\n\n  const { overallCompleteness, categoryCompleteness } = completenessData;\n\n  // Componente Modal para mostrar escolas sem informação\n  const IncompleteSchoolsModal = () => {\n    if (!showModal) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-gray-900 border border-gray-700 rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden\">\n          {/* Header do Modal */}\n          <div className=\"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4 border-b border-gray-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-100\">\n                  Escolas sem informação - {selectedCategory}\n                </h3>\n                <p className=\"text-gray-400 text-sm mt-1\">\n                  {incompleteSchools.length} escola(s) com dados incompletos nesta categoria\n                </p>\n              </div>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-400\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Conteúdo do Modal */}\n          <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n            {incompleteSchools.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-green-400 text-4xl mb-4\">✅</div>\n                <p className=\"text-gray-300 text-lg\">Todas as escolas têm informações completas nesta categoria!</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {incompleteSchools.map((school, index) => (\n                  <div key={index} className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-4\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-lg font-semibold text-gray-100 mb-1\">\n                          {school.Escola || 'Nome não informado'}\n                        </h4>\n                        <div className=\"flex items-center gap-4 text-sm text-gray-400\">\n                          {school.Município && (\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"w-4 h-4\" />\n                              {school.Município}\n                            </div>\n                          )}\n                          {school['Terra Indigena (TI)'] && (\n                            <div className=\"flex items-center gap-1\">\n                              <Users className=\"w-4 h-4\" />\n                              {school['Terra Indigena (TI)']}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className=\"bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs font-medium\">\n                          {school.missingFields.length} campo(s) faltando\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Campos faltando */}\n                    <div className=\"bg-gray-900/50 rounded-lg p-3\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <AlertCircle className=\"w-4 h-4 text-orange-400\" />\n                        <span className=\"text-sm font-medium text-gray-300\">Campos sem informação:</span>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {school.missingFields.map((field, fieldIndex) => (\n                          <span\n                            key={fieldIndex}\n                            className=\"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs\"\n                          >\n                            {field}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Footer do Modal */}\n          <div className=\"bg-gray-800/50 px-6 py-4 border-t border-gray-700\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-400\">\n                Clique em uma escola para editar suas informações\n              </p>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg transition-colors\"\n              >\n                Fechar\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header com estatísticas gerais */}\n      <div className=\"bg-gradient-to-r from-gray-800/50 to-gray-900/50 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300\">\n              Dashboard de Completude\n            </h2>\n            <p className=\"text-gray-400 mt-1\">\n              Análise do preenchimento dos dados da tabela escolas_completa\n            </p>\n          </div>\n          <button\n            onClick={fetchCompletenessData}\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg transition-colors flex items-center gap-2\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n            Atualizar\n          </button>\n        </div>\n\n      </div>\n\n      {/* Barra de progresso geral */}\n      <div className=\"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-semibold text-gray-200\">Progresso Geral</h3>\n          <span className={`px-3 py-1 rounded-full text-sm font-medium ${getCompletenessColor(overallCompleteness)}`}>\n            {overallCompleteness}%\n          </span>\n        </div>\n        <div className=\"w-full bg-gray-700 rounded-full h-3\">\n          <div \n            className={`h-3 rounded-full transition-all duration-500 ${\n              overallCompleteness >= 80 ? 'bg-gradient-to-r from-green-500 to-green-400' :\n              overallCompleteness >= 60 ? 'bg-gradient-to-r from-yellow-500 to-yellow-400' :\n              overallCompleteness >= 40 ? 'bg-gradient-to-r from-orange-500 to-orange-400' :\n              'bg-gradient-to-r from-red-500 to-red-400'\n            }`}\n            style={{ width: `${overallCompleteness}%` }}\n          ></div>\n        </div>\n      </div>\n\n      {/* Grid de categorias */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {Object.entries(categoryCompleteness).map(([category, percentage]) => (\n          <div \n            key={category}\n            onClick={() => handleCategoryClick(category)}\n            className=\"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 p-4 hover:bg-gray-800/70 hover:border-gray-600/50 cursor-pointer transition-all duration-200 group\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"text-lg font-semibold text-gray-200\">{category}</h4>\n              <span className=\"text-2xl\">{getCompletenessIcon(percentage)}</span>\n            </div>\n            \n            <div className=\"mb-3\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-sm text-gray-400\">Completude</span>\n                <span className={`text-sm font-medium ${getCompletenessColor(percentage)}`}>\n                  {percentage}%\n                </span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className={`h-2 rounded-full transition-all duration-500 ${\n                    percentage >= 80 ? 'bg-green-500' :\n                    percentage >= 60 ? 'bg-yellow-500' :\n                    percentage >= 40 ? 'bg-orange-500' :\n                    'bg-red-500'\n                  }`}\n                  style={{ width: `${percentage}%` }}\n                ></div>\n              </div>\n            </div>\n\n            <div className=\"text-xs text-gray-400\">\n              <p>{fieldCategories[category].length} campos nesta categoria</p>\n              <p className=\"text-gray-500 group-hover:text-gray-400 transition-colors\">\n                Clique para ver escolas sem informação\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n\n      {/* Modal para mostrar escolas sem informação */}\n      <IncompleteSchoolsModal />\n    </div>\n  );\n};\n\nexport default CompletenessDashboard;","import React, { useState } from 'react';\n// import { useRefresh } from '../../contexts/RefreshContext'; // Removido - não utilizado\nimport { useEscolas } from './hooks/useEscolas';\nimport { useModalidades } from './hooks/useModalidades';\nimport { ADMIN_TABS, UI_CONFIG, FORM_CONFIG } from './constants/adminConstants';\nimport AdminSidebar from './AdminSidebar';\nimport AdminToolbar from './AdminToolbar';\nimport ProtectedRoute from '../Auth/ProtectedRoute';\nimport { supabase } from '../../supabaseClient';\nimport './AdminPanel.css';\nimport ModalidadesTab from './tabs/ModalidadesTab';\nimport DadosBasicosTab from './tabs/DadosBasicosTab';\nimport PovosLinguasTab from './tabs/PovosLinguasTab';\nimport InfraestruturaTab from './tabs/InfraestruturaTab';\nimport GestaoProfessoresTab from './tabs/GestaoProfessoresTab';\nimport MaterialPedagogicoTab from './tabs/MaterialPedagogicoTab';\nimport ProjetosParceriasTab from './tabs/ProjetosParceriasTab';\nimport RedesSociaisTab from './tabs/RedesSociaisTab';\nimport VideoTab from './tabs/VideoTab';\nimport HistoriasTab from './tabs/HistoriasTab';\nimport HistoriaProfessoresTab from './tabs/HistoriaProfessoresTab';\nimport CoordenadasTab from './tabs/CoordenadasTab';\nimport TabelasIntegraisTab from './tabs/TabelasIntegraisTab';\nimport TabelaEditavelTab from './tabs/TabelaEditavelTab';\nimport CompletenessDashboard from './components/CompletenessDashboard';\n\n// Imports condicionais para evitar problemas de hot reload\nlet ImagensEscolaTab = null;\nlet ImagensProfessoresTab = null;\nlet DocumentosTab = null;\n\ntry {\n  ImagensEscolaTab = require('./tabs/ImagensEscolaTab').default;\n} catch (e) {\n  console.warn('ImagensEscolaTab não encontrado:', e);\n}\n\ntry {\n  ImagensProfessoresTab = require('./tabs/ImagensProfessoresTab').default;\n} catch (e) {\n  console.warn('ImagensProfessoresTab não encontrado:', e);\n}\n\ntry {\n  DocumentosTab = require('./tabs/DocumentosTab').default;\n} catch (e) {\n  console.warn('DocumentosTab não encontrado:', e);\n}\n\nconst AdminPanelContent = () => {\n  // const { triggerRefresh } = useRefresh(); // Removido - não utilizado\n  \n  // Estados principais\n  const [editingLocation, setEditingLocation] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveError, setSaveError] = useState(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [showBackupModal, setShowBackupModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [escolaToDelete, setEscolaToDelete] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showCompletenessDashboard, setShowCompletenessDashboard] = useState(false);\n\n  // Detectar se é mobile\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= UI_CONFIG.MOBILE_BREAKPOINT;\n\n  // Hooks customizados\n  const { \n    // escolas, // Removido - não utilizado\n    loading: escolasLoading, \n    error: escolasError,\n    searchTerm, \n    setSearchTerm, \n    selectedType, \n    setSelectedType,\n    filteredEscolas,\n    saveEscola,\n    deleteEscola\n  } = useEscolas();\n\n  const {\n    loadExistingModalidades,\n    clearModalidades\n  } = useModalidades();\n\n  // Função para abrir edição de escola\n  const openEditModal = (escola) => {\n    // Carregar modalidades existentes\n    loadExistingModalidades(escola['Modalidade de Ensino/turnos de funcionamento']);\n    \n    // Garantir que apenas os campos originais do banco sejam usados\n    const escolaOriginal = {\n      id: escola.id,\n      Escola: escola.Escola,\n      'Município': escola['Município'],\n      'Endereço': escola['Endereço'],\n      'Terra Indigena (TI)': escola['Terra Indigena (TI)'],\n      'Parcerias com o município': escola['Parcerias com o município'],\n      'Diretoria de Ensino': escola['Diretoria de Ensino'],\n      'Ano de criação da escola': escola['Ano de criação da escola'],\n      'Povos indigenas': escola['Povos indigenas'],\n      'Linguas faladas': escola['Linguas faladas'],\n      'Modalidade de Ensino/turnos de funcionamento': escola['Modalidade de Ensino/turnos de funcionamento'],\n      'Numero de alunos': escola['Numero de alunos'],\n      'turnos_funcionamento': escola['turnos_funcionamento'] || '',\n      'Espaço escolar e estrutura': escola['Espaço escolar e estrutura'],\n      'Acesso à água': escola['Acesso à água'],\n      'Tem coleta de lixo?': escola['Tem coleta de lixo?'],\n      'Acesso à internet': escola['Acesso à internet'],\n      'Equipamentos Tecs': escola['Equipamentos Tecs'],\n      'Modo de acesso à escola': escola['Modo de acesso à escola'],\n      'Gestão/Nome': escola['Gestão/Nome'],\n      'Outros funcionários': escola['Outros funcionários'],\n      'Quantidade de professores indígenas': escola['Quantidade de professores indígenas'],\n      'Quantidade de professores não indígenas': escola['Quantidade de professores não indígenas'],\n      'Professores falam a língua indígena?': escola['Professores falam a língua indígena?'],\n      'Formação dos professores': escola['Formação dos professores'],\n      'Formação continuada oferecida': escola['Formação continuada oferecida'],\n      'A escola possui PPP próprio?': escola['A escola possui PPP próprio?'],\n      'PPP elaborado com a comunidade?': escola['PPP elaborado com a comunidade?'],\n      'Projetos em andamento': escola['Projetos em andamento'],\n      'Parcerias com universidades?': escola['Parcerias com universidades?'],\n      'Ações com ONGs ou coletivos?': escola['Ações com ONGs ou coletivos?'],\n      'Desejos da comunidade para a escola': escola['Desejos da comunidade para a escola'],\n      'Escola utiliza redes sociais?': escola['Escola utiliza redes sociais?'],\n      'Links das redes sociais': escola['Links das redes sociais'],\n      'historia_da_escola': escola['historia_da_escola'],\n      'Latitude': escola['Latitude'],\n      'Longitude': escola['Longitude'],\n      'links': escola['links'],\n      'link_para_videos': escola['link_para_videos'],\n      'logradouro': escola['logradouro'],\n      'numero': escola['numero'],\n      'complemento': escola['complemento'],\n      'bairro': escola['bairro'],\n      'cep': escola['cep'],\n      'estado': escola['estado'],\n      'nome_professor': escola['nome_professor'],\n      'professores_indigenas': escola['professores_indigenas'],\n      'professores_nao_indigenas': escola['professores_nao_indigenas'],\n      'professores_falam_lingua_indigena': escola['professores_falam_lingua_indigena'],\n      'formacao_professores': escola['formacao_professores'],\n      'visitas_supervisores_formacao': escola['visitas_supervisores_formacao'],\n      'outros_funcionarios': escola['outros_funcionarios'],\n      'gestao': escola['gestao'],\n      'merenda_diferenciada': escola['merenda_diferenciada'],\n      cozinha: escola.cozinha,\n      merenda_escolar: escola.merenda_escolar,\n      diferenciada: escola.diferenciada,\n      activeTab: FORM_CONFIG.DEFAULT_ACTIVE_TAB\n    };\n    \n    setEditingLocation(escolaOriginal);\n  };\n\n  // Função para abrir tabela editável\n  const abrirTabelaEditavel = () => {\n    setEditingLocation({\n      id: 'tabela-editavel',\n      Escola: 'Tabela Editável',\n      activeTab: 'tabela-editavel'\n    });\n  };\n\n  // Função para criar nova escola vazia\n  const criarNovaEscolaVazia = () => {\n    // Limpar modalidades\n    clearModalidades();\n    \n    return {\n      Escola: '',\n      'Município': '',\n      'Endereço': '',\n      'Terra Indigena (TI)': '',\n      'Parcerias com o município': '',\n      'Diretoria de Ensino': '',\n      'Ano de criação da escola': null,\n      'Povos indigenas': '',\n      'Linguas faladas': '',\n      'Modalidade de Ensino/turnos de funcionamento': '',\n      'Numero de alunos': null,\n      'turnos_funcionamento': '',\n      'Espaço escolar e estrutura': '',\n      'Acesso à água': '',\n      'Tem coleta de lixo?': '',\n      'Acesso à internet': '',\n      'Equipamentos Tecs': '',\n      'Modo de acesso à escola': '',\n      'Gestão/Nome': '',\n      'Outros funcionários': '',\n      'Quantidade de professores indígenas': null,\n      'Quantidade de professores não indígenas': null,\n      'Professores falam a língua indígena?': '',\n      'Formação dos professores': '',\n      'Formação continuada oferecida': '',\n      'A escola possui PPP próprio?': '',\n      'PPP elaborado com a comunidade?': '',\n      'Projetos em andamento': '',\n      'Parcerias com universidades?': '',\n      'Ações com ONGs ou coletivos?': '',\n      'Desejos da comunidade para a escola': '',\n      'Escola utiliza redes sociais?': '',\n      'Links das redes sociais': '',\n      'historia_da_escola': '',\n      'Latitude': null,\n      'Longitude': null,\n      'links': '',\n      'link_para_videos': '',\n      'logradouro': '',\n      'numero': '',\n      'complemento': '',\n      'bairro': '',\n      'cep': '',\n      'estado': 'SP',\n      'nome_professor': '',\n      'professores_indigenas': '',\n      'professores_nao_indigenas': '',\n      'professores_falam_lingua_indigena': '',\n      'formacao_professores': '',\n      'visitas_supervisores_formacao': '',\n      'outros_funcionarios': '',\n      'gestao': '',\n      'merenda_diferenciada': '',\n      cozinha: '',\n      merenda_escolar: '',\n      diferenciada: '',\n      activeTab: FORM_CONFIG.DEFAULT_ACTIVE_TAB\n    };\n  };\n\n  // Função para criar nova escola\n  const handleNovaEscola = () => {\n    setEditingLocation(criarNovaEscolaVazia());\n  };\n\n  // Função para abrir modal de remoção - REMOVIDO: não utilizado\n  // const handleRemoverEscola = (escola) => {\n  //   setEscolaToDelete(escola);\n  //   setShowDeleteModal(true);\n  // };\n\n  // Função para verificar se uma aba tem informações faltando\n  const hasMissingInfo = (tabId, escola) => {\n    if (!escola) return false;\n\n    const fieldMappings = {\n      'dados-basicos': ['Escola', 'Município', 'Endereço', 'Terra Indigena (TI)', 'Diretoria de Ensino'],\n      'povos-linguas': ['Povos indigenas', 'Linguas faladas'],\n      'modalidades': ['Modalidade de Ensino/turnos de funcionamento', 'Numero de alunos'],\n      'infraestrutura': ['Espaço escolar e estrutura', 'Acesso à água', 'Acesso à internet'],\n      'gestao-professores': ['Gestão/Nome', 'Quantidade de professores indígenas', 'Quantidade de professores não indígenas'],\n      'material-pedagogico': ['A escola possui PPP próprio?', 'Material pedagógico indígena'],\n      'projetos-parcerias': ['Projetos em andamento', 'Parcerias com universidades?'],\n      'redes-sociais': ['Escola utiliza redes sociais?', 'Links das redes sociais'],\n      'video': ['link_para_videos'],\n      'historias': ['historia_da_escola'],\n      'historia-professores': ['nome_professor'],\n      'coordenadas': ['Latitude', 'Longitude'],\n      'imagens-escola': ['imagem_header'],\n      'imagens-professores': [],\n      'documentos': []\n    };\n\n    const fields = fieldMappings[tabId] || [];\n    \n    return fields.some(field => {\n      const value = escola[field];\n      return value === null || value === undefined || value === '' || value === 'null';\n    });\n  };\n\n  // Função para fazer download de todas as imagens\n  const handleDownloadImages = async () => {\n    try {\n      // Criar um arquivo ZIP com todas as imagens\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n      \n      // Buscar todas as imagens do bucket 'imagens'\n      const { data: imagens, error } = await supabase\n        .storage\n        .from('imagens')\n        .list('', {\n          limit: 1000,\n          offset: 0\n        });\n\n      if (error) {\n        console.error('Erro ao buscar imagens:', error);\n        alert('Erro ao buscar imagens: ' + error.message);\n        return;\n      }\n\n      if (!imagens || imagens.length === 0) {\n        alert('Nenhuma imagem encontrada no bucket.');\n        return;\n      }\n\n      // Mostrar loading\n      const loadingMessage = document.createElement('div');\n      loadingMessage.innerHTML = `\n        <div style=\"position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                    background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 10px; \n                    z-index: 9999; text-align: center;\">\n          <div style=\"margin-bottom: 10px;\">Preparando download...</div>\n          <div style=\"font-size: 12px;\">Encontradas ${imagens.length} imagens</div>\n        </div>\n      `;\n      document.body.appendChild(loadingMessage);\n\n      // Baixar cada imagem e adicionar ao ZIP\n      for (let i = 0; i < imagens.length; i++) {\n        const imagem = imagens[i];\n        \n        try {\n          const { data: imageData, error: downloadError } = await supabase\n            .storage\n            .from('imagens')\n            .download(imagem.name);\n\n          if (downloadError) {\n            console.error(`Erro ao baixar ${imagem.name}:`, downloadError);\n            continue;\n          }\n\n          // Adicionar ao ZIP\n          zip.file(imagem.name, imageData);\n          \n          // Atualizar progresso\n          loadingMessage.innerHTML = `\n            <div style=\"position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                        background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 10px; \n                        z-index: 9999; text-align: center;\">\n              <div style=\"margin-bottom: 10px;\">Preparando download...</div>\n              <div style=\"font-size: 12px;\">${i + 1} de ${imagens.length} imagens processadas</div>\n            </div>\n          `;\n        } catch (err) {\n          console.error(`Erro ao processar ${imagem.name}:`, err);\n        }\n      }\n\n      // Gerar e baixar o ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      \n      // Criar link de download\n      const url = URL.createObjectURL(zipBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `backup-imagens-escolas-${new Date().toISOString().split('T')[0]}.zip`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      // Remover loading\n      document.body.removeChild(loadingMessage);\n      \n      alert(`Download concluído! ${imagens.length} imagens foram baixadas em um arquivo ZIP.`);\n      \n    } catch (error) {\n      console.error('Erro ao fazer download das imagens:', error);\n      alert('Erro ao fazer download das imagens: ' + error.message);\n    }\n  };\n\n  // Função para confirmar remoção\n  const handleConfirmarRemocao = async () => {\n    if (!escolaToDelete) return;\n\n    setIsDeleting(true);\n    try {\n      const result = await deleteEscola(escolaToDelete.id);\n      \n      if (result.success) {\n        setShowDeleteModal(false);\n        setEscolaToDelete(null);\n        // Limpar edição se a escola removida estava sendo editada\n        if (editingLocation?.id === escolaToDelete.id) {\n          setEditingLocation(null);\n        }\n      } else {\n        console.error('Erro ao remover escola:', result.error);\n      }\n    } catch (error) {\n      console.error('Erro ao remover escola:', error);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  // Função para salvar escola\n  const handleSaveEscola = async () => {\n    if (!editingLocation) return;\n\n    setIsSaving(true);\n    setSaveError(null);\n    setSaveSuccess(false);\n\n    try {\n      const result = await saveEscola(editingLocation);\n      \n      if (result.success) {\n        setSaveSuccess(true);\n        // Atualizar o editingLocation com os dados salvos\n        setEditingLocation(result.data);\n        \n        // Limpar mensagem de sucesso após 3 segundos\n        setTimeout(() => {\n          setSaveSuccess(false);\n        }, 3000);\n      } else {\n        setSaveError(result.error);\n      }\n    } catch (error) {\n      setSaveError(error.message);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Renderizar aba ativa\n  const renderActiveTab = () => {\n    const activeTab = editingLocation?.activeTab || FORM_CONFIG.DEFAULT_ACTIVE_TAB;\n\n    switch (activeTab) {\n      case 'dados-basicos':\n        return (\n          <DadosBasicosTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'povos-linguas':\n        return (\n          <PovosLinguasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'modalidades':\n        return (\n          <ModalidadesTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'infraestrutura':\n        return (\n          <InfraestruturaTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'gestao-professores':\n        return (\n          <GestaoProfessoresTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'material-pedagogico':\n        return (\n          <MaterialPedagogicoTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'projetos-parcerias':\n        return (\n          <ProjetosParceriasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'redes-sociais':\n        return (\n          <RedesSociaisTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'video':\n        return (\n          <VideoTab \n            editingLocation={editingLocation}\n          />\n        );\n      \n      case 'historias':\n        return (\n          <HistoriasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'historia-professores':\n        return (\n          <HistoriaProfessoresTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'coordenadas':\n        return (\n          <CoordenadasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'historias-professor':\n        return <div className=\"text-center py-16\">\n          <div className=\"max-w-md mx-auto\">\n            <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n              Tabela de Histórias dos Professores\n            </h3>\n            <p className=\"text-gray-400 mb-8\">\n              Funcionalidade em desenvolvimento...\n            </p>\n          </div>\n        </div>;\n      \n      case 'documentos-escola':\n        return <div className=\"text-center py-16\">\n          <div className=\"max-w-md mx-auto\">\n            <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n              Tabela de Documentos das Escolas\n            </h3>\n            <p className=\"text-gray-400 mb-8\">\n              Funcionalidade em desenvolvimento...\n            </p>\n          </div>\n        </div>;\n      \n      case 'imagens-escola':\n        if (!ImagensEscolaTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <ImagensEscolaTab editingLocation={editingLocation} />;\n      \n      case 'imagens-professores':\n        if (!ImagensProfessoresTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <ImagensProfessoresTab editingLocation={editingLocation} />;\n      \n      case 'documentos':\n        if (!DocumentosTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <DocumentosTab editingLocation={editingLocation} />;\n      \n      // TODO: Implementar outras abas\n      default:\n        return (\n          <div className=\"text-gray-400 text-center py-8\">\n            Aba \"{activeTab}\" em desenvolvimento...\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950\">\n      {/* Sidebar */}\n      <AdminSidebar\n        isMobile={isMobile}\n        sidebarOpen={sidebarOpen}\n        setSidebarOpen={setSidebarOpen}\n        editingLocation={editingLocation}\n        onEscolaSelect={openEditModal}\n      />\n\n      {/* Conteúdo principal */}\n      <main className=\"flex-1 p-4 lg:p-8 overflow-y-auto h-screen\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl lg:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300 mb-2\">\n            Painel de Administração\n          </h1>\n        </div>\n        \n        {/* Toolbar */}\n        <AdminToolbar\n          searchTerm={searchTerm}\n          setSearchTerm={setSearchTerm}\n          selectedType={selectedType}\n          setSelectedType={setSelectedType}\n          onNovaEscola={handleNovaEscola}\n        />\n\n        {/* Loading state */}\n        {escolasLoading && (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-400 mx-auto mb-4\"></div>\n              <div className=\"text-gray-400 text-lg\">Carregando escolas...</div>\n            </div>\n          </div>\n        )}\n\n        {/* Error state */}\n        {escolasError && (\n          <div className=\"bg-red-900/50 border border-red-700/50 text-red-200 px-6 py-4 rounded-xl mb-6 backdrop-blur-sm\">\n            <div className=\"flex items-center gap-3\">\n              <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-semibold\">Erro ao carregar escolas</h3>\n                <p className=\"text-red-300\">{escolasError}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Tabela Editável em Tela Cheia */}\n        {editingLocation && editingLocation.activeTab === 'tabela-editavel' && (\n          <div className=\"fixed inset-0 bg-gray-900 z-40 overflow-hidden\" style={{ top: '72px' }}>\n            <TabelaEditavelTab setEditingLocation={setEditingLocation} />\n          </div>\n        )}\n\n        {/* Painel de Edição */}\n        {editingLocation && typeof editingLocation === 'object' && (editingLocation.Escola !== undefined) && editingLocation.activeTab !== 'tabela-editavel' && (\n          <div className=\"bg-gray-900/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 p-6 flex flex-col\">\n            {/* Header do painel */}\n            <div className=\"flex justify-between items-center mb-6 flex-shrink-0\">\n              <div>\n                <h2 className=\"text-xl lg:text-2xl font-semibold text-gray-100 mb-1\">\n                {editingLocation.id ? 'Editar Escola' : 'Nova Escola'}\n              </h2>\n                {editingLocation.Escola && (\n                  <p className=\"text-gray-400 text-sm\">{editingLocation.Escola}</p>\n                )}\n              </div>\n              <div className=\"flex items-center gap-3\">\n                {/* Botão Salvar */}\n                <button\n                  onClick={handleSaveEscola}\n                  disabled={isSaving}\n                  className=\"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl\"\n                >\n                  {isSaving ? (\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      Salvando...\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center gap-2\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Salvar\n                    </div>\n                  )}\n                </button>\n                \n                {/* Botão Fechar */}\n                <button\n                  onClick={() => setEditingLocation(null)}\n                  className=\"px-4 py-3 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition-colors\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Mensagens de feedback */}\n            {saveSuccess && (\n              <div className=\"mb-6 p-4 bg-green-900/50 border border-green-700/50 text-green-200 rounded-xl backdrop-blur-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-6 h-6 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"font-semibold\">Escola salva com sucesso!</span>\n                </div>\n              </div>\n            )}\n            \n            {saveError && (\n              <div className=\"mb-6 p-4 bg-red-900/50 border border-red-700/50 text-red-200 rounded-xl backdrop-blur-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <div>\n                    <span className=\"font-semibold\">Erro ao salvar:</span>\n                    <p className=\"text-red-300\">{saveError}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Navegação por abas */}\n            <div className=\"border-b border-gray-800 mb-6 flex-shrink-0 bg-gray-800/50 rounded-t-xl relative\">\n              <nav className=\"-mb-px flex space-x-1 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 tabs-container\">\n                {ADMIN_TABS.map((tab) => {\n                  const isActive = (editingLocation.activeTab || FORM_CONFIG.DEFAULT_ACTIVE_TAB) === tab.id;\n                  const hasMissing = hasMissingInfo(tab.id, editingLocation);\n                  \n                  return (\n                    <button\n                      key={tab.id}\n                      type=\"button\"\n                      onClick={() => setEditingLocation({ ...editingLocation, activeTab: tab.id })}\n                      className={`whitespace-nowrap py-3 px-3 sm:px-4 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 rounded-t-lg flex-shrink-0 min-w-fit relative ${\n                        isActive\n                          ? 'border-green-400 text-green-300 bg-gray-900 shadow-lg'\n                          : hasMissing\n                          ? 'border-orange-400 text-orange-300 bg-orange-900/20 hover:text-orange-200 hover:bg-orange-800/30'\n                          : 'border-transparent text-gray-400 hover:text-green-200 hover:bg-gray-700/50'\n                      }`}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        {tab.label}\n                        {hasMissing && !isActive && (\n                          <div className=\"w-2 h-2 bg-orange-400 rounded-full animate-pulse\"></div>\n                        )}\n                      </div>\n                    </button>\n                  );\n                })}\n              </nav>\n            </div>\n\n            {/* Conteúdo da aba ativa */}\n            <div className=\"scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800\">\n              {renderActiveTab()}\n            </div>\n          </div>\n        )}\n\n        {/* Dashboard de Completude quando nenhuma escola está selecionada */}\n        {!editingLocation && !escolasLoading && (\n          <div className=\"space-y-8\">\n            {/* Dashboard de Completude - só aparece quando solicitado */}\n            {showCompletenessDashboard && (\n              <CompletenessDashboard />\n            )}\n            \n            {/* Ações do Painel */}\n            <div className=\"bg-gray-900/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 p-6\">\n              <div className=\"text-center mb-8\">\n                <div className=\"w-24 h-24 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n                  Ações do Painel de Administração\n                </h3>\n                <p className=\"text-gray-400 mb-8\">\n                  Escolha uma ação para gerenciar as escolas indígenas. Você pode criar novas escolas, editar dados em tabelas, fazer backup ou remover escolas.\n                </p>\n              </div>\n              {/* Grid de Ações */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                \n                {/* Ações Principais */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                    </svg>\n                    Ações Principais\n                  </h4>\n                  \n                  <button\n                    onClick={handleNovaEscola}\n                    className=\"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 shadow-lg hover:shadow-xl text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                      </svg>\n                      Criar Nova Escola\n                    </div>\n                  </button>\n\n                  <button\n                    onClick={abrirTabelaEditavel}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                      Editar em Tabela\n                    </div>\n                  </button>\n                </div>\n\n                {/* Análise e Relatórios */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                    </svg>\n                    Análise e Relatórios\n                  </h4>\n                  \n                  <button\n                    onClick={() => setShowCompletenessDashboard(!showCompletenessDashboard)}\n                    className={`w-full px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border text-sm ${\n                      showCompletenessDashboard \n                        ? 'bg-green-800 text-green-100 border-green-600 hover:bg-green-700' \n                        : 'bg-gray-800 text-gray-100 border-gray-600 hover:bg-gray-700'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                      </svg>\n                      {showCompletenessDashboard ? 'Ocultar Dashboard' : 'Ver Dashboard'}\n                    </div>\n                  </button>\n                </div>\n\n                {/* Backup de Mídia */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                    </svg>\n                    Backup de Mídia\n                  </h4>\n                  \n                  <button\n                    onClick={handleDownloadImages}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                      </svg>\n                      Download Imagens\n                    </div>\n                  </button>\n                </div>\n\n                {/* Administração do Sistema */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-orange-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    </svg>\n                    Administração\n                  </h4>\n                  \n                  <button\n                    onClick={() => setShowBackupModal(true)}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                      </svg>\n                      Backup dos Dados\n                    </div>\n                  </button>\n\n                  <button\n                    onClick={() => setShowDeleteModal(true)}\n                    className=\"w-full px-4 py-3 bg-red-800 text-red-100 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-red-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                      Remover Escola\n                    </div>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Modal de Backup */}\n        {showBackupModal && (\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n              {/* Header da Modal */}\n              <div className=\"flex justify-between items-center p-6 border-b border-gray-800/50 flex-shrink-0\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-blue-500 p-3 rounded-lg\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-semibold text-gray-100\">Backup dos Dados do Site</h2>\n                    <p className=\"text-sm text-gray-400\">Gerencie backups das tabelas e arquivos</p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setShowBackupModal(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Conteúdo da Modal */}\n              <div className=\"flex-1 overflow-y-auto p-6\">\n                <TabelasIntegraisTab />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Modal de Remoção de Escola */}\n        {showDeleteModal && (\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 w-full max-w-md\">\n              {/* Header da Modal */}\n              <div className=\"flex justify-between items-center p-6 border-b border-gray-800/50\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-red-500 p-3 rounded-lg\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-semibold text-gray-100\">Remover Escola</h2>\n                    <p className=\"text-sm text-gray-400\">Selecione uma escola para remover</p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setShowDeleteModal(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Conteúdo da Modal */}\n              <div className=\"p-6\">\n                {!escolaToDelete ? (\n                  <div className=\"space-y-4\">\n                    <p className=\"text-gray-300 mb-4\">\n                      Selecione uma escola da lista para remover:\n                    </p>\n                    <div className=\"max-h-64 overflow-y-auto space-y-2\">\n                      {filteredEscolas.map(escola => (\n                        <button\n                          key={escola.id}\n                          onClick={() => setEscolaToDelete(escola)}\n                          className=\"w-full text-left p-4 rounded-xl hover:bg-gray-800/50 transition-all duration-200 border border-transparent hover:border-gray-700/50 text-gray-200 hover:text-white\"\n                        >\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-medium truncate text-gray-200\">\n                                {escola.Escola}\n                              </h3>\n                              {escola['Município'] && (\n                                <p className=\"text-sm text-gray-400 truncate mt-1\">\n                                  {escola['Município']}\n                                </p>\n                              )}\n                            </div>\n                            <div className=\"ml-2 flex-shrink-0\">\n                              <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                              </svg>\n                            </div>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-red-900/20 border border-red-700/50 rounded-xl p-4\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                        </svg>\n                        <h3 className=\"font-semibold text-red-200\">Confirmar Remoção</h3>\n                      </div>\n                      <p className=\"text-red-300 text-sm\">\n                        Você está prestes a remover a escola <strong>\"{escolaToDelete.Escola}\"</strong> de <strong>\"{escolaToDelete['Município']}\"</strong>.\n                      </p>\n                      <p className=\"text-red-400 text-sm mt-2\">\n                        ⚠️ Esta ação é irreversível e removerá todos os dados da escola do sistema.\n                      </p>\n                    </div>\n\n                    <div className=\"flex gap-3\">\n                      <button\n                        onClick={() => setEscolaToDelete(null)}\n                        className=\"flex-1 px-4 py-3 bg-gray-700 text-gray-200 rounded-xl hover:bg-gray-600 transition-colors\"\n                      >\n                        Cancelar\n                      </button>\n            <button\n                        onClick={handleConfirmarRemocao}\n                        disabled={isDeleting}\n                        className=\"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\n                      >\n                        {isDeleting ? (\n                          <div className=\"flex items-center gap-2 justify-center\">\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                            Removendo...\n                          </div>\n                        ) : (\n                          <div className=\"flex items-center gap-2 justify-center\">\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                            </svg>\n                            Confirmar Remoção\n                          </div>\n                        )}\n            </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nconst AdminPanel = () => {\n  return (\n    <ProtectedRoute>\n      <AdminPanelContent />\n    </ProtectedRoute>\n  );\n};\n\nexport default AdminPanel; ","import { supabase } from '../supabaseClient';\n\nexport const addProfessorImageMeta = async (meta) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .insert([meta])\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const updateProfessorImageMeta = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const getProfessorImageMetaByUrl = async (imagem_url, escola_id) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .select('*')\n    .eq('imagem_url', imagem_url)\n    .eq('escola_id', escola_id)\n    .eq('ativo', true)\n    .single();\n  if (error && error.code !== 'PGRST116') throw error;\n  return data || null;\n}; ","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, User, Trash2, Check, AlertCircle, Save, RefreshCw } from 'lucide-react';\nimport { \n  uploadProfessorImage, \n  getEscolaImages, \n  deleteImage, \n  replaceImage\n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable\n} from '../../services/legendasService';\nimport {\n  addProfessorImageMeta,\n  updateProfessorImageMeta,\n  getProfessorImageMetaByUrl\n} from '../../services/professorImageMetaService';\n\nconst ProfessorImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [genero] = useState('professor');\n  const [titulo] = useState('');\n  \n  // Estados para trocar imagem\n  const [replacingImage, setReplacingImage] = useState(null);\n  const [replacementFile, setReplacementFile] = useState(null);\n\n  // Buscar imagens existentes dos professores\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-professores');\n      setExistingImages(images);\n      \n\n    } catch (err) {\n      console.error('Erro ao buscar imagens dos professores:', err);\n      setError('Erro ao carregar imagens dos professores');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchExistingImages();\n  }, [fetchExistingImages]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos (professores)...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length) return;\n      console.log('Buscando legendas para', existingImages.length, 'imagens de professores');\n      const legendasMap = {};\n      for (const img of existingImages) {\n        console.log('Buscando legenda para imagem de professor:', img.url);\n        const legenda = await getLegendaByImageUrl(img.url, escolaId, 'professor');\n        console.log('Legenda encontrada para professor:', legenda);\n        legendasMap[img.url] = legenda;\n      }\n      setExistingImages(prev => prev.map(img => ({\n        ...img,\n        legendaData: legendasMap[img.url] || {\n          legenda: '',\n          descricao_detalhada: '',\n          autor_foto: '',\n          data_foto: '',\n          categoria: 'geral',\n        }\n      })));\n    };\n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens após 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleção de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" não é uma imagem válida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\" é muito grande. Tamanho máximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, []);\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadProfessorImage(file, escolaId, '', genero, titulo);\n        uploadedImages.push(uploadedImage);\n\n        // Criar registro em imagens_professores\n        await addProfessorImageMeta({\n          escola_id: escolaId,\n          imagem_url: uploadedImage.url,\n          nome_arquivo: file.name,\n          autor: '',\n          ativo: true\n        });\n      }\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => [...prev, ...uploadedImages]);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) do(s) professor(es) carregada(s) com sucesso!`);\n\n\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem do professor?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-professores');\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.filter(img => img.id !== imageId));\n      \n\n\n      setSuccess('Imagem do professor excluída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Trocar imagem existente\n  const handleReplaceImage = async (imageId, oldFilePath) => {\n    if (!replacementFile) {\n      setError('Selecione uma nova imagem para substituir');\n      return;\n    }\n\n    try {\n      setUploading(true);\n      setError('');\n\n      // Substituir a imagem\n      const newImage = await replaceImage(\n        replacementFile, \n        oldFilePath, \n        escolaId, \n        'imagens-professores',\n        existingImages.find(img => img.id === imageId)?.descricao || ''\n      );\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => prev.map(img => \n        img.id === imageId ? newImage : img\n      ));\n\n      // Limpar estados\n      setReplacingImage(null);\n      setReplacementFile(null);\n      setSuccess('Imagem do professor substituída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao substituir imagem:', err);\n      setError(`Erro ao substituir imagem: ${err.message}`);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Iniciar processo de trocar imagem\n  const startReplaceImage = (imageId) => {\n    setReplacingImage(imageId);\n    setReplacementFile(null);\n  };\n\n  // Cancelar troca de imagem\n  const cancelReplaceImage = () => {\n    setReplacingImage(null);\n    setReplacementFile(null);\n  };\n\n  // Selecionar arquivo para substituição\n  const handleReplacementFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setReplacementFile(file);\n    }\n  };\n\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda de professor ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    // Validar e limpar dados da legenda\n    const cleanLegendaData = { ...legendaData };\n    \n    // Tratar campo data_foto - remover se estiver vazio\n    if (!cleanLegendaData.data_foto || cleanLegendaData.data_foto.trim() === '') {\n      delete cleanLegendaData.data_foto;\n    }\n    \n    // Tratar outros campos vazios que podem causar problemas\n    Object.keys(cleanLegendaData).forEach(key => {\n      if (cleanLegendaData[key] === '') {\n        delete cleanLegendaData[key];\n      }\n    });\n    \n    console.log('Dados limpos da legenda:', cleanLegendaData);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'professor');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...cleanLegendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualização:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda de professor atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...cleanLegendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'professor'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda de professor criada:', novaLegenda);\n      }\n      \n      // Atualizar imagens_professores\n      console.log('Atualizando metadados da imagem...');\n      let meta = await getProfessorImageMetaByUrl(image.publicUrl, escolaId);\n      if (meta) {\n        console.log('Metadados encontrados:', meta);\n        await updateProfessorImageMeta(meta.id, {\n          autor: cleanLegendaData.autor_foto,\n          updated_at: new Date().toISOString()\n        });\n        console.log('Metadados atualizados com sucesso');\n      } else {\n        console.log('Nenhum metadado encontrado para atualizar');\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda de professor ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      setError('Erro ao salvar legenda: ' + err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-800/30 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-400\"></div>\n          <span className=\"ml-2 text-gray-400\">Carregando imagens dos professores...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <User className=\"w-5 h-5 text-green-400\" />\n          <h3 className=\"text-lg font-semibold text-gray-100\">Imagens dos Professores</h3>\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          {existingImages.length} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-900/50 border-red-700/50 rounded-xl\">\n          <AlertCircle className=\"w-5 h-5 text-red-400\" />\n          <span className=\"text-red-300\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-900/50 border-green-700/50 rounded-xl\">\n          <Check className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-green-300\">{success}</span>\n        </div>\n      )}\n\n      {/* Área de Upload */}\n      <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-600 bg-gray-800/50' \n                : 'border-gray-600 bg-gray-800/50 hover:border-green-400 hover:bg-gray-700/50'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-green-400 mx-auto mb-2\" />\n            <p className=\"text-gray-300 mb-2\">\n              Arraste imagens dos professores aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-400 mb-4\">\n              JPG, PNG, WEBP, GIF • Máximo 5MB por arquivo • Máximo 5 imagens\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-400\">\n                <span>Fazendo upload das imagens dos professores...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-100\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-400 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-100\">Imagens dos Professores ({existingImages.length})</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image) => (\n              <div key={image.id} className=\"bg-gray-800/50 border border-gray-700/50 rounded-lg overflow-hidden shadow-sm\">\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem do professor'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Overlay de ações */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button\n                      onClick={() => startReplaceImage(image.id)}\n                      className=\"p-2 bg-orange-500 text-white rounded-full hover:bg-orange-700\"\n                      title=\"Trocar imagem\"\n                    >\n                      <RefreshCw className=\"w-5 h-5\" />\n                    </button>\n                    \n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Descrição Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrição detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotógrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Trocar Imagem */}\n      {replacingImage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-100\">Trocar Imagem do Professor</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Selecione a nova imagem\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                  onChange={handleReplacementFileSelect}\n                  className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                />\n              </div>\n              \n              {replacementFile && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                    Pré-visualização\n                  </label>\n                  <img\n                    src={URL.createObjectURL(replacementFile)}\n                    alt=\"Nova imagem\"\n                    className=\"w-full h-32 object-cover rounded-lg border border-gray-600\"\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={cancelReplaceImage}\n                className=\"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={() => handleReplaceImage(replacingImage, existingImages.find(img => img.id === replacingImage)?.url)}\n                disabled={!replacementFile || uploading}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Trocando...' : 'Trocar Imagem'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando não há imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-400\">\n          <User className=\"w-12 h-12 mx-auto mb-2 text-gray-500\" />\n          <p>Nenhuma imagem dos professores adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar os professores da escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nProfessorImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ProfessorImageUploadSection;","import React from 'react';\nimport ProfessorImageUploadSection from '../../EditEscolaPanel/ProfessorImageUploadSection';\n\nconst ImagensProfessoresTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar as imagens dos professores</p>\n      </div>\n    );\n  }\n\n  return (\n    <ProfessorImageUploadSection \n      escolaId={escolaId}\n      onImagesUpdate={() => {\n        // Callback para atualizar dados se necessário\n        console.log('Imagens dos professores atualizadas');\n      }}\n    />\n  );\n};\n\nexport default ImagensProfessoresTab; ","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, File, X, AlertCircle } from 'lucide-react';\nimport { uploadPDF } from '../../../services/uploadService';\nimport { FILE_RESTRICTIONS } from '../../../config/storage';\n\nconst PDFUploadSection = ({ onUploadComplete, onRemove, existingUrls = [] }) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [previewUrls, setPreviewUrls] = useState(existingUrls);\n\n  const handleFileSelect = async (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validate each file\n    const validFiles = files.filter(file => {\n      const isValidType = FILE_RESTRICTIONS.PDF.ALLOWED_TYPES.includes(file.type);\n      const isValidSize = file.size <= FILE_RESTRICTIONS.PDF.MAX_SIZE;\n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length !== files.length) {\n      setError('Alguns arquivos foram ignorados. Use apenas PDFs até 10MB.');\n    }\n\n    setSelectedFiles(prev => [...prev, ...validFiles]);\n  };\n\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setIsUploading(true);\n    setError(null);\n    const uploadedUrls = [];\n\n    try {\n      for (const file of selectedFiles) {\n        const url = await uploadPDF(file);\n        uploadedUrls.push(url);\n      }\n\n      const allUrls = [...previewUrls, ...uploadedUrls];\n      setPreviewUrls(allUrls);\n      onUploadComplete(allUrls);\n      setSelectedFiles([]);\n    } catch (err) {\n      setError('Erro ao fazer upload dos arquivos. Tente novamente.');\n      console.error('Erro no upload:', err);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleRemove = (index) => {\n    const newUrls = previewUrls.filter((_, i) => i !== index);\n    setPreviewUrls(newUrls);\n    onRemove(newUrls);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"block font-medium text-gray-800\">\n          Documentos PDF\n          <span className=\"text-sm text-gray-500 ml-2\">\n            (Máx. {FILE_RESTRICTIONS.PDF.MAX_SIZE / (1024 * 1024)}MB cada arquivo)\n          </span>\n        </label>\n        {error && (\n          <div className=\"flex items-center text-red-500 text-sm\">\n            <AlertCircle size={16} className=\"mr-1\" />\n            {error}\n          </div>\n        )}\n      </div>\n\n      {/* File Input */}\n      <div className=\"grid grid-cols-1 gap-4\">\n        <label className=\"cursor-pointer\">\n          <input\n            type=\"file\"\n            accept=\".pdf\"\n            multiple\n            onChange={handleFileSelect}\n            className=\"hidden\"\n            disabled={isUploading}\n          />\n          <div className={`flex items-center justify-center gap-2 border-2 border-dashed rounded-lg p-4 \n            ${isUploading ? 'border-gray-300 bg-gray-50' : 'border-blue-300 hover:border-blue-400 bg-blue-50'}`}>\n            <Upload size={20} className={isUploading ? 'text-gray-400' : 'text-blue-500'} />\n            <span className={isUploading ? 'text-gray-500' : 'text-blue-600'}>\n              {isUploading ? 'Fazendo upload...' : 'Selecionar PDFs'}\n            </span>\n          </div>\n        </label>\n\n        {/* Selected Files Preview */}\n        {selectedFiles.length > 0 && (\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-sm text-gray-700\">Arquivos selecionados:</h4>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {selectedFiles.map((file, index) => (\n                <div key={index} className=\"flex items-center justify-between bg-gray-50 p-2 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <File size={16} className=\"text-gray-500\" />\n                    <span className=\"text-sm text-gray-700\">{file.name}</span>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => setSelectedFiles(prev => prev.filter((_, i) => i !== index))}\n                    className=\"text-gray-500 hover:text-red-500\"\n                  >\n                    <X size={16} />\n                  </button>\n                </div>\n              ))}\n            </div>\n            <button\n              type=\"button\"\n              onClick={handleUpload}\n              disabled={isUploading}\n              className={`w-full py-2 px-4 rounded-lg text-white font-medium\n                ${isUploading ? 'bg-gray-400' : 'bg-blue-500 hover:bg-blue-600'}`}\n            >\n              {isUploading ? 'Enviando...' : 'Fazer Upload'}\n            </button>\n          </div>\n        )}\n\n        {/* Uploaded Files Preview */}\n        {previewUrls.length > 0 && (\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-sm text-gray-700\">Documentos enviados:</h4>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {previewUrls.map((url, index) => (\n                <div key={index} className=\"flex items-center justify-between bg-gray-50 p-2 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <File size={16} className=\"text-gray-500\" />\n                    <a\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      Documento {index + 1}\n                    </a>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemove(index)}\n                    className=\"text-gray-500 hover:text-red-500\"\n                  >\n                    <X size={16} />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nPDFUploadSection.propTypes = {\n  onUploadComplete: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  existingUrls: PropTypes.arrayOf(PropTypes.string),\n};\n\nexport default PDFUploadSection; ","import React, { useState } from 'react';\nimport PDFUploadSection from '../../AddLocationPanel/components/PDFUploadSection';\n\nconst DocumentosTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n  const [documentos, setDocumentos] = useState(editingLocation?.documentos || []);\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar seus documentos</p>\n      </div>\n    );\n  }\n\n  const handleUploadComplete = (urls) => {\n    setDocumentos(urls);\n    // Aqui você pode salvar os documentos no banco de dados se necessário\n    console.log('Documentos atualizados:', urls);\n  };\n\n  const handleRemove = (urls) => {\n    setDocumentos(urls);\n    // Aqui você pode atualizar o banco de dados se necessário\n    console.log('Documentos após remoção:', urls);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n          Documentos da Escola\n        </h3>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Faça upload de documentos da escola em formato PDF. Não há limite no número de documentos.\n        </p>\n        \n        <PDFUploadSection \n          onUploadComplete={handleUploadComplete}\n          onRemove={handleRemove}\n          existingUrls={documentos}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentosTab; ","import { supabase } from '../supabaseClient';\nimport { \n  STORAGE_BUCKETS, \n  FILE_PATHS, \n  validateFile, \n  generateUniqueFileName,\n  getFileType \n} from '../config/storage';\n\n/**\n * Uploads a file to the specified bucket\n * @param {File} file - The file to upload\n * @param {string} bucket - The bucket to upload to (defaults to 'pdfs')\n * @returns {Promise<string>} The public URL of the uploaded file\n */\nexport const uploadFile = async (file, bucket = STORAGE_BUCKETS.PDFS) => {\n  try {\n    const fileType = getFileType(file);\n    if (!fileType) {\n      throw new Error('Tipo de arquivo não suportado');\n    }\n\n    const validation = validateFile(file, fileType);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    const fileName = generateUniqueFileName(file, `${fileType.toLowerCase()}_`);\n    const filePath = `${FILE_PATHS[fileType]}/${fileName}`;\n\n    const { error: uploadError } = await supabase.storage\n      .from(bucket)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw uploadError;\n    }\n\n    const { data: { publicUrl } } = supabase.storage\n      .from(bucket)\n      .getPublicUrl(filePath);\n\n    return publicUrl;\n  } catch (error) {\n    console.error('Erro ao fazer upload:', error);\n    throw error;\n  }\n};\n\n/**\n * Uploads a PDF file to the pdfs bucket\n * @param {File} file - The PDF file to upload\n * @returns {Promise<string>} The public URL of the uploaded PDF\n */\nexport const uploadPDF = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.PDFS);\n};\n\n/**\n * Uploads an image file to the media bucket\n * @param {File} file - The image file to upload\n * @returns {Promise<string>} The public URL of the uploaded image\n */\nexport const uploadImage = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.MEDIA);\n};\n\n/**\n * Uploads an audio file to the media bucket\n * @param {File} file - The audio file to upload\n * @returns {Promise<string>} The public URL of the uploaded audio\n */\nexport const uploadAudio = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.MEDIA);\n};\n\n/**\n * Deletes a file from the specified bucket\n * @param {string} filePath - The path of the file to delete\n * @param {string} bucket - The bucket containing the file\n * @returns {Promise<void>}\n */\nexport const deleteFile = async (filePath, bucket = STORAGE_BUCKETS.PDFS) => {\n  try {\n    const { error } = await supabase.storage\n      .from(bucket)\n      .remove([filePath]);\n\n    if (error) {\n      throw error;\n    }\n  } catch (error) {\n    console.error('Erro ao deletar arquivo:', error);\n    throw error;\n  }\n}; ","import { supabase } from '../supabaseClient';\n\n/**\n * Serviço para gerenciar legendas de fotos\n */\n\n/**\n * Testar se a tabela legendas_fotos existe e está acessível\n * @returns {Promise<boolean>} True se a tabela existe\n */\nexport const testLegendasTable = async () => {\n  try {\n    const { error } = await supabase\n      .from('legendas_fotos')\n      .select('count')\n      .limit(1);\n    \n    if (error) {\n      console.warn('Tabela legendas_fotos não encontrada ou sem permissão:', error.message);\n      return false;\n    }\n    \n    console.log('Tabela legendas_fotos acessível');\n    return true;\n  } catch (error) {\n    console.warn('Erro ao testar tabela legendas_fotos:', error.message);\n    return false;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (todos os atributos opcionais)\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @param {Object} options - Opções de busca (todos opcionais)\n * @param {string} options.categoria - Categoria da imagem\n * @param {string} options.tipo_foto - Tipo da foto\n * @param {boolean} options.ativo - Se deve buscar apenas ativas\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrl = async (imageUrl, escolaId, options = {}) => {\n  try {\n    let query = supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId);\n\n    // Aplicar filtros opcionais\n    if (options.ativo !== false) { // Por padrão, busca apenas ativas\n      query = query.eq('ativo', true);\n    }\n    \n    if (options.categoria) {\n      query = query.eq('categoria', options.categoria);\n    }\n    \n    if (options.tipo_foto) {\n      query = query.eq('tipo_foto', options.tipo_foto);\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: false });\n\n    if (error) {\n      console.warn('Erro ao buscar legenda:', error.message);\n      return null;\n    }\n\n    // Retorna a primeira legenda encontrada (mais recente)\n    return data && data.length > 0 ? data[0] : null;\n  } catch (error) {\n    console.warn('Erro ao buscar legenda:', error.message);\n    return null;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (busca flexível com múltiplas estratégias)\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @param {Object} preferencias - Preferências de busca (todos opcionais)\n * @param {string} preferencias.categoria - Categoria preferida\n * @param {string} preferencias.tipo_foto - Tipo de foto preferido\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrlFlexivel = async (imageUrl, escolaId, preferencias = {}) => {\n  try {\n    console.log(`🔍 Buscando legenda flexível para: ${imageUrl} (escola: ${escolaId})`);\n    \n    // Estratégia 1: Busca com preferências específicas\n    if (preferencias.categoria || preferencias.tipo_foto) {\n      console.log('  📋 Tentativa 1: Busca com preferências específicas');\n      const legenda = await getLegendaByImageUrl(imageUrl, escolaId, preferencias);\n      if (legenda) {\n        console.log('  ✅ Encontrada com preferências específicas');\n        return legenda;\n      }\n    }\n\n    // Estratégia 2: Busca apenas por URL e escola (sem outros filtros)\n    console.log('  📋 Tentativa 2: Busca apenas por URL e escola');\n    const { data: data2, error: error2 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('created_at', { ascending: false });\n\n    if (error2) {\n      console.warn('  ❌ Erro na busca por URL e escola:', error2.message);\n    } else if (data2 && data2.length > 0) {\n      console.log('  ✅ Encontrada por URL e escola');\n      return data2[0];\n    }\n\n    // Estratégia 3: Busca incluindo legendas inativas\n    console.log('  📋 Tentativa 3: Busca incluindo legendas inativas');\n    const { data: data3, error: error3 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', imageUrl)\n      .eq('escola_id', escolaId)\n      .order('created_at', { ascending: false });\n\n    if (error3) {\n      console.warn('  ❌ Erro na busca incluindo inativas:', error3.message);\n    } else if (data3 && data3.length > 0) {\n      console.log('  ✅ Encontrada incluindo legendas inativas');\n      return data3[0];\n    }\n\n    // Estratégia 4: Busca por nome do arquivo (sem caminho completo)\n    const nomeArquivo = imageUrl.split('/').pop();\n    console.log(`  📋 Tentativa 4: Busca por nome do arquivo: ${nomeArquivo}`);\n    const { data: data4, error: error4 } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .ilike('imagem_url', `%${nomeArquivo}`)\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('created_at', { ascending: false });\n\n    if (error4) {\n      console.warn('  ❌ Erro na busca por nome do arquivo:', error4.message);\n    } else if (data4 && data4.length > 0) {\n      console.log('  ✅ Encontrada por nome do arquivo');\n      return data4[0];\n    }\n\n    console.log('  ❌ Nenhuma legenda encontrada com todas as estratégias');\n    return null;\n\n  } catch (error) {\n    console.warn('Erro ao buscar legenda flexível:', error.message);\n    return null;\n  }\n};\n\n/**\n * Buscar legenda por URL da imagem (sem filtro de categoria) - MANTIDA PARA COMPATIBILIDADE\n * @param {string} imageUrl - URL da imagem\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Object|null>} Legenda encontrada ou null\n */\nexport const getLegendaByImageUrlAnyCategory = async (imageUrl, escolaId) => {\n  return getLegendaByImageUrlFlexivel(imageUrl, escolaId);\n};\n\n/**\n * Adicionar nova legenda de foto\n * @param {Object} legendaData - Dados da legenda\n * @returns {Promise<Object>} Legenda criada\n */\nexport const addLegendaFoto = async (legendaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .insert([legendaData])\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Erro ao adicionar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar legenda de foto existente\n * @param {number} legendaId - ID da legenda\n * @param {Object} updateData - Dados para atualizar\n * @returns {Promise<Object>} Legenda atualizada\n */\nexport const updateLegendaFoto = async (legendaId, updateData) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .update(updateData)\n      .eq('id', legendaId)\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Erro ao atualizar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar legenda de foto\n * @param {number} legendaId - ID da legenda\n * @returns {Promise<boolean>} True se deletado com sucesso\n */\nexport const deleteLegendaFoto = async (legendaId) => {\n  try {\n    const { error } = await supabase\n      .from('legendas_fotos')\n      .delete()\n      .eq('id', legendaId);\n\n    if (error) {\n      throw error;\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Erro ao deletar legenda:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar todas as legendas de uma escola\n * @param {number} escolaId - ID da escola\n * @param {string} categoria - Categoria das imagens (opcional)\n * @returns {Promise<Array>} Lista de legendas\n */\nexport const getLegendasByEscola = async (escolaId, categoria = null) => {\n  try {\n    let query = supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('escola_id', escolaId);\n\n    if (categoria) {\n      query = query.eq('categoria', categoria);\n    }\n\n    const { data, error } = await query.order('created_at', { ascending: false });\n\n    if (error) {\n      throw error;\n    }\n\n    return data || [];\n  } catch (error) {\n    console.error('Erro ao buscar legendas da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar título personalizado de vídeo por URL\n * @param {string} videoUrl - URL do vídeo\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Object|null>} Título encontrado ou null\n */\nexport const getTituloByVideoUrl = async (videoUrl, escolaId) => {\n  try {\n    const { data, error } = await supabase\n      .from('legendas_fotos')\n      .select('*')\n      .eq('imagem_url', videoUrl)\n      .eq('escola_id', escolaId)\n      .eq('categoria', 'video')\n      .single();\n\n    if (error) {\n      // Se não encontrar, retorna null (não é erro)\n      if (error.code === 'PGRST116') {\n        return null;\n      }\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.warn('Erro ao buscar título do vídeo:', error.message);\n    return null;\n  }\n};\n\nconst LegendasService = {\n  testLegendasTable,\n  getLegendaByImageUrl,\n  getLegendaByImageUrlFlexivel,\n  getLegendaByImageUrlAnyCategory,\n  addLegendaFoto,\n  updateLegendaFoto,\n  deleteLegendaFoto,\n  getLegendasByEscola,\n  getTituloByVideoUrl\n};\n\nexport default LegendasService;\n","// Storage configuration constants\n\nexport const STORAGE_BUCKETS = {\n  PDFS: 'pdfs',\n  MEDIA: 'media', // Keeping for backward compatibility\n};\n\nexport const FILE_RESTRICTIONS = {\n  PDF: {\n    MAX_SIZE: 10 * 1024 * 1024, // 10MB\n    ALLOWED_TYPES: ['application/pdf'],\n    MAX_FILES: Infinity, // Sem limite\n  },\n  IMAGE: {\n    MAX_SIZE: 5 * 1024 * 1024, // 5MB\n    ALLOWED_TYPES: ['image/jpeg', 'image/png', 'image/jpg'],\n    MAX_FILES: 10,\n  },\n  AUDIO: {\n    MAX_SIZE: 20 * 1024 * 1024, // 20MB\n    ALLOWED_TYPES: ['audio/wav', 'audio/mpeg', 'audio/mp3'],\n    MAX_FILES: 1,\n  },\n};\n\nexport const FILE_PATHS = {\n  PDF: 'documents',\n  IMAGE: 'images',\n  AUDIO: 'audio',\n};\n\nexport const getFileType = (file) => {\n  if (FILE_RESTRICTIONS.PDF.ALLOWED_TYPES.includes(file.type)) return 'PDF';\n  if (FILE_RESTRICTIONS.IMAGE.ALLOWED_TYPES.includes(file.type)) return 'IMAGE';\n  if (FILE_RESTRICTIONS.AUDIO.ALLOWED_TYPES.includes(file.type)) return 'AUDIO';\n  return null;\n};\n\nexport const validateFile = (file, type) => {\n  const restrictions = FILE_RESTRICTIONS[type];\n  if (!restrictions) return { isValid: false, error: 'Tipo de arquivo não suportado' };\n\n  if (!restrictions.ALLOWED_TYPES.includes(file.type)) {\n    return { isValid: false, error: `Tipo de arquivo não permitido. Use apenas ${type === 'PDF' ? 'PDF' : type === 'IMAGE' ? 'JPG/PNG' : 'WAV/MP3'}` };\n  }\n\n  if (file.size > restrictions.MAX_SIZE) {\n    return { isValid: false, error: `Arquivo muito grande. Tamanho máximo: ${restrictions.MAX_SIZE / (1024 * 1024)}MB` };\n  }\n\n  return { isValid: true };\n};\n\nexport const generateUniqueFileName = (file, prefix = '') => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop();\n  return `${prefix}${timestamp}_${random}.${extension}`;\n}; ","import { supabase } from '../supabaseClient';\n\n// Configurações para imagens das escolas\nconst ESCOLA_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-das-escolas',\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: Infinity, // Sem limite\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n// Configurações para imagens dos professores\nconst PROFESSOR_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-professores', // Usando bucket existente\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: Infinity, // Sem limite\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n/**\n * Valida um arquivo de imagem\n * @param {File} file - Arquivo a ser validado\n * @param {Object} config - Configuração de validação\n * @returns {Object} Resultado da validação\n */\nconst validateImageFile = (file, config) => {\n  // Verificar tipo MIME\n  if (!config.ALLOWED_TYPES.includes(file.type)) {\n    return {\n      isValid: false,\n      error: `Tipo de arquivo não suportado. Use apenas: ${config.ALLOWED_TYPES.map(t => t.split('/')[1].toUpperCase()).join(', ')}`\n    };\n  }\n\n  // Verificar tamanho\n  if (file.size > config.MAX_FILE_SIZE) {\n    return {\n      isValid: false,\n      error: `Arquivo muito grande. Tamanho máximo: ${config.MAX_FILE_SIZE / (1024 * 1024)}MB`\n    };\n  }\n\n  // Verificar extensão\n  const extension = file.name.split('.').pop().toLowerCase();\n  const allowedExtensions = config.ALLOWED_TYPES.map(t => t.split('/')[1]);\n  if (!allowedExtensions.includes(extension)) {\n    return {\n      isValid: false,\n      error: `Extensão não permitida. Use apenas: ${allowedExtensions.join(', ')}`\n    };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Gera nome único para o arquivo (sem gênero, para imagens de escola)\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @returns {string} Nome único do arquivo\n */\nconst generateUniqueFileName = (file, escolaId) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Gera nome único para o arquivo, incluindo o gênero\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {string} Nome único do arquivo\n */\nconst generateUniqueFileNameWithGenero = (file, escolaId, genero) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${genero}_${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Upload de imagem da escola (versão simplificada sem tabela de metadados)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrição da imagem\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadEscolaImage = async (file, escolaId, descricao = '') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, ESCOLA_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome único\n    const fileName = generateUniqueFileName(file, escolaId);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pública\n    const { data: { publicUrl } } = supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    return {\n      id: Date.now(), // ID temporário\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem da escola ${escolaId}`,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload de imagem do professor (com gênero no nome do arquivo)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrição da imagem\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadProfessorImage = async (file, escolaId, descricao = '', genero = 'professor') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, PROFESSOR_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome único com gênero\n    const fileName = generateUniqueFileNameWithGenero(file, escolaId, genero);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      console.error('Erro detalhado do upload:', uploadError);\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pública\n    const { data: { publicUrl } } = supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    // Retornar objeto simulado (sem metadados na tabela)\n    return {\n      id: Date.now(), // ID temporário\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem do ${genero} da escola ${escolaId}`,\n      genero,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar imagens da escola (versão simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Array>} Lista de imagens\n */\nexport const getEscolaImages = async (escolaId, bucketName = ESCOLA_IMAGE_CONFIG.BUCKET_NAME) => {\n  try {\n    // Listar arquivos no bucket para a escola específica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    if (!files || files.length === 0) {\n      return [];\n    }\n\n    // Criar objetos de imagem com URLs públicas\n    const imagens = files.map((file, index) => {\n      const filePath = `${escolaId}/${file.name}`;\n      const { data: { publicUrl } } = supabase.storage\n        .from(bucketName)\n        .getPublicUrl(filePath);\n\n      return {\n        id: index + 1, // ID temporário\n        url: filePath,\n        publicUrl,\n        descricao: `Imagem ${index + 1}`,\n        created_at: file.created_at || new Date().toISOString()\n      };\n    });\n\n    return imagens;\n\n  } catch (error) {\n    console.error('Erro ao buscar imagens da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar imagem (versão simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} filePath - Caminho do arquivo\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<void>}\n */\nexport const deleteImage = async (imageId, filePath, bucketName) => {\n  try {\n    // Deletar arquivo do storage\n    const { error: storageError } = await supabase.storage\n      .from(bucketName)\n      .remove([filePath]);\n\n    if (storageError) {\n      throw new Error(`Erro ao deletar arquivo: ${storageError.message}`);\n    }\n\n  } catch (error) {\n    console.error('Erro ao deletar imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar descrição da imagem (versão simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} descricao - Nova descrição\n * @returns {Promise<Object>} Imagem atualizada\n */\nexport const updateImageDescription = async (imageId, descricao) => {\n  try {\n    // Como não temos tabela de metadados, retornamos um objeto simulado\n    return {\n      id: imageId,\n      descricao: descricao.trim()\n    };\n\n  } catch (error) {\n    console.error('Erro ao atualizar descrição da imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Substituir imagem existente (trocar imagem)\n * @param {File} newFile - Novo arquivo de imagem\n * @param {string} oldFilePath - Caminho do arquivo antigo\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @param {string} descricao - Descrição da nova imagem\n * @returns {Promise<Object>} Dados da nova imagem\n */\nexport const replaceImage = async (newFile, oldFilePath, escolaId, bucketName, descricao = '') => {\n  try {\n    const config = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME \n      ? PROFESSOR_IMAGE_CONFIG \n      : ESCOLA_IMAGE_CONFIG;\n\n    // Validar novo arquivo\n    const validation = validateImageFile(newFile, config);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome único para o novo arquivo\n    const fileName = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME\n      ? generateUniqueFileNameWithGenero(newFile, escolaId, 'professor') // Assumindo professor por padrão\n      : generateUniqueFileName(newFile, escolaId);\n    \n    const newFilePath = `${escolaId}/${fileName}`;\n\n    // 1. Upload da nova imagem\n    const { error: uploadError } = await supabase.storage\n      .from(bucketName)\n      .upload(newFilePath, newFile, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload da nova imagem: ${uploadError.message}`);\n    }\n\n    // 2. Obter URL pública da nova imagem\n    const { data: { publicUrl } } = supabase.storage\n      .from(bucketName)\n      .getPublicUrl(newFilePath);\n\n    // 3. Deletar a imagem antiga\n    const { error: deleteError } = await supabase.storage\n      .from(bucketName)\n      .remove([oldFilePath]);\n\n    if (deleteError) {\n      console.warn('Erro ao deletar imagem antiga:', deleteError);\n      // Não falha a operação se não conseguir deletar a imagem antiga\n    }\n\n    return {\n      id: Date.now(), // ID temporário\n      url: newFilePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem da escola ${escolaId}`,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro ao substituir imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Verificar limite de imagens (versão simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Object>} Informações sobre o limite\n */\nexport const checkImageLimit = async (escolaId, bucketName) => {\n  try {\n    const config = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME \n      ? PROFESSOR_IMAGE_CONFIG \n      : ESCOLA_IMAGE_CONFIG;\n\n    // Listar arquivos no bucket para a escola específica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    const currentCount = files ? files.length : 0;\n\n    return {\n      current: currentCount,\n      limit: config.MAX_IMAGES_PER_SCHOOL,\n      canUpload: currentCount < config.MAX_IMAGES_PER_SCHOOL\n    };\n\n  } catch (error) {\n    console.error('Erro ao verificar limite de imagens:', error);\n    throw error;\n  }\n}; ","import { supabase } from '../supabaseClient';\n\n// Configurações para imagens das histórias do professor\nconst HISTORIA_PROFESSOR_CONFIG = {\n  BUCKET_NAME: 'historia-professor-imagens',\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_HISTORIA: 1,\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n/**\n * Valida um arquivo de imagem\n * @param {File} file - Arquivo a ser validado\n * @returns {Object} Resultado da validação\n */\nconst validateImageFile = (file) => {\n  // Verificar tipo MIME\n  if (!HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.includes(file.type)) {\n    return {\n      isValid: false,\n      error: `Tipo de arquivo não suportado. Use apenas: ${HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.map(t => t.split('/')[1].toUpperCase()).join(', ')}`\n    };\n  }\n\n  // Verificar tamanho\n  if (file.size > HISTORIA_PROFESSOR_CONFIG.MAX_FILE_SIZE) {\n    return {\n      isValid: false,\n      error: `Arquivo muito grande. Tamanho máximo: ${HISTORIA_PROFESSOR_CONFIG.MAX_FILE_SIZE / (1024 * 1024)}MB`\n    };\n  }\n\n  // Verificar extensão\n  const extension = file.name.split('.').pop().toLowerCase();\n  const allowedExtensions = HISTORIA_PROFESSOR_CONFIG.ALLOWED_TYPES.map(t => t.split('/')[1]);\n  if (!allowedExtensions.includes(extension)) {\n    return {\n      isValid: false,\n      error: `Extensão não permitida. Use apenas: ${allowedExtensions.join(', ')}`\n    };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Valida dimensões da imagem (opcional)\n * @param {File} file - Arquivo de imagem\n * @returns {Promise<boolean>} Se as dimensões são válidas\n */\nconst validateImageDimensions = (file) => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.onload = () => {\n      const isValid = img.width >= HISTORIA_PROFESSOR_CONFIG.MIN_DIMENSIONS.width &&\n                     img.height >= HISTORIA_PROFESSOR_CONFIG.MIN_DIMENSIONS.height;\n      resolve(isValid);\n    };\n    img.onerror = () => resolve(false);\n    img.src = URL.createObjectURL(file);\n  });\n};\n\n/**\n * Gera nome único para o arquivo\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @param {number} historiaId - ID da história\n * @returns {string} Nome único do arquivo\n */\nconst generateUniqueFileName = (file, escolaId, historiaId) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `historia_${historiaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Buscar todas as histórias do professor de uma escola\n * @param {number} escolaId - ID da escola\n * @returns {Promise<Array>} Lista de histórias\n */\nexport const getHistoriasProfessor = async (escolaId) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .select('*')\n      .eq('escola_id', escolaId)\n      .eq('ativo', true)\n      .order('ordem', { ascending: true })\n      .order('created_at', { ascending: true });\n\n    if (error) {\n      throw error;\n    }\n\n    if (!data || data.length === 0) {\n      return [];\n    }\n\n    // Adicionar URLs públicas das imagens\n    const historiasComImagens = data.map((historia) => {\n      if (historia.imagem_url) {\n        try {\n          const { data: { publicUrl } } = supabase.storage\n            .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n            .getPublicUrl(historia.imagem_url);\n\n          return { ...historia, imagem_public_url: publicUrl };\n        } catch (err) {\n          return { ...historia, imagem_public_url: null, urlError: err.message };\n        }\n      }\n      return historia;\n    });\n\n    return historiasComImagens;\n\n  } catch (error) {\n    console.error('Erro ao buscar histórias do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Criar nova história do professor\n * @param {Object} historiaData - Dados da história\n * @returns {Promise<Object>} História criada\n */\nexport const createHistoriaProfessor = async (historiaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .insert([{\n        escola_id: historiaData.escola_id,\n        nome_professor: historiaData.nome_professor || null,\n        historia: historiaData.historia,\n        ordem: historiaData.ordem || 1,\n        ativo: historiaData.ativo !== false,\n        foto_rosto: historiaData.foto_rosto || null\n      }])\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n\n  } catch (error) {\n    console.error('Erro ao criar história do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar história do professor\n * @param {number} historiaId - ID da história\n * @param {Object} historiaData - Dados atualizados\n * @returns {Promise<Object>} História atualizada\n */\nexport const updateHistoriaProfessor = async (historiaId, historiaData) => {\n  try {\n    const { data, error } = await supabase\n      .from('historias_professor')\n      .update({\n        nome_professor: historiaData.nome_professor,\n        historia: historiaData.historia,\n        ordem: historiaData.ordem,\n        ativo: historiaData.ativo,\n        foto_rosto: historiaData.foto_rosto || null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId)\n      .select()\n      .single();\n\n    if (error) {\n      throw error;\n    }\n\n    return data;\n\n  } catch (error) {\n    console.error('Erro ao atualizar história do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar história do professor\n * @param {number} historiaId - ID da história\n * @returns {Promise<void>}\n */\nexport const deleteHistoriaProfessor = async (historiaId) => {\n  try {\n    // Deletar a história\n    const { error: deleteError } = await supabase\n      .from('historias_professor')\n      .delete()\n      .eq('id', historiaId);\n\n    if (deleteError) {\n      throw deleteError;\n    }\n  } catch (error) {\n    console.error('Erro ao deletar história do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload de imagem para uma história do professor\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {number} historiaId - ID da história\n * @param {string} descricao - Descrição da imagem\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadHistoriaProfessorImage = async (file, escolaId, historiaId, descricao = '') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Validar dimensões (opcional)\n    const hasValidDimensions = await validateImageDimensions(file);\n    if (!hasValidDimensions) {\n      console.warn('Imagem com dimensões menores que o recomendado');\n    }\n\n    // Gerar nome único\n    const fileName = generateUniqueFileName(file, escolaId, historiaId);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pública - não usado\n    // const { data: { publicUrl } } = supabase.storage\n    //   .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n    //   .getPublicUrl(filePath);\n\n    // Atualizar a história com a URL da imagem\n    const { data: historia, error: updateError } = await supabase\n      .from('historias_professor')\n      .update({\n        descricao_imagem: descricao.trim() || null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId)\n      .select()\n      .single();\n\n    if (updateError) {\n      // Se falhar ao atualizar, deletar o arquivo\n      await supabase.storage\n        .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n        .remove([filePath]);\n      throw new Error(`Erro ao salvar metadados: ${updateError.message}`);\n    }\n\n    return {\n      id: historia.id,\n      descricao_imagem: historia.descricao_imagem\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem da história do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar imagem de uma história do professor\n * @param {number} historiaId - ID da história\n * @returns {Promise<void>}\n */\nexport const deleteHistoriaProfessorImage = async (historiaId) => {\n  try {\n    // Buscar a história para obter a URL da imagem\n    const { data: historia, error: fetchError } = await supabase\n      .from('historias_professor')\n      .select('imagem_url')\n      .eq('id', historiaId)\n      .single();\n\n    if (fetchError) {\n      throw fetchError;\n    }\n\n    if (!historia.imagem_url) {\n      return; // Não há imagem para deletar\n    }\n\n    // Atualizar a história removendo a referência da imagem\n    const { error: updateError } = await supabase\n      .from('historias_professor')\n      .update({\n        descricao_imagem: null,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', historiaId);\n\n    if (updateError) {\n      throw updateError;\n    }\n\n    // Deletar arquivo do storage\n    const { error: storageError } = await supabase.storage\n      .from(HISTORIA_PROFESSOR_CONFIG.BUCKET_NAME)\n      .remove([historia.imagem_url]);\n\n    if (storageError) {\n      console.warn('Erro ao deletar imagem do storage:', storageError);\n    }\n\n  } catch (error) {\n    console.error('Erro ao deletar imagem da história do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Migrar dados existentes da tabela escolas_completa\n * @returns {Promise<Object>} Resultado da migração\n */\nexport const migrarDadosExistentes = async () => {\n  try {\n    // Buscar escolas com história do professor\n    const { data: escolas, error: fetchError } = await supabase\n      .from('escolas_completa')\n      .select('id, historia_do_prof')\n      .not('historia_do_prof', 'is', null)\n      .neq('historia_do_prof', '');\n\n    if (fetchError) {\n      throw fetchError;\n    }\n\n    if (!escolas || escolas.length === 0) {\n      return { migradas: 0, mensagem: 'Nenhuma história para migrar' };\n    }\n\n    // Inserir histórias na nova tabela\n    const historiasParaInserir = escolas.map(escola => ({\n      escola_id: escola.id,\n      historia: escola.historia_do_prof,\n      ordem: 1,\n      ativo: true,\n      created_at: new Date().toISOString()\n    }));\n\n    const { data: historiasInseridas, error: insertError } = await supabase\n      .from('historias_professor')\n      .insert(historiasParaInserir)\n      .select();\n\n    if (insertError) {\n      throw insertError;\n    }\n\n    return {\n      migradas: historiasInseridas.length,\n      mensagem: `${historiasInseridas.length} histórias migradas com sucesso`\n    };\n\n  } catch (error) {\n    console.error('Erro na migração de dados:', error);\n    throw error;\n  }\n};\n\n/**\n * Verificar se uma escola tem histórias do professor\n * @param {number} escolaId - ID da escola\n * @returns {Promise<boolean>} Se tem histórias\n */\nexport const escolaTemHistoriasProfessor = async (escolaId) => {\n  try {\n    const { count, error } = await supabase\n      .from('historias_professor')\n      .select('*', { count: 'exact', head: true })\n      .eq('escola_id', escolaId)\n      .eq('ativo', true);\n\n    if (error) {\n      throw error;\n    }\n\n    return (count || 0) > 0;\n\n  } catch (error) {\n    console.error('Erro ao verificar histórias do professor:', error);\n    return false;\n  }\n}; ","import { supabase } from '../supabaseClient';\n\n/**\n * Serviço para gerenciar imagens de header das escolas\n */\nexport class HeaderImageService {\n  \n  /**\n   * Buscar imagem atual do header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<string|null>} URL da imagem do header ou null\n   */\n  static async getImagemHeader(escolaId) {\n    try {\n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('imagem_header')\n        .eq('id', escolaId)\n        .single();\n      \n      if (error) throw error;\n      return data?.imagem_header || null;\n    } catch (err) {\n      console.error('Erro ao buscar imagem do header:', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Definir imagem como header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @param {string} imagemUrl - URL da imagem\n   * @returns {Promise<void>}\n   */\n  static async setImagemHeader(escolaId, imagemUrl) {\n    try {\n      const { error } = await supabase\n        .from('escolas_completa')\n        .update({ imagem_header: imagemUrl })\n        .eq('id', escolaId);\n      \n      if (error) throw error;\n    } catch (err) {\n      console.error('Erro ao definir imagem do header:', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Remover imagem do header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<void>}\n   */\n  static async removeImagemHeader(escolaId) {\n    try {\n      const { error } = await supabase\n        .from('escolas_completa')\n        .update({ imagem_header: null })\n        .eq('id', escolaId);\n      \n      if (error) throw error;\n    } catch (err) {\n      console.error('Erro ao remover imagem do header:', err);\n      throw err;\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, Image as ImageIcon, Trash2, Check, AlertCircle, Save, RefreshCw } from 'lucide-react';\nimport { \n  uploadEscolaImage, \n  getEscolaImages, \n  deleteImage, \n  replaceImage\n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable\n} from '../../services/legendasService';\nimport { HeaderImageService } from '../../services/headerImageService';\n\nconst ImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // const [editingImage, setEditingImage] = useState(null); // Removido - não utilizado\n  // const [editingDescription, setEditingDescription] = useState(''); // Removido - não utilizado\n  \n  // Estados para trocar imagem\n  const [replacingImage, setReplacingImage] = useState(null);\n  const [replacementFile, setReplacementFile] = useState(null);\n  \n  // Estados para imagem do header\n  const [imagemHeaderAtual, setImagemHeaderAtual] = useState(null);\n  const [loadingHeader, setLoadingHeader] = useState(false);\n\n  // Buscar imagem atual do header\n  const fetchImagemHeader = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      const imagemUrl = await HeaderImageService.getImagemHeader(escolaId);\n      setImagemHeaderAtual(imagemUrl);\n    } catch (err) {\n      console.error('Erro ao buscar imagem do header:', err);\n    }\n  }, [escolaId]);\n\n  // Definir imagem como header\n  const definirImagemHeader = async (imagemUrl) => {\n    if (!escolaId) return;\n    \n    try {\n      setLoadingHeader(true);\n      await HeaderImageService.setImagemHeader(escolaId, imagemUrl);\n      \n      setImagemHeaderAtual(imagemUrl);\n      setSuccess('Imagem definida como header com sucesso!');\n      setTimeout(() => setSuccess(''), 3000);\n      \n      // Notificar atualização\n      if (onImagesUpdate) onImagesUpdate();\n    } catch (err) {\n      console.error('Erro ao definir imagem do header:', err);\n      setError('Erro ao definir imagem do header: ' + err.message);\n    } finally {\n      setLoadingHeader(false);\n    }\n  };\n\n  // Remover imagem do header\n  const removerImagemHeader = async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoadingHeader(true);\n      await HeaderImageService.removeImagemHeader(escolaId);\n      \n      setImagemHeaderAtual(null);\n      setSuccess('Imagem removida do header com sucesso!');\n      setTimeout(() => setSuccess(''), 3000);\n      \n      // Notificar atualização\n      if (onImagesUpdate) onImagesUpdate();\n    } catch (err) {\n      console.error('Erro ao remover imagem do header:', err);\n      setError('Erro ao remover imagem do header: ' + err.message);\n    } finally {\n      setLoadingHeader(false);\n    }\n  };\n\n  // Buscar imagens existentes\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-das-escolas');\n      setExistingImages(images);\n    } catch (err) {\n      console.error('Erro ao buscar imagens:', err);\n      setError('Erro ao carregar imagens existentes');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchExistingImages();\n    fetchImagemHeader();\n  }, [fetchExistingImages, fetchImagemHeader]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length || !escolaId) return;\n      \n      console.log('Buscando legendas para', existingImages.length, 'imagens da escola', escolaId);\n      const legendasMap = {};\n      \n      try {\n        for (const img of existingImages) {\n          console.log('Buscando legenda para imagem:', img.url);\n          \n          // Tentar buscar legenda com diferentes formatos de URL\n          let legenda = await getLegendaByImageUrl(img.url, escolaId, 'escola');\n          \n          // Se não encontrar, tentar com URL pública\n          if (!legenda && img.publicURL) {\n            console.log('Tentando buscar com URL pública:', img.publicURL);\n            legenda = await getLegendaByImageUrl(img.publicURL, escolaId, 'escola');\n          }\n          \n          console.log('Legenda encontrada:', legenda);\n          legendasMap[img.url] = legenda;\n        }\n        \n        setExistingImages(prev => prev.map(img => ({\n          ...img,\n          legendaData: legendasMap[img.url] || {\n            legenda: '',\n            descricao_detalhada: '',\n            autor_foto: '',\n            data_foto: '',\n            categoria: 'geral',\n          }\n        })));\n        \n        console.log('Legendas carregadas com sucesso');\n      } catch (error) {\n        console.error('Erro ao buscar legendas:', error);\n        setError('Erro ao carregar legendas: ' + error.message);\n      }\n    };\n    \n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens após 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleção de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" não é uma imagem válida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\" é muito grande. Tamanho máximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, []);\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadEscolaImage(file, escolaId);\n        uploadedImages.push(uploadedImage);\n      }\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => [...prev, ...uploadedImages]);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) carregada(s) com sucesso!`);\n\n\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-das-escolas');\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.filter(img => img.id !== imageId));\n      \n\n\n      setSuccess('Imagem excluída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Trocar imagem existente\n  const handleReplaceImage = async (imageId, oldFilePath) => {\n    if (!replacementFile) {\n      setError('Selecione uma nova imagem para substituir');\n      return;\n    }\n\n    try {\n      setUploading(true);\n      setError('');\n\n      // Substituir a imagem\n      const newImage = await replaceImage(\n        replacementFile, \n        oldFilePath, \n        escolaId, \n        'imagens-das-escolas',\n        existingImages.find(img => img.id === imageId)?.descricao || ''\n      );\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => prev.map(img => \n        img.id === imageId ? newImage : img\n      ));\n\n      // Limpar estados\n      setReplacingImage(null);\n      setReplacementFile(null);\n      setSuccess('Imagem substituída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao substituir imagem:', err);\n      setError(`Erro ao substituir imagem: ${err.message}`);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Iniciar processo de trocar imagem\n  const startReplaceImage = (imageId) => {\n    setReplacingImage(imageId);\n    setReplacementFile(null);\n  };\n\n  // Cancelar troca de imagem\n  const cancelReplaceImage = () => {\n    setReplacingImage(null);\n    setReplacementFile(null);\n  };\n\n  // Selecionar arquivo para substituição\n  const handleReplacementFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setReplacementFile(file);\n    }\n  };\n\n  // Atualizar descrição da imagem - REMOVIDO: não utilizado\n  // const handleDescriptionChange = async (imageId, novaDescricao) => {\n  //   if (!novaDescricao.trim()) return;\n\n  //   try {\n  //     await updateImageDescription(imageId, novaDescricao);\n  //     \n  //     // Atualizar lista\n  //     setExistingImages(prev => prev.map(img => \n  //       img.id === imageId \n  //         ? { ...img, descricao: novaDescricao.trim() }\n  //         : img\n  //     ));\n\n  //     setSuccess('Legenda atualizada com sucesso!');\n\n  //     // Notificar componente pai\n  //     if (onImagesUpdate) {\n  //       onImagesUpdate();\n  //     }\n\n  //   } catch (err) {\n  //     console.error('Erro ao atualizar descrição:', err);\n  //     setError(`Erro ao atualizar legenda: ${err.message}`);\n  //   }\n  // };\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    // Validar dados obrigatórios\n    if (!escolaId) {\n      setError('ID da escola não encontrado');\n      return;\n    }\n    \n    if (!imagem_url_relativa) {\n      setError('URL da imagem não encontrada');\n      return;\n    }\n    \n    // Validar e limpar dados da legenda\n    const cleanLegendaData = { ...legendaData };\n    \n    // Tratar campo data_foto - converter para formato correto se necessário\n    if (cleanLegendaData.data_foto && cleanLegendaData.data_foto.trim() !== '') {\n      // Garantir que a data está no formato correto\n      try {\n        const data = new Date(cleanLegendaData.data_foto);\n        if (isNaN(data.getTime())) {\n          delete cleanLegendaData.data_foto;\n        } else {\n          cleanLegendaData.data_foto = data.toISOString().split('T')[0];\n        }\n      } catch (e) {\n        delete cleanLegendaData.data_foto;\n      }\n    } else {\n      delete cleanLegendaData.data_foto;\n    }\n    \n    // Tratar outros campos vazios que podem causar problemas\n    Object.keys(cleanLegendaData).forEach(key => {\n      if (cleanLegendaData[key] === '' || cleanLegendaData[key] === null) {\n        delete cleanLegendaData[key];\n      }\n    });\n    \n    console.log('Dados limpos da legenda:', cleanLegendaData);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'escola');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...cleanLegendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualização:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...cleanLegendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'escola'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda criada:', novaLegenda);\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      \n      // Recarregar as imagens para mostrar as legendas atualizadas\n      await fetchExistingImages();\n      \n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      console.error('Detalhes do erro:', err.details);\n      console.error('Hint do erro:', err.hint);\n      \n      let errorMessage = 'Erro ao salvar legenda: ' + err.message;\n      if (err.details) {\n        errorMessage += ' - Detalhes: ' + err.details;\n      }\n      if (err.hint) {\n        errorMessage += ' - Dica: ' + err.hint;\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-800/30 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400\"></div>\n          <span className=\"ml-2 text-gray-400\">Carregando imagens...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <ImageIcon className=\"w-5 h-5 text-blue-400\" />\n          <h3 className=\"text-lg font-semibold text-gray-100\">Imagens da Escola</h3>\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          {existingImages.length} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-900/50 border-red-700/50 rounded-xl\">\n          <AlertCircle className=\"w-5 h-5 text-red-400\" />\n          <span className=\"text-red-300\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-900/50 border-green-700/50 rounded-xl\">\n          <Check className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-green-300\">{success}</span>\n        </div>\n      )}\n\n      {/* Área de Upload */}\n      <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-600 bg-gray-800/50' \n                : 'border-gray-600 bg-gray-800/50 hover:border-blue-400 hover:bg-gray-700/50'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-blue-400 mx-auto mb-2\" />\n            <p className=\"text-gray-300 mb-2\">\n              Arraste imagens aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-400 mb-4\">\n              JPG, PNG, WEBP, GIF • Máximo 5MB por arquivo\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-400\">\n                <span>Fazendo upload...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-100\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-400 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-100\">Imagens da Escola ({existingImages.length})</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image) => (\n              <div key={image.id} className={`bg-gray-800/50 border border-gray-700/50 rounded-lg overflow-hidden shadow-sm ${\n                imagemHeaderAtual === image.publicUrl ? 'ring-2 ring-blue-400' : ''\n              }`}>\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem da escola'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Badge de imagem do header */}\n                {imagemHeaderAtual === image.publicUrl && (\n                  <div className=\"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1\">\n                    <Check className=\"w-3 h-3\" />\n                    Header\n                  </div>\n                )}\n                \n                {/* Overlay de ações */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {/* Botão para definir como header */}\n                    {imagemHeaderAtual !== image.publicUrl && (\n                      <button\n                        onClick={() => definirImagemHeader(image.publicUrl)}\n                        disabled={loadingHeader}\n                        className=\"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-700 disabled:opacity-50\"\n                        title=\"Usar como imagem do header\"\n                      >\n                        <Check className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                    \n                    {/* Botão para remover do header */}\n                    {imagemHeaderAtual === image.publicUrl && (\n                      <button\n                        onClick={removerImagemHeader}\n                        disabled={loadingHeader}\n                        className=\"p-2 bg-yellow-500 text-white rounded-full hover:bg-yellow-700 disabled:opacity-50\"\n                        title=\"Remover do header\"\n                      >\n                        <X className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={() => startReplaceImage(image.id)}\n                      className=\"p-2 bg-orange-500 text-white rounded-full hover:bg-orange-700\"\n                      title=\"Trocar imagem\"\n                    >\n                      <RefreshCw className=\"w-5 h-5\" />\n                    </button>\n                    \n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Descrição Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrição detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotógrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Trocar Imagem */}\n      {replacingImage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-100\">Trocar Imagem</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Selecione a nova imagem\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                  onChange={handleReplacementFileSelect}\n                  className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                />\n              </div>\n              \n              {replacementFile && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                    Pré-visualização\n                  </label>\n                  <img\n                    src={URL.createObjectURL(replacementFile)}\n                    alt=\"Nova imagem\"\n                    className=\"w-full h-32 object-cover rounded-lg border border-gray-600\"\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={cancelReplaceImage}\n                className=\"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={() => handleReplaceImage(replacingImage, existingImages.find(img => img.id === replacingImage)?.url)}\n                disabled={!replacementFile || uploading}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Trocando...' : 'Trocar Imagem'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando não há imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-400\">\n          <ImageIcon className=\"w-12 h-12 mx-auto mb-2 text-gray-500\" />\n          <p>Nenhuma imagem adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar a escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ImageUploadSection;","import React from 'react';\nimport ImageUploadSection from '../../EditEscolaPanel/ImageUploadSection';\n\nconst ImagensEscolaTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar suas imagens</p>\n      </div>\n    );\n  }\n\n  return (\n    <ImageUploadSection \n      escolaId={escolaId}\n      onImagesUpdate={() => {\n        // Callback para atualizar dados se necessário\n        console.log('Imagens da escola atualizadas');\n      }}\n    />\n  );\n};\n\nexport default ImagensEscolaTab; "],"names":["useEscolas","escolas","setEscolas","useState","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedType","setSelectedType","fetchEscolas","useCallback","async","data","supabase","from","select","order","ascending","escolasMapeadas","map","escola","_objectSpread","logradouro","numero","complemento","bairro","cep","estado","err","console","message","filteredEscolas","filter","_escola$Escola","Escola","toLowerCase","includes","updateEscolaInList","escolaId","updatedData","prev","id","addEscolaToList","novaEscola","removeEscolaFromList","getEscolaById","find","getEscolaByName","nome","_escola$Escola2","saveEscola","escolaData","update","eq","success","insert","deleteEscola","delete","useEffect","MODALIDADES_OPTIONS","MODALIDADES_CATEGORIAS","titulo","indices","useModalidades","selectedModalidades","setSelectedModalidades","outroModalidade","setOutroModalidade","handleModalidadeChange","modalidade","m","handleOutroModalidadeChange","value","hasOutro","some","startsWith","trim","concat","saveModalidades","join","loadExistingModalidades","modalidadesText","parts","split","part","modalidades","outro","forEach","replace","push","clearModalidades","getModalidadesPreview","hasSelectedModalidades","length","ADMIN_TABS","label","UI_CONFIG","FORM_CONFIG","_ref","isMobile","sidebarOpen","setSidebarOpen","editingLocation","onEscolaSelect","_jsxs","_Fragment","children","_jsx","className","onClick","Menu","style","transform","top","X","Search","type","placeholder","onChange","e","target","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","href","rel","onNovaEscola","isOpen","onClose","onSuccess","password","setPassword","showPassword","setShowPassword","setSuccess","attempts","setAttempts","isLocked","setIsLocked","lockTime","setLockTime","passwordRef","useRef","setTimeout","current","focus","timer","clearTimeout","handleClose","currentTarget","onKeyDown","key","tabIndex","disabled","onSubmit","preventDefault","result","AuthService","authenticate","setToken","token","user","newAttempts","ref","autoComplete","EyeOff","Eye","char","index","AlertCircle","CheckCircle","isAuthenticated","useAuth","showLoginModal","setShowLoginModal","React","LoginModal","setEditingLocation","categoria","checked","turnos_funcionamento","handleSaveModalidades","cozinha","merenda_escolar","diferenciada","merenda_diferenciada","videos","setVideos","showForm","setShowForm","editingVideo","setEditingVideo","formData","setFormData","video_url","descricao","plataforma","ativo","carregarVideos","getVideosEscola","resetForm","handleDelete","window","confirm","deleteVideoEscola","Plus","video","src","title","allowFullScreen","handleEdit","Edit3","Trash2","payload","escola_id","Number","Boolean","updates","updateVideoEscola","createVideoEscola","required","rows","Save","VideoManager","quillRef","quillInstance","setQuillInstance","imageHandler","input","document","createElement","setAttribute","click","onchange","file","files","range","getSelection","insertEmbed","imageUrl","uploadImage","deleteText","setSelection","alert","modules","toolbar","container","handlers","image","handleEditorChange","content","delta","source","editor","handleEditorReady","quill","ReactQuill","theme","onEditorReady","formats","height","backgroundColor","color","QuillEditor","RichTextEditor","uploadFotoProfessor","arquivo","nomeProfessor","Error","tamanhoMaximo","size","timestamp","Date","now","extensao","name","pop","nomeSanitizado","substring","nomeArquivo","caminhoArquivo","log","nomeOriginal","storage","upload","cacheControl","upsert","publicUrl","getPublicUrl","url","caminho","atualizarFotoProfessor","historiaId","fotoUrl","foto_rosto","removerFotoProfessor","storageError","remove","warn","dbError","buscarFotoProfessor","listarFotosProfessores","list","fotos","_file$metadata","tamanho","metadata","criadoEm","created_at","validarImagem","Promise","resolve","img","Image","onload","onerror","historias","setHistorias","editingHistoria","setEditingHistoria","isCreating","setIsCreating","uploadingPhoto","setUploadingPhoto","photoError","setPhotoError","photoSuccess","setPhotoSuccess","loadHistorias","getHistoriasProfessor","handleNewHistoria","nome_professor","historia","alt","handleRemovePhoto","User","accept","event","FotoProfessorService","novoEstado","htmlFor","Upload","updateHistoriaProfessor","historiaData","createHistoriaProfessor","handleSaveHistoria","handleCancelEdit","dangerouslySetInnerHTML","__html","handleEditHistoria","deleteHistoriaProfessor","handleDeleteHistoria","MARKER_SVG_PATH","process","mapRef","mapInstanceRef","markerRef","updateMap","lat","lng","view","getView","isNaN","_mapInstanceRef$curre","coordinates","fromLonLat","parseFloat","setCenter","setZoom","vectorSource","getLayers","getArray","layer","VectorLayer","getSource","removeFeature","marker","Feature","geometry","Point","setStyle","Style","Icon","scale","anchor","anchorXUnits","anchorYUnits","addFeature","handleMapClick","toLonLat","coordinate","toFixed","Map","layers","TileLayer","XYZ","VectorSource","View","center","zoom","on","setTarget","undefined","step","minHeight","TabelasIntegraisTab","_tabelas$find","tabelas","setTabelas","selectedTabela","setSelectedTabela","dadosTabela","setDadosTabela","loadingDados","setLoadingDados","backupStatus","setBackupStatus","backupProgress","setBackupProgress","TABELAS_SISTEMA","icone","Database","cor","registros","Users","FileText","Video","BUCKETS_BACKUP","arquivos","carregarDadosTabela","tabelaId","downloadFile","filename","response","fetch","blob","downloadUrl","URL","createObjectURL","link","download","body","appendChild","removeChild","revokeObjectURL","createAndDownloadZip","zipName","zip","JSZip","default","arquivosAdicionados","ok","status","statusText","progress","zipBlob","generateAsync","downloadError","Archive","backupTabelas","tabela","backupArquivos","todosArquivos","bucket","limit","arquivosComUrls","urlData","createSignedUrl","signedUrl","arquivoCompleto","bucketNome","backupCompleto","dataBackup","toISOString","versao","t","buckets","b","totalRegistros","Object","values","reduce","acc","totalArquivos","dados","jsonContent","JSON","stringify","Blob","visibility","detalhes","keys","backupTabelasData","i","dataAtual","entries","headers","csvContent","row","header","tipo","formato","resultados","mensagem","tabelasOk","r","tabelasErro","FileDown","urlError","f","bucketsOk","bucketsErro","width","Math","round","Icone","isSelected","stopPropagation","RefreshCw","downloadCSV","Download","downloadJSON","slice","cellIndex","onSave","canScroll","setCanScroll","scrollRef","checkScroll","hasHorizontalScroll","scrollWidth","clientWidth","hasVerticalScroll","scrollHeight","clientHeight","addEventListener","removeEventListener","editingCell","setEditingCell","editValue","setEditValue","originalValue","setOriginalValue","startEditing","rowIndex","columnKey","cancelEditing","saveEdit","updatedEscola","handleKeyDown","columns","renderCell","column","isEditing","Check","Edit2","inputType","inputProps","min","onBlur","autoFocus","overflowY","maxHeight","escolasLoading","escolasError","tableLoading","setTableLoading","tableError","setTableError","updateSuccess","setUpdateSuccess","_escola$nome_escola","_escola$municipio","_escola$terra_indigen","_escola$povos","_escola$linguas","term","nome_escola","municipio","terra_indigena","povos","linguas","exportToCSV","endereco","parcerias","diretoria_ensino","ano_criacao","numero_alunos","turnos","estrutura","agua","coleta_lixo","internet","equipamentos","acesso","gestao","funcionarios","professores_indigenas","professores_nao_indigenas","falam_lingua_indigena","formacao_professores","formacao_continuada","ppp_proprio","ppp_comunidade","projetos","parcerias_universidades","parcerias_ongs","desejos_comunidade","redes_sociais","links_redes_sociais","historia_escola","latitude","longitude","links_uteis","link_para_videos","professores_indigenas_detalhado","professores_nao_indigenas_detalhado","falam_lingua_indigena_detalhado","formacao_professores_detalhado","visitas_supervisores","outros_funcionarios_detalhado","gestao_detalhado","merenda_diferenciada_detalhado","EditableTable","CompletenessDashboard","completenessData","setCompletenessData","selectedCategory","setSelectedCategory","incompleteSchools","setIncompleteSchools","showModal","setShowModal","fieldCategories","calculateCategoryCompleteness","fields","fieldCompleteness","field","calculateFieldCompleteness","fieldName","totalRecords","filledRecords","record","sum","completeness","getCompletenessColor","percentage","getCompletenessIcon","handleCategoryClick","category","categoryFields","incomplete","findIncompleteSchools","school","missingFields","rawData","fetchCompletenessData","categoryCompleteness","allFields","flat","overallCompleteness","IncompleteSchoolsModal","Município","MapPin","fieldIndex","ImagensEscolaTab","ImagensProfessoresTab","DocumentosTab","require","AdminPanelContent","isSaving","setIsSaving","saveError","setSaveError","saveSuccess","setSaveSuccess","showBackupModal","setShowBackupModal","showDeleteModal","setShowDeleteModal","escolaToDelete","setEscolaToDelete","isDeleting","setIsDeleting","showCompletenessDashboard","setShowCompletenessDashboard","innerWidth","handleNovaEscola","activeTab","AdminSidebar","escolaOriginal","AdminToolbar","TabelaEditavelTab","tab","isActive","hasMissing","tabId","hasMissingInfo","renderActiveTab","DadosBasicosTab","PovosLinguasTab","ModalidadesTab","InfraestruturaTab","GestaoProfessoresTab","MaterialPedagogicoTab","ProjetosParceriasTab","RedesSociaisTab","VideoTab","HistoriasTab","HistoriaProfessoresTab","CoordenadasTab","abrirTabelaEditavel","imagens","offset","loadingMessage","innerHTML","imagem","imageData","a","AdminPanel","ProtectedRoute","addProfessorImageMeta","meta","single","onImagesUpdate","selectedFiles","setSelectedFiles","uploading","setUploading","uploadProgress","setUploadProgress","existingImages","setExistingImages","genero","replacingImage","setReplacingImage","replacementFile","setReplacementFile","fetchExistingImages","images","getEscolaImages","testLegendasTable","legendasMap","legenda","getLegendaByImageUrl","legendaData","descricao_detalhada","autor_foto","data_foto","fetchLegendas","handleDrop","Array","dataTransfer","imageFiles","handleDragOver","handleLegendaFieldChange","imageId","handleLegendaSave","imagem_url_relativa","cleanLegendaData","updateData","updated_at","resultado","updateLegendaFoto","novaLegendaData","imagem_url","tipo_foto","novaLegenda","addLegendaFoto","code","getProfessorImageMetaByUrl","updateProfessorImageMeta","autor","stack","onDrop","onDragOver","multiple","validFiles","isValidType","isValidSize","_","removeSelectedFile","uploadedImages","uploadedImage","uploadProfessorImage","nome_arquivo","_image$legendaData","_image$legendaData2","_image$legendaData3","_image$legendaData4","_image$legendaData5","startReplaceImage","filePath","deleteImage","handleDeleteImage","cancelReplaceImage","_existingImages$find2","oldFilePath","_existingImages$find","newImage","replaceImage","handleReplaceImage","ProfessorImageUploadSection","onUploadComplete","onRemove","existingUrls","isUploading","setIsUploading","previewUrls","setPreviewUrls","FILE_RESTRICTIONS","PDF","MAX_SIZE","ALLOWED_TYPES","File","uploadedUrls","uploadPDF","allUrls","newUrls","handleRemove","documentos","setDocumentos","PDFUploadSection","urls","uploadFile","arguments","STORAGE_BUCKETS","PDFS","fileType","getFileType","validation","validateFile","isValid","fileName","generateUniqueFileName","FILE_PATHS","uploadError","MEDIA","options","query","getLegendaByImageUrlFlexivel","preferencias","data2","error2","data3","error3","data4","error4","ilike","legendaId","getTituloByVideoUrl","videoUrl","MAX_FILES","Infinity","IMAGE","AUDIO","restrictions","prefix","random","toString","extension","ESCOLA_IMAGE_CONFIG","BUCKET_NAME","MAX_FILE_SIZE","MAX_IMAGES_PER_SCHOOL","MIN_DIMENSIONS","PROFESSOR_IMAGE_CONFIG","validateImageFile","config","toUpperCase","allowedExtensions","generateUniqueFileNameWithGenero","uploadEscolaImage","bucketName","newFile","newFilePath","deleteError","HISTORIA_PROFESSOR_CONFIG","MAX_IMAGES_PER_HISTORIA","imagem_public_url","ordem","HeaderImageService","getImagemHeader","imagem_header","setImagemHeader","imagemUrl","removeImagemHeader","imagemHeaderAtual","setImagemHeaderAtual","loadingHeader","setLoadingHeader","fetchImagemHeader","removerImagemHeader","publicURL","ImageIcon","definirImagemHeader","getTime","details","hint","errorMessage","ImageUploadSection"],"sourceRoot":""}