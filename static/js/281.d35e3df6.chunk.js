"use strict";(self.webpackChunkopin_observatorio_professores_indigenas=self.webpackChunkopin_observatorio_professores_indigenas||[]).push([[281],{30584:(e,a,s)=>{s.d(a,{A:()=>p});var t=s(65043),i=s(91357),o=s(56326),n=s(30342),r=s(29134),l=s(88349),c=s(22424),d=s(51832),m=s(53681),u=s(8861),h=s(70579);const p=e=>{let{title:a,description:s,titleFontFamily:p="PapakiloLight, sans-serif",titleSize:x="text-4xl md:text-5xl lg:text-6xl",descriptionSize:g="text-sm md:text-base",className:f="",children:b,showShareButtons:E=!0,showNavbar:v=!1,dataPoints:y=[],openPainelFunction:j=null}=e;const w="".concat("/opin","/hero.png"),A=t.useRef(null),I=t.useRef(null),[N,S]=t.useState("auto"),[P,D]=t.useState(!1),_=(0,i.Zp)(),M=(0,i.zy)(),{setSearch:C}=(0,o.S)(),{isAuthenticated:k,user:z,logout:T}=(0,n.A)(),{width:J}=(0,r.d)(),F=t.useMemo(()=>J<=1024&&J>window.innerHeight,[J]),q=t.useMemo(()=>"/conteudo"===M.pathname,[M.pathname]),R=t.useMemo(()=>"/search"===M.pathname,[M.pathname]),Z=t.useMemo(()=>"/admin"===M.pathname,[M.pathname]),H=t.useMemo(()=>"/dashboard"===M.pathname||"/painel-dados"===M.pathname||"/dados-escolas-indigenas"===M.pathname,[M.pathname]),L=t.useCallback(()=>{if(A.current){const e=A.current.offsetHeight;S("".concat(e,"px"))}},[]);return t.useEffect(()=>(L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)),[L,a,s,b]),(0,h.jsxs)("div",{className:"text-white shadow-lg relative overflow-hidden ".concat(f),style:{backgroundImage:"url('".concat(w,"')"),backgroundSize:"cover",backgroundPosition:"center top",backgroundRepeat:"no-repeat",position:"absolute",top:0,left:0,right:0,width:"100%",height:N,zIndex:10},children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-green-900/60"}),(0,h.jsxs)("div",{ref:A,className:"relative z-10",style:{paddingTop:v?"0":"80px",paddingBottom:"2rem"},children:[v&&(0,h.jsx)("div",{className:"w-full max-w-none px-2 sm:px-4 md:px-6 lg:px-16 xl:px-24",children:(0,h.jsxs)("div",{className:"flex items-center justify-between py-1 sm:py-1.5 md:py-2",children:[(0,h.jsx)("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-4 min-w-0 flex-shrink",children:(0,h.jsx)("button",{onClick:()=>_("/"),className:"text-left hover:opacity-80 transition-opacity focus:outline-none focus:rounded","aria-label":"Ir para p\xe1gina inicial - OPIN",children:(0,h.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,h.jsx)("img",{src:"".concat("/opin","/logo_index.png"),alt:"OPIN - Observat\xf3rio dos Professores Ind\xedgenas",className:"h-6 sm:h-7 md:h-8 lg:h-10 xl:h-12 w-auto object-contain object-left",style:{display:"block"}}),(0,h.jsx)("div",{className:"hidden sm:block w-px h-4 sm:h-6 md:h-8 bg-white/30 flex-shrink-0"}),(0,h.jsxs)("div",{className:"hidden md:flex flex-col justify-center min-w-0",children:[(0,h.jsx)("span",{className:"text-white text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl capitalize truncate",style:{fontFamily:"Cinzel, serif"},children:"Observat\xf3rio Dos Professores Ind\xedgenas"}),(0,h.jsx)("p",{className:"text-xs sm:text-sm text-white/80 normal-case truncate",children:"do Estado de S\xe3o Paulo"})]})]})})}),(0,h.jsxs)("div",{className:"hidden lg:flex items-center space-x-4 xl:space-x-6 text-sm",children:[(0,h.jsx)(d.A,{isConteudoPage:q,isSearchPage:R,isAdminPage:Z,isPainelPage:H,isMobileLandscape:F}),(0,h.jsx)("div",{ref:I,className:"flex items-center",children:(0,h.jsx)(m.A,{onSearch:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a?(C(e,a,e),_("/mapa",{state:{searchTerm:e,coordinates:a,highlightSchool:e}})):(C(e),_("/search?q=".concat(encodeURIComponent(e))))},onResultClick:e=>{j&&e.data?(j(e.data),"/mapa"!==M.pathname&&_("/mapa")):e.coordinates?(C(e.title,e.coordinates,e.title),_("/mapa",{state:{searchTerm:e.title,coordinates:e.coordinates,highlightSchool:e.title}})):(C(e.title),_("/search?q=".concat(encodeURIComponent(e.title))))},isMobile:!1,isMobileLandscape:F,dataPoints:y})}),(0,h.jsxs)("div",{className:"hidden lg:flex items-center space-x-2 xl:space-x-4",children:[(0,h.jsx)("a",{href:"https://unifesp.br/campus/san7/graduacao/cursos/licenciatura-intercultural-indigena",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:opacity-80 transition-opacity",children:(0,h.jsx)("img",{src:"".concat("/opin","/lindi.svg"),alt:"LINDI - Licenciatura Intercultural Ind\xedgena",className:"h-12 xl:h-16 w-auto"})}),(0,h.jsx)("a",{href:"https://unifesp.br",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:opacity-80 transition-opacity",children:(0,h.jsx)("img",{src:"".concat("/opin","/logo.webp"),alt:"UNIFESP",className:"h-8 xl:h-12 w-auto"})})]}),(0,h.jsx)("div",{className:"flex items-center space-x-2",children:k?(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("span",{className:"text-sm text-white/80 hidden xl:inline","aria-live":"polite",children:["Ol\xe1, ",null===z||void 0===z?void 0:z.username]}),(0,h.jsx)("button",{onClick:()=>_("/admin"),className:"p-1.5 rounded hover:bg-white/10 transition-colors focus:outline-none",title:"Painel administrativo","aria-label":"Painel administrativo",children:(0,h.jsx)(c.A,{className:"w-4 h-4"})}),(0,h.jsx)("button",{onClick:T,className:"px-3 py-1.5 text-xs rounded hover:bg-white/10 transition-colors focus:outline-none","aria-label":"Sair",children:"Sair"})]}):(0,h.jsx)("button",{onClick:()=>{k?_("/admin"):D(!0)},className:"p-1.5 rounded hover:bg-white/10 transition-colors focus:outline-none",title:"Acesso administrativo","aria-label":"Acesso administrativo",children:(0,h.jsx)(l.A,{className:"w-4 h-4"})})})]})]})}),(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsx)("div",{className:"mt-4",children:(0,h.jsx)("h1",{className:"text-white ".concat(x," uppercase leading-none text-center"),style:{fontFamily:p},children:a})}),b&&(0,h.jsx)("div",{className:"mt-4",children:b})]})]}),P&&(0,h.jsx)(u.A,{onClose:()=>D(!1),onLoginSuccess:e=>{D(!1),_("/admin")}})]})}},77281:(e,a,s)=>{s.r(a),s.d(a,{default:()=>D});var t=s(65043),i=s(75756),o=s(5766),n=s.n(o),r=s(5452);const l=new class{constructor(){this.cache=new Map}async loadCSV(e){if(this.cache.has(e))return this.cache.get(e);try{const a=await fetch("./data/".concat(e));if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));const s=await a.text();return new Promise((a,t)=>{n().parse(s,{header:!0,skipEmptyLines:!0,complete:s=>{s.errors&&s.errors.length>0&&r.A.error("Erros ao processar ".concat(e,":"),s.errors);const t=s.data;this.cache.set(e,t),a(t)},error:a=>{r.A.error("Erro ao processar ".concat(e,":"),a),t(a)}})})}catch(a){throw r.A.error("Erro ao carregar ".concat(e,":"),a),a}}async loadEscolasData(){try{return await this.loadCSV("escolas.csv")}catch(e){throw e}}async loadDocentesData(){try{return await this.loadCSV("docentes.csv")}catch(e){throw e}}async loadEquipamentosData(){try{return await this.loadCSV("equipamentos.csv")}catch(e){throw e}}async loadTurmasPorTipoData(){try{return await this.loadCSV("turmas_por_tipo.csv")}catch(e){throw e}}async getAlunosVsDocentesData(){const e=await this.loadEscolasData(),a=await this.loadDocentesData(),s={};a.forEach(e=>{s[e.CIE_Escola]||(s[e.CIE_Escola]=new Set),s[e.CIE_Escola].add(e.Nome)});return e.map(e=>{const a=e.CIE.toString(),t=parseInt(e.Total_Alunos)||0,i=s[a]?s[a].size:0;return{nome:e.Nome,alunos:t,docentes:i,cie:a}}).filter(e=>e.alunos>0||e.docentes>0)}async getAlunosPorEscolaData(){return(await this.loadEscolasData()).filter(e=>"EEI - INDIGENA"===e.Tipo).map(e=>({nome:e.Nome,alunos:parseInt(e.Total_Alunos)||0,cie:e.CIE.toString()})).filter(e=>e.alunos>0).sort((e,a)=>a.alunos-e.alunos)}async getDistribuicaoAlunosData(){const e=await this.loadEscolasData(),a=[0,10,25,50,100,1/0],s=["At\xe9 10 alunos","11 a 25 alunos","26 a 50 alunos","51 a 100 alunos","Mais de 100 alunos"],t={};return s.forEach(e=>t[e]=0),e.forEach(e=>{const i=parseInt(e.Total_Alunos)||0;for(let o=0;o<a.length-1;o++)if(i>=a[o]&&i<a[o+1]){t[s[o]]++;break}}),Object.entries(t).map(e=>{let[a,s]=e;return{name:a,value:s}})}async getEquipamentosData(){const e=await this.loadEquipamentosData(),a={};return e.forEach(e=>{a[e.Equipamento]||(a[e.Equipamento]=0),a[e.Equipamento]+=parseInt(e.Quantidade)||0}),Object.entries(a).map(e=>{let[a,s]=e;return{equipamento:a,quantidade:s}}).filter(e=>e.quantidade>0).sort((e,a)=>a.quantidade-e.quantidade)}async getEscolasPorDiretoriaData(){const e=await this.loadEscolasData(),a={};return e.forEach(e=>{e.Diretoria&&""!==e.Diretoria.trim()&&(a[e.Diretoria]||(a[e.Diretoria]=0),a[e.Diretoria]++)}),Object.entries(a).map(e=>{let[a,s]=e;return{diretoria:a,quantidade:s}}).sort((e,a)=>e.quantidade-a.quantidade)}async getTiposEnsinoData(){const e=await this.loadTurmasPorTipoData(),a={Anos_Iniciais:"Anos Iniciais",Anos_Finais:"Anos Finais",EJA_Anos_Iniciais:"EJA Anos Iniciais",EJA_Anos_Finais:"EJA Anos Finais",EJA_Ensino_Medio:"EJA Ensino M\xe9dio",Ensino_Infantil:"Ensino Infantil"},s={};return["Anos_Iniciais","Anos_Finais","EJA_Anos_Iniciais","EJA_Anos_Finais","EJA_Ensino_Medio","Ensino_Infantil"].forEach(a=>{s[a]=e.filter(e=>(parseInt(e[a])||0)>0).length}),Object.entries(s).map(e=>{let[s,t]=e;return{tipo:a[s],quantidade:t}}).filter(e=>e.quantidade>0).sort((e,a)=>a.quantidade-e.quantidade)}async getDistribuicaoAlunosModalidadeData(){try{const e=await this.loadTurmasPorTipoData(),a={Anos_Iniciais:"Anos Iniciais",Anos_Finais:"Anos Finais",EJA_Anos_Iniciais:"EJA Anos Iniciais",EJA_Anos_Finais:"EJA Anos Finais",EJA_Ensino_Medio:"EJA Ensino M\xe9dio",Ensino_Infantil:"Ensino Infantil"},s={"Anos Iniciais":0,"Anos Finais":0,"Ensino M\xe9dio":0,"EJA Anos Iniciais":0,"EJA Anos Finais":0,"EJA Ensino M\xe9dio":0,"Ensino Infantil":0};e.forEach(e=>{Object.entries(a).forEach(a=>{let[t,i]=a;const o=parseInt(e[t])||0;void 0!==s[i]&&(s[i]+=o)})});const t=(await this.loadEscolasData()).filter(e=>"EEI - INDIGENA"===e.Tipo),i={};t.forEach(e=>{const a=e.CIE.toString();i[a]=parseInt(e.Total_Alunos)||0});let o=0,n=0;if(e.forEach(e=>{const s=e.CIE_Escola.toString(),t=i[s]||0;n+=t,Object.keys(a).forEach(a=>{const s=parseInt(e[a])||0;o+=s})}),0===o||0===n)return[{name:"Anos Iniciais",value:654},{name:"Anos Finais",value:568},{name:"Ensino M\xe9dio",value:269},{name:"EJA Anos Iniciais",value:45},{name:"EJA Anos Finais",value:50},{name:"EJA Ensino M\xe9dio",value:35},{name:"Ensino Infantil",value:0}].filter(e=>e.value>0);const r={},l=n/o;return Object.entries(s).forEach(e=>{let[a,s]=e;r[a]=Math.round(s*l)}),Object.entries(r).map(e=>{let[a,s]=e;return{name:a,value:s}}).filter(e=>e.value>0).sort((e,a)=>a.value-e.value)}catch(e){return r.A.error("Erro ao calcular distribui\xe7\xe3o de alunos por modalidade:",e),[{name:"Anos Iniciais",value:654},{name:"Anos Finais",value:568},{name:"Ensino M\xe9dio",value:269},{name:"EJA Anos Iniciais",value:45},{name:"EJA Anos Finais",value:50},{name:"EJA Ensino M\xe9dio",value:35},{name:"Ensino Infantil",value:0}].filter(e=>e.value>0)}}};var c=s(52480);var d=s(30584),m=s(84182),u=s(70579);const h=(0,t.memo)(()=>(0,u.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10",children:(0,u.jsx)("div",{className:"prose prose-lg sm:prose-xl max-w-none",style:{fontSize:"1.125rem",lineHeight:"1.75",color:"#374151",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},children:(0,u.jsxs)("p",{className:"mb-6",style:{fontSize:"1.125rem",lineHeight:"1.75",color:"#374151",letterSpacing:"0.01em"},children:["Este espa\xe7o re\xfane informa\xe7\xf5es sobre as escolas ind\xedgenas do estado de S\xe3o Paulo, apresentando indicadores como n\xfamero de estudantes e docentes, infraestrutura dispon\xedvel, distribui\xe7\xe3o geogr\xe1fica por Diretorias de Ensino e modalidades de ensino oferecidas. Os dados foram fornecidos pela Secretaria da Educa\xe7\xe3o do Estado de S\xe3o Paulo (SEDUC) e referem-se ao ano de 2025. A base completa pode ser acessada em:"," ",(0,u.jsx)("a",{href:"https://dados.educacao.sp.gov.br/",target:"_blank",rel:"noopener noreferrer",className:"text-green-700 hover:text-green-800 underline font-medium transition-colors",style:{color:"#15803d",textDecorationThickness:"1.5px",textUnderlineOffset:"2px"},children:"dados.educacao.sp.gov.br"})]})})}));h.displayName="DashboardDescription";const p=h;var x=s(89379),g=s(53986);const f=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";const[s,i]=(0,t.useState)(!1),[o,n]=(0,t.useState)(!1),[r,l]=(0,t.useState)(!1),c=(0,t.useRef)(null),d=(0,t.useRef)(null),m=()=>{switch(a){case"high":return{loadImmediately:!0,rootMargin:"0px",loading:"eager"};case"normal":return{loadImmediately:!1,rootMargin:"400px 0px",loading:"lazy"};case"low":return{loadImmediately:!1,rootMargin:"100px 0px",loading:"lazy"};default:return{loadImmediately:!1,rootMargin:"200px 0px",loading:"lazy"}}};(0,t.useEffect)(()=>{const e=m();if(!e.loadImmediately)return"IntersectionObserver"in window?(c.current=new IntersectionObserver(e=>{e.forEach(e=>{var a;e.isIntersecting&&(l(!0),null===(a=c.current)||void 0===a||a.unobserve(e.target))})},{rootMargin:e.rootMargin,threshold:.01}),d.current&&c.current.observe(d.current)):l(!0),()=>{c.current&&c.current.disconnect()};l(!0)},[a]);return{isLoaded:s,hasError:o,isInView:r,imgRef:d,handleLoad:()=>{i(!0),n(!1)},handleError:()=>{n(!0),i(!1)},loading:m().loading}},b=["src","alt","className","placeholder","priority","onLoad","onError"],E=e=>{let{src:a,alt:s,className:i="",placeholder:o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YWFhYSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNhcnJlZ2FuZG8uLi48L3RleHQ+PC9zdmc+",priority:n="normal",onLoad:r,onError:l}=e,c=(0,g.A)(e,b);const{isLoaded:d,hasError:m,isInView:h,imgRef:p,handleLoad:E,handleError:v,loading:y}=f(a,n),[j,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(h&&!d&&!m){const e=setTimeout(()=>w(!0),300);return()=>clearTimeout(e)}w(!1)},[h,d,m]);return(0,u.jsxs)("div",{ref:p,className:"relative overflow-hidden ".concat(i),style:{backgroundColor:"#f3f4f6",minHeight:"200px"},children:[(0,u.jsx)("img",{src:o,alt:"",className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-100 ".concat(d?"opacity-0":"opacity-100"),style:{filter:"blur(2px)"},"aria-hidden":"true"}),h&&(0,u.jsx)("img",(0,x.A)({src:(()=>{if(!h)return o;if(m)return o;if(a&&"undefined"!==typeof window&&window.WebP){return a.replace(/\.(jpg|jpeg|png)$/i,".webp")}return a||o})(),alt:s,loading:y,fetchpriority:"high"===n?"high":"auto",className:"w-full h-full object-cover transition-opacity duration-150 ".concat(d?"opacity-100":"opacity-0"),onLoad:()=>{E(),null===r||void 0===r||r()},onError:()=>{v(),null===l||void 0===l||l()}},c)),j&&(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 bg-opacity-20",children:(0,u.jsx)("span",{className:"text-xs text-gray-600",children:"Carregando..."})}),m&&(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:(0,u.jsxs)("div",{className:"text-center text-gray-500",children:[(0,u.jsx)("svg",{className:"w-5 h-5 mx-auto mb-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,u.jsx)("p",{className:"text-xs",children:"Erro ao carregar"})]})})]})},v=t.memo(E),y=(0,t.memo)(e=>{let{image:a,priority:s="normal"}=e;if(!a||!a.imagem_header)return null;return(0,u.jsxs)("section",{className:"w-full h-64 sm:h-80 md:h-96 lg:h-[28rem] relative overflow-hidden",children:[(0,u.jsx)(v,{src:a.imagem_header,alt:a.Escola||"Imagem da escola",className:"w-full h-full object-cover",style:{filter:"saturate(1.25) contrast(1.1) brightness(1.05)",transition:"filter 0.3s ease-in-out"},priority:s}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/20 via-black/10 to-black/30"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"}),a.Escola&&(0,u.jsx)("div",{className:"absolute bottom-4 right-4 bg-black/70 backdrop-blur-sm text-white px-4 py-2 rounded-md text-base font-medium shadow-lg",style:{fontSize:"0.9375rem",lineHeight:"1.5",letterSpacing:"0.01em"},children:a.Escola})]})});y.displayName="DashboardImageSection";const j=y,w=e=>{let{children:a}=e;return(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-600",children:"Carregando gr\xe1fico..."})]})}),children:a})},A=(0,t.lazy)(()=>Promise.all([s.e(232),s.e(734),s.e(913),s.e(187),s.e(463)]).then(s.bind(s,4463))),I=(0,t.lazy)(()=>Promise.all([s.e(232),s.e(734),s.e(913),s.e(187),s.e(605)]).then(s.bind(s,75605))),N=(0,t.lazy)(()=>Promise.all([s.e(232),s.e(734),s.e(913),s.e(340)]).then(s.bind(s,62959))),S=(0,t.lazy)(()=>Promise.all([s.e(232),s.e(734),s.e(913),s.e(763)]).then(s.bind(s,50763))),P=(0,t.lazy)(()=>Promise.all([s.e(232),s.e(734),s.e(913),s.e(70)]).then(s.bind(s,1070))),D=()=>{const{dataPoints:e}=(0,i.e)(),{data:a,loading:s,error:o}=(()=>{const[e,a]=(0,t.useState)(!0),[s,i]=(0,t.useState)(null),[o,n]=(0,t.useState)({alunosPorEscola:[],distribuicaoAlunos:[],distribuicaoAlunosModalidade:[],equipamentos:[],escolasPorDiretoria:[],tiposEnsino:[]});return(0,t.useEffect)(()=>{(async()=>{try{a(!0),i(null);const[e,s,t,o,c,d]=await Promise.all([l.getAlunosPorEscolaData().catch(e=>(r.A.error("Erro ao carregar alunos por escola:",e),[])),l.getDistribuicaoAlunosData().catch(e=>(r.A.error("Erro ao carregar distribui\xe7\xe3o de alunos:",e),[])),l.getDistribuicaoAlunosModalidadeData().catch(e=>(r.A.error("Erro ao carregar distribui\xe7\xe3o de alunos por modalidade:",e),[])),l.getEquipamentosData().catch(e=>(r.A.error("Erro ao carregar equipamentos:",e),[])),l.getEscolasPorDiretoriaData().catch(e=>(r.A.error("Erro ao carregar escolas por diretoria:",e),[])),l.getTiposEnsinoData().catch(e=>(r.A.error("Erro ao carregar tipos de ensino:",e),[]))]);n({alunosPorEscola:e,distribuicaoAlunos:s,distribuicaoAlunosModalidade:t,equipamentos:o,escolasPorDiretoria:c,tiposEnsino:d})}catch(e){r.A.error("Erro geral ao carregar dados:",e),i("Erro ao carregar os dados dos gr\xe1ficos: ".concat(e.message))}finally{a(!1)}})()},[]),{data:o,loading:e,error:s}})(),{headerImages:n,imagesReady:h}=(()=>{const[e,a]=(0,t.useState)([]),[s,i]=(0,t.useState)(!1),[o,n]=(0,t.useState)(null),[l,d]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{(async()=>{const e=setTimeout(()=>{r.A.warn("Timeout no carregamento de imagens. Continuando sem imagens."),i(!0),d(!0)},1e4);try{if(await new Promise(e=>setTimeout(e,300)),!c.N)return r.A.warn("Supabase client n\xe3o est\xe1 dispon\xedvel. Pulando carregamento de imagens."),clearTimeout(e),i(!0),void d(!0);const s="https://cbzwrxmcuhsxehdrsrvi.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNiendyeG1jdWhzeGVoZHJzcnZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MDU4OTEsImV4cCI6MjA2NTQ4MTg5MX0.iPtxfSuxy_o3hzjXoyNqXtpRFlLRooa8HBi6gl6hB34";if(!s||!t||s.includes("seu-projeto")||t.includes("sua_chave_anonima"))return r.A.warn("Credenciais do Supabase n\xe3o configuradas. Pulando carregamento de imagens."),clearTimeout(e),i(!0),void d(!0);const o=c.N.from("escolas_completa").select("id, Escola, imagem_header").not("imagem_header","is",null).neq("imagem_header","").limit(100),l=new Promise(e=>setTimeout(()=>e({data:null,error:new Error("Query timeout")}),5e3)),m=await Promise.race([o.then(e=>e),l]).catch(e=>(r.A.warn("Erro na query do Supabase:",e.message||e),{data:null,error:e})),{data:u,error:h}=m;if(clearTimeout(e),h)return r.A.warn("Erro ao carregar imagens de header do Supabase:",h.message||h),i(!0),void d(!0);if(u&&u.length>0){const e=[],s=new Set;u.forEach(a=>{a.imagem_header&&!s.has(a.imagem_header)&&(s.add(a.imagem_header),e.push(a))});const t=[...e].sort(()=>.5-Math.random()),o=t.slice(0,Math.min(6,t.length)),r=[],l=new Set;o.forEach(e=>{l.has(e.imagem_header)||(l.add(e.imagem_header),r.push(e))});const c=r.slice(0,5),m=new Set(c.map(e=>e.imagem_header));a(c);const h=r.filter(e=>!m.has(e.imagem_header));if(h.length>0){const e=Math.floor(Math.random()*h.length);n(h[e])}else if(r.length>5){const e=r.slice(5),a=Math.floor(Math.random()*e.length);n(e[a])}else if(r.length>1){const e=r.slice(1),a=Math.floor(Math.random()*e.length);n(e[a])}i(!0),d(!0);const p=r.map(e=>e.imagem_header).filter(Boolean);"undefined"!==typeof document&&p.length>0&&(p.forEach(e=>{try{const a=document.createElement("link");a.rel="preload",a.as="image",a.href=e,"fetchPriority"in a&&(a.fetchPriority="high"),document.head.appendChild(a)}catch(a){}}),Promise.allSettled(p.map(e=>new Promise(a=>{const s=new Image,t=setTimeout(()=>a(e),3e3);s.onload=()=>{clearTimeout(t),a(e)},s.onerror=()=>{clearTimeout(t),a(e)},"fetchPriority"in s&&(s.fetchPriority="high"),s.src=e}))).catch(()=>{}))}else r.A.warn("Nenhuma imagem de header encontrada no Supabase."),i(!0),d(!0)}catch(s){clearTimeout(e),r.A.warn("Erro ao carregar imagens de header (n\xe3o cr\xedtico):",s.message||s),i(!0),d(!0)}})()},[]),{headerImages:e,descriptionImage:o,imagesReady:l,imagesPreloaded:s}})(),x=(0,t.useMemo)(()=>[{label:"In\xedcio",path:"/",active:!1},{label:"Alguns dados",path:"/dashboard",active:!0}],[]);return s?(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)("p",{className:"mt-4 text-xl text-gray-700",style:{fontSize:"1.25rem",lineHeight:"1.75",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},children:"Carregando dados dos gr\xe1ficos..."})})}):o?(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,u.jsx)("div",{className:"text-center",children:(0,u.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,u.jsx)("p",{className:"font-bold",children:"Erro"}),(0,u.jsx)("p",{children:o})]})})}):(0,u.jsxs)("div",{className:"min-h-screen dashboard-scroll relative",children:[(0,u.jsx)(d.A,{title:"Alguns dados",showNavbar:!0,dataPoints:e||[],children:(0,u.jsx)(m.A,{breadcrumbs:x})}),(0,u.jsxs)("div",{className:"relative z-10 hero-content-spacer",style:{marginTop:"300px"},children:[(0,u.jsx)(p,{}),(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsx)("section",{className:"bg-white py-12 sm:py-16 transition-colors duration-500",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)(w,{children:(0,u.jsx)(A,{data:a.distribuicaoAlunosModalidade})})})}),h&&n[1]&&(0,u.jsx)(j,{image:n[1],priority:"high"}),(0,u.jsx)("section",{className:"bg-indigo-50 py-12 sm:py-16 transition-colors duration-500",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)(w,{children:(0,u.jsx)(P,{data:a.tiposEnsino})})})}),h&&n[2]&&(0,u.jsx)(j,{image:n[2],priority:"normal"}),(0,u.jsx)("section",{className:"bg-yellow-100 py-12 sm:py-16 transition-colors duration-500",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)(w,{children:(0,u.jsx)(I,{distribuicaoData:a.distribuicaoAlunos,alunosPorEscolaData:a.alunosPorEscola})})})}),h&&n[3]&&(0,u.jsx)(j,{image:n[3],priority:"normal"}),(0,u.jsx)("section",{className:"bg-green-100 py-12 sm:py-16 transition-colors duration-500",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)(w,{children:(0,u.jsx)(N,{data:a.equipamentos})})})}),h&&n[4]&&(0,u.jsx)(j,{image:n[4],priority:"normal"}),(0,u.jsx)("section",{className:"bg-gray-100 py-12 sm:py-16 transition-colors duration-500",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)(w,{children:(0,u.jsx)(S,{data:a.escolasPorDiretoria})})})})]})]})]})}},84182:(e,a,s)=>{s.d(a,{A:()=>l});var t=s(65043),i=s(50225),o=s(91357),n=s(70579);const r=(0,t.memo)(e=>{let{breadcrumbs:a}=e;const s=(0,o.Zp)();return(0,n.jsx)("nav",{className:"flex items-center justify-center space-x-2 text-base sm:text-lg text-white/90",style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',letterSpacing:"0.01em"},children:a.map((e,a)=>(0,n.jsxs)("div",{className:"flex items-center",children:[a>0&&(0,n.jsx)(i.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white/70 mx-2"}),e.path?(0,n.jsx)("button",{onClick:()=>s(e.path),className:"hover:text-white transition-colors font-normal",children:e.label}):(0,n.jsx)("span",{className:"font-medium text-white",children:e.label})]},a))})});r.displayName="DashboardBreadcrumbs";const l=r}}]);
//# sourceMappingURL=281.d35e3df6.chunk.js.map