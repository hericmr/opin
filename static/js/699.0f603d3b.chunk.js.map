{"version":3,"file":"static/js/699.0f603d3b.chunk.js","mappings":"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","sources":["services/professorImageMetaService.js","components/EditEscolaPanel/ProfessorImageUploadSection.js","components/AdminPanel/tabs/ImagensProfessoresTab.js","components/AddLocationPanel/components/PDFUploadSection.js","components/AdminPanel/tabs/DocumentosTab.js","services/versionamentoService.js","components/AdminPanel/hooks/useEscolas.js","components/AdminPanel/utils/modalidadesOptions.js","components/AdminPanel/hooks/useModalidades.js","components/AdminPanel/constants/adminConstants.js","components/AdminPanel/AdminSidebar.js","components/AdminPanel/AdminToolbar.js","components/Auth/LoginModal.js","components/Auth/ProtectedRoute.js","components/AdminPanel/tabs/ModalidadesTab.js","components/AdminPanel/tabs/DadosBasicosTab.js","components/AdminPanel/tabs/PovosLinguasTab.js","components/AdminPanel/tabs/InfraestruturaTab.js","components/AdminPanel/tabs/GestaoProfessoresTab.js","components/AdminPanel/tabs/MaterialPedagogicoTab.js","components/AdminPanel/tabs/ProjetosParceriasTab.js","components/AdminPanel/tabs/RedesSociaisTab.js","components/AdminPanel/VideoManager.js","components/AdminPanel/tabs/VideoTab.js","components/shared/QuillEditor.js","components/AdminPanel/tabs/RichTextEditor.js","components/AdminPanel/tabs/HistoriasTab.js","services/fotoProfessorService.js","components/AdminPanel/tabs/HistoriaProfessoresTab.js","components/AdminPanel/tabs/CoordenadasTab.js","components/AdminPanel/tabs/TabelasIntegraisTab.js","components/AdminPanel/components/EditableTable.js","components/AdminPanel/tabs/TabelaEditavelTab.js","components/AdminPanel/components/CompletenessDashboard.js","components/AdminPanel/components/MetadadosModal.js","utils/campoComparator.js","components/AdminPanel/index.js","services/uploadService.js","config/storage.js","services/escolaImageService.js","services/headerImageService.js","components/EditEscolaPanel/ImageUploadSection.js","components/AdminPanel/tabs/ImagensEscolaTab.js"],"sourcesContent":["import { supabase } from '../supabaseClient';\n\nexport const addProfessorImageMeta = async (meta) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .insert([meta])\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const updateProfessorImageMeta = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const getProfessorImageMetaByUrl = async (imagem_url, escola_id) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .select('*')\n    .eq('imagem_url', imagem_url)\n    .eq('escola_id', escola_id)\n    .eq('ativo', true)\n    .single();\n  if (error && error.code !== 'PGRST116') throw error;\n  return data || null;\n}; ","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, User, Trash2, Check, AlertCircle, Save, RefreshCw } from 'lucide-react';\nimport { \n  uploadProfessorImage, \n  getEscolaImages, \n  deleteImage, \n  replaceImage\n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable\n} from '../../services/legendasService';\nimport {\n  addProfessorImageMeta,\n  updateProfessorImageMeta,\n  getProfessorImageMetaByUrl\n} from '../../services/professorImageMetaService';\n\nconst ProfessorImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const [genero] = useState('professor');\n  const [titulo] = useState('');\n  \n  // Estados para trocar imagem\n  const [replacingImage, setReplacingImage] = useState(null);\n  const [replacementFile, setReplacementFile] = useState(null);\n\n  // Buscar imagens existentes dos professores\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-professores');\n      setExistingImages(images);\n      \n\n    } catch (err) {\n      console.error('Erro ao buscar imagens dos professores:', err);\n      setError('Erro ao carregar imagens dos professores');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchExistingImages();\n  }, [fetchExistingImages]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos (professores)...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length) return;\n      console.log('Buscando legendas para', existingImages.length, 'imagens de professores');\n      const legendasMap = {};\n      for (const img of existingImages) {\n        console.log('Buscando legenda para imagem de professor:', img.url);\n        const legenda = await getLegendaByImageUrl(img.url, escolaId, 'professor');\n        console.log('Legenda encontrada para professor:', legenda);\n        legendasMap[img.url] = legenda;\n      }\n      setExistingImages(prev => prev.map(img => ({\n        ...img,\n        legendaData: legendasMap[img.url] || {\n          legenda: '',\n          descricao_detalhada: '',\n          autor_foto: '',\n          data_foto: '',\n          categoria: 'geral',\n        }\n      })));\n    };\n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens aps 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleo de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" no  uma imagem vlida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\"  muito grande. Tamanho mximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, []);\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadProfessorImage(file, escolaId, '', genero, titulo);\n        uploadedImages.push(uploadedImage);\n\n        // Criar registro em imagens_professores\n        await addProfessorImageMeta({\n          escola_id: escolaId,\n          imagem_url: uploadedImage.url,\n          nome_arquivo: file.name,\n          autor: '',\n          ativo: true\n        });\n      }\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => [...prev, ...uploadedImages]);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) do(s) professor(es) carregada(s) com sucesso!`);\n\n\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem do professor?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-professores');\n      \n      // Recarregar lista a partir do storage para refletir estado real\n      await fetchExistingImages();\n\n      setSuccess('Imagem do professor excluda com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Trocar imagem existente\n  const handleReplaceImage = async (imageId, oldFilePath) => {\n    if (!replacementFile) {\n      setError('Selecione uma nova imagem para substituir');\n      return;\n    }\n\n    try {\n      setUploading(true);\n      setError('');\n\n      // Substituir a imagem\n      const newImage = await replaceImage(\n        replacementFile, \n        oldFilePath, \n        escolaId, \n        'imagens-professores',\n        existingImages.find(img => img.id === imageId)?.descricao || ''\n      );\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => prev.map(img => \n        img.id === imageId ? newImage : img\n      ));\n\n      // Limpar estados\n      setReplacingImage(null);\n      setReplacementFile(null);\n      setSuccess('Imagem do professor substituda com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao substituir imagem:', err);\n      setError(`Erro ao substituir imagem: ${err.message}`);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Iniciar processo de trocar imagem\n  const startReplaceImage = (imageId) => {\n    setReplacingImage(imageId);\n    setReplacementFile(null);\n  };\n\n  // Cancelar troca de imagem\n  const cancelReplaceImage = () => {\n    setReplacingImage(null);\n    setReplacementFile(null);\n  };\n\n  // Selecionar arquivo para substituio\n  const handleReplacementFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setReplacementFile(file);\n    }\n  };\n\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda de professor ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    // Validar e limpar dados da legenda\n    const cleanLegendaData = { ...legendaData };\n    \n    // Tratar campo data_foto - remover se estiver vazio\n    if (!cleanLegendaData.data_foto || cleanLegendaData.data_foto.trim() === '') {\n      delete cleanLegendaData.data_foto;\n    }\n    \n    // Tratar outros campos vazios que podem causar problemas\n    Object.keys(cleanLegendaData).forEach(key => {\n      if (cleanLegendaData[key] === '') {\n        delete cleanLegendaData[key];\n      }\n    });\n    \n    console.log('Dados limpos da legenda:', cleanLegendaData);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'professor');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...cleanLegendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualizao:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda de professor atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...cleanLegendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'professor'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda de professor criada:', novaLegenda);\n      }\n      \n      // Atualizar imagens_professores\n      console.log('Atualizando metadados da imagem...');\n      let meta = await getProfessorImageMetaByUrl(image.publicUrl, escolaId);\n      if (meta) {\n        console.log('Metadados encontrados:', meta);\n        await updateProfessorImageMeta(meta.id, {\n          autor: cleanLegendaData.autor_foto,\n          updated_at: new Date().toISOString()\n        });\n        console.log('Metadados atualizados com sucesso');\n      } else {\n        console.log('Nenhum metadado encontrado para atualizar');\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda de professor ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      setError('Erro ao salvar legenda: ' + err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-800/30 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <span className=\"ml-2 text-gray-400\">Carregando imagens dos professores...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <User className=\"w-5 h-5 text-green-400\" />\n          <h3 className=\"text-lg font-semibold text-gray-100\">Imagens dos Professores</h3>\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          {existingImages.length} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-900/50 border-red-700/50 rounded-xl\">\n          <AlertCircle className=\"w-5 h-5 text-red-400\" />\n          <span className=\"text-red-300\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-900/50 border-green-700/50 rounded-xl\">\n          <Check className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-green-300\">{success}</span>\n        </div>\n      )}\n\n      {/* rea de Upload */}\n      <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-600 bg-gray-800/50' \n                : 'border-gray-600 bg-gray-800/50 hover:border-green-400 hover:bg-gray-700/50'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-green-400 mx-auto mb-2\" />\n            <p className=\"text-gray-300 mb-2\">\n              Arraste imagens dos professores aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-400 mb-4\">\n              JPG, PNG, WEBP, GIF  Mximo 5MB por arquivo  Mximo 5 imagens\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-400\">\n                <span>Fazendo upload das imagens dos professores...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-100\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-400 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-100\">Imagens dos Professores ({existingImages.length})</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image) => (\n              <div key={image.id} className=\"bg-gray-800/50 border border-gray-700/50 rounded-lg overflow-hidden shadow-sm\">\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem do professor'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Overlay de aes */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button\n                      onClick={() => startReplaceImage(image.id)}\n                      className=\"p-2 bg-orange-500 text-white rounded-full hover:bg-orange-700\"\n                      title=\"Trocar imagem\"\n                    >\n                      <RefreshCw className=\"w-5 h-5\" />\n                    </button>\n                    \n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Descrio Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrio detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotgrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Trocar Imagem */}\n      {replacingImage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-100\">Trocar Imagem do Professor</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Selecione a nova imagem\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                  onChange={handleReplacementFileSelect}\n                  className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100\"\n                />\n              </div>\n              \n              {replacementFile && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                    Pr-visualizao\n                  </label>\n                  <img\n                    src={URL.createObjectURL(replacementFile)}\n                    alt=\"Nova imagem\"\n                    className=\"w-full h-32 object-cover rounded-lg border border-gray-600\"\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={cancelReplaceImage}\n                className=\"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={() => handleReplaceImage(replacingImage, existingImages.find(img => img.id === replacingImage)?.url)}\n                disabled={!replacementFile || uploading}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Trocando...' : 'Trocar Imagem'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando no h imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-400\">\n          <User className=\"w-12 h-12 mx-auto mb-2 text-gray-500\" />\n          <p>Nenhuma imagem dos professores adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar os professores da escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nProfessorImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ProfessorImageUploadSection;","import React from 'react';\nimport ProfessorImageUploadSection from '../../EditEscolaPanel/ProfessorImageUploadSection';\n\nconst ImagensProfessoresTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar as imagens dos professores</p>\n      </div>\n    );\n  }\n\n  return (\n    <ProfessorImageUploadSection \n      escolaId={escolaId}\n      onImagesUpdate={() => {\n        // Callback para atualizar dados se necessrio\n        console.log('Imagens dos professores atualizadas');\n      }}\n    />\n  );\n};\n\nexport default ImagensProfessoresTab; ","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, File, X, AlertCircle } from 'lucide-react';\nimport { uploadPDF } from '../../../services/uploadService';\nimport { FILE_RESTRICTIONS } from '../../../config/storage';\n\nconst PDFUploadSection = ({ onUploadComplete, onRemove, existingUrls = [] }) => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [previewUrls, setPreviewUrls] = useState(existingUrls);\n\n  const handleFileSelect = async (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validate each file\n    const validFiles = files.filter(file => {\n      const isValidType = FILE_RESTRICTIONS.PDF.ALLOWED_TYPES.includes(file.type);\n      const isValidSize = file.size <= FILE_RESTRICTIONS.PDF.MAX_SIZE;\n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length !== files.length) {\n      setError('Alguns arquivos foram ignorados. Use apenas PDFs at 10MB.');\n    }\n\n    setSelectedFiles(prev => [...prev, ...validFiles]);\n  };\n\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setIsUploading(true);\n    setError(null);\n    const uploadedUrls = [];\n\n    try {\n      for (const file of selectedFiles) {\n        const url = await uploadPDF(file);\n        uploadedUrls.push(url);\n      }\n\n      const allUrls = [...previewUrls, ...uploadedUrls];\n      setPreviewUrls(allUrls);\n      onUploadComplete(allUrls);\n      setSelectedFiles([]);\n    } catch (err) {\n      setError('Erro ao fazer upload dos arquivos. Tente novamente.');\n      console.error('Erro no upload:', err);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleRemove = (index) => {\n    const newUrls = previewUrls.filter((_, i) => i !== index);\n    setPreviewUrls(newUrls);\n    onRemove(newUrls);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"block font-medium text-gray-800\">\n          Documentos PDF\n          <span className=\"text-sm text-gray-500 ml-2\">\n            (Mx. {FILE_RESTRICTIONS.PDF.MAX_SIZE / (1024 * 1024)}MB cada arquivo)\n          </span>\n        </label>\n        {error && (\n          <div className=\"flex items-center text-red-500 text-sm\">\n            <AlertCircle size={16} className=\"mr-1\" />\n            {error}\n          </div>\n        )}\n      </div>\n\n      {/* File Input */}\n      <div className=\"grid grid-cols-1 gap-4\">\n        <label className=\"cursor-pointer\">\n          <input\n            type=\"file\"\n            accept=\".pdf\"\n            multiple\n            onChange={handleFileSelect}\n            className=\"hidden\"\n            disabled={isUploading}\n          />\n          <div className={`flex items-center justify-center gap-2 border-2 border-dashed rounded-lg p-4 \n            ${isUploading ? 'border-gray-300 bg-gray-50' : 'border-blue-300 hover:border-blue-400 bg-blue-50'}`}>\n            <Upload size={20} className={isUploading ? 'text-gray-400' : 'text-blue-500'} />\n            <span className={isUploading ? 'text-gray-500' : 'text-blue-600'}>\n              {isUploading ? 'Fazendo upload...' : 'Selecionar PDFs'}\n            </span>\n          </div>\n        </label>\n\n        {/* Selected Files Preview */}\n        {selectedFiles.length > 0 && (\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-sm text-gray-700\">Arquivos selecionados:</h4>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {selectedFiles.map((file, index) => (\n                <div key={index} className=\"flex items-center justify-between bg-gray-50 p-2 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <File size={16} className=\"text-gray-500\" />\n                    <span className=\"text-sm text-gray-700\">{file.name}</span>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => setSelectedFiles(prev => prev.filter((_, i) => i !== index))}\n                    className=\"text-gray-500 hover:text-red-500\"\n                  >\n                    <X size={16} />\n                  </button>\n                </div>\n              ))}\n            </div>\n            <button\n              type=\"button\"\n              onClick={handleUpload}\n              disabled={isUploading}\n              className={`w-full py-2 px-4 rounded-lg text-white font-medium\n                ${isUploading ? 'bg-gray-400' : 'bg-blue-500 hover:bg-blue-600'}`}\n            >\n              {isUploading ? 'Enviando...' : 'Fazer Upload'}\n            </button>\n          </div>\n        )}\n\n        {/* Uploaded Files Preview */}\n        {previewUrls.length > 0 && (\n          <div className=\"space-y-2\">\n            <h4 className=\"font-medium text-sm text-gray-700\">Documentos enviados:</h4>\n            <div className=\"grid grid-cols-1 gap-2\">\n              {previewUrls.map((url, index) => (\n                <div key={index} className=\"flex items-center justify-between bg-gray-50 p-2 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <File size={16} className=\"text-gray-500\" />\n                    <a\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      Documento {index + 1}\n                    </a>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemove(index)}\n                    className=\"text-gray-500 hover:text-red-500\"\n                  >\n                    <X size={16} />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nPDFUploadSection.propTypes = {\n  onUploadComplete: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  existingUrls: PropTypes.arrayOf(PropTypes.string),\n};\n\nexport default PDFUploadSection; ","import React, { useState } from 'react';\nimport PDFUploadSection from '../../AddLocationPanel/components/PDFUploadSection';\n\nconst DocumentosTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n  const [documentos, setDocumentos] = useState(editingLocation?.documentos || []);\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar seus documentos</p>\n      </div>\n    );\n  }\n\n  const handleUploadComplete = (urls) => {\n    setDocumentos(urls);\n    // Aqui voc pode salvar os documentos no banco de dados se necessrio\n    console.log('Documentos atualizados:', urls);\n  };\n\n  const handleRemove = (urls) => {\n    setDocumentos(urls);\n    // Aqui voc pode atualizar o banco de dados se necessrio\n    console.log('Documentos aps remoo:', urls);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n          Documentos da Escola\n        </h3>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Faa upload de documentos da escola em formato PDF. No h limite no nmero de documentos.\n        </p>\n        \n        <PDFUploadSection \n          onUploadComplete={handleUploadComplete}\n          onRemove={handleRemove}\n          existingUrls={documentos}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentosTab; ","import { supabase } from '../supabaseClient';\nimport { AuthService } from './authService';\n\n/**\n * Servio para gerenciar versionamento de metadados\n */\nexport class VersionamentoService {\n  \n  /**\n   * Obter o autor atual (usurio autenticado)\n   * @returns {Promise<string|null>} Nome do usurio ou null se no autenticado\n   */\n  static async obterAutorAtual() {\n    try {\n      const isAuthenticated = await AuthService.isAuthenticated();\n      if (!isAuthenticated) {\n        return null;\n      }\n      \n      const currentUser = await AuthService.getCurrentUser();\n      return currentUser?.username || 'admin';\n    } catch (error) {\n      console.warn('Erro ao obter autor atual:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Registrar uma nova verso de dados\n   * @param {Object} params - Parmetros da verso\n   * @param {string} params.nomeTabela - Nome da tabela onde ocorreu a alterao\n   * @param {string} params.chaveLinha - Chave primria da linha afetada (convertida para string)\n   * @param {string|null} params.nomeCampo - Nome do campo especfico alterado (opcional)\n   * @param {string|null} params.fonteId - ID da fonte de dados (opcional)\n   * @param {string|null} params.autor - Nome do autor (opcional, ser obtido automaticamente se no fornecido)\n   * @param {string|null} params.observacoes - Observaes sobre a alterao (opcional)\n   * @returns {Promise<Object>} Resultado da operao { success: boolean, data?: Object, error?: string }\n   */\n  static async registrarVersaoDados({\n    nomeTabela,\n    chaveLinha,\n    nomeCampo = null,\n    fonteId = null,\n    autor = null,\n    observacoes = null\n  }) {\n    try {\n      // Validar parmetros obrigatrios\n      if (!nomeTabela || nomeTabela.trim() === '') {\n        throw new Error('nomeTabela  obrigatrio');\n      }\n      \n      if (!chaveLinha || chaveLinha.toString().trim() === '') {\n        throw new Error('chaveLinha  obrigatrio');\n      }\n\n      // Obter autor se no fornecido\n      let autorFinal = autor;\n      if (!autorFinal) {\n        autorFinal = await this.obterAutorAtual();\n      }\n\n      // Preparar dados para insero\n      const dadosVersao = {\n        nome_tabela: nomeTabela.trim(),\n        chave_linha: chaveLinha.toString().trim(),\n        autor: autorFinal,\n        criado_em: new Date().toISOString()\n      };\n\n      // Adicionar campos opcionais se fornecidos\n      if (nomeCampo && nomeCampo.trim() !== '') {\n        dadosVersao.nome_campo = nomeCampo.trim();\n      }\n\n      if (fonteId) {\n        dadosVersao.fonte_id = fonteId;\n      }\n\n      if (observacoes && observacoes.trim() !== '') {\n        dadosVersao.observacoes = observacoes.trim();\n      }\n\n      // Inserir registro de verso\n      const { data, error } = await supabase\n        .from('versoes_dados')\n        .insert(dadosVersao)\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Erro ao registrar verso de dados:', error);\n        throw error;\n      }\n\n      return {\n        success: true,\n        data: data\n      };\n    } catch (error) {\n      console.error('Erro no servio de versionamento:', error);\n      return {\n        success: false,\n        error: error.message || 'Erro ao registrar verso de dados'\n      };\n    }\n  }\n\n  /**\n   * Buscar todas as fontes de dados disponveis\n   * @returns {Promise<Object>} Resultado com lista de fontes\n   */\n  static async buscarFontesDados() {\n    try {\n      const { data, error } = await supabase\n        .from('fontes_dados')\n        .select('id, nome, descricao')\n        .order('nome', { ascending: true });\n\n      if (error) {\n        throw error;\n      }\n\n      return {\n        success: true,\n        data: data || []\n      };\n    } catch (error) {\n      console.error('Erro ao buscar fontes de dados:', error);\n      return {\n        success: false,\n        error: error.message || 'Erro ao buscar fontes de dados',\n        data: []\n      };\n    }\n  }\n\n  /**\n   * Buscar histrico de verses para uma linha especfica\n   * @param {string} nomeTabela - Nome da tabela\n   * @param {string} chaveLinha - Chave primria da linha\n   * @returns {Promise<Object>} Resultado com lista de verses\n   */\n  static async buscarVersoesPorLinha(nomeTabela, chaveLinha) {\n    try {\n      const { data, error } = await supabase\n        .from('versoes_dados')\n        .select(`\n          id,\n          nome_tabela,\n          chave_linha,\n          autor,\n          observacoes,\n          criado_em,\n          fonte_id,\n          fontes_dados:nome,\n          fontes_dados:descricao\n        `)\n        .eq('nome_tabela', nomeTabela)\n        .eq('chave_linha', chaveLinha.toString())\n        .order('criado_em', { ascending: false });\n\n      if (error) {\n        throw error;\n      }\n\n      return {\n        success: true,\n        data: data || []\n      };\n    } catch (error) {\n      console.error('Erro ao buscar verses:', error);\n      return {\n        success: false,\n        error: error.message || 'Erro ao buscar verses',\n        data: []\n      };\n    }\n  }\n}\n\n","import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../../../supabaseClient';\nimport { VersionamentoService } from '../../../services/versionamentoService';\n\nexport const useEscolas = () => {\n  const [escolas, setEscolas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedType, setSelectedType] = useState('todos');\n\n  // Buscar todas as escolas\n  const fetchEscolas = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('*')\n        .order('Escola', { ascending: true });\n\n      if (error) throw error;\n      \n      // Mapear os dados para usar os nomes originais das colunas\n      const escolasMapeadas = data.map(escola => ({\n        ...escola,\n        // Garantir que os novos campos de endereo existam\n        logradouro: escola.logradouro || '',\n        numero: escola.numero || '',\n        complemento: escola.complemento || '',\n        bairro: escola.bairro || '',\n        cep: escola.cep || '',\n        estado: escola.estado || 'SP'\n      }));\n      \n      setEscolas(escolasMapeadas);\n    } catch (err) {\n      console.error('Erro ao buscar escolas:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Filtrar escolas baseado no termo de busca\n  const filteredEscolas = useCallback(() => {\n    return escolas.filter(escola => \n      escola.Escola?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  }, [escolas, searchTerm]);\n\n  // Atualizar escola na lista local\n  const updateEscolaInList = useCallback((escolaId, updatedData) => {\n    setEscolas(prev => prev.map(escola => \n      escola.id === escolaId ? { ...escola, ...updatedData } : escola\n    ));\n  }, []);\n\n  // Adicionar nova escola  lista\n  const addEscolaToList = useCallback((novaEscola) => {\n    setEscolas(prev => [...prev, novaEscola]);\n  }, []);\n\n  // Remover escola da lista\n  const removeEscolaFromList = useCallback((escolaId) => {\n    setEscolas(prev => prev.filter(escola => escola.id !== escolaId));\n  }, []);\n\n  // Buscar escola por ID\n  const getEscolaById = useCallback((escolaId) => {\n    return escolas.find(escola => escola.id === escolaId);\n  }, [escolas]);\n\n  // Buscar escola por nome\n  const getEscolaByName = useCallback((nome) => {\n    return escolas.find(escola => \n      escola.Escola?.toLowerCase() === nome.toLowerCase()\n    );\n  }, [escolas]);\n\n  // Salvar escola no Supabase\n  const saveEscola = useCallback(async (escolaData, metadados = null) => {\n    try {\n      setError(null);\n      \n      if (escolaData.id) {\n        // Atualizar escola existente\n        const { data, error } = await supabase\n          .from('escolas_completa')\n          .update({\n            'Escola': escolaData.Escola,\n            'Municpio': escolaData['Municpio'],\n            'Endereo': escolaData['Endereo'],\n            'Terra Indigena (TI)': escolaData['Terra Indigena (TI)'],\n            'Escola Estadual ou Municipal': escolaData['Escola Estadual ou Municipal'],\n            'Parcerias com o municpio': escolaData['Parcerias com o municpio'],\n            'Diretoria de Ensino': escolaData['Diretoria de Ensino'],\n            'Ano de criao da escola': escolaData['Ano de criao da escola'],\n            'Povos indigenas': escolaData['Povos indigenas'],\n            'Linguas faladas': escolaData['Linguas faladas'],\n            'Modalidade de Ensino/turnos de funcionamento': escolaData['Modalidade de Ensino/turnos de funcionamento'],\n            'Numero de alunos': escolaData['Numero de alunos'],\n            'turnos_funcionamento': escolaData['turnos_funcionamento'],\n            'Espao escolar e estrutura': escolaData['Espao escolar e estrutura'],\n            'Acesso  gua': escolaData['Acesso  gua'],\n            'Tem coleta de lixo?': escolaData['Tem coleta de lixo?'],\n            'Acesso  internet': escolaData['Acesso  internet'],\n            'Equipamentos Tecs': escolaData['Equipamentos Tecs'],\n            'Modo de acesso  escola': escolaData['Modo de acesso  escola'],\n            'Gesto/Nome': escolaData['Gesto/Nome'],\n            'Outros funcionrios': escolaData['Outros funcionrios'],\n            'Quantidade de professores indgenas': escolaData['Quantidade de professores indgenas'],\n            'Quantidade de professores no indgenas': escolaData['Quantidade de professores no indgenas'],\n            'Professores falam a lngua indgena?': escolaData['Professores falam a lngua indgena?'],\n            'Formao dos professores': escolaData['Formao dos professores'],\n            'Formao continuada oferecida': escolaData['Formao continuada oferecida'],\n            'A escola possui PPP prprio?': escolaData['A escola possui PPP prprio?'],\n            'PPP elaborado com a comunidade?': escolaData['PPP elaborado com a comunidade?'],\n            'Material pedaggico no indgena': escolaData['Material pedaggico no indgena'],\n            'Material pedaggico indgena': escolaData['Material pedaggico indgena'],\n            'Prticas pedaggicas indgenas': escolaData['Prticas pedaggicas indgenas'],\n            'Formas de avaliao': escolaData['Formas de avaliao'],\n            'Projetos em andamento': escolaData['Projetos em andamento'],\n            'Parcerias com universidades?': escolaData['Parcerias com universidades?'],\n            'Aes com ONGs ou coletivos?': escolaData['Aes com ONGs ou coletivos?'],\n            'Desejos da comunidade para a escola': escolaData['Desejos da comunidade para a escola'],\n            'Escola utiliza redes sociais?': escolaData['Escola utiliza redes sociais?'],\n            'Links das redes sociais': escolaData['Links das redes sociais'],\n            'historia_da_escola': escolaData['historia_da_escola'],\n            'Latitude': escolaData['Latitude'],\n            'Longitude': escolaData['Longitude'],\n            'link_para_videos': escolaData['link_para_videos'],\n            'logradouro': escolaData['logradouro'],\n            'numero': escolaData['numero'],\n            'complemento': escolaData['complemento'],\n            'bairro': escolaData['bairro'],\n            'cep': escolaData['cep'],\n            'estado': escolaData['estado'],\n            'Cozinha': escolaData['cozinha'],\n            'Merenda_escolar': escolaData['merenda_escolar'],\n            'diferenciada': escolaData['diferenciada'],\n            'imagem_header': escolaData['imagem_header']\n          })\n          .eq('id', escolaData.id)\n          .select();\n\n        if (error) throw error;\n        \n        // Atualizar na lista local\n        updateEscolaInList(escolaData.id, data[0]);\n        \n        // Registrar verso de dados apenas se metadados foram fornecidos\n        // Se metadados for null, o modal ser responsvel por registrar depois\n        if (metadados !== null) {\n          try {\n            await VersionamentoService.registrarVersaoDados({\n              nomeTabela: 'escolas_completa',\n              chaveLinha: escolaData.id.toString(),\n              fonteId: metadados?.fonte_id || null,\n              autor: metadados?.autor || null,\n              observacoes: metadados?.observacoes || null\n            });\n          } catch (versionError) {\n            // Log do erro mas no falha a operao principal\n            console.warn('Erro ao registrar verso de dados (no crtico):', versionError);\n          }\n        }\n        \n        return { success: true, data: data[0] };\n      } else {\n        // Criar nova escola\n        const { data, error } = await supabase\n          .from('escolas_completa')\n          .insert({\n            'Escola': escolaData.Escola,\n            'Municpio': escolaData['Municpio'],\n            'Endereo': escolaData['Endereo'],\n            'Terra Indigena (TI)': escolaData['Terra Indigena (TI)'],\n            'Escola Estadual ou Municipal': escolaData['Escola Estadual ou Municipal'],\n            'Parcerias com o municpio': escolaData['Parcerias com o municpio'],\n            'Diretoria de Ensino': escolaData['Diretoria de Ensino'],\n            'Ano de criao da escola': escolaData['Ano de criao da escola'],\n            'Povos indigenas': escolaData['Povos indigenas'],\n            'Linguas faladas': escolaData['Linguas faladas'],\n            'Modalidade de Ensino/turnos de funcionamento': escolaData['Modalidade de Ensino/turnos de funcionamento'],\n            'Numero de alunos': escolaData['Numero de alunos'],\n            'turnos_funcionamento': escolaData['turnos_funcionamento'],\n            'Espao escolar e estrutura': escolaData['Espao escolar e estrutura'],\n            'Acesso  gua': escolaData['Acesso  gua'],\n            'Tem coleta de lixo?': escolaData['Tem coleta de lixo?'],\n            'Acesso  internet': escolaData['Acesso  internet'],\n            'Equipamentos Tecs': escolaData['Equipamentos Tecs'],\n            'Modo de acesso  escola': escolaData['Modo de acesso  escola'],\n            'Gesto/Nome': escolaData['Gesto/Nome'],\n            'Outros funcionrios': escolaData['Outros funcionrios'],\n            'Quantidade de professores indgenas': escolaData['Quantidade de professores indgenas'],\n            'Quantidade de professores no indgenas': escolaData['Quantidade de professores no indgenas'],\n            'Professores falam a lngua indgena?': escolaData['Professores falam a lngua indgena?'],\n            'Formao dos professores': escolaData['Formao dos professores'],\n            'Formao continuada oferecida': escolaData['Formao continuada oferecida'],\n            'A escola possui PPP prprio?': escolaData['A escola possui PPP prprio?'],\n            'PPP elaborado com a comunidade?': escolaData['PPP elaborado com a comunidade?'],\n            'Material pedaggico no indgena': escolaData['Material pedaggico no indgena'],\n            'Material pedaggico indgena': escolaData['Material pedaggico indgena'],\n            'Prticas pedaggicas indgenas': escolaData['Prticas pedaggicas indgenas'],\n            'Formas de avaliao': escolaData['Formas de avaliao'],\n            'Projetos em andamento': escolaData['Projetos em andamento'],\n            'Parcerias com universidades?': escolaData['Parcerias com universidades?'],\n            'Aes com ONGs ou coletivos?': escolaData['Aes com ONGs ou coletivos?'],\n            'Desejos da comunidade para a escola': escolaData['Desejos da comunidade para a escola'],\n            'Escola utiliza redes sociais?': escolaData['Escola utiliza redes sociais?'],\n            'Links das redes sociais': escolaData['Links das redes sociais'],\n            'historia_da_escola': escolaData['historia_da_escola'],\n            'Latitude': escolaData['Latitude'],\n            'Longitude': escolaData['Longitude'],\n            'link_para_videos': escolaData['link_para_videos'],\n            'logradouro': escolaData['logradouro'],\n            'numero': escolaData['numero'],\n            'complemento': escolaData['complemento'],\n            'bairro': escolaData['bairro'],\n            'cep': escolaData['cep'],\n            'estado': escolaData['estado'],\n            'Cozinha': escolaData['cozinha'],\n            'Merenda_escolar': escolaData['merenda_escolar'],\n            'diferenciada': escolaData['diferenciada'],\n            'imagem_header': escolaData['imagem_header']\n          })\n          .select();\n\n        if (error) throw error;\n        \n        // Adicionar  lista local\n        addEscolaToList(data[0]);\n        \n        // Registrar verso de dados apenas se metadados foram fornecidos\n        // Se metadados for null, o modal ser responsvel por registrar depois\n        if (metadados !== null) {\n          try {\n            await VersionamentoService.registrarVersaoDados({\n              nomeTabela: 'escolas_completa',\n              chaveLinha: data[0].id.toString(),\n              fonteId: metadados?.fonte_id || null,\n              autor: metadados?.autor || null,\n              observacoes: metadados?.observacoes || null\n            });\n          } catch (versionError) {\n            // Log do erro mas no falha a operao principal\n            console.warn('Erro ao registrar verso de dados (no crtico):', versionError);\n          }\n        }\n        \n        return { success: true, data: data[0] };\n      }\n    } catch (err) {\n      console.error('Erro ao salvar escola:', err);\n      setError(err.message);\n      return { success: false, error: err.message };\n    }\n  }, [updateEscolaInList, addEscolaToList]);\n\n  // Deletar escola do banco de dados\n  const deleteEscola = useCallback(async (escolaId) => {\n    try {\n      setError(null);\n      \n      const { error } = await supabase\n        .from('escolas_completa')\n        .delete()\n        .eq('id', escolaId);\n\n      if (error) throw error;\n      \n      // Remover da lista local\n      removeEscolaFromList(escolaId);\n      return { success: true };\n    } catch (err) {\n      console.error('Erro ao deletar escola:', err);\n      setError(err.message);\n      return { success: false, error: err.message };\n    }\n  }, [removeEscolaFromList]);\n\n  // Carregar escolas na inicializao\n  useEffect(() => {\n    fetchEscolas();\n  }, [fetchEscolas]);\n\n  return {\n    // Estado\n    escolas,\n    loading,\n    error,\n    searchTerm,\n    selectedType,\n    \n    // Aes\n    setSearchTerm,\n    setSelectedType,\n    fetchEscolas,\n    updateEscolaInList,\n    addEscolaToList,\n    removeEscolaFromList,\n    saveEscola,\n    deleteEscola,\n    \n    // Utilitrios\n    filteredEscolas: filteredEscolas(),\n    getEscolaById,\n    getEscolaByName,\n  };\n}; ","// Lista de modalidades de ensino organizadas por categoria\nexport const MODALIDADES_OPTIONS = [\n  // 1. Educao Infantil\n  'Educao Infantil',\n  'Educao Infantil (Idade 0 a 6 anos)',\n  'Educao Infantil (Pr-escola I e II)  1 sala multisseriada',\n  'Educao Infantil (Pr-escola I)  1 sala regular',\n  'Educao Infantil + Ensino Fundamental  multisseriado',\n  'Educao Infantil + Ensino Fundamental  regular e multisseriado',\n  \n  // 2. Educao Infantil + Ensino Fundamental\n  'Educao Infantil + Ensino Fundamental',\n  'Educao Infantil + Ensino Fundamental (Anos Iniciais e Anos Finais)',\n  'Educao Infantil + Ensino Fundamental (Anos Iniciais multisseriado + Anos Finais multisseriado)',\n  'Educao Infantil + Ensino Fundamental (1 ao 9 ano)  Salas multisseriadas',\n  'Educao Infantil + Ensino Fundamental (Pr I + 1 ao 4 ano)  1 sala multisseriada',\n  'Educao Infantil + Ensino Fundamental com EJA  Multisseriado',\n  \n  // 3. Ensino Fundamental - Anos Iniciais\n  'Ensino Fundamental Anos Iniciais (1 ao 3)',\n  'Ensino Fundamental Anos Iniciais (1 ao 5 ano)  1 sala multisseriada',\n  'Ensino Fundamental Anos Iniciais (4 e 5 ano)  1 sala multisseriada',\n  'Ensino Fundamental Anos Iniciais  EJA (1 ao 5 ano)  multisseriado',\n  \n  // 3. Ensino Fundamental - Anos Finais\n  'Ensino Fundamental Anos Finais (6 ao 9 ano)  1 sala multisseriada',\n  'Ensino Fundamental Anos Finais  EJA (6 ao 9 ano)  multisseriado',\n  \n  // 3. Ensino Fundamental - Ambos\n  'Ensino Fundamental (Anos Iniciais e Finais)  regular e multisseriado',\n  'Ensino Fundamental  Atendimento temporrio em escola no indgena',\n  \n  // 4. Ensino Mdio\n  'Ensino Mdio (1 ao 3 ano)  regular',\n  'Ensino Mdio (1 ao 3 ano)  multisseriado',\n  'Ensino Mdio  EJA (1 ao 3 ano)  multisseriado',\n  'Ensino Mdio  No h atendimento'\n];\n\n// Categorias para organizao visual\nexport const MODALIDADES_CATEGORIAS = [\n  {\n    id: 'educacao-infantil',\n    titulo: '1. Educao Infantil',\n    indices: [0, 1, 2, 3, 4, 5]\n  },\n  {\n    id: 'educacao-infantil-fundamental',\n    titulo: '2. Educao Infantil + Ensino Fundamental',\n    indices: [6, 7, 8, 9, 10, 11, 12]\n  },\n  {\n    id: 'ensino-fundamental',\n    titulo: '3. Ensino Fundamental',\n    indices: [13, 14, 15, 16, 17, 18, 19, 20]\n  },\n  {\n    id: 'ensino-medio',\n    titulo: '4. Ensino Mdio',\n    indices: [21, 22, 23, 24]\n  }\n];\n\n// Funo para obter modalidades por categoria\nexport const getModalidadesByCategoria = (categoriaId) => {\n  const categoria = MODALIDADES_CATEGORIAS.find(cat => cat.id === categoriaId);\n  if (!categoria) return [];\n  \n  return categoria.indices.map(index => MODALIDADES_OPTIONS[index]);\n};\n\n// Funo para validar se uma modalidade existe na lista\nexport const isValidModalidade = (modalidade) => {\n  return MODALIDADES_OPTIONS.includes(modalidade);\n};\n\n// Funo para obter categoria de uma modalidade\nexport const getCategoriaByModalidade = (modalidade) => {\n  const index = MODALIDADES_OPTIONS.indexOf(modalidade);\n  if (index === -1) return null;\n  \n  return MODALIDADES_CATEGORIAS.find(cat => \n    cat.indices.includes(index)\n  );\n}; ","import { useState, useCallback } from 'react';\nimport { MODALIDADES_OPTIONS } from '../utils/modalidadesOptions';\n\nexport const useModalidades = () => {\n  const [selectedModalidades, setSelectedModalidades] = useState([]);\n  const [outroModalidade, setOutroModalidade] = useState('');\n\n  // Funo para alternar seleo de modalidade\n  const handleModalidadeChange = useCallback((modalidade) => {\n    setSelectedModalidades(prev => {\n      if (prev.includes(modalidade)) {\n        return prev.filter(m => m !== modalidade);\n      } else {\n        return [...prev, modalidade];\n      }\n    });\n  }, []);\n\n  // Funo para gerenciar campo \"Outro (especificar)\"\n  const handleOutroModalidadeChange = useCallback((value) => {\n    setOutroModalidade(value);\n    \n    setSelectedModalidades(prev => {\n      const hasOutro = prev.some(m => m.startsWith('Outro:'));\n      \n      if (value.trim()) {\n        if (hasOutro) {\n          return prev.map(m => m.startsWith('Outro:') ? `Outro: ${value}` : m);\n        } else {\n          return [...prev, `Outro: ${value}`];\n        }\n      } else {\n        return prev.filter(m => !m.startsWith('Outro:'));\n      }\n    });\n  }, []);\n\n  // Funo para salvar modalidades no editingLocation\n  const saveModalidades = useCallback(() => {\n    const modalidadesText = selectedModalidades.join('; ');\n    return modalidadesText;\n  }, [selectedModalidades]);\n\n  // Funo para carregar modalidades existentes\n  const loadExistingModalidades = useCallback((modalidadesText) => {\n    if (!modalidadesText) {\n      setSelectedModalidades([]);\n      setOutroModalidade('');\n      return;\n    }\n\n    const parts = modalidadesText.split(';').map(part => part.trim());\n    const modalidades = [];\n    let outro = '';\n\n    parts.forEach(part => {\n      if (part.startsWith('Outro:')) {\n        outro = part.replace('Outro:', '').trim();\n        modalidades.push(part);\n      } else if (MODALIDADES_OPTIONS.includes(part)) {\n        modalidades.push(part);\n      } else if (part) {\n        // Se no est na lista padro, tratar como \"outro\"\n        outro = part;\n        modalidades.push(`Outro: ${part}`);\n      }\n    });\n\n    setSelectedModalidades(modalidades);\n    setOutroModalidade(outro);\n  }, []);\n\n  // Funo para limpar modalidades\n  const clearModalidades = useCallback(() => {\n    setSelectedModalidades([]);\n    setOutroModalidade('');\n  }, []);\n\n  // Funo para obter preview do texto final\n  const getModalidadesPreview = useCallback(() => {\n    return selectedModalidades.join('; ') || 'Nenhuma modalidade selecionada';\n  }, [selectedModalidades]);\n\n  // Funo para verificar se h modalidades selecionadas\n  const hasSelectedModalidades = useCallback(() => {\n    return selectedModalidades.length > 0;\n  }, [selectedModalidades]);\n\n  return {\n    // Estado\n    selectedModalidades,\n    outroModalidade,\n    \n    // Aes\n    handleModalidadeChange,\n    handleOutroModalidadeChange,\n    saveModalidades,\n    loadExistingModalidades,\n    clearModalidades,\n    \n    // Utilitrios\n    getModalidadesPreview,\n    hasSelectedModalidades,\n  };\n}; ","// Configurao das abas do painel de administrao\nexport const ADMIN_TABS = [\n  { id: 'dados-basicos', label: 'Dados Bsicos' },\n  { id: 'povos-linguas', label: 'Povos' },\n  { id: 'modalidades', label: 'Modalidades' },\n  { id: 'infraestrutura', label: 'Infraestrutura' },\n  { id: 'gestao-professores', label: 'Gestores' },\n  { id: 'material-pedagogico', label: 'Material Pedaggico' },\n  { id: 'projetos-parcerias', label: 'Projetos e Parcerias' },\n  { id: 'redes-sociais', label: 'Redes Sociais' },\n  { id: 'video', label: 'Vdeo' },\n  { id: 'historias', label: 'Histrias' },\n  { id: 'historia-professores', label: 'Histria dos Professores' },\n  \n  { id: 'coordenadas', label: 'Coordenadas' },\n  { id: 'imagens-escola', label: 'Imagens da Escola' },\n  { id: 'imagens-professores', label: 'Imagens dos Professores' },\n  { id: 'documentos', label: 'Documentos' }\n];\n\n// Configuraes de UI\nexport const UI_CONFIG = {\n  MOBILE_BREAKPOINT: 768,\n  SIDEBAR_WIDTH: 'w-64',\n  SIDEBAR_WIDTH_MOBILE: 'max-w-[80vw]',\n  SIDEBAR_TOP_OFFSET: 72,\n};\n\n// Estados de salvamento\nexport const SAVE_STATES = {\n  IDLE: 'idle',\n  SAVING: 'saving',\n  SUCCESS: 'success',\n  ERROR: 'error',\n};\n\n// Configuraes de formulrio\nexport const FORM_CONFIG = {\n  DEFAULT_ACTIVE_TAB: 'dados-basicos',\n  VALIDATION_RULES: {\n    REQUIRED_FIELDS: ['Escola'],\n  },\n};\n\n// Configuraes de busca\nexport const SEARCH_CONFIG = {\n  DEBOUNCE_DELAY: 300,\n  MIN_SEARCH_LENGTH: 2,\n}; ","import React from 'react';\nimport { Menu, Search, X } from 'lucide-react';\nimport { useEscolas } from './hooks/useEscolas';\nimport { UI_CONFIG } from './constants/adminConstants';\n\nconst AdminSidebar = ({ \n  isMobile, \n  sidebarOpen, \n  setSidebarOpen, \n  editingLocation, \n  onEscolaSelect \n}) => {\n  const { \n    searchTerm, \n    setSearchTerm, \n    filteredEscolas \n  } = useEscolas();\n\n  return (\n    <>\n      {/* Overlay para mobile */}\n      {isMobile && sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-30\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Boto de menu para mobile */}\n      {isMobile && !sidebarOpen && (\n        <button\n          className=\"fixed top-4 left-4 z-50 bg-gray-900/90 backdrop-blur-sm rounded-full shadow-lg p-3 border border-gray-800/50 hover:bg-gray-800/90 transition-all duration-200\"\n          onClick={() => setSidebarOpen(true)}\n          aria-label=\"Abrir menu lateral\"\n        >\n          <Menu className=\"w-6 h-6 text-gray-200\" />\n        </button>\n      )}\n\n      {/* Menu lateral */}\n      {(!isMobile || sidebarOpen) && (\n        <aside\n          className={`bg-gray-900/95 backdrop-blur-sm border-r border-gray-800/50 rounded-r-2xl shadow-2xl p-6 overflow-y-auto h-screen sticky top-0 z-40 transition-all duration-300 ${\n            isMobile ? `fixed left-0 top-0 w-80 max-w-[85vw] shadow-2xl` : 'w-80'\n          }`}\n          style={{\n            transform: isMobile && !sidebarOpen ? 'translateX(-100%)' : 'translateX(0)',\n            top: isMobile ? 0 : UI_CONFIG.SIDEBAR_TOP_OFFSET,\n          }}\n        >\n          {/* Header do sidebar */}\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h2 className=\"text-2xl font-bold tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300 uppercase\">\n                Escolas\n              </h2>\n              <p className=\"text-gray-400 text-sm mt-1\">\n                {filteredEscolas.length} escola{filteredEscolas.length !== 1 ? 's' : ''}\n              </p>\n            </div>\n            \n            {/* Boto de fechar para mobile */}\n            {isMobile && (\n              <button\n                className=\"text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg p-2 transition-colors\"\n                onClick={() => setSidebarOpen(false)}\n                aria-label=\"Fechar menu lateral\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n\n          {/* Busca no menu lateral */}\n          <div className=\"mb-6\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Buscar escola...\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-700/50 rounded-xl text-sm bg-gray-800/50 text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-all duration-200 backdrop-blur-sm\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n          </div>\n\n          {/* Lista de escolas */}\n          <div className=\"space-y-2\">\n            {filteredEscolas.length > 0 ? (\n              filteredEscolas.map(escola => (\n                <button\n                  key={escola.id}\n                  className={`w-full text-left p-4 rounded-xl hover:bg-gray-800/50 transition-all duration-200 border border-transparent hover:border-gray-700/50 ${\n                    editingLocation?.id === escola.id \n                      ? 'bg-gradient-to-r from-green-600/20 to-green-700/20 border-green-500/50 text-white shadow-lg' \n                      : 'text-gray-200 hover:text-white'\n                  }`}\n                  onClick={() => {\n                    onEscolaSelect(escola);\n                    if (isMobile) setSidebarOpen(false);\n                  }}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className={`font-medium truncate ${\n                        editingLocation?.id === escola.id ? 'text-green-300' : 'text-gray-200'\n                      }`}>\n                        {escola.Escola}\n                      </h3>\n                      {escola['Municpio'] && (\n                        <p className=\"text-sm text-gray-400 truncate mt-1\">\n                          {escola['Municpio']}\n                        </p>\n                      )}\n                    </div>\n                    {editingLocation?.id === escola.id && (\n                      <div className=\"ml-2 flex-shrink-0\">\n                        <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                      </div>\n                    )}\n                  </div>\n                </button>\n              ))\n            ) : searchTerm ? (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Search className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <p className=\"text-gray-400 text-sm\">\n                  Nenhuma escola encontrada\n                </p>\n                <p className=\"text-gray-500 text-xs mt-1\">\n                  Tente ajustar sua busca\n                </p>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                  </svg>\n                </div>\n                <p className=\"text-gray-400 text-sm\">\n                  Nenhuma escola disponvel\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Footer do sidebar */}\n          <div className=\"mt-auto pt-6 border-t border-gray-800/50\">\n            <div className=\"text-center\">\n              <p className=\"text-gray-500 text-xs\">\n                Opin - desenvolvido por <a href=\"https://hericmr.github.io/me/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"hover:text-gray-400\">Heric mr</a>\n              </p>\n            </div>\n          </div>\n        </aside>\n      )}\n    </>\n  );\n};\n\nexport default AdminSidebar; ","\nconst AdminToolbar = ({ \n  searchTerm, \n  setSearchTerm, \n  selectedType, \n  setSelectedType, \n  onNovaEscola \n}) => {\n  return null;\n};\n\nexport default AdminToolbar; ","import React, { useState, useRef, useEffect } from 'react';\nimport { X, Eye, EyeOff, AlertCircle, CheckCircle } from 'lucide-react';\nimport { AuthService } from '../../services/authService';\n\nconst LoginModal = ({ isOpen, onClose, onSuccess }) => {\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [attempts, setAttempts] = useState(0);\n  const [isLocked, setIsLocked] = useState(false);\n  const [lockTime, setLockTime] = useState(0);\n  \n  const passwordRef = useRef(null);\n\n  // Limpar formulrio quando modal abre/fecha\n  useEffect(() => {\n    if (isOpen) {\n      setPassword('');\n      setError('');\n      setSuccess('');\n      setShowPassword(false);\n      \n      // Focar no campo de senha\n      setTimeout(() => {\n        if (passwordRef.current) {\n          passwordRef.current.focus();\n        }\n      }, 100);\n    }\n  }, [isOpen]);\n\n  // Verificar se est bloqueado\n  useEffect(() => {\n    if (isLocked && lockTime > 0) {\n      const timer = setTimeout(() => {\n        setLockTime(prev => prev - 1);\n      }, 1000);\n      \n      if (lockTime === 1) {\n        setIsLocked(false);\n        setLockTime(0);\n        setAttempts(0);\n      }\n      \n      return () => clearTimeout(timer);\n    }\n  }, [isLocked, lockTime]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (isLocked) return;\n    \n    if (!password.trim()) {\n      setError('Por favor, digite a senha');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const result = await AuthService.authenticate(password);\n      \n      if (result.success) {\n        AuthService.setToken(result.token);\n        setSuccess('Login realizado com sucesso!');\n        \n        setTimeout(() => {\n          onSuccess(result.user);\n          onClose();\n        }, 1000);\n      } else {\n        const newAttempts = attempts + 1;\n        setAttempts(newAttempts);\n        \n        if (newAttempts >= 3) {\n          setIsLocked(true);\n          setLockTime(30);\n          setError('Muitas tentativas. Aguarde 30 segundos.');\n        } else {\n          setError(result.error || 'Erro na autenticao');\n        }\n      }\n    } catch (err) {\n      console.error('Erro no login:', err);\n      setError('Erro interno. Tente novamente.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (loading) return;\n    \n    setPassword('');\n    setError('');\n    setSuccess('');\n    setShowPassword(false);\n    onClose();\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      handleClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\"\n      onClick={(e) => e.target === e.currentTarget && handleClose()}\n      onKeyDown={handleKeyDown}\n      tabIndex={-1}\n    >\n      <div className=\"bg-gray-900 rounded-lg shadow-2xl border border-gray-800 max-w-sm w-full\">\n        {/* Header minimalista */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n          <h3 className=\"text-lg font-medium text-gray-100\">\n            Acesso Administrativo\n          </h3>\n          <button\n            onClick={handleClose}\n            className=\"p-1 hover:bg-gray-800 rounded transition-colors\"\n            disabled={loading}\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-4\">\n          <div className=\"space-y-4\">\n            {/* Campo de senha */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                Senha\n              </label>\n              <div className=\"relative\">\n                <input\n                  ref={passwordRef}\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-3 py-2 pr-10 bg-gray-800 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors\"\n                  placeholder=\"Digite sua senha...\"\n                  disabled={loading || isLocked}\n                  autoComplete=\"current-password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-700 rounded transition-colors\"\n                  disabled={loading || isLocked}\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"w-4 h-4 text-gray-400\" />\n                  ) : (\n                    <Eye className=\"w-4 h-4 text-gray-400\" />\n                  )}\n                </button>\n              </div>\n              \n              {/* Indicador visual de caracteres */}\n              {password && (\n                <div className=\"mt-2 flex items-center gap-1\">\n                  <span className=\"text-xs text-gray-500\">Caracteres:</span>\n                  <div className=\"flex gap-1\">\n                    {password.split('').map((char, index) => (\n                      <span key={index} className=\"text-lg font-mono text-gray-300\">\n                        {showPassword ? char : ''}\n                      </span>\n                    ))}\n                  </div>\n                  <span className=\"text-xs text-gray-400 ml-2\">\n                    ({password.length})\n                  </span>\n                </div>\n              )}\n            </div>\n\n            {/* Contador de tentativas */}\n            {attempts > 0 && attempts < 3 && (\n              <div className=\"text-sm text-orange-400\">\n                Tentativas: {attempts}/3\n              </div>\n            )}\n\n            {/* Tempo de bloqueio */}\n            {isLocked && (\n              <div className=\"text-sm text-red-400\">\n                Bloqueado por {lockTime} segundos\n              </div>\n            )}\n\n            {/* Mensagens */}\n            {error && (\n              <div className=\"flex items-center gap-2 p-2 bg-red-900/30 border border-red-700 rounded text-sm\">\n                <AlertCircle className=\"w-4 h-4 text-red-400 flex-shrink-0\" />\n                <span className=\"text-red-300\">{error}</span>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"flex items-center gap-2 p-2 bg-green-900/30 border border-green-700 rounded text-sm\">\n                <CheckCircle className=\"w-4 h-4 text-green-400 flex-shrink-0\" />\n                <span className=\"text-green-300\">{success}</span>\n              </div>\n            )}\n\n            {/* Botes */}\n            <div className=\"flex gap-2 pt-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"flex-1 px-3 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition-colors text-sm\"\n                disabled={loading || isLocked}\n              >\n                Cancelar\n              </button>\n              <button\n                type=\"submit\"\n                className=\"flex-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm flex items-center justify-center gap-2\"\n                disabled={loading || isLocked || !password.trim()}\n              >\n                {loading ? (\n                  <>\n                    Entrando...\n                  </>\n                ) : (\n                  'Entrar'\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginModal;\n","import React from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport LoginModal from './LoginModal';\n\nconst ProtectedRoute = ({ children }) => {\n  const { isAuthenticated, loading } = useAuth();\n  const [showLoginModal, setShowLoginModal] = React.useState(false);\n\n  // Mostrar loading enquanto verifica autenticao\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">Verificando autenticao...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Se no estiver autenticado, mostrar modal de login\n  if (!isAuthenticated) {\n    return (\n      <>\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n          <div className=\"text-center max-w-md mx-auto p-6\">\n            <div className=\"mb-6\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                </svg>\n              </div>\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                Acesso Restrito\n              </h1>\n              <p className=\"text-gray-600 mb-6\">\n                Esta rea  restrita a administradores autorizados.\n                <br />\n                Faa login para continuar.\n              </p>\n            </div>\n            \n            <button\n              onClick={() => setShowLoginModal(true)}\n              className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\"\n            >\n              Fazer Login\n            </button>\n          </div>\n        </div>\n\n        <LoginModal\n          isOpen={showLoginModal}\n          onClose={() => setShowLoginModal(false)}\n          onSuccess={() => {\n            setShowLoginModal(false);\n            // O componente ser re-renderizado automaticamente\n          }}\n        />\n      </>\n    );\n  }\n\n  // Se estiver autenticado, mostrar o contedo protegido\n  return children;\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport { useModalidades } from '../hooks/useModalidades';\nimport { MODALIDADES_OPTIONS, MODALIDADES_CATEGORIAS } from '../utils/modalidadesOptions';\n\nconst ModalidadesTab = ({ \n  editingLocation, \n  setEditingLocation \n}) => {\n  const {\n    selectedModalidades,\n    outroModalidade,\n    handleModalidadeChange,\n    handleOutroModalidadeChange,\n    saveModalidades,\n    getModalidadesPreview,\n    hasSelectedModalidades,\n  } = useModalidades();\n\n  // Funo para salvar modalidades no editingLocation\n  const handleSaveModalidades = () => {\n    const modalidadesText = saveModalidades();\n    setEditingLocation(prev => ({\n      ...prev,\n      'Modalidade de Ensino/turnos de funcionamento': modalidadesText\n    }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Modalidades de Ensino */}\n      <div className=\"md:col-span-2\">\n        <label className=\"block text-sm font-medium text-gray-200 mb-4 text-base\">\n          Modalidades de Ensino\n        </label>\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4 max-h-96 overflow-y-auto\">\n          <div className=\"space-y-4\">\n            {MODALIDADES_CATEGORIAS.map((categoria) => (\n              <div key={categoria.id}>\n                <h4 className=\"text-sm font-semibold text-green-400 mb-2 border-b border-gray-600 pb-1\">\n                  {categoria.titulo}\n                </h4>\n                <div className=\"space-y-2 ml-2\">\n                  {categoria.indices.map((index) => {\n                    const modalidade = MODALIDADES_OPTIONS[index];\n                    return (\n                      <label key={index} className=\"flex items-start space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded transition-colors\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"mt-1 h-4 w-4 text-green-600 bg-gray-700 border-gray-600 rounded focus:ring-green-500 focus:ring-2\"\n                          checked={selectedModalidades.includes(modalidade)}\n                          onChange={() => handleModalidadeChange(modalidade)}\n                        />\n                        <span className=\"text-sm text-gray-200 leading-relaxed\">{modalidade}</span>\n                      </label>\n                    );\n                  })}\n                </div>\n              </div>\n            ))}\n            \n            {/* Opo \"Outro\" */}\n            <div className=\"border-t border-gray-600 pt-3 mt-3\">\n              <label className=\"flex items-start space-x-3 cursor-pointer hover:bg-gray-700 p-2 rounded transition-colors\">\n                <input\n                  type=\"checkbox\"\n                  className=\"mt-1 h-4 w-4 text-green-600 bg-gray-700 border-gray-600 rounded focus:ring-green-500 focus:ring-2\"\n                  checked={selectedModalidades.some(m => m.startsWith('Outro:')) || outroModalidade.trim() !== ''}\n                  onChange={(e) => {\n                    if (e.target.checked && !outroModalidade.trim()) {\n                      // Se est marcando o checkbox mas no h valor, adicionar um valor padro\n                      handleOutroModalidadeChange('Modalidade especfica');\n                    } else if (!e.target.checked) {\n                      // Se est desmarcando o checkbox, limpar o valor\n                      handleOutroModalidadeChange('');\n                    }\n                  }}\n                />\n                <div className=\"flex-1\">\n                  <span className=\"text-sm text-gray-200\">Outro (especificar):</span>\n                  <input\n                    type=\"text\"\n                    className=\"mt-1 w-full px-3 py-2 border border-gray-600 rounded text-sm bg-gray-700 text-gray-100 placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    placeholder=\"Digite a modalidade especfica...\"\n                    value={outroModalidade}\n                    onChange={(e) => handleOutroModalidadeChange(e.target.value)}\n                  />\n                </div>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Nmero de Alunos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">Nmero de Alunos</label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation['Numero de alunos'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Numero de alunos': e.target.value })}\n        />\n      </div>\n\n      {/* Turnos de Funcionamento */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">Turnos de Funcionamento</label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation.turnos_funcionamento || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, turnos_funcionamento: e.target.value })}\n          placeholder=\"Ex: Diurno, Noturno, Vespertino, etc.\"\n        />\n      </div>\n\n      {/* Boto para salvar modalidades */}\n      <div className=\"md:col-span-2\">\n        <button\n          type=\"button\"\n          onClick={handleSaveModalidades}\n          className=\"px-4 py-2 bg-green-700 text-white rounded-lg hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-400 transition-colors\"\n        >\n          Salvar Modalidades Selecionadas\n        </button>\n      </div>\n\n      {/* Preview do texto final */}\n      {hasSelectedModalidades() && (\n        <div className=\"md:col-span-2\">\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Preview do Texto Final\n          </label>\n          <div className=\"bg-gray-800 border border-gray-700 rounded px-3 py-2 text-gray-200 text-sm min-h-[60px]\">\n            {getModalidadesPreview()}\n          </div>\n        </div>\n      )}\n\n\n    </div>\n  );\n};\n\nexport default ModalidadesTab; ","import React from 'react';\n\nconst DadosBasicosTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-8\">\n      {/* Seo: Informaes Principais */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n          </svg>\n          Informaes Principais\n        </h3>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Nome da Escola */}\n          <div className=\"lg:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Nome da Escola *\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.Escola || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, Escola: e.target.value })}\n              placeholder=\"Digite o nome da escola\"\n            />\n          </div>\n\n          {/* Municpio */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Municpio\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Municpio'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Municpio': e.target.value })}\n              placeholder=\"Digite o municpio\"\n            />\n          </div>\n\n          {/* Ano de Criao */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Ano de Criao da Escola\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Ano de criao da escola'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Ano de criao da escola': e.target.value })}\n              placeholder=\"Ex: 1995\"\n            />\n          </div>\n\n          {/* Terra Indgena */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Terra Indgena (TI)\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Terra Indigena (TI)'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Terra Indigena (TI)': e.target.value })}\n              placeholder=\"Digite o nome da Terra Indgena\"\n            />\n          </div>\n\n          {/* Diretoria de Ensino */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Diretoria de Ensino\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation['Diretoria de Ensino'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Diretoria de Ensino': e.target.value })}\n              placeholder=\"Digite a diretoria de ensino\"\n            />\n          </div>\n\n          {/* Parcerias com o Municpio */}\n          <div className=\"lg:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Parcerias com o Municpio\n            </label>\n            <textarea\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 h-32 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm resize-none\"\n              value={editingLocation['Parcerias com o municpio'] || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, 'Parcerias com o municpio': e.target.value })}\n              placeholder=\"Descreva as parcerias com o municpio...\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Seo: Endereo Completo */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          Endereo Completo\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {/* Logradouro */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Logradouro\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.logradouro || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, logradouro: e.target.value })}\n              placeholder=\"Rua, Avenida, etc.\"\n            />\n          </div>\n\n          {/* Nmero */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Nmero\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.numero || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, numero: e.target.value })}\n              placeholder=\"Nmero\"\n            />\n          </div>\n\n          {/* Complemento */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Complemento\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.complemento || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, complemento: e.target.value })}\n              placeholder=\"Apto, Casa, etc.\"\n            />\n          </div>\n\n          {/* Bairro */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Bairro\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.bairro || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, bairro: e.target.value })}\n              placeholder=\"Nome do bairro\"\n            />\n          </div>\n\n          {/* CEP */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              CEP\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.cep || ''}\n              onChange={e => setEditingLocation({ ...editingLocation, cep: e.target.value })}\n              placeholder=\"00000-000\"\n            />\n          </div>\n\n          {/* Estado */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n              Estado\n            </label>\n            <select\n              className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 transition-all duration-200 backdrop-blur-sm\"\n              value={editingLocation.estado || 'SP'}\n              onChange={e => setEditingLocation({ ...editingLocation, estado: e.target.value })}\n            >\n              <option value=\"SP\">So Paulo</option>\n              <option value=\"RJ\">Rio de Janeiro</option>\n              <option value=\"MG\">Minas Gerais</option>\n              <option value=\"ES\">Esprito Santo</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Seo: Endereo Antigo (para compatibilidade) */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n          </svg>\n          Endereo (Campo Legado)\n        </h3>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-3\">\n            Endereo Completo\n          </label>\n          <textarea\n            className=\"w-full border border-gray-700 bg-gray-800/50 rounded-xl px-4 py-3 h-24 focus:ring-2 focus:ring-green-400 focus:border-green-400 text-gray-100 placeholder-gray-400 transition-all duration-200 backdrop-blur-sm resize-none\"\n            value={editingLocation['Endereo'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Endereo': e.target.value })}\n            placeholder=\"Endereo completo da escola...\"\n          />\n          <p className=\"text-gray-500 text-xs mt-2\">\n            Este campo  mantido para compatibilidade com dados existentes\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DadosBasicosTab; ","import React from 'react';\n\nconst PovosLinguasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Povos Indgenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Povos Indgenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Povos indigenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Povos indigenas': e.target.value })}\n          placeholder=\"Descreva os povos indgenas atendidos pela escola...\"\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Ex: Guarani, Kaingang, Terena, etc.\n        </p>\n      </div>\n\n      {/* Lnguas Faladas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Lnguas Faladas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Linguas faladas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Linguas faladas': e.target.value })}\n          placeholder=\"Descreva as lnguas faladas na comunidade escolar...\"\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Ex: Portugus, Guarani, Kaingang, etc.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default PovosLinguasTab; ","import React from 'react';\n\nconst InfraestruturaTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Acesso  gua */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Acesso  gua\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Acesso  gua'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Acesso  gua': e.target.value })}\n          placeholder=\"Descreva como  o acesso  gua na escola...\"\n        />\n      </div>\n\n      {/* Coleta de Lixo */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Coleta de Lixo\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Tem coleta de lixo?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Tem coleta de lixo?': e.target.value })}\n          placeholder=\"Descreva como  feita a coleta de lixo...\"\n        />\n      </div>\n\n      {/* Acesso  Internet */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Acesso  Internet\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Acesso  internet'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Acesso  internet': e.target.value })}\n          placeholder=\"Descreva o acesso  internet na escola...\"\n        />\n      </div>\n\n      {/* Equipamentos Tecnolgicos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Equipamentos Tecnolgicos\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Equipamentos Tecs'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Equipamentos Tecs': e.target.value })}\n          placeholder=\"Descreva os equipamentos tecnolgicos disponveis...\"\n        />\n      </div>\n\n      {/* Modo de Acesso  Escola */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Modo de Acesso  Escola\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Modo de acesso  escola'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Modo de acesso  escola': e.target.value })}\n          placeholder=\"Descreva como  o acesso  escola...\"\n        />\n      </div>\n\n      {/* Cozinha */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Cozinha\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.cozinha || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, cozinha: e.target.value })}\n          placeholder=\"Descreva a estrutura da cozinha...\"\n        />\n      </div>\n\n      {/* Merenda Escolar */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Escolar\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.merenda_escolar || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, merenda_escolar: e.target.value })}\n          placeholder=\"Descreva como  fornecida a merenda escolar...\"\n        />\n      </div>\n\n      {/* Merenda Diferenciada */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Diferenciada\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.diferenciada || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, diferenciada: e.target.value })}\n          placeholder=\"Descreva se h merenda diferenciada (cultural, religiosa, etc.)...\"\n        />\n      </div>\n\n      {/* Merenda Diferenciada (Detalhes) */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Merenda Diferenciada (Detalhes)\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation.merenda_diferenciada || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, merenda_diferenciada: e.target.value })}\n          placeholder=\"Descreva detalhes sobre a merenda diferenciada...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default InfraestruturaTab; ","import React from 'react';\n\nconst GestaoProfessoresTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Gesto/Nome */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Gesto/Nome\n        </label>\n        <input\n          type=\"text\"\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 min-h-[44px] text-base\"\n          value={editingLocation['Gesto/Nome'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Gesto/Nome': e.target.value })}\n          placeholder=\"Digite o nome do gestor/diretor\"\n        />\n      </div>\n\n      {/* Professores Indgenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores Indgenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Quantidade de professores indgenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Quantidade de professores indgenas': e.target.value })}\n          placeholder=\"Descreva os professores indgenas...\"\n        />\n      </div>\n\n      {/* Professores No Indgenas */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores No Indgenas\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Quantidade de professores no indgenas'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Quantidade de professores no indgenas': e.target.value })}\n          placeholder=\"Descreva os professores no indgenas...\"\n        />\n      </div>\n\n      {/* Professores Falam Lngua Indgena? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Professores Falam Lngua Indgena?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Professores falam a lngua indgena?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Professores falam a lngua indgena?': e.target.value })}\n          placeholder=\"Descreva se os professores falam a lngua indgena...\"\n        />\n      </div>\n\n      {/* Formao dos Professores */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Formao dos Professores\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Formao dos professores'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Formao dos professores': e.target.value })}\n          placeholder=\"Descreva a formao dos professores...\"\n        />\n      </div>\n\n      {/* Formao Continuada */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Formao Continuada\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Formao continuada oferecida'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Formao continuada oferecida': e.target.value })}\n          placeholder=\"Descreva a formao continuada oferecida aos professores...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default GestaoProfessoresTab; ","import React from 'react';\n\nconst MaterialPedagogicoTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* A escola possui PPP prprio? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          A escola possui PPP prprio?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['A escola possui PPP prprio?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'A escola possui PPP prprio?': e.target.value })}\n          placeholder=\"Descreva se a escola possui PPP prprio...\"\n        />\n      </div>\n\n      {/* PPP elaborado com a comunidade? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          PPP elaborado com a comunidade?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['PPP elaborado com a comunidade?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'PPP elaborado com a comunidade?': e.target.value })}\n          placeholder=\"Descreva se o PPP foi elaborado com a comunidade...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MaterialPedagogicoTab; ","import React from 'react';\n\nconst ProjetosParceriasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Projetos em Andamento */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Projetos em Andamento\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Projetos em andamento'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Projetos em andamento': e.target.value })}\n          placeholder=\"Descreva os projetos em andamento na escola...\"\n        />\n      </div>\n\n      {/* Parcerias com Universidades */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Parcerias com Universidades\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Parcerias com universidades?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Parcerias com universidades?': e.target.value })}\n          placeholder=\"Descreva as parcerias com universidades...\"\n        />\n      </div>\n\n      {/* Aes com ONGs ou Coletivos */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Aes com ONGs ou Coletivos\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Aes com ONGs ou coletivos?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Aes com ONGs ou coletivos?': e.target.value })}\n          placeholder=\"Descreva as aes com ONGs ou coletivos...\"\n        />\n      </div>\n\n      {/* Desejos da Comunidade */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Desejos da Comunidade\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Desejos da comunidade para a escola'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Desejos da comunidade para a escola': e.target.value })}\n          placeholder=\"Descreva os desejos da comunidade para a escola...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ProjetosParceriasTab; ","import React from 'react';\n\nconst RedesSociaisTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Escola utiliza redes sociais? */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Escola utiliza redes sociais?\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Escola utiliza redes sociais?'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Escola utiliza redes sociais?': e.target.value })}\n          placeholder=\"Descreva se a escola utiliza redes sociais...\"\n        />\n      </div>\n\n      {/* Links das Redes Sociais */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Links das Redes Sociais\n        </label>\n        <textarea\n          className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 h-32 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n          value={editingLocation['Links das redes sociais'] || ''}\n          onChange={e => setEditingLocation({ ...editingLocation, 'Links das redes sociais': e.target.value })}\n          placeholder=\"Cole aqui os links das redes sociais da escola (Facebook, Instagram, YouTube, etc.)...\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default RedesSociaisTab; ","import React, { useState, useEffect, useCallback } from 'react';\nimport { getVideosEscola, createVideoEscola, updateVideoEscola, deleteVideoEscola } from '../../services/videoService';\nimport { Plus, Edit3, Trash2, Save } from 'lucide-react';\n\nconst VideoManager = ({ escolaId }) => {\n  const [videos, setVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editingVideo, setEditingVideo] = useState(null);\n  const [formData, setFormData] = useState({\n    titulo: '',\n    video_url: '',\n    descricao: '',\n    plataforma: 'youtube',\n    categoria: 'geral',\n    ativo: true\n  });\n\n  // Carregar vdeos\n  const carregarVideos = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getVideosEscola(escolaId);\n      setVideos(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    if (escolaId) carregarVideos();\n  }, [escolaId, carregarVideos]);\n\n  // Reset form\n  const resetForm = () => {\n    setFormData({\n      titulo: '',\n      video_url: '',\n      descricao: '',\n      plataforma: 'youtube',\n      categoria: 'geral',\n      ativo: true\n    });\n    setEditingVideo(null);\n    setShowForm(false);\n  };\n\n  // Handle submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!formData.titulo.trim() || !formData.video_url.trim()) {\n      setError('Ttulo e URL do vdeo so obrigatrios.');\n      return;\n    }\n    const payload = {\n      escola_id: Number(escolaId),\n      ...formData,\n      ativo: Boolean(formData.ativo)\n    };\n    try {\n      setError('');\n      setSuccess('');\n      if (editingVideo) {\n        await updateVideoEscola(editingVideo.id, payload);\n        setSuccess('Vdeo atualizado com sucesso!');\n      } else {\n        await createVideoEscola(payload);\n        setSuccess('Vdeo criado com sucesso!');\n      }\n      resetForm();\n      carregarVideos();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Handle edit\n  const handleEdit = (video) => {\n    setEditingVideo(video);\n    setFormData({\n      titulo: video.titulo || '',\n      video_url: video.video_url || '',\n      descricao: video.descricao || '',\n      plataforma: video.plataforma || 'youtube',\n      categoria: video.categoria || 'geral',\n      ativo: video.ativo\n    });\n    setShowForm(true);\n  };\n\n  // Handle delete\n  const handleDelete = async (id) => {\n    if (!window.confirm('Tem certeza que deseja excluir este vdeo?')) return;\n    try {\n      await deleteVideoEscola(id);\n      setSuccess('Vdeo excludo com sucesso!');\n      carregarVideos();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"p-6 text-center\">Carregando vdeos...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Vdeos da Escola</h3>\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Novo Vdeo\n        </button>\n      </div>\n\n      {error && <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">{error}</div>}\n      {success && <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg text-green-600\">{success}</div>}\n\n      {/* Lista de vdeos */}\n      <div className=\"space-y-4\">\n        {videos.length === 0 ? (\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n            <p className=\"text-gray-500\">Nenhum vdeo cadastrado.</p>\n            <button\n              onClick={() => setShowForm(true)}\n              className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Adicionar vdeo\n            </button>\n          </div>\n        ) : (\n          videos.map((video) => (\n            <div key={video.id} className={`p-6 bg-white rounded-lg border ${!video.ativo ? 'opacity-60' : ''}`}>\n              <div className=\"flex items-start justify-between mb-2\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h4 className=\"font-medium text-gray-900\">{video.titulo}</h4>\n                    {!video.ativo && (\n                      <span className=\"flex items-center gap-1 text-orange-600 text-sm\">\n                        Inativo\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-gray-700 text-sm mb-2\">{video.descricao}</p>\n                  <div className=\"mb-2\">\n                    <iframe\n                      src={video.video_url}\n                      title={video.titulo}\n                      className=\"w-full aspect-video rounded-lg border\"\n                      allowFullScreen\n                    />\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    Plataforma: {video.plataforma} | Categoria: {video.categoria}\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-2 ml-4\">\n                  <button\n                    onClick={() => handleEdit(video)}\n                    className=\"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg\"\n                    title=\"Editar\"\n                  >\n                    <Edit3 className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(video.id)}\n                    className=\"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg\"\n                    title=\"Excluir\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Formulrio de adicionar/editar vdeo */}\n      {showForm && (\n        <div className=\"p-6 bg-gray-50 rounded-lg border\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"text-lg font-medium text-gray-900\">\n              {editingVideo ? 'Editar Vdeo' : 'Novo Vdeo'}\n            </h4>\n            <button\n              onClick={resetForm}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <span className=\"sr-only\">Fechar</span>\n              \n            </button>\n          </div>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Ttulo *</label>\n                <input\n                  type=\"text\"\n                  value={formData.titulo}\n                  onChange={e => setFormData({ ...formData, titulo: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  placeholder=\"Ttulo do vdeo\"\n                  required\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">URL do Vdeo *</label>\n                <input\n                  type=\"url\"\n                  value={formData.video_url}\n                  onChange={e => setFormData({ ...formData, video_url: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  placeholder=\"https://www.youtube.com/embed/...\"\n                  required\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Descrio</label>\n              <textarea\n                value={formData.descricao}\n                onChange={e => setFormData({ ...formData, descricao: e.target.value })}\n                rows={3}\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                placeholder=\"Descrio do vdeo (opcional)\"\n              />\n            </div>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Plataforma</label>\n                <input\n                  type=\"text\"\n                  value={formData.plataforma}\n                  onChange={e => setFormData({ ...formData, plataforma: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2\"\n                  placeholder=\"youtube, vimeo...\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Categoria</label>\n                <input\n                  type=\"text\"\n                  value={formData.categoria}\n                  onChange={e => setFormData({ ...formData, categoria: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2\"\n                  placeholder=\"geral, institucional...\"\n                />\n              </div>\n              <div className=\"flex items-center gap-2 mt-6\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.ativo}\n                  onChange={e => setFormData({ ...formData, ativo: e.target.checked })}\n                  className=\"rounded border-gray-300 text-green-600 focus:ring-green-500\"\n                />\n                <span className=\"text-sm text-gray-700\">Ativo</span>\n              </div>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                type=\"submit\"\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                <Save className=\"w-5 h-5\" />\n                {editingVideo ? 'Atualizar' : 'Criar'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={resetForm}\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VideoManager; ","import React from 'react';\nimport VideoManager from '../VideoManager';\n\nconst VideoTab = ({ editingLocation }) => {\n  // Extrair o ID da escola do editingLocation\n  const escolaId = editingLocation?.id || editingLocation?.escola_id;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Informaes sobre Vdeos */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Gerenciamento de Vdeos\n        </h3>\n        <p className=\"text-gray-300 text-sm mb-4\">\n          Aqui voc pode adicionar, editar e gerenciar vdeos relacionados  escola. \n          Os vdeos podem ser do YouTube, Vimeo ou outras plataformas.\n        </p>\n      </div>\n\n      {/* VideoManager Component */}\n      {escolaId ? (\n        <div className=\"bg-white rounded-lg shadow-sm\">\n          <VideoManager escolaId={escolaId} />\n        </div>\n      ) : (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6 text-center\">\n          <p className=\"text-gray-300\">\n            Selecione uma escola para gerenciar os vdeos.\n          </p>\n        </div>\n      )}\n\n      {/* Instrues de Uso */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Como Adicionar Vdeos\n        </h3>\n        \n        <div className=\"space-y-3 text-sm text-gray-300\">\n          <div>\n            <strong className=\"text-amber-400\">YouTube:</strong>\n            <p>Use o formato: https://www.youtube.com/embed/VIDEO_ID</p>\n            <p className=\"text-xs text-gray-400\">Exemplo: https://www.youtube.com/embed/dQw4w9WgXcQ</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Vimeo:</strong>\n            <p>Use o formato: https://player.vimeo.com/video/VIDEO_ID</p>\n            <p className=\"text-xs text-gray-400\">Exemplo: https://player.vimeo.com/video/123456789</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Outras plataformas:</strong>\n            <p>Use o URL de embed fornecido pela plataforma</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VideoTab; ","import React, { useRef, useCallback } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport './QuillEditor.css';\nimport { uploadImage } from '../../services/uploadService';\n\nconst QuillEditor = ({ value, onChange, placeholder, label, style = {} }) => {\n  const quillRef = useRef(null);\n  const [quillInstance, setQuillInstance] = React.useState(null);\n\n  // Handler customizado para upload de imagens\n  const imageHandler = useCallback(async () => {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', 'image/*');\n    input.click();\n\n    input.onchange = async () => {\n      const file = input.files[0];\n      if (file && quillInstance) {\n        try {\n          // Mostrar loading\n          const range = quillInstance.getSelection();\n          \n          // Inserir placeholder de loading\n          quillInstance.insertEmbed(range.index, 'image', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7');\n          \n          // Fazer upload da imagem\n          const imageUrl = await uploadImage(file);\n          \n          // Substituir placeholder pela imagem real\n          quillInstance.deleteText(range.index, 1);\n          quillInstance.insertEmbed(range.index, 'image', imageUrl);\n          \n          // Mover cursor para depois da imagem\n          quillInstance.setSelection(range.index + 1);\n        } catch (error) {\n          console.error('Erro ao fazer upload da imagem:', error);\n          alert('Erro ao fazer upload da imagem. Tente novamente.');\n        }\n      }\n    };\n  }, [quillInstance]);\n\n  // Configurao dos mdulos do Quill\n  const modules = React.useMemo(() => ({\n    toolbar: {\n      container: [\n        [{ 'header': [1, 2, 3, false] }],\n        ['bold', 'italic', 'underline', 'strike'],\n        [{ 'color': [] }, { 'background': [] }],\n        [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n        [{ 'align': [] }],\n        ['link'],\n        ['image'],\n        ['clean']\n      ],\n      handlers: {\n        image: imageHandler\n      }\n    },\n  }), [imageHandler]);\n\n  // Configurao dos formatos permitidos\n  const formats = [\n    'header',\n    'bold', 'italic', 'underline', 'strike',\n    'color', 'background',\n    'list', 'bullet',\n    'align',\n    'link', 'image'\n  ];\n\n  // Callback quando o editor  montado\n  const handleEditorChange = useCallback((content, delta, source, editor) => {\n    if (onChange) {\n      onChange(content, delta, source, editor);\n    }\n  }, [onChange]);\n\n  // Callback quando o editor  montado\n  const handleEditorReady = useCallback((quill) => {\n    setQuillInstance(quill);\n  }, []);\n\n  return (\n    <div className=\"rich-text-editor\">\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          {label}\n        </label>\n      )}\n      \n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg\">\n        <ReactQuill\n          ref={quillRef}\n          theme=\"snow\"\n          value={value || ''}\n          onChange={handleEditorChange}\n          onEditorReady={handleEditorReady}\n          modules={modules}\n          formats={formats}\n          placeholder={placeholder}\n          style={{\n            height: '300px',\n            backgroundColor: '#1f2937', // bg-gray-800\n            color: '#f3f4f6', // text-gray-100\n            ...style\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default QuillEditor;\n","import React from 'react';\nimport QuillEditor from '../../shared/QuillEditor';\nimport './RichTextEditor.css';\n\nconst RichTextEditor = ({ value, onChange, placeholder, label }) => {\n  return (\n    <QuillEditor\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n      label={label}\n    />\n  );\n};\n\nexport default RichTextEditor; ","import React from 'react';\nimport RichTextEditor from './RichTextEditor';\n\nconst HistoriasTab = ({ editingLocation, setEditingLocation }) => {\n  return (\n    <div className=\"space-y-6\">\n      {/* Histria da Escola */}\n      <RichTextEditor\n        label=\"Histria da Escola\"\n        value={editingLocation['historia_da_escola'] || ''}\n        onChange={(value) => setEditingLocation({ ...editingLocation, 'historia_da_escola': value })}\n        placeholder=\"Digite a histria da escola...\"\n      />\n    </div>\n  );\n};\n\nexport default HistoriasTab; ","import { supabase } from '../supabaseClient';\n\n/**\n * Servio para gerenciar fotos dos professores\n * Usa o bucket 'avatar' do Supabase Storage\n */\nexport class FotoProfessorService {\n  \n  /**\n   * Faz upload da foto do professor para o Supabase Storage\n   * @param {File} arquivo - Arquivo da foto\n   * @param {string} nomeProfessor - Nome do professor (para nomear o arquivo)\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<{success: boolean, url?: string, error?: string}>}\n   */\n  static async uploadFotoProfessor(arquivo, nomeProfessor, escolaId) {\n    try {\n      // Validar arquivo\n      if (!arquivo) {\n        throw new Error('Arquivo no fornecido');\n      }\n\n      // Validar tipo de arquivo\n      const tiposPermitidos = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n      if (!tiposPermitidos.includes(arquivo.type)) {\n        throw new Error('Tipo de arquivo no permitido. Use JPEG, PNG ou WebP.');\n      }\n\n      // Validar tamanho (mximo 5MB)\n      const tamanhoMaximo = 5 * 1024 * 1024; // 5MB\n      if (arquivo.size > tamanhoMaximo) {\n        throw new Error('Arquivo muito grande. Tamanho mximo: 5MB');\n      }\n\n      // Gerar nome nico para o arquivo\n      const timestamp = Date.now();\n      const extensao = arquivo.name.split('.').pop().toLowerCase();\n      \n      // Sanitizar nome do professor para evitar caracteres invlidos\n      const nomeSanitizado = nomeProfessor\n        .toLowerCase()\n        .replace(/[]/g, 'a')\n        .replace(/[]/g, 'e')\n        .replace(/[]/g, 'i')\n        .replace(/[]/g, 'o')\n        .replace(/[]/g, 'u')\n        .replace(/[]/g, 'c')\n        .replace(/[]/g, 'n')\n        .replace(/[^a-z0-9\\s]/g, '') // Remove caracteres especiais\n        .replace(/\\s+/g, '_') // Substitui espaos por underscore\n        .substring(0, 50); // Limita tamanho\n      \n      const nomeArquivo = `${nomeSanitizado}_${timestamp}.${extensao}`;\n      const caminhoArquivo = `${escolaId}/${nomeArquivo}`;\n\n      // Validar se o nome do arquivo  vlido\n      if (!nomeArquivo || nomeArquivo.length === 0) {\n        throw new Error('Nome do arquivo invlido gerado');\n      }\n\n      console.log('Upload da foto:', {\n        nomeOriginal: arquivo.name,\n        nomeSanitizado,\n        nomeArquivo,\n        caminhoArquivo,\n        escolaId,\n        nomeProfessor\n      });\n\n      // Fazer upload para o Supabase Storage\n      const { error } = await supabase.storage\n        .from('avatar')\n        .upload(caminhoArquivo, arquivo, {\n          cacheControl: '3600',\n          upsert: false\n        });\n\n      if (error) {\n        throw new Error(`Erro no upload: ${error.message}`);\n      }\n\n      // Obter URL pblica\n      const { data: { publicUrl } } = supabase.storage\n        .from('avatar')\n        .getPublicUrl(caminhoArquivo);\n      \n      return {\n        success: true,\n        url: publicUrl,\n        caminho: caminhoArquivo\n      };\n\n    } catch (error) {\n      console.error('Erro no upload da foto:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Atualiza a URL da foto do professor na tabela historia_professor\n   * @param {number} historiaId - ID da histria do professor\n   * @param {string} fotoUrl - URL da foto\n   * @returns {Promise<{success: boolean, error?: string}>}\n   */\n  static async atualizarFotoProfessor(historiaId, fotoUrl) {\n    try {\n      const { error } = await supabase\n        .from('historias_professor')\n        .update({ foto_rosto: fotoUrl })\n        .eq('id', historiaId);\n\n      if (error) {\n        throw new Error(`Erro ao atualizar foto: ${error.message}`);\n      }\n\n      return { success: true };\n\n    } catch (error) {\n      console.error('Erro ao atualizar foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Remove a foto do professor do storage e atualiza a tabela\n   * @param {string} caminhoArquivo - Caminho do arquivo no storage\n   * @param {number} historiaId - ID da histria do professor\n   * @returns {Promise<{success: boolean, error?: string}>}\n   */\n  static async removerFotoProfessor(caminhoArquivo, historiaId) {\n    try {\n      // Remover do storage\n      const { error: storageError } = await supabase.storage\n        .from('avatar')\n        .remove([caminhoArquivo]);\n\n      if (storageError) {\n        console.warn('Erro ao remover arquivo do storage:', storageError);\n      }\n\n      // Atualizar tabela (remover URL)\n      const { error: dbError } = await supabase\n        .from('historias_professor')\n        .update({ foto_rosto: null })\n        .eq('id', historiaId);\n\n      if (dbError) {\n        throw new Error(`Erro ao atualizar banco de dados: ${dbError.message}`);\n      }\n\n      return { success: true };\n\n    } catch (error) {\n      console.error('Erro ao remover foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Busca a foto do professor pela URL\n   * @param {string} fotoUrl - URL da foto\n   * @returns {Promise<{success: boolean, url?: string, error?: string}>}\n   */\n  static async buscarFotoProfessor(fotoUrl) {\n    try {\n      if (!fotoUrl) {\n        return { success: false, error: 'URL da foto no fornecida' };\n      }\n\n      // Verificar se a URL  vlida\n      const urlValida = fotoUrl.startsWith('http') || fotoUrl.startsWith('data:');\n      if (!urlValida) {\n        return { success: false, error: 'URL da foto invlida' };\n      }\n\n      return {\n        success: true,\n        url: fotoUrl\n      };\n\n    } catch (error) {\n      console.error('Erro ao buscar foto do professor:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Lista todas as fotos de professores de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<{success: boolean, fotos?: Array, error?: string}>}\n   */\n  static async listarFotosProfessores(escolaId) {\n    try {\n      const { data, error } = await supabase.storage\n        .from('avatar')\n        .list(`${escolaId}/`);\n\n      if (error) {\n        throw new Error(`Erro ao listar fotos: ${error.message}`);\n      }\n\n      // Gerar URLs pblicas para cada arquivo\n      const fotosComUrl = data.map(file => {\n        const { data: { publicUrl } } = supabase.storage\n          .from('avatar')\n          .getPublicUrl(`${escolaId}/${file.name}`);\n        \n        return {\n          nome: file.name,\n          url: publicUrl,\n          tamanho: file.metadata?.size || 0,\n          criadoEm: file.created_at\n        };\n      });\n\n      return {\n        success: true,\n        fotos: fotosComUrl\n      };\n\n    } catch (error) {\n      console.error('Erro ao listar fotos dos professores:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Valida se uma imagem pode ser carregada\n   * @param {string} url - URL da imagem\n   * @returns {Promise<boolean>}\n   */\n  static async validarImagem(url) {\n    return new Promise((resolve) => {\n      if (!url) {\n        resolve(false);\n        return;\n      }\n\n      const img = new Image();\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = url;\n    });\n  }\n}\n\nexport default FotoProfessorService;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { getHistoriasProfessor, createHistoriaProfessor, updateHistoriaProfessor, deleteHistoriaProfessor } from '../../../services/historiaProfessorService';\nimport FotoProfessorService from '../../../services/fotoProfessorService';\nimport RichTextEditor from './RichTextEditor';\nimport { Upload, X, User, AlertCircle } from 'lucide-react';\n\nconst HistoriaProfessoresTab = ({ editingLocation, setEditingLocation }) => {\n  const [historias, setHistorias] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [editingHistoria, setEditingHistoria] = useState(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\n  const [photoError, setPhotoError] = useState('');\n  const [photoSuccess, setPhotoSuccess] = useState('');\n\n  const loadHistorias = useCallback(async () => {\n    if (!editingLocation?.id) return;\n    \n    setLoading(true);\n    try {\n      const data = await getHistoriasProfessor(editingLocation.id);\n      setHistorias(data || []);\n    } catch (error) {\n      console.error('Erro ao carregar histrias:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [editingLocation?.id]);\n\n  // Carregar histrias existentes\n  useEffect(() => {\n    if (editingLocation?.id) {\n      loadHistorias();\n    }\n  }, [editingLocation?.id, loadHistorias]);\n\n  const handleSaveHistoria = async (historiaData) => {\n    if (!editingLocation?.id) return;\n\n    try {\n      if (editingHistoria?.id) {\n        // Atualizar histria existente\n        await updateHistoriaProfessor(editingHistoria.id, historiaData);\n      } else {\n        // Criar nova histria\n        await createHistoriaProfessor({\n          ...historiaData,\n          escola_id: editingLocation.id\n        });\n      }\n      \n      // Recarregar histrias\n      await loadHistorias();\n      \n      // Limpar estado de edio\n      setEditingHistoria(null);\n      setIsCreating(false);\n    } catch (error) {\n      console.error('Erro ao salvar histria:', error);\n      alert('Erro ao salvar histria: ' + error.message);\n    }\n  };\n\n  const handleDeleteHistoria = async (historiaId) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta histria?')) return;\n\n    try {\n      await deleteHistoriaProfessor(historiaId);\n      await loadHistorias();\n    } catch (error) {\n      console.error('Erro ao deletar histria:', error);\n      alert('Erro ao deletar histria: ' + error.message);\n    }\n  };\n\n  const handleEditHistoria = (historia) => {\n    setEditingHistoria(historia);\n    setIsCreating(false);\n  };\n\n  const handleNewHistoria = () => {\n    setEditingHistoria({\n      nome_professor: '',\n      historia: ''\n    });\n    setIsCreating(true);\n  };\n\n  const handleCancelEdit = () => {\n    setEditingHistoria(null);\n    setIsCreating(false);\n    setPhotoError('');\n    setPhotoSuccess('');\n  };\n\n  // Funo para lidar com upload da foto de rosto\n  const handlePhotoUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validar arquivo\n    const tiposPermitidos = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n    if (!tiposPermitidos.includes(file.type)) {\n      setPhotoError('Tipo de arquivo no permitido. Use JPEG, PNG ou WebP.');\n      return;\n    }\n\n    // Validar tamanho (mximo 5MB)\n    const tamanhoMaximo = 5 * 1024 * 1024; // 5MB\n    if (file.size > tamanhoMaximo) {\n      setPhotoError('Arquivo muito grande. Tamanho mximo: 5MB');\n      return;\n    }\n\n    try {\n      setUploadingPhoto(true);\n      setPhotoError('');\n      setPhotoSuccess('');\n\n      // Fazer upload da foto\n      console.log('=== HistoriaProfessoresTab.handlePhotoUpload ===');\n      console.log('Arquivo:', file.name);\n      console.log('Nome Professor:', editingHistoria?.nome_professor || 'professor');\n      console.log('Escola ID:', editingLocation.id);\n      \n      const result = await FotoProfessorService.uploadFotoProfessor(\n        file, \n        editingHistoria?.nome_professor || 'professor', \n        editingLocation.id\n      );\n\n      console.log('Resultado do upload:', result);\n      \n      if (result.success) {\n        console.log('Atualizando editingHistoria com URL:', result.url);\n        console.log('Estado atual editingHistoria:', editingHistoria);\n        \n        const novoEstado = { ...editingHistoria, foto_rosto: result.url };\n        console.log('Novo estado que ser definido:', novoEstado);\n        \n        // Atualizar editingHistoria com a URL da foto\n        setEditingHistoria(novoEstado);\n        setPhotoSuccess('Foto carregada com sucesso!');\n        \n        // Verificar se o estado foi atualizado\n        setTimeout(() => {\n          console.log('Estado aps atualizao (deve mostrar foto_rosto):', editingHistoria);\n        }, 100);\n        \n        // Limpar mensagem de sucesso aps 3 segundos\n        setTimeout(() => setPhotoSuccess(''), 3000);\n      } else {\n        setPhotoError(result.error || 'Erro ao fazer upload da foto');\n      }\n    } catch (error) {\n      console.error('Erro no upload da foto:', error);\n      setPhotoError('Erro inesperado ao fazer upload da foto');\n    } finally {\n      setUploadingPhoto(false);\n    }\n  };\n\n  // Funo para remover foto\n  const handleRemovePhoto = () => {\n    setEditingHistoria({ ...editingHistoria, foto_rosto: '' });\n    setPhotoError('');\n    setPhotoSuccess('');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <span className=\"ml-2 text-gray-600\">Carregando histrias...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Cabealho */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-200\">Depoimentos dos Professores</h3>\n        <button\n          onClick={handleNewHistoria}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n        >\n          + Nova Histria\n        </button>\n      </div>\n\n      {/* Formulrio de edio/criao */}\n      {editingHistoria && (\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-6\">\n          <h4 className=\"text-md font-medium text-gray-200 mb-4\">\n            {isCreating ? 'Nova Histria do Professor' : 'Editar Histria do Professor'}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            {/* Nome do Professor */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Nome do Professor\n              </label>\n              <input\n                type=\"text\"\n                value={editingHistoria.nome_professor || ''}\n                onChange={(e) => setEditingHistoria({\n                  ...editingHistoria,\n                  nome_professor: e.target.value\n                })}\n                className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500\"\n                placeholder=\"Nome do professor (opcional)\"\n              />\n            </div>\n\n            {/* Upload de foto de rosto do professor */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Foto de Rosto do Professor <span className=\"text-gray-400\">(opcional)</span>\n              </label>\n              \n              {/* Preview da foto atual */}\n              {editingHistoria.foto_rosto && (\n                <div className=\"mb-4 p-4 border border-gray-600 rounded-lg bg-gray-700\">\n                  <div className=\"flex items-center gap-4\">\n                    <img \n                      src={editingHistoria.foto_rosto} \n                      alt=\"Foto do professor\" \n                      className=\"w-20 h-20 object-cover rounded-full border-2 border-green-400 shadow-sm\" \n                    />\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-300 mb-1\">Foto de rosto atual:</p>\n                      <p className=\"text-xs text-gray-400 break-all\">{editingHistoria.foto_rosto}</p>\n                    </div>\n                    <button \n                      type=\"button\" \n                      onClick={handleRemovePhoto} \n                      className=\"px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded-md transition-colors\"\n                      disabled={uploadingPhoto}\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Mensagens de status */}\n              {photoError && (\n                <div className=\"mb-4 p-3 bg-red-900/20 border border-red-600 rounded-lg flex items-center gap-2\">\n                  <AlertCircle className=\"w-4 h-4 text-red-400\" />\n                  <span className=\"text-sm text-red-400\">{photoError}</span>\n                </div>\n              )}\n\n              {photoSuccess && (\n                <div className=\"mb-4 p-3 bg-green-900/20 border border-green-600 rounded-lg flex items-center gap-2\">\n                  <User className=\"w-4 h-4 text-green-400\" />\n                  <span className=\"text-sm text-green-400\">{photoSuccess}</span>\n                </div>\n              )}\n\n              {/* Campo de upload */}\n              <div className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n                uploadingPhoto \n                  ? 'border-blue-400 bg-blue-900/20' \n                  : 'border-gray-600 hover:border-green-400'\n              }`}>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp\"\n                  onChange={handlePhotoUpload}\n                  disabled={uploadingPhoto}\n                  className=\"hidden\"\n                  id=\"foto-rosto-input\"\n                />\n                <label \n                  htmlFor=\"foto-rosto-input\" \n                  className={`cursor-pointer block ${uploadingPhoto ? 'cursor-not-allowed' : ''}`}\n                >\n                  <div className=\"flex flex-col items-center gap-2\">\n                    {uploadingPhoto ? (\n                      <>\n                        <span className=\"text-sm text-blue-400\">Enviando foto...</span>\n                      </>\n                    ) : (\n                      <>\n                        <Upload className=\"w-8 h-8 text-gray-400\" />\n                        <span className=\"text-sm text-gray-300\">\n                          {editingHistoria.foto_rosto ? 'Alterar foto de rosto' : 'Adicionar foto de rosto'}\n                        </span>\n                        <span className=\"text-xs text-gray-500\">\n                          JPEG, PNG ou WebP (mx. 5MB)\n                        </span>\n                      </>\n                    )}\n                  </div>\n                </label>\n              </div>\n              \n              {/* Informaes sobre o upload */}\n              <div className=\"mt-2 text-xs text-gray-500\">\n                <p> A foto de rosto ser exibida junto com o depoimento do professor</p>\n                <p> Recomendado: foto quadrada ou retrato, boa qualidade</p>\n                <p> A foto ser salva no bucket 'avatar' e vinculada ao depoimento</p>\n              </div>\n            </div>\n\n            {/* Histria/Depoimento */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Depoimento/Histria\n              </label>\n              <RichTextEditor\n                value={editingHistoria.historia || ''}\n                onChange={(value) => setEditingHistoria({\n                  ...editingHistoria,\n                  historia: value\n                })}\n                placeholder=\"Digite o depoimento ou histria do professor...\"\n              />\n            </div>\n\n            {/* Botes de ao */}\n            <div className=\"flex gap-3 pt-4\">\n              <button\n                onClick={() => handleSaveHistoria(editingHistoria)}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                {isCreating ? 'Criar' : 'Salvar'}\n              </button>\n              <button\n                onClick={handleCancelEdit}\n                className=\"px-4 py-2 bg-gray-600 text-gray-200 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Lista de histrias existentes */}\n      {historias.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"text-md font-medium text-gray-200\">Histrias Existentes</h4>\n          {historias.map((historia) => (\n            <div key={historia.id} className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  {historia.nome_professor && (\n                    <h5 className=\"font-medium text-green-400 mb-2\">\n                      {historia.nome_professor}\n                    </h5>\n                  )}\n                  <div \n                    className=\"text-gray-300 prose prose-invert max-w-none\"\n                    dangerouslySetInnerHTML={{ __html: historia.historia }}\n                  />\n                </div>\n                <div className=\"flex gap-2 ml-4\">\n                  <button\n                    onClick={() => handleEditHistoria(historia)}\n                    className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors\"\n                  >\n                    Editar\n                  </button>\n                  <button\n                    onClick={() => handleDeleteHistoria(historia.id)}\n                    className=\"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors\"\n                  >\n                    Excluir\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Mensagem quando no h histrias */}\n      {historias.length === 0 && !editingHistoria && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <p>Nenhuma histria de professor cadastrada ainda.</p>\n          <p className=\"text-sm mt-2\">Clique em \"Nova Histria\" para comear.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HistoriaProfessoresTab; ","import React, { useEffect, useRef, useCallback } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport XYZ from 'ol/source/XYZ';\nimport { fromLonLat, toLonLat } from 'ol/proj';\nimport { Point } from 'ol/geom';\nimport { Feature } from 'ol';\nimport { Style, Icon } from 'ol/style';\nimport 'ol/ol.css';\n\n// Caminho para o marcador SVG\nconst MARKER_SVG_PATH = `${process.env.PUBLIC_URL || ''}/map-marker.svg`;\n\nconst CoordenadasTab = ({ editingLocation, setEditingLocation }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markerRef = useRef(null);\n\n  // Funo para atualizar o mapa quando as coordenadas mudam\n  const updateMap = (lat, lng) => {\n    if (!mapInstanceRef.current) return;\n\n    const view = mapInstanceRef.current.getView();\n    \n    if (lat && lng && !isNaN(lat) && !isNaN(lng)) {\n      const coordinates = fromLonLat([parseFloat(lng), parseFloat(lat)]);\n      \n      // Atualizar o centro do mapa\n      view.setCenter(coordinates);\n      view.setZoom(15);\n\n      // Atualizar ou criar o marcador\n      const vectorSource = mapInstanceRef.current.getLayers().getArray()\n        .find(layer => layer instanceof VectorLayer)?.getSource();\n\n      if (vectorSource) {\n        // Remover marcador anterior\n        if (markerRef.current) {\n          vectorSource.removeFeature(markerRef.current);\n        }\n\n        // Criar novo marcador\n        const marker = new Feature({\n          geometry: new Point(coordinates)\n        });\n\n        marker.setStyle(new Style({\n          image: new Icon({\n            src: MARKER_SVG_PATH,\n            scale: 0.6,\n            anchor: [0.5, 0.5],\n            anchorXUnits: 'fraction',\n            anchorYUnits: 'fraction',\n            color: '#fbbf24'\n          })\n        }));\n\n        vectorSource.addFeature(marker);\n        markerRef.current = marker;\n      }\n    }\n  };\n\n  // Funo para atualizar coordenadas quando o mapa  clicado\n  const handleMapClick = useCallback((event) => {\n    const coordinates = toLonLat(event.coordinate);\n    const [lng, lat] = coordinates;\n    \n    setEditingLocation({\n      ...editingLocation,\n      'latitude': lat.toFixed(6),\n      'longitude': lng.toFixed(6)\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editingLocation]);\n\n  // Inicializar mapa\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Criar mapa\n    const map = new Map({\n      target: mapRef.current,\n      layers: [\n        new TileLayer({\n          source: new XYZ({\n            url: 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'\n          })\n        }),\n        new VectorLayer({\n          source: new VectorSource()\n        })\n      ],\n      view: new View({\n        center: fromLonLat([-46.6388, -23.5489]), // So Paulo\n        zoom: 8\n      })\n    });\n\n    mapInstanceRef.current = map;\n\n    // Adicionar evento de clique\n    map.on('click', handleMapClick);\n\n    // Atualizar mapa com coordenadas iniciais\n    const lat = editingLocation['Latitude'];\n    const lng = editingLocation['Longitude'];\n    if (lat && lng) {\n      updateMap(lat, lng);\n    }\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.setTarget(undefined);\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [handleMapClick]);\n\n  // Atualizar mapa quando coordenadas mudam\n  useEffect(() => {\n    const lat = editingLocation['Latitude'];\n    const lng = editingLocation['Longitude'];\n    updateMap(lat, lng);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editingLocation['Latitude'], editingLocation['Longitude']]);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Campos de Coordenadas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {/* Latitude */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Latitude\n          </label>\n          <input\n            type=\"number\"\n            step=\"any\"\n            className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n            value={editingLocation['Latitude'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Latitude': e.target.value })}\n            placeholder=\"Ex: -23.5489\"\n          />\n          <p className=\"text-xs text-gray-400 mt-1\">\n            Valor entre -90 e 90 (ex: -23.5489 para So Paulo)\n          </p>\n        </div>\n\n        {/* Longitude */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n            Longitude\n          </label>\n          <input\n            type=\"number\"\n            step=\"any\"\n            className=\"w-full border border-gray-700 bg-gray-800 rounded px-3 py-2 focus:ring-2 focus:ring-amber-400 focus:border-amber-400 text-gray-100 placeholder-gray-400 text-base\"\n            value={editingLocation['Longitude'] || ''}\n            onChange={e => setEditingLocation({ ...editingLocation, 'Longitude': e.target.value })}\n            placeholder=\"Ex: -46.6388\"\n          />\n          <p className=\"text-xs text-gray-400 mt-1\">\n            Valor entre -180 e 180 (ex: -46.6388 para So Paulo)\n          </p>\n        </div>\n      </div>\n\n      {/* Mapa */}\n      <div>\n        <label className=\"block text-sm font-medium text-gray-200 mb-2 text-base\">\n          Mapa - Clique para definir a localizao\n        </label>\n        <div \n          ref={mapRef}\n          className=\"w-full h-64 border border-gray-700 rounded-lg bg-gray-800\"\n          style={{ minHeight: '256px' }}\n        />\n        <p className=\"text-xs text-gray-400 mt-1\">\n          Clique no mapa para definir as coordenadas automaticamente\n        </p>\n      </div>\n\n      {/* Informaes sobre Coordenadas */}\n      <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n        <h3 className=\"text-lg font-semibold text-gray-100 mb-4 border-b border-gray-600 pb-2\">\n          Como Usar as Coordenadas\n        </h3>\n        \n        <div className=\"space-y-3 text-sm text-gray-300\">\n          <div>\n            <strong className=\"text-amber-400\">Mtodo 1 - Digite manualmente:</strong>\n            <p>Digite as coordenadas nos campos acima. Use ponto decimal (ex: -23.5489).</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Mtodo 2 - Clique no mapa:</strong>\n            <p>Clique no mapa para definir automaticamente as coordenadas da localizao.</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Formato das coordenadas:</strong>\n            <p>Latitude: -90 a +90 | Longitude: -180 a +180</p>\n          </div>\n          \n          <div>\n            <strong className=\"text-amber-400\">Exemplos para So Paulo:</strong>\n            <p>Latitude: -23.5489 | Longitude: -46.6388</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CoordenadasTab; ","import React, { useState, useEffect } from 'react';\nimport { Download, Eye, RefreshCw, Database, FileText, Users, Image, Video, Archive, FileDown, CheckCircle, AlertCircle } from 'lucide-react';\nimport { supabase } from '../../../supabaseClient';\n\nconst TabelasIntegraisTab = () => {\n  const [tabelas, setTabelas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedTabela, setSelectedTabela] = useState(null);\n  const [dadosTabela, setDadosTabela] = useState([]);\n  const [loadingDados, setLoadingDados] = useState(false);\n  const [backupStatus, setBackupStatus] = useState({});\n  const [backupProgress, setBackupProgress] = useState(0);\n\n  // Lista das tabelas principais do sistema\n  const TABELAS_SISTEMA = [\n    {\n      id: 'escolas_completa',\n      nome: 'Escolas Completas',\n      descricao: 'Dados principais de todas as escolas indgenas',\n      icone: Database,\n      cor: 'bg-blue-500',\n      registros: 0\n    },\n    {\n      id: 'historias_professor',\n      nome: 'Histrias dos Professores',\n      descricao: 'Depoimentos e histrias dos professores indgenas',\n      icone: Users,\n      cor: 'bg-green-500',\n      registros: 0\n    },\n    {\n      id: 'documentos_escola',\n      nome: 'Documentos das Escolas',\n      descricao: 'PDFs e documentos das escolas',\n      icone: FileText,\n      cor: 'bg-purple-500',\n      registros: 0\n    },\n    {\n      id: 'titulos_videos',\n      nome: 'Vdeos das Escolas',\n      descricao: 'Links e ttulos dos vdeos das escolas',\n      icone: Video,\n      cor: 'bg-red-500',\n      registros: 0\n    },\n    {\n      id: 'legendas_fotos',\n      nome: 'Legendas das Fotos',\n      descricao: 'Legendas e descries das imagens',\n      icone: Image,\n      cor: 'bg-yellow-500',\n      registros: 0\n    },\n    {\n      id: 'imagens_professores',\n      nome: 'Imagens dos Professores',\n      descricao: 'Metadados das imagens dos professores',\n      icone: Users,\n      cor: 'bg-teal-500',\n      registros: 0\n    },\n    {\n      id: 'imagens_escola',\n      nome: 'Imagens das Escolas',\n      descricao: 'Metadados das imagens das escolas',\n      icone: Image,\n      cor: 'bg-indigo-500',\n      registros: 0\n    }\n  ];\n\n  // Buckets do Supabase para backup\n  const BUCKETS_BACKUP = [\n    {\n      id: 'imagens-das-escolas',\n      nome: 'Imagens das Escolas',\n      descricao: 'Fotos das escolas indgenas',\n      icone: Image,\n      cor: 'bg-indigo-500',\n      arquivos: 0\n    },\n    {\n      id: 'imagens-professores',\n      nome: 'Imagens dos Professores',\n      descricao: 'Fotos dos professores indgenas',\n      icone: Users,\n      cor: 'bg-teal-500',\n      arquivos: 0\n    },\n    {\n      id: 'pdfs',\n      nome: 'Documentos PDF',\n      descricao: 'Documentos das escolas em PDF',\n      icone: FileText,\n      cor: 'bg-orange-500',\n      arquivos: 0\n    },\n    {\n      id: 'historias-professor',\n      nome: 'Histrias dos Professores',\n      descricao: 'Imagens das histrias dos professores',\n      icone: Users,\n      cor: 'bg-green-500',\n      arquivos: 0\n    }\n  ];\n\n  // Funo para testar buckets\n  const testarBuckets = async () => {\n    console.log('Testando buckets do Supabase...');\n    setBackupStatus({ status: 'testando', message: 'Testando buckets...' });\n    \n    const resultados = [];\n    \n    for (const bucket of BUCKETS_BACKUP) {\n      try {\n        console.log(`Testando bucket: ${bucket.id}`);\n        \n        // Tentar listar arquivos do bucket\n        const { data, error } = await supabase.storage\n          .from(bucket.id)\n          .list('', { limit: 1000 });\n        \n        if (error) {\n          console.error(` Erro no bucket ${bucket.id}:`, error);\n          resultados.push({ bucket: bucket.id, status: 'erro', mensagem: error.message });\n        } else {\n          console.log(` Bucket ${bucket.id} OK - ${data?.length || 0} arquivos encontrados`);\n          if (data && data.length > 0) {\n            console.log(` Arquivos no bucket ${bucket.id}:`, data.map(f => f.name));\n          }\n          resultados.push({ bucket: bucket.id, status: 'ok', arquivos: data?.length || 0 });\n        }\n      } catch (err) {\n        console.error(` Exceo no bucket ${bucket.id}:`, err);\n        resultados.push({ bucket: bucket.id, status: 'excecao', mensagem: err.message });\n      }\n    }\n    \n    // Mostrar resultados\n    console.log('Resultados dos testes:', resultados);\n    \n    const bucketsOk = resultados.filter(r => r.status === 'ok').length;\n    const bucketsErro = resultados.filter(r => r.status === 'erro' || r.status === 'excecao').length;\n    const totalArquivos = resultados.reduce((acc, r) => acc + (r.arquivos || 0), 0);\n    \n    if (bucketsErro === 0) {\n      setBackupStatus({ \n        status: 'concluido', \n        message: ` Todos os buckets esto funcionando! ${bucketsOk} buckets testados, ${totalArquivos} arquivos encontrados.` \n      });\n    } else {\n      setBackupStatus({ \n        status: 'erro', \n        message: ` ${bucketsErro} bucket(s) com problema. Verifique o console para detalhes.` \n      });\n    }\n    \n    setTimeout(() => {\n      setBackupStatus({});\n    }, 5000);\n  };\n\n  // Funo para testar tabelas\n  const testarTabelas = async () => {\n    console.log('Testando tabelas do Supabase...');\n    setBackupStatus({ status: 'testando', message: 'Testando tabelas...' });\n    \n    const resultados = [];\n    \n    for (const tabela of TABELAS_SISTEMA) {\n      try {\n        console.log(`Testando tabela: ${tabela.id}`);\n        \n        // Tentar buscar dados da tabela\n        const { data, error } = await supabase\n          .from(tabela.id)\n          .select('*')\n          .limit(5);\n        \n        if (error) {\n          console.error(` Erro na tabela ${tabela.id}:`, error);\n          resultados.push({ tabela: tabela.id, status: 'erro', mensagem: error.message });\n        } else {\n          console.log(` Tabela ${tabela.id} OK - ${data?.length || 0} registros encontrados`);\n          resultados.push({ tabela: tabela.id, status: 'ok', registros: data?.length || 0 });\n        }\n      } catch (err) {\n        console.error(` Exceo na tabela ${tabela.id}:`, err);\n        resultados.push({ tabela: tabela.id, status: 'excecao', mensagem: err.message });\n      }\n    }\n    \n    // Mostrar resultados\n    console.log('Resultados dos testes de tabelas:', resultados);\n    \n    const tabelasOk = resultados.filter(r => r.status === 'ok').length;\n    const tabelasErro = resultados.filter(r => r.status === 'erro' || r.status === 'excecao').length;\n    \n    if (tabelasErro === 0) {\n      setBackupStatus({ \n        status: 'concluido', \n        message: ` Todas as tabelas esto funcionando! ${tabelasOk} tabelas testadas.` \n      });\n    } else {\n      setBackupStatus({ \n        status: 'erro', \n        message: ` ${tabelasErro} tabela(s) com problema. Verifique o console para detalhes.` \n      });\n    }\n    \n    setTimeout(() => {\n      setBackupStatus({});\n    }, 5000);\n  };\n\n  useEffect(() => {\n    setTabelas(TABELAS_SISTEMA);\n    setLoading(false);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Carregar dados de uma tabela especfica\n  const carregarDadosTabela = async (tabelaId) => {\n    try {\n      setLoadingDados(true);\n      setError(null);\n      \n      const { data, error } = await supabase\n        .from(tabelaId)\n        .select('*')\n        .order('id', { ascending: true });\n\n      if (error) throw error;\n      \n      setDadosTabela(data || []);\n      setSelectedTabela(tabelaId);\n    } catch (err) {\n      console.error(`Erro ao carregar dados da tabela ${tabelaId}:`, err);\n      setError(`Erro ao carregar dados: ${err.message}`);\n    } finally {\n      setLoadingDados(false);\n    }\n  };\n\n  // Funo para baixar arquivo individual\n  const downloadFile = async (url, filename) => {\n    try {\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error(`Erro ao baixar ${filename}:`, error);\n    }\n  };\n\n  // Funo para criar e baixar ZIP\n  const createAndDownloadZip = async (files, zipName) => {\n    try {\n      console.log('Iniciando criao do ZIP com', files.length, 'arquivos');\n      \n      // Importar JSZip dinamicamente\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n\n      // Adicionar arquivos ao ZIP\n      let arquivosAdicionados = 0;\n      for (const file of files) {\n        try {\n          console.log(`Baixando arquivo: ${file.name} de ${file.url}`);\n          \n          const response = await fetch(file.url);\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n          }\n          \n          const blob = await response.blob();\n          console.log(`Arquivo ${file.name} baixado, tamanho: ${blob.size} bytes`);\n          \n          zip.file(file.name, blob);\n          arquivosAdicionados++;\n          \n          // Atualizar progresso\n          const progress = (arquivosAdicionados / files.length) * 100;\n          setBackupProgress(progress);\n          \n        } catch (error) {\n          console.error(`Erro ao adicionar ${file.name} ao ZIP:`, error);\n          // Continuar com outros arquivos\n        }\n      }\n\n      if (arquivosAdicionados === 0) {\n        throw new Error('Nenhum arquivo foi adicionado ao ZIP');\n      }\n\n      console.log(`Gerando ZIP com ${arquivosAdicionados} arquivos...`);\n      \n      // Gerar e baixar ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      console.log(`ZIP gerado, tamanho: ${zipBlob.size} bytes`);\n      \n      const downloadUrl = window.URL.createObjectURL(zipBlob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = zipName;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      console.log('ZIP baixado com sucesso:', zipName);\n      \n    } catch (error) {\n      console.error('Erro ao criar ZIP:', error);\n      \n      // Fallback: baixar arquivos individualmente\n      console.log('Tentando download individual dos arquivos...');\n      for (const file of files) {\n        try {\n          await downloadFile(file.url, file.name);\n          await new Promise(resolve => setTimeout(resolve, 200)); // Delay maior para evitar sobrecarga\n        } catch (downloadError) {\n          console.error(`Erro ao baixar ${file.name}:`, downloadError);\n        }\n      }\n    }\n  };\n\n  // Backup completo do site com download das imagens\n  const backupCompletoSite = async () => {\n    try {\n      setBackupStatus({ status: 'iniciando', message: 'Iniciando backup completo...' });\n      setBackupProgress(0);\n\n      // 1. Backup das tabelas (25% do progresso)\n      setBackupStatus({ status: 'tabelas', message: 'Fazendo backup das tabelas...' });\n      setBackupProgress(10);\n      \n      const backupTabelas = {};\n      for (const tabela of TABELAS_SISTEMA) {\n        try {\n          const { data, error } = await supabase\n            .from(tabela.id)\n            .select('*');\n          \n          if (error) throw error;\n          backupTabelas[tabela.id] = data || [];\n        } catch (err) {\n          console.error(`Erro ao fazer backup da tabela ${tabela.id}:`, err);\n        }\n      }\n      setBackupProgress(25);\n\n      // 2. Backup dos buckets com URLs para download (50% do progresso)\n      setBackupStatus({ status: 'buckets', message: 'Preparando download das imagens...' });\n      setBackupProgress(30);\n\n      const backupArquivos = {};\n      const todosArquivos = [];\n      \n      for (const bucket of BUCKETS_BACKUP) {\n        try {\n          console.log(`Listando arquivos do bucket: ${bucket.id}`);\n          const { data, error } = await supabase.storage\n            .from(bucket.id)\n            .list('', { limit: 1000 });\n          \n          if (error) throw error;\n          \n          console.log(`Bucket ${bucket.id}: ${data?.length || 0} arquivos encontrados`);\n          console.log('Arquivos encontrados:', data);\n          \n          const arquivosComUrls = [];\n          for (const arquivo of data) {\n            try {\n              console.log(`Gerando URL para: ${arquivo.name}`);\n              const { data: urlData } = await supabase.storage\n                .from(bucket.id)\n                .createSignedUrl(arquivo.name, 3600); // URL vlida por 1 hora\n              \n              if (urlData?.signedUrl) {\n                const arquivoCompleto = {\n                  ...arquivo,\n                  url: urlData.signedUrl,\n                  bucket: bucket.id,\n                  bucketNome: bucket.nome\n                };\n                arquivosComUrls.push(arquivoCompleto);\n                todosArquivos.push(arquivoCompleto);\n                console.log(`URL gerada para ${arquivo.name}: ${urlData.signedUrl.substring(0, 50)}...`);\n              } else {\n                console.warn(`URL no gerada para ${arquivo.name}`);\n              }\n            } catch (err) {\n              console.error(`Erro ao gerar URL para ${arquivo.name}:`, err);\n            }\n          }\n          \n          console.log(`Bucket ${bucket.id}: ${arquivosComUrls.length} URLs geradas`);\n          backupArquivos[bucket.id] = arquivosComUrls;\n        } catch (err) {\n          console.error(`Erro ao fazer backup do bucket ${bucket.id}:`, err);\n        }\n      }\n      setBackupProgress(75);\n\n      // 3. Criar arquivo de backup completo (25% do progresso)\n      setBackupStatus({ status: 'finalizando', message: 'Criando arquivo de backup...' });\n      setBackupProgress(80);\n\n      const backupCompleto = {\n        metadata: {\n          dataBackup: new Date().toISOString(),\n          versao: '1.0',\n          descricao: 'Backup completo do sistema OPIN - Observatrio dos Professores Indgenas',\n          tabelas: TABELAS_SISTEMA.map(t => ({ id: t.id, nome: t.nome })),\n          buckets: BUCKETS_BACKUP.map(b => ({ id: b.id, nome: b.nome })),\n          totalRegistros: Object.values(backupTabelas).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n          totalArquivos: Object.values(backupArquivos).reduce((acc, bucket) => acc + (bucket?.length || 0), 0)\n        },\n        dados: backupTabelas,\n        arquivos: backupArquivos\n      };\n\n      // 4. Download do backup completo\n      setBackupStatus({ status: 'download', message: 'Preparando download...' });\n      setBackupProgress(90);\n\n      const jsonContent = JSON.stringify(backupCompleto, null, 2);\n      const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8;' });\n      const link = document.createElement('a');\n      const url = URL.createObjectURL(blob);\n      link.setAttribute('href', url);\n      link.setAttribute('download', `backup_completo_opin_${new Date().toISOString().split('T')[0]}.json`);\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      // 5. Download das imagens em ZIP\n      console.log(`Total de arquivos para download: ${todosArquivos.length}`);\n      console.log('Arquivos para download:', todosArquivos);\n      \n      if (todosArquivos.length > 0) {\n        setBackupStatus({ status: 'imagens', message: 'Baixando imagens...' });\n        setBackupProgress(95);\n        \n        await createAndDownloadZip(\n          todosArquivos, \n          `imagens_opin_${new Date().toISOString().split('T')[0]}.zip`\n        );\n      } else {\n        console.warn('Nenhuma imagem encontrada para backup');\n        setBackupStatus({ \n          status: 'erro', \n          message: 'Nenhuma imagem encontrada para backup. Verifique se h arquivos nos buckets.' \n        });\n      }\n\n      setBackupProgress(100);\n      setBackupStatus({ \n        status: 'concluido', \n        message: 'Backup completo realizado com sucesso!',\n        detalhes: {\n          tabelas: Object.keys(backupTabelas).length,\n          registros: Object.values(backupTabelas).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n          arquivos: Object.values(backupArquivos).reduce((acc, bucket) => acc + (bucket?.length || 0), 0)\n        }\n      });\n\n      // Limpar status aps 5 segundos\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 5000);\n\n    } catch (err) {\n      console.error('Erro no backup completo:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Backup apenas das tabelas em formato CSV\n  const backupApenasTabelas = async () => {\n    try {\n      setBackupStatus({ status: 'tabelas', message: 'Fazendo backup das tabelas em CSV...' });\n      setBackupProgress(0);\n\n      const backupTabelasData = {};\n      for (let i = 0; i < TABELAS_SISTEMA.length; i++) {\n        const tabela = TABELAS_SISTEMA[i];\n        try {\n          const { data, error } = await supabase\n            .from(tabela.id)\n            .select('*');\n          \n          if (error) throw error;\n          backupTabelasData[tabela.id] = data || [];\n          \n          setBackupProgress((i + 1) / TABELAS_SISTEMA.length * 100);\n        } catch (err) {\n          console.error(`Erro ao fazer backup da tabela ${tabela.id}:`, err);\n        }\n      }\n\n      // Criar arquivo CSV para cada tabela\n      const dataAtual = new Date().toISOString().split('T')[0];\n      \n      // Importar JSZip dinamicamente para criar um arquivo ZIP com todos os CSVs\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n\n      // Adicionar cada tabela como um arquivo CSV separado\n      for (const [tabelaId, dados] of Object.entries(backupTabelasData)) {\n        if (dados && dados.length > 0) {\n          // Obter cabealhos das colunas\n          const headers = Object.keys(dados[0]);\n          \n          // Criar contedo CSV\n          const csvContent = [\n            headers.join(','),\n            ...dados.map(row => \n              headers.map(header => {\n                const value = row[header];\n                // Escapar vrgulas e quebras de linha\n                if (typeof value === 'string' && (value.includes(',') || value.includes('\\n') || value.includes('\"'))) {\n                  return `\"${value.replace(/\"/g, '\"\"')}\"`;\n                }\n                return value || '';\n              }).join(',')\n            )\n          ].join('\\n');\n\n          // Adicionar ao ZIP\n          zip.file(`${tabelaId}_${dataAtual}.csv`, csvContent);\n        }\n      }\n\n      // Adicionar arquivo de metadados\n      const metadata = {\n        dataBackup: new Date().toISOString(),\n        tipo: 'backup_tabelas_csv',\n        tabelas: Object.keys(backupTabelasData),\n        totalRegistros: Object.values(backupTabelasData).reduce((acc, tabela) => acc + (tabela?.length || 0), 0),\n        formato: 'CSV',\n        descricao: 'Backup das tabelas do sistema OPIN em formato CSV'\n      };\n      \n      zip.file(`metadata_${dataAtual}.json`, JSON.stringify(metadata, null, 2));\n\n      // Gerar e baixar ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      const downloadUrl = window.URL.createObjectURL(zipBlob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `backup_tabelas_csv_opin_${dataAtual}.zip`;\n      link.style.visibility = 'hidden';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n\n      setBackupStatus({ \n        status: 'concluido', \n        message: 'Backup das tabelas em CSV realizado com sucesso!' \n      });\n\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 3000);\n\n    } catch (err) {\n      console.error('Erro no backup das tabelas:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Backup apenas das imagens\n  const backupImagens = async () => {\n    try {\n      console.log('Iniciando backup das imagens...');\n      setBackupStatus({ status: 'imagens', message: 'Preparando backup das imagens...' });\n      setBackupProgress(0);\n\n      const todosArquivos = [];\n      \n      for (let i = 0; i < BUCKETS_BACKUP.length; i++) {\n        const bucket = BUCKETS_BACKUP[i];\n        try {\n          console.log(`Processando bucket: ${bucket.id} (${bucket.nome})`);\n          setBackupStatus({ \n            status: 'imagens', \n            message: `Processando bucket: ${bucket.nome}...` \n          });\n          \n          // Listar arquivos do bucket\n          const { data: arquivos, error } = await supabase.storage\n            .from(bucket.id)\n            .list('', { limit: 1000 });\n          \n          if (error) {\n            console.error(`Erro ao listar arquivos do bucket ${bucket.id}:`, error);\n            throw error;\n          }\n          \n          console.log(`Bucket ${bucket.id} tem ${arquivos?.length || 0} arquivos`);\n          \n          if (arquivos && arquivos.length > 0) {\n            // Gerar URLs assinadas para cada arquivo\n            for (const arquivo of arquivos) {\n              try {\n                console.log(`Gerando URL para: ${arquivo.name}`);\n                \n                const { data: urlData, error: urlError } = await supabase.storage\n                  .from(bucket.id)\n                  .createSignedUrl(arquivo.name, 3600);\n                \n                if (urlError) {\n                  console.error(`Erro ao gerar URL para ${arquivo.name}:`, urlError);\n                  continue;\n                }\n                \n                if (urlData?.signedUrl) {\n                  const arquivoCompleto = {\n                    ...arquivo,\n                    url: urlData.signedUrl,\n                    bucket: bucket.id,\n                    bucketNome: bucket.nome\n                  };\n                  todosArquivos.push(arquivoCompleto);\n                  console.log(`URL gerada para ${arquivo.name}: ${urlData.signedUrl.substring(0, 50)}...`);\n                } else {\n                  console.warn(`URL no gerada para ${arquivo.name}`);\n                }\n              } catch (err) {\n                console.error(`Erro ao gerar URL para ${arquivo.name}:`, err);\n              }\n            }\n          } else {\n            console.log(`Bucket ${bucket.id} est vazio`);\n          }\n          \n          setBackupProgress((i + 1) / BUCKETS_BACKUP.length * 100);\n        } catch (err) {\n          console.error(`Erro ao processar bucket ${bucket.id}:`, err);\n          // Continuar com outros buckets\n        }\n      }\n\n      console.log(`Total de arquivos encontrados: ${todosArquivos.length}`);\n\n      if (todosArquivos.length > 0) {\n        setBackupStatus({ \n          status: 'download', \n          message: `Criando arquivo ZIP com ${todosArquivos.length} imagens...` \n        });\n        \n        await createAndDownloadZip(\n          todosArquivos, \n          `imagens_opin_${new Date().toISOString().split('T')[0]}.zip`\n        );\n\n        setBackupStatus({ \n          status: 'concluido', \n          message: `Backup das imagens realizado com sucesso! ${todosArquivos.length} arquivos baixados.` \n        });\n      } else {\n        setBackupStatus({ \n          status: 'concluido', \n          message: 'Nenhuma imagem encontrada para backup.' \n        });\n      }\n\n      setTimeout(() => {\n        setBackupStatus({});\n        setBackupProgress(0);\n      }, 3000);\n\n    } catch (err) {\n      console.error('Erro no backup das imagens:', err);\n      setBackupStatus({ \n        status: 'erro', \n        message: `Erro no backup: ${err.message}` \n      });\n      setBackupProgress(0);\n    }\n  };\n\n  // Download dos dados em formato CSV\n  const downloadCSV = (tabelaId, dados) => {\n    if (!dados || dados.length === 0) {\n      alert('Nenhum dado para baixar');\n      return;\n    }\n\n    // Obter cabealhos das colunas\n    const headers = Object.keys(dados[0]);\n    \n    // Criar contedo CSV\n    const csvContent = [\n      headers.join(','),\n      ...dados.map(row => \n        headers.map(header => {\n          const value = row[header];\n          // Escapar vrgulas e quebras de linha\n          if (typeof value === 'string' && (value.includes(',') || value.includes('\\n') || value.includes('\"'))) {\n            return `\"${value.replace(/\"/g, '\"\"')}\"`;\n          }\n          return value || '';\n        }).join(',')\n      )\n    ].join('\\n');\n\n    // Criar blob e download\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${tabelaId}_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Download dos dados em formato JSON\n  const downloadJSON = (tabelaId, dados) => {\n    if (!dados || dados.length === 0) {\n      alert('Nenhum dado para baixar');\n      return;\n    }\n\n    const jsonContent = JSON.stringify(dados, null, 2);\n    const blob = new Blob([jsonContent], { type: 'application/json;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${tabelaId}_${new Date().toISOString().split('T')[0]}.json`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-gray-400 text-lg\">Carregando tabelas...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n\n      {/* Seo de Backup */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h4 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <Archive className=\"w-5 h-5 text-blue-400\" />\n          Backup Completo do Sistema\n        </h4>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n          {/* Backup Completo */}\n          <div className=\"bg-gradient-to-br from-blue-600/20 to-blue-700/20 rounded-xl p-6 border border-blue-500/30 hover:border-blue-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-blue-500 p-3 rounded-lg mr-3\">\n                <Archive className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup Completo</h5>\n                <p className=\"text-sm text-gray-400\">Sistema completo</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Inclui todas as tabelas, imagens dos buckets e metadados do sistema\n            </p>\n            <button\n              onClick={backupCompletoSite}\n              disabled={backupStatus.status === 'iniciando' || backupStatus.status === 'tabelas' || backupStatus.status === 'buckets' || backupStatus.status === 'finalizando' || backupStatus.status === 'download' || backupStatus.status === 'imagens'}\n              className=\"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n            >\n              <Archive className=\"w-4 h-4 inline mr-2\" />\n              Backup Completo\n            </button>\n          </div>\n\n          {/* Backup das Tabelas */}\n          <div className=\"bg-gradient-to-br from-green-600/20 to-green-700/20 rounded-xl p-6 border border-green-500/30 hover:border-green-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-green-500 p-3 rounded-lg mr-3\">\n                <Database className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup das Tabelas</h5>\n                <p className=\"text-sm text-gray-400\">Apenas dados</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Apenas os dados das tabelas em formato CSV\n            </p>\n            <div className=\"space-y-2\">\n              <button\n                onClick={backupApenasTabelas}\n                disabled={backupStatus.status === 'tabelas'}\n                className=\"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n              >\n                <Database className=\"w-4 h-4 inline mr-2\" />\n                Backup Tabelas\n              </button>\n              <button\n                onClick={testarTabelas}\n                className=\"w-full px-3 py-2 bg-gray-700/50 text-gray-300 rounded-lg hover:bg-gray-600/50 transition-colors border border-gray-600/50 text-sm\"\n              >\n                 Testar Tabelas\n              </button>\n            </div>\n          </div>\n\n          {/* Backup das Imagens */}\n          <div className=\"bg-gradient-to-br from-purple-600/20 to-purple-700/20 rounded-xl p-6 border border-purple-500/30 hover:border-purple-400/50 transition-all duration-200\">\n            <div className=\"flex items-center mb-4\">\n              <div className=\"bg-purple-500 p-3 rounded-lg mr-3\">\n                <FileDown className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h5 className=\"font-semibold text-gray-100\">Backup das Imagens</h5>\n                <p className=\"text-sm text-gray-400\">Apenas arquivos</p>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-300 mb-4\">\n              Apenas as imagens dos buckets em arquivo ZIP\n            </p>\n            <div className=\"space-y-2\">\n              <button\n                onClick={backupImagens}\n                disabled={backupStatus.status === 'imagens' || backupStatus.status === 'download'}\n                className=\"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\n              >\n                <FileDown className=\"w-4 h-4 inline mr-2\" />\n                Backup Imagens\n              </button>\n              <button\n                onClick={testarBuckets}\n                className=\"w-full px-3 py-2 bg-gray-700/50 text-gray-300 rounded-lg hover:bg-gray-600/50 transition-colors border border-gray-600/50 text-sm\"\n              >\n                 Testar Buckets\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Status do Backup */}\n        {backupStatus.status && (\n          <div className={`p-6 rounded-xl border backdrop-blur-sm ${\n            backupStatus.status === 'concluido' \n              ? 'bg-green-900/50 border-green-700/50 text-green-200' \n              : backupStatus.status === 'erro' \n                ? 'bg-red-900/50 border-red-700/50 text-red-200'\n                : 'bg-blue-900/50 border-blue-700/50 text-blue-200'\n          }`}>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {backupStatus.status === 'concluido' ? (\n                  <CheckCircle className=\"w-6 h-6 text-green-400\" />\n                ) : backupStatus.status === 'erro' ? (\n                  <AlertCircle className=\"w-6 h-6 text-red-400\" />\n                ) : (\n                  <div className=\"w-6 h-6\"></div>\n                )}\n                <div>\n                  <p className=\"font-semibold\">{backupStatus.message}</p>\n                  {backupStatus.detalhes && (\n                    <p className=\"text-sm mt-1 text-gray-300\">\n                      Tabelas: {backupStatus.detalhes.tabelas} | \n                      Registros: {backupStatus.detalhes.registros} | \n                      Arquivos: {backupStatus.detalhes.arquivos}\n                    </p>\n                  )}\n                </div>\n              </div>\n              {backupProgress > 0 && backupProgress < 100 && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-32 bg-gray-700 rounded-full h-2\">\n                    <div \n                      className=\"bg-green-400 h-2 rounded-full transition-all duration-300\" \n                      style={{ width: `${backupProgress}%` }}\n                    ></div>\n                  </div>\n                  <span className=\"text-sm font-medium\">{Math.round(backupProgress)}%</span>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Lista de Tabelas */}\n      <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n        <h4 className=\"text-lg font-semibold text-gray-100 mb-6 flex items-center gap-2\">\n          <Database className=\"w-5 h-5 text-gray-400\" />\n          Tabelas do Sistema\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {tabelas.map((tabela) => {\n            const Icone = tabela.icone;\n            const isSelected = selectedTabela === tabela.id;\n            \n            return (\n              <div\n                key={tabela.id}\n                className={`bg-gray-800/50 backdrop-blur-sm rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-lg ${\n                  isSelected \n                    ? 'border-green-500/50 bg-green-600/20' \n                    : 'border-gray-700/50 hover:border-gray-600/50 hover:bg-gray-700/30'\n                }`}\n                onClick={() => carregarDadosTabela(tabela.id)}\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-center mb-4\">\n                    <div className={`${tabela.cor} p-3 rounded-lg mr-3 shadow-lg`}>\n                      <Icone className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-gray-100\">{tabela.nome}</h4>\n                      <p className=\"text-sm text-gray-400\">{tabela.registros} registros</p>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-300 mb-4\">{tabela.descricao}</p>\n                  \n                  <div className=\"flex space-x-2\">\n                    <button\n                      className=\"flex items-center px-3 py-2 text-xs bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/30 transition-colors border border-blue-500/30\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        carregarDadosTabela(tabela.id);\n                      }}\n                    >\n                      <Eye className=\"w-3 h-3 mr-1\" />\n                      Visualizar\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n\n\n      {/* Visualizao dos Dados */}\n      {selectedTabela && (\n        <div className=\"bg-gray-800/30 rounded-xl p-6 border border-gray-700/30\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h4 className=\"text-lg font-semibold text-gray-100\">\n                Dados da Tabela: {tabelas.find(t => t.id === selectedTabela)?.nome}\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                {dadosTabela.length} registros encontrados\n              </p>\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => carregarDadosTabela(selectedTabela)}\n                disabled={loadingDados}\n                className=\"flex items-center px-4 py-2 text-sm bg-gray-700/50 text-gray-200 rounded-lg hover:bg-gray-600/50 transition-colors disabled:opacity-50 border border-gray-600/50\"\n              >\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                Atualizar\n              </button>\n              \n              <button\n                onClick={() => downloadCSV(selectedTabela, dadosTabela)}\n                disabled={loadingDados || dadosTabela.length === 0}\n                className=\"flex items-center px-4 py-2 text-sm bg-green-600/20 text-green-300 rounded-lg hover:bg-green-600/30 transition-colors disabled:opacity-50 border border-green-500/30\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                CSV\n              </button>\n              \n              <button\n                onClick={() => downloadJSON(selectedTabela, dadosTabela)}\n                disabled={loadingDados || dadosTabela.length === 0}\n                className=\"flex items-center px-4 py-2 text-sm bg-purple-600/20 text-purple-300 rounded-lg hover:bg-purple-600/30 transition-colors disabled:opacity-50 border border-purple-500/30\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                JSON\n              </button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-900/50 border border-red-700/50 text-red-200 rounded-xl backdrop-blur-sm\">\n              <div className=\"flex items-center gap-3\">\n                <AlertCircle className=\"w-5 h-5 text-red-400\" />\n                <span>{error}</span>\n              </div>\n            </div>\n          )}\n\n          {loadingDados ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <span className=\"ml-3 text-gray-400\">Carregando dados...</span>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              {dadosTabela.length > 0 ? (\n                <table className=\"min-w-full divide-y divide-gray-700\">\n                  <thead className=\"bg-gray-700/30\">\n                    <tr>\n                      {Object.keys(dadosTabela[0]).map((header) => (\n                        <th\n                          key={header}\n                          className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\"\n                        >\n                          {header}\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-gray-800/20 divide-y divide-gray-700\">\n                    {dadosTabela.slice(0, 100).map((row, index) => (\n                      <tr key={index} className=\"hover:bg-gray-700/30 transition-colors\">\n                        {Object.values(row).map((value, cellIndex) => (\n                          <td\n                            key={cellIndex}\n                            className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-200 max-w-xs truncate\"\n                            title={typeof value === 'string' && value.length > 50 ? value : ''}\n                          >\n                            {typeof value === 'string' && value.length > 50 \n                              ? `${value.substring(0, 50)}...` \n                              : value || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              ) : (\n                <div className=\"text-center py-12 text-gray-400\">\n                  <div className=\"w-16 h-16 bg-gray-700/30 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Database className=\"w-8 h-8 text-gray-500\" />\n                  </div>\n                  <p>Nenhum dado encontrado nesta tabela</p>\n                </div>\n              )}\n              \n              {dadosTabela.length > 100 && (\n                <div className=\"mt-6 text-center text-sm text-gray-400 bg-gray-700/20 p-4 rounded-lg\">\n                  Mostrando os primeiros 100 registros de {dadosTabela.length} total.\n                  Use os botes de download para acessar todos os dados.\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TabelasIntegraisTab;\n\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { Edit2, X, Check, AlertCircle } from 'lucide-react';\n\nconst EditableTable = ({ \n  escolas, \n  onSave, \n  loading = false,\n  error = null \n}) => {\n  const [canScroll, setCanScroll] = useState(false);\n  const scrollRef = useRef(null);\n\n  // Verificar se h scroll horizontal ou vertical\n  useEffect(() => {\n    const checkScroll = () => {\n      if (scrollRef.current) {\n        const hasHorizontalScroll = scrollRef.current.scrollWidth > scrollRef.current.clientWidth;\n        const hasVerticalScroll = scrollRef.current.scrollHeight > scrollRef.current.clientHeight;\n        setCanScroll(hasHorizontalScroll || hasVerticalScroll);\n      }\n    };\n\n    checkScroll();\n    window.addEventListener('resize', checkScroll);\n    return () => window.removeEventListener('resize', checkScroll);\n  }, [escolas]);\n  const [editingCell, setEditingCell] = useState(null);\n  const [editValue, setEditValue] = useState('');\n  const [originalValue, setOriginalValue] = useState('');\n\n  // Iniciar edio de uma clula\n  const startEditing = useCallback((rowIndex, columnKey, value) => {\n    setEditingCell({ rowIndex, columnKey });\n    setEditValue(value || '');\n    setOriginalValue(value || '');\n  }, []);\n\n  // Cancelar edio\n  const cancelEditing = useCallback(() => {\n    setEditingCell(null);\n    setEditValue('');\n    setOriginalValue('');\n  }, []);\n\n  // Salvar edio\n  const saveEdit = useCallback(async () => {\n    if (!editingCell) return;\n\n    const { rowIndex, columnKey } = editingCell;\n    const escola = escolas[rowIndex];\n    \n    // S salvar se o valor mudou\n    if (editValue !== originalValue) {\n      const updatedEscola = {\n        ...escola,\n        [columnKey]: editValue\n      };\n      \n      await onSave(updatedEscola);\n    }\n    \n    cancelEditing();\n  }, [editingCell, editValue, originalValue, escolas, onSave, cancelEditing]);\n\n  // Lidar com tecla Enter para salvar\n  const handleKeyDown = useCallback((e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      saveEdit();\n    } else if (e.key === 'Escape') {\n      e.preventDefault();\n      cancelEditing();\n    }\n  }, [saveEdit, cancelEditing]);\n\n  // Colunas da tabela\n  const columns = [\n    { key: 'Escola', label: 'Escola', width: 'w-32' },\n    { key: 'Municpio', label: 'Municpio', width: 'w-28' },\n    { key: 'Endereo', label: 'Endereo', width: 'w-40' },\n    { key: 'Terra Indigena (TI)', label: 'Terra Indgena', width: 'w-32' },\n    { key: 'Parcerias com o municpio', label: 'Parcerias', width: 'w-32' },\n    { key: 'Diretoria de Ensino', label: 'Diretoria', width: 'w-32' },\n    { key: 'Ano de criao da escola', label: 'Ano Criao', width: 'w-24' },\n    { key: 'Povos indigenas', label: 'Povos', width: 'w-32' },\n    { key: 'Linguas faladas', label: 'Lnguas', width: 'w-32' },\n    { key: 'Modalidade de Ensino/turnos de funcionamento', label: 'Modalidade', width: 'w-48' },\n    { key: 'Numero de alunos', label: 'Alunos', width: 'w-20' },\n    { key: 'turnos_funcionamento', label: 'Turnos', width: 'w-24' },\n    { key: 'Espao escolar e estrutura', label: 'Estrutura', width: 'w-40' },\n    { key: 'Acesso  gua', label: 'gua', width: 'w-24' },\n    { key: 'Tem coleta de lixo?', label: 'Coleta Lixo', width: 'w-24' },\n    { key: 'Acesso  internet', label: 'Internet', width: 'w-24' },\n    { key: 'Equipamentos Tecs', label: 'Equipamentos', width: 'w-32' },\n    { key: 'Modo de acesso  escola', label: 'Acesso', width: 'w-32' },\n    { key: 'Gesto/Nome', label: 'Gesto', width: 'w-32' },\n    { key: 'Outros funcionrios', label: 'Funcionrios', width: 'w-32' },\n    { key: 'Quantidade de professores indgenas', label: 'Prof. Indgenas', width: 'w-28' },\n    { key: 'Quantidade de professores no indgenas', label: 'Prof. No Indgenas', width: 'w-32' },\n    { key: 'Professores falam a lngua indgena?', label: 'Falam Lngua', width: 'w-24' },\n    { key: 'Formao dos professores', label: 'Formao', width: 'w-32' },\n    { key: 'Formao continuada oferecida', label: 'Formao Cont.', width: 'w-32' },\n    { key: 'A escola possui PPP prprio?', label: 'PPP Prprio', width: 'w-24' },\n    { key: 'PPP elaborado com a comunidade?', label: 'PPP Comunidade', width: 'w-28' },\n    { key: 'Projetos em andamento', label: 'Projetos', width: 'w-32' },\n    { key: 'Parcerias com universidades?', label: 'Parcerias Univ.', width: 'w-28' },\n    { key: 'Aes com ONGs ou coletivos?', label: 'ONGs', width: 'w-24' },\n    { key: 'Desejos da comunidade para a escola', label: 'Desejos', width: 'w-40' },\n    { key: 'Escola utiliza redes sociais?', label: 'Redes Sociais', width: 'w-24' },\n    { key: 'Links das redes sociais', label: 'Links Redes', width: 'w-40' },\n    { key: 'historia_da_escola', label: 'Histria', width: 'w-40' },\n    { key: 'Latitude', label: 'Latitude', width: 'w-20' },\n    { key: 'Longitude', label: 'Longitude', width: 'w-20' },\n    { key: 'links', label: 'Links', width: 'w-32' },\n    { key: 'link_para_videos', label: 'Vdeos', width: 'w-32' },\n    { key: 'logradouro', label: 'Logradouro', width: 'w-32' },\n    { key: 'numero', label: 'Nmero', width: 'w-16' },\n    { key: 'complemento', label: 'Complemento', width: 'w-24' },\n    { key: 'bairro', label: 'Bairro', width: 'w-24' },\n    { key: 'cep', label: 'CEP', width: 'w-20' },\n    { key: 'estado', label: 'Estado', width: 'w-16' },\n    { key: 'nome_professor', label: 'Nome Professor', width: 'w-32' },\n    { key: 'professores_indigenas', label: 'Prof. Indgenas (Det.)', width: 'w-32' },\n    { key: 'professores_nao_indigenas', label: 'Prof. No Indgenas (Det.)', width: 'w-32' },\n    { key: 'professores_falam_lingua_indigena', label: 'Falam Lngua (Det.)', width: 'w-32' },\n    { key: 'formacao_professores', label: 'Formao (Det.)', width: 'w-32' },\n    { key: 'visitas_supervisores_formacao', label: 'Visitas Supervisores', width: 'w-32' },\n    { key: 'outros_funcionarios', label: 'Outros Funcionrios (Det.)', width: 'w-32' },\n    { key: 'gestao', label: 'Gesto (Det.)', width: 'w-32' },\n    { key: 'merenda_diferenciada', label: 'Merenda Diferenciada', width: 'w-32' },\n    { key: 'cozinha', label: 'Cozinha', width: 'w-24' },\n    { key: 'merenda_escolar', label: 'Merenda Escolar', width: 'w-28' },\n    { key: 'diferenciada', label: 'Diferenciada', width: 'w-24' },\n    { key: 'actions', label: 'Aes', width: 'w-20' }\n  ];\n\n  // Renderizar clula editvel\n  const renderCell = (escola, column, rowIndex) => {\n    const isEditing = editingCell?.rowIndex === rowIndex && editingCell?.columnKey === column.key;\n    const value = escola[column.key] || '';\n\n    if (column.key === 'actions') {\n      return (\n        <div className=\"flex items-center space-x-1\">\n          {isEditing ? (\n            <>\n              <button\n                onClick={saveEdit}\n                className=\"p-1 text-green-500 hover:text-green-600 transition-colors\"\n                title=\"Salvar\"\n              >\n                <Check size={16} />\n              </button>\n              <button\n                onClick={cancelEditing}\n                className=\"p-1 text-red-500 hover:text-red-600 transition-colors\"\n                title=\"Cancelar\"\n              >\n                <X size={16} />\n              </button>\n            </>\n          ) : (\n            <div className=\"flex items-center space-x-1\">\n              <button\n                onClick={() => startEditing(rowIndex, 'Escola', escola.Escola)}\n                className=\"p-1 text-blue-500 hover:text-blue-600 transition-colors\"\n                title=\"Editar Escola\"\n              >\n                <Edit2 size={14} />\n              </button>\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    if (isEditing) {\n      // Determinar o tipo de input baseado na coluna\n      let inputType = 'text';\n      let inputProps = {};\n      \n      if (column.key === 'Numero de alunos') {\n        inputType = 'number';\n        inputProps = { min: 0, step: 1 };\n      } else if (column.key === 'Modalidade de Ensino/turnos de funcionamento') {\n        inputType = 'textarea';\n      }\n\n      if (inputType === 'textarea') {\n        return (\n          <textarea\n            value={editValue}\n            onChange={(e) => setEditValue(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onBlur={saveEdit}\n            className=\"w-full px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none\"\n            rows={3}\n            autoFocus\n          />\n        );\n      }\n\n      return (\n        <input\n          type={inputType}\n          value={editValue}\n          onChange={(e) => setEditValue(e.target.value)}\n          onKeyDown={handleKeyDown}\n          onBlur={saveEdit}\n          className=\"w-full px-2 py-1 text-sm bg-gray-700 border border-gray-600 rounded text-gray-100 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n          autoFocus\n          {...inputProps}\n        />\n      );\n    }\n\n    return (\n      <div \n        className=\"cursor-pointer hover:bg-gray-700 px-2 py-1 rounded transition-colors group\"\n        onClick={() => startEditing(rowIndex, column.key, value)}\n        title=\"Clique para editar\"\n      >\n        <span className=\"text-gray-200 group-hover:text-white text-xs whitespace-nowrap overflow-hidden\">\n          {value && value.length > 30 \n            ? `${value.substring(0, 30)}...` \n            : value || '-'}\n        </span>\n        <Edit2 size={10} className=\"inline ml-1 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"bg-gray-900 rounded-lg overflow-hidden h-full flex flex-col\">\n      {/* Header com status */}\n      <div className=\"bg-gray-800 px-4 py-3 border-b border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            {loading && (\n              <div className=\"flex items-center text-yellow-400\">\n                Salvando...\n              </div>\n            )}\n            {error && (\n              <div className=\"flex items-center text-red-400\">\n                <AlertCircle size={16} className=\"mr-1\" />\n                {error}\n              </div>\n            )}\n          </div>\n        </div>\n        <p className=\"text-sm text-gray-400 mt-1\">\n          Clique em qualquer clula para editar. Pressione Enter para salvar ou Esc para cancelar.\n        </p>\n      </div>\n\n      {/* Tabela */}\n      <div \n        ref={scrollRef}\n        className={`editable-table-scroll flex-1 relative ${canScroll ? 'can-scroll' : ''}`}\n        style={{ overflowY: 'auto', maxHeight: 'calc(100vh - 300px)' }}\n      >\n        <table className=\"w-full min-w-[3000px]\">\n                      <thead className=\"bg-gray-800\">\n              <tr>\n                {columns.map((column) => (\n                  <th\n                    key={column.key}\n                    className={`${column.width} px-2 py-2 text-left text-xs font-medium text-gray-300 uppercase tracking-wider border-b border-gray-700`}\n                  >\n                    <div className=\"truncate\" title={column.label}>\n                      {column.label}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n          <tbody className=\"bg-gray-900 divide-y divide-gray-700\">\n            {escolas.map((escola, rowIndex) => (\n              <tr key={escola.id} className=\"hover:bg-gray-800 transition-colors\">\n                {columns.map((column) => (\n                                  <td\n                  key={column.key}\n                  className=\"px-2 py-2 text-xs\"\n                >\n                    {renderCell(escola, column, rowIndex)}\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n\n    </div>\n  );\n};\n\nexport default EditableTable;\n","import React, { useState } from 'react';\nimport EditableTable from '../components/EditableTable';\nimport { useEscolas } from '../hooks/useEscolas';\nimport { Download } from 'lucide-react';\n\nconst TabelaEditavelTab = ({ setEditingLocation }) => {\n  const { \n    escolas, \n    loading: escolasLoading, \n    error: escolasError,\n    saveEscola\n  } = useEscolas();\n\n  const [tableLoading, setTableLoading] = useState(false);\n  const [tableError, setTableError] = useState(null);\n  const [updateSuccess, setUpdateSuccess] = useState(false);\n\n  // Funo para exportar dados como CSV\n  const exportToCSV = () => {\n    const headers = [\n      'Escola',\n      'Municpio',\n      'Endereo',\n      'Terra Indgena',\n      'Parcerias',\n      'Diretoria de Ensino',\n      'Ano Criao',\n      'Povos',\n      'Lnguas',\n      'Modalidade',\n      'Alunos',\n      'Turnos',\n      'Estrutura',\n      'gua',\n      'Coleta Lixo',\n      'Internet',\n      'Equipamentos',\n      'Acesso',\n      'Gesto',\n      'Funcionrios',\n      'Prof. Indgenas',\n      'Prof. No Indgenas',\n      'Falam Lngua',\n      'Formao',\n      'Formao Cont.',\n      'PPP Prprio',\n      'PPP Comunidade',\n      'Projetos',\n      'Parcerias Univ.',\n      'ONGs',\n      'Desejos',\n      'Redes Sociais',\n      'Links Redes',\n      'Histria',\n      'Latitude',\n      'Longitude',\n      'Links',\n      'Vdeos',\n      'Logradouro',\n      'Nmero',\n      'Complemento',\n      'Bairro',\n      'CEP',\n      'Estado',\n      'Nome Professor',\n      'Prof. Indgenas (Det.)',\n      'Prof. No Indgenas (Det.)',\n      'Falam Lngua (Det.)',\n      'Formao (Det.)',\n      'Visitas Supervisores',\n      'Outros Funcionrios (Det.)',\n      'Gesto (Det.)',\n      'Merenda Diferenciada',\n      'Cozinha',\n      'Merenda Escolar',\n      'Diferenciada'\n    ];\n    \n    const csvContent = [\n      headers.join(','),\n      ...escolas.map(escola => [\n        `\"${escola.nome_escola || ''}\"`,\n        `\"${escola.municipio || ''}\"`,\n        `\"${escola.endereco || ''}\"`,\n        `\"${escola.terra_indigena || ''}\"`,\n        `\"${escola.parcerias || ''}\"`,\n        `\"${escola.diretoria_ensino || ''}\"`,\n        `\"${escola.ano_criacao || ''}\"`,\n        `\"${escola.povos || ''}\"`,\n        `\"${escola.linguas || ''}\"`,\n        `\"${escola.modalidade || ''}\"`,\n        `\"${escola.numero_alunos || ''}\"`,\n        `\"${escola.turnos || ''}\"`,\n        `\"${escola.estrutura || ''}\"`,\n        `\"${escola.agua || ''}\"`,\n        `\"${escola.coleta_lixo || ''}\"`,\n        `\"${escola.internet || ''}\"`,\n        `\"${escola.equipamentos || ''}\"`,\n        `\"${escola.acesso || ''}\"`,\n        `\"${escola.gestao || ''}\"`,\n        `\"${escola.funcionarios || ''}\"`,\n        `\"${escola.professores_indigenas || ''}\"`,\n        `\"${escola.professores_nao_indigenas || ''}\"`,\n        `\"${escola.falam_lingua_indigena || ''}\"`,\n        `\"${escola.formacao_professores || ''}\"`,\n        `\"${escola.formacao_continuada || ''}\"`,\n        `\"${escola.ppp_proprio || ''}\"`,\n        `\"${escola.ppp_comunidade || ''}\"`,\n        `\"${escola.projetos || ''}\"`,\n        `\"${escola.parcerias_universidades || ''}\"`,\n        `\"${escola.parcerias_ongs || ''}\"`,\n        `\"${escola.desejos_comunidade || ''}\"`,\n        `\"${escola.redes_sociais || ''}\"`,\n        `\"${escola.links_redes_sociais || ''}\"`,\n        `\"${escola.historia_escola || ''}\"`,\n        `\"${escola.latitude || ''}\"`,\n        `\"${escola.longitude || ''}\"`,\n        `\"${escola.links_uteis || ''}\"`,\n        `\"${escola.link_para_videos || ''}\"`,\n        `\"${escola.logradouro || ''}\"`,\n        `\"${escola.numero || ''}\"`,\n        `\"${escola.complemento || ''}\"`,\n        `\"${escola.bairro || ''}\"`,\n        `\"${escola.cep || ''}\"`,\n        `\"${escola.estado || ''}\"`,\n        `\"${escola.nome_professor || ''}\"`,\n        `\"${escola.professores_indigenas_detalhado || ''}\"`,\n        `\"${escola.professores_nao_indigenas_detalhado || ''}\"`,\n        `\"${escola.falam_lingua_indigena_detalhado || ''}\"`,\n        `\"${escola.formacao_professores_detalhado || ''}\"`,\n        `\"${escola.visitas_supervisores || ''}\"`,\n        `\"${escola.outros_funcionarios_detalhado || ''}\"`,\n        `\"${escola.gestao_detalhado || ''}\"`,\n        `\"${escola.merenda_diferenciada || ''}\"`,\n        `\"${escola.cozinha || ''}\"`,\n        `\"${escola.merenda_escolar || ''}\"`,\n        `\"${escola.merenda_diferenciada_detalhado || ''}\"`\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'escolas_indigenas.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n\n  // Funo para salvar alteraes na tabela\n  const handleTableSave = async (escolaId, updatedData) => {\n    try {\n      setTableLoading(true);\n      setTableError(null);\n      \n      await saveEscola(escolaId, updatedData);\n      \n      setUpdateSuccess(true);\n      setTimeout(() => setUpdateSuccess(false), 3000);\n      \n    } catch (error) {\n      console.error('Erro ao salvar escola:', error);\n      setTableError(error.message);\n    } finally {\n      setTableLoading(false);\n    }\n  };\n\n  if (escolasLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <span className=\"ml-2 text-gray-400\">Carregando escolas...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-800\">\n      {/* Cabealho */}\n      <div className=\"flex-shrink-0 p-6 border-b border-gray-700\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              Tabela Editvel\n            </h2>\n            <p className=\"text-gray-400\">\n              Edite os dados das escolas diretamente na tabela\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            {updateSuccess && (\n              <div className=\"text-green-400 text-sm\">\n                 Dados salvos com sucesso!\n              </div>\n            )}\n            \n            <button\n              onClick={exportToCSV}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors\"\n            >\n              <Download size={16} />\n              <span>Exportar CSV</span>\n            </button>\n          </div>\n        </div>\n\n      </div>\n\n      {/* Tabela Editvel */}\n      <div className=\"flex-1 overflow-hidden\">\n        {escolasError ? (\n          <div className=\"bg-red-900 border border-red-700 rounded-lg p-4 m-4\">\n            <div className=\"flex items-center space-x-2 text-red-400\">\n              <span className=\"text-lg\"></span>\n              <span>Erro ao carregar escolas: {escolasError}</span>\n            </div>\n          </div>\n        ) : (\n          <div className=\"h-full\">\n            <EditableTable\n              escolas={escolas}\n              onSave={handleTableSave}\n              loading={tableLoading}\n              error={tableError}\n            />\n          </div>\n        )}\n      </div>\n\n    </div>\n  );\n};\n\nexport default TabelaEditavelTab;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../../../supabaseClient';\nimport { X, MapPin, Users, AlertCircle } from 'lucide-react';\n\nconst CompletenessDashboard = () => {\n  const [completenessData, setCompletenessData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [incompleteSchools, setIncompleteSchools] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n\n  // Definio das categorias de campos para o dashboard\n  const fieldCategories = {\n    'Dados Bsicos': [\n      'Escola',\n      'Municpio',\n      'Endereo',\n      'Terra Indigena (TI)',\n      'Escola Estadual ou Municipal',\n      'Parcerias com o municpio',\n      'Diretoria de Ensino',\n      'Ano de criao da escola'\n    ],\n    'Povos e Lnguas': [\n      'Povos indigenas',\n      'Linguas faladas'\n    ],\n    'Modalidades e Alunos': [\n      'Modalidade de Ensino/turnos de funcionamento',\n      'Numero de alunos',\n      'turnos_funcionamento'\n    ],\n    'Infraestrutura': [\n      'Espao escolar e estrutura',\n      'Acesso  gua',\n      'Tem coleta de lixo?',\n      'Acesso  internet',\n      'Equipamentos Tecs',\n      'Modo de acesso  escola',\n      'Cozinha',\n      'Merenda_escolar',\n      'diferenciada'\n    ],\n    'Gesto e Professores': [\n      'Gesto/Nome',\n      'Outros funcionrios',\n      'Quantidade de professores indgenas',\n      'Quantidade de professores no indgenas',\n      'Professores falam a lngua indgena?',\n      'Formao dos professores',\n      'Formao continuada oferecida'\n    ],\n    'Material Pedaggico': [\n      'A escola possui PPP prprio?',\n      'PPP elaborado com a comunidade?',\n      'Material pedaggico no indgena',\n      'Material pedaggico indgena',\n      'Prticas pedaggicas indgenas',\n      'Formas de avaliao'\n    ],\n    'Projetos e Parcerias': [\n      'Projetos em andamento',\n      'Parcerias com universidades?',\n      'Aes com ONGs ou coletivos?',\n      'Desejos da comunidade para a escola'\n    ],\n    'Redes Sociais e Mdia': [\n      'Escola utiliza redes sociais?',\n      'Links das redes sociais',\n      'link_para_videos'\n    ],\n    'Histrias': [\n      'historia_da_escola'\n    ],\n    'Localizao': [\n      'Latitude',\n      'Longitude',\n      'logradouro',\n      'numero',\n      'complemento',\n      'bairro',\n      'cep',\n      'estado'\n    ],\n    'Mdia': [\n      'imagem_header'\n    ]\n  };\n\n  // Funo para calcular completude de um campo\n  const calculateFieldCompleteness = (data, fieldName) => {\n    if (!data || data.length === 0) return 0;\n    \n    const totalRecords = data.length;\n    const filledRecords = data.filter(record => {\n      const value = record[fieldName];\n      return value !== null && value !== undefined && value !== '' && value !== 'null';\n    }).length;\n    \n    return Math.round((filledRecords / totalRecords) * 100);\n  };\n\n  // Funo para calcular completude de uma categoria\n  const calculateCategoryCompleteness = (data, fields) => {\n    if (!data || data.length === 0) return 0;\n    \n    const fieldCompleteness = fields.map(field => \n      calculateFieldCompleteness(data, field)\n    );\n    \n    return Math.round(\n      fieldCompleteness.reduce((sum, completeness) => sum + completeness, 0) / fields.length\n    );\n  };\n\n  // Funo para obter cor baseada na completude\n  const getCompletenessColor = (percentage) => {\n    if (percentage >= 80) return 'text-green-400 bg-green-400/10';\n    if (percentage >= 60) return 'text-yellow-400 bg-yellow-400/10';\n    if (percentage >= 40) return 'text-orange-400 bg-orange-400/10';\n    return 'text-red-400 bg-red-400/10';\n  };\n\n  // Funo para obter cone baseado na completude\n  const getCompletenessIcon = (percentage) => {\n    if (percentage >= 80) return '';\n    if (percentage >= 60) return '';\n    if (percentage >= 40) return '';\n    return '';\n  };\n\n  // Funo para encontrar escolas sem informao em uma categoria\n  const findIncompleteSchools = (data, categoryFields) => {\n    if (!data || data.length === 0) return [];\n    \n    return data.filter(school => {\n      // Verifica se pelo menos um campo da categoria est vazio\n      return categoryFields.some(field => {\n        const value = school[field];\n        return value === null || value === undefined || value === '' || value === 'null';\n      });\n    }).map(school => {\n      // Identifica quais campos especficos esto vazios\n      const missingFields = categoryFields.filter(field => {\n        const value = school[field];\n        return value === null || value === undefined || value === '' || value === 'null';\n      });\n      \n      return {\n        ...school,\n        missingFields\n      };\n    });\n  };\n\n  // Funo para lidar com clique em uma categoria\n  const handleCategoryClick = (category) => {\n    const categoryFields = fieldCategories[category];\n    const incomplete = findIncompleteSchools(completenessData.rawData, categoryFields);\n    \n    setSelectedCategory(category);\n    setIncompleteSchools(incomplete);\n    setShowModal(true);\n  };\n\n  // Buscar dados de completude\n  const fetchCompletenessData = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('*');\n\n      if (error) throw error;\n\n      // Calcular completude para cada categoria\n      const categoryCompleteness = {};\n      Object.keys(fieldCategories).forEach(category => {\n        categoryCompleteness[category] = calculateCategoryCompleteness(data, fieldCategories[category]);\n      });\n\n      // Calcular completude geral\n      const allFields = Object.values(fieldCategories).flat();\n      const overallCompleteness = calculateCategoryCompleteness(data, allFields);\n\n      setCompletenessData({\n        totalRecords: data.length,\n        overallCompleteness,\n        categoryCompleteness,\n        rawData: data\n      });\n\n    } catch (err) {\n      console.error('Erro ao buscar dados de completude:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    fetchCompletenessData();\n  }, [fetchCompletenessData]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"text-gray-400 text-lg\">Carregando dashboard de completude...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-900/50 border border-red-700/50 text-red-200 px-6 py-4 rounded-xl mb-6 backdrop-blur-sm\">\n        <div className=\"flex items-center gap-3\">\n          <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n          <div>\n            <h3 className=\"font-semibold\">Erro ao carregar dashboard</h3>\n            <p className=\"text-red-300\">{error}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!completenessData) {\n    return (\n      <div className=\"text-center py-8 text-gray-400\">\n        Nenhum dado encontrado para anlise de completude.\n      </div>\n    );\n  }\n\n  const { overallCompleteness, categoryCompleteness } = completenessData;\n\n  // Componente Modal para mostrar escolas sem informao\n  const IncompleteSchoolsModal = () => {\n    if (!showModal) return null;\n\n    return (\n      <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-gray-900 border border-gray-700 rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden\">\n          {/* Header do Modal */}\n          <div className=\"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4 border-b border-gray-700\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-xl font-bold text-gray-100\">\n                  Escolas sem informao - {selectedCategory}\n                </h3>\n                <p className=\"text-gray-400 text-sm mt-1\">\n                  {incompleteSchools.length} escola(s) com dados incompletos nesta categoria\n                </p>\n              </div>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-400\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Contedo do Modal */}\n          <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n            {incompleteSchools.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <div className=\"text-green-400 text-4xl mb-4\"></div>\n                <p className=\"text-gray-300 text-lg\">Todas as escolas tm informaes completas nesta categoria!</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {incompleteSchools.map((school, index) => (\n                  <div key={index} className=\"bg-gray-800/50 border border-gray-700 rounded-xl p-4\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-lg font-semibold text-gray-100 mb-1\">\n                          {school.Escola || 'Nome no informado'}\n                        </h4>\n                        <div className=\"flex items-center gap-4 text-sm text-gray-400\">\n                          {school.Municpio && (\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"w-4 h-4\" />\n                              {school.Municpio}\n                            </div>\n                          )}\n                          {school['Terra Indigena (TI)'] && (\n                            <div className=\"flex items-center gap-1\">\n                              <Users className=\"w-4 h-4\" />\n                              {school['Terra Indigena (TI)']}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <span className=\"bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs font-medium\">\n                          {school.missingFields.length} campo(s) faltando\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* Campos faltando */}\n                    <div className=\"bg-gray-900/50 rounded-lg p-3\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <AlertCircle className=\"w-4 h-4 text-orange-400\" />\n                        <span className=\"text-sm font-medium text-gray-300\">Campos sem informao:</span>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {school.missingFields.map((field, fieldIndex) => (\n                          <span\n                            key={fieldIndex}\n                            className=\"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs\"\n                          >\n                            {field}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Footer do Modal */}\n          <div className=\"bg-gray-800/50 px-6 py-4 border-t border-gray-700\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-400\">\n                Clique em uma escola para editar suas informaes\n              </p>\n              <button\n                onClick={() => setShowModal(false)}\n                className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg transition-colors\"\n              >\n                Fechar\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header com estatsticas gerais */}\n      <div className=\"bg-gradient-to-r from-gray-800/50 to-gray-900/50 backdrop-blur-sm rounded-2xl border border-gray-700/50 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300\">\n              Dashboard de Completude\n            </h2>\n            <p className=\"text-gray-400 mt-1\">\n              Anlise do preenchimento dos dados da tabela escolas_completa\n            </p>\n          </div>\n          <button\n            onClick={fetchCompletenessData}\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-lg transition-colors flex items-center gap-2\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n            Atualizar\n          </button>\n        </div>\n\n      </div>\n\n      {/* Barra de progresso geral */}\n      <div className=\"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-semibold text-gray-200\">Progresso Geral</h3>\n          <span className={`px-3 py-1 rounded-full text-sm font-medium ${getCompletenessColor(overallCompleteness)}`}>\n            {overallCompleteness}%\n          </span>\n        </div>\n        <div className=\"w-full bg-gray-700 rounded-full h-3\">\n          <div \n            className={`h-3 rounded-full transition-all duration-500 ${\n              overallCompleteness >= 80 ? 'bg-gradient-to-r from-green-500 to-green-400' :\n              overallCompleteness >= 60 ? 'bg-gradient-to-r from-yellow-500 to-yellow-400' :\n              overallCompleteness >= 40 ? 'bg-gradient-to-r from-orange-500 to-orange-400' :\n              'bg-gradient-to-r from-red-500 to-red-400'\n            }`}\n            style={{ width: `${overallCompleteness}%` }}\n          ></div>\n        </div>\n      </div>\n\n      {/* Grid de categorias */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {Object.entries(categoryCompleteness).map(([category, percentage]) => (\n          <div \n            key={category}\n            onClick={() => handleCategoryClick(category)}\n            className=\"bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50 p-4 hover:bg-gray-800/70 hover:border-gray-600/50 cursor-pointer transition-all duration-200 group\"\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"text-lg font-semibold text-gray-200\">{category}</h4>\n              <span className=\"text-2xl\">{getCompletenessIcon(percentage)}</span>\n            </div>\n            \n            <div className=\"mb-3\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-sm text-gray-400\">Completude</span>\n                <span className={`text-sm font-medium ${getCompletenessColor(percentage)}`}>\n                  {percentage}%\n                </span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className={`h-2 rounded-full transition-all duration-500 ${\n                    percentage >= 80 ? 'bg-green-500' :\n                    percentage >= 60 ? 'bg-yellow-500' :\n                    percentage >= 40 ? 'bg-orange-500' :\n                    'bg-red-500'\n                  }`}\n                  style={{ width: `${percentage}%` }}\n                ></div>\n              </div>\n            </div>\n\n            <div className=\"text-xs text-gray-400\">\n              <p>{fieldCategories[category].length} campos nesta categoria</p>\n              <p className=\"text-gray-500 group-hover:text-gray-400 transition-colors\">\n                Clique para ver escolas sem informao\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n\n      {/* Modal para mostrar escolas sem informao */}\n      <IncompleteSchoolsModal />\n    </div>\n  );\n};\n\nexport default CompletenessDashboard;","import React, { useState, useEffect } from 'react';\nimport { Info, AlertCircle, X } from 'lucide-react';\nimport { VersionamentoService } from '../../../services/versionamentoService';\n\nconst MetadadosModal = ({ \n  isOpen, \n  onClose, \n  onSave,\n  escolaId,\n  escolaNome,\n  camposAlterados = []\n}) => {\n  const [fontes, setFontes] = useState([]);\n  const [loadingFontes, setLoadingFontes] = useState(true);\n  const [autor, setAutor] = useState(null);\n  const [formData, setFormData] = useState({\n    fonte_id: '',\n    observacoes: ''\n  });\n  const [saving, setSaving] = useState(false);\n\n  // Carregar fontes e autor ao abrir o modal\n  useEffect(() => {\n    if (isOpen) {\n      const carregarDados = async () => {\n        // Carregar fontes\n        setLoadingFontes(true);\n        const fontesResult = await VersionamentoService.buscarFontesDados();\n        if (fontesResult.success) {\n          setFontes(fontesResult.data);\n        }\n        setLoadingFontes(false);\n\n        // Carregar autor\n        const autorAtual = await VersionamentoService.obterAutorAtual();\n        setAutor(autorAtual);\n      };\n\n      carregarDados();\n    } else {\n      // Resetar formulrio quando fechar\n      setFormData({ fonte_id: '', observacoes: '' });\n    }\n  }, [isOpen]);\n\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // Registrar uma verso para CADA campo alterado\n      const resultados = [];\n      \n      for (const campoAlterado of camposAlterados) {\n        const result = await VersionamentoService.registrarVersaoDados({\n          nomeTabela: 'escolas_completa',\n          chaveLinha: escolaId.toString(),\n          nomeCampo: campoAlterado.campo, // Campo especfico alterado\n          fonteId: formData.fonte_id || null,\n          autor: autor,\n          observacoes: formData.observacoes.trim() || null\n        });\n        \n        resultados.push(result);\n      }\n\n      // Verificar se todos foram salvos com sucesso\n      const todosSucesso = resultados.every(r => r.success);\n      \n      if (todosSucesso) {\n        // Chamar callback de sucesso\n        if (onSave) {\n          onSave(resultados);\n        }\n        onClose();\n      } else {\n        const erros = resultados.filter(r => !r.success).map(r => r.error);\n        console.error('Erro ao salvar alguns metadados:', erros);\n        alert('Alguns metadados no puderam ser salvos. Verifique o console para mais detalhes.');\n      }\n    } catch (error) {\n      console.error('Erro ao salvar metadados:', error);\n      alert('Erro ao salvar metadados: ' + error.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSkip = () => {\n    // Registrar verso mnima (sem metadados) para cada campo alterado\n    camposAlterados.forEach(campoAlterado => {\n      VersionamentoService.registrarVersaoDados({\n        nomeTabela: 'escolas_completa',\n        chaveLinha: escolaId.toString(),\n        nomeCampo: campoAlterado.campo,\n        fonteId: null,\n        autor: autor,\n        observacoes: null\n      }).catch(err => {\n        console.warn(`Erro ao registrar verso mnima para campo ${campoAlterado.campo}:`, err);\n      });\n    });\n    \n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  const hasData = formData.fonte_id || formData.observacoes.trim();\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\n      onClick={(e) => e.target === e.currentTarget && !saving && handleSkip()}\n    >\n      <div \n        className=\"bg-gray-900/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 w-full max-w-lg transform transition-all duration-300 scale-100\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-800/50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-blue-500/20 text-blue-400 rounded-lg\">\n              <Info className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-100\">\n                Metadados da Alterao\n              </h2>\n              <p className=\"text-sm text-gray-400\">\n                {escolaNome ? `Escola: ${escolaNome}` : 'Registre informaes sobre esta alterao'}\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={handleSkip}\n            disabled={saving}\n            className=\"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition-colors disabled:opacity-50\"\n            aria-label=\"Fechar modal\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Body */}\n        <div className=\"p-6 max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800\">\n          <div className=\"mb-4 p-4 bg-blue-900/30 border border-blue-700/50 rounded-lg\">\n            <p className=\"text-sm text-gray-200 mb-2\">\n              <strong>Deseja registrar metadados sobre esta alterao?</strong>\n            </p>\n            <p className=\"text-xs text-gray-300 leading-relaxed\">\n              Metadados so informaes que descrevem a origem e o contexto dos dados que voc est inserindo ou modificando.\n            </p>\n            <p className=\"text-xs text-gray-300 leading-relaxed mt-2\">\n              Eles ajudam a manter o site mais rigoroso, confivel e til para quem for estud-lo no futuro.\n            </p>\n            <p className=\"text-xs text-gray-400 mt-2 italic\">\n              Se quiser, voc pode deixar essa informao agora  mas no  obrigatrio.\n            </p>\n          </div>\n\n          {/* Lista de campos alterados */}\n          {camposAlterados.length > 0 && (\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                Campos alterados ({camposAlterados.length}):\n              </label>\n              <div className=\"space-y-2 max-h-48 overflow-y-auto border border-gray-800/50 rounded-md p-3 bg-gray-800/30 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800\">\n                {camposAlterados.map((campo, index) => (\n                  <div key={index} className=\"text-xs bg-gray-800/50 p-2 rounded border border-gray-700/50\">\n                    <div className=\"font-medium text-gray-200\">\n                      {campo.label || campo.campo}\n                    </div>\n                    {campo.valorAntigo && (\n                      <div className=\"text-gray-500 mt-1\">\n                        <span className=\"line-through\">Antigo: {String(campo.valorAntigo).substring(0, 50)}</span>\n                      </div>\n                    )}\n                    <div className=\"text-gray-300 mt-1\">\n                      <span className=\"font-medium\">Novo:</span> {String(campo.valorNovo).substring(0, 50)}\n                      {String(campo.valorNovo).length > 50 && '...'}\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <p className=\"text-xs text-gray-400 mt-2\">\n                Os metadados abaixo sero aplicados a todos os campos alterados listados acima.\n              </p>\n            </div>\n          )}\n\n          {/* Fonte dos dados */}\n          <div className=\"mb-4\">\n            <label htmlFor=\"fonte_id\" className=\"block text-sm font-medium text-gray-300 mb-1\">\n              Fonte dos dados <span className=\"text-gray-500 text-xs\">(opcional)</span>\n            </label>\n            <select\n              id=\"fonte_id\"\n              value={formData.fonte_id}\n              onChange={(e) => handleChange('fonte_id', e.target.value)}\n              className=\"w-full px-3 py-2 text-sm border border-gray-700/50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-800/50 text-gray-200\"\n              disabled={saving}\n            >\n              <option value=\"\" className=\"bg-gray-800 text-gray-200\">Selecione a fonte dos dados</option>\n              {loadingFontes ? (\n                <option disabled className=\"bg-gray-800 text-gray-200\">Carregando fontes...</option>\n              ) : (\n                fontes.map((fonte) => (\n                  <option key={fonte.id} value={fonte.id} className=\"bg-gray-800 text-gray-200\">\n                    {fonte.nome} {fonte.descricao ? `- ${fonte.descricao}` : ''}\n                  </option>\n                ))\n              )}\n            </select>\n          </div>\n\n          {/* Observaes */}\n          <div className=\"mb-4\">\n            <label htmlFor=\"observacoes\" className=\"block text-sm font-medium text-gray-300 mb-1\">\n              Observaes <span className=\"text-gray-500 text-xs\">(opcional)</span>\n            </label>\n            <textarea\n              id=\"observacoes\"\n              value={formData.observacoes}\n              onChange={(e) => {\n                const value = e.target.value;\n                if (value.length <= 1000) {\n                  handleChange('observacoes', value);\n                }\n              }}\n              rows={4}\n              maxLength={1000}\n              placeholder=\"Adicione observaes sobre esta alterao...\"\n              className=\"w-full px-3 py-2 text-sm border border-gray-700/50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-gray-800/50 text-gray-200 placeholder-gray-500\"\n              disabled={saving}\n            />\n            <div className=\"flex justify-between items-center mt-1\">\n              <span className=\"text-xs text-gray-400\">\n                {formData.observacoes.length}/1000 caracteres\n              </span>\n              {!hasData && (\n                <div className=\"flex items-center gap-1 text-xs text-amber-400\">\n                  <AlertCircle className=\"w-3 h-3\" />\n                  <span>Preencher metadados  recomendado</span>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between p-6 border-t border-gray-800/50 bg-gray-800/30 rounded-b-2xl\">\n          <button\n            onClick={handleSkip}\n            disabled={saving}\n            className=\"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-800/50 border border-gray-700/50 rounded-md hover:bg-gray-800 hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Pular\n          </button>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleSave}\n              disabled={saving}\n              className=\"px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-green-600 to-green-700 rounded-md hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg\"\n            >\n              {saving ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                  Salvando...\n                </>\n              ) : (\n                'Salvar Metadados'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MetadadosModal;\n\n","/**\n * Utilitrio para comparar dados e identificar campos alterados\n */\n\n/**\n * Normaliza valores para comparao (remove espaos, trata null/undefined)\n */\nconst normalizeValue = (value) => {\n  if (value === null || value === undefined) return '';\n  if (typeof value === 'string') return value.trim();\n  return String(value);\n};\n\n/**\n * Compara dois objetos e retorna lista de campos que foram alterados\n * @param {Object} dadosAntigos - Dados originais da escola\n * @param {Object} dadosNovos - Dados novos da escola\n * @returns {Array} Array de objetos { campo, valorAntigo, valorNovo }\n */\nexport const identificarCamposAlterados = (dadosAntigos, dadosNovos) => {\n  if (!dadosAntigos || !dadosNovos) return [];\n\n  const camposAlterados = [];\n  const todosCampos = new Set([\n    ...Object.keys(dadosAntigos),\n    ...Object.keys(dadosNovos)\n  ]);\n\n  // Campos a ignorar na comparao\n  const camposIgnorar = [\n    'id',\n    'created_at',\n    'updated_at',\n    'activeTab',\n    'imagem_header' // Pode ser alterado separadamente\n  ];\n\n  todosCampos.forEach(campo => {\n    // Ignorar campos especiais\n    if (camposIgnorar.includes(campo)) return;\n\n    const valorAntigo = normalizeValue(dadosAntigos[campo]);\n    const valorNovo = normalizeValue(dadosNovos[campo]);\n\n    // Se os valores so diferentes, o campo foi alterado\n    if (valorAntigo !== valorNovo) {\n      camposAlterados.push({\n        campo,\n        valorAntigo: dadosAntigos[campo] || '',\n        valorNovo: dadosNovos[campo] || '',\n        label: obterLabelCampo(campo)\n      });\n    }\n  });\n\n  return camposAlterados;\n};\n\n/**\n * Obtm um label legvel para o campo\n */\nconst obterLabelCampo = (campo) => {\n  const labels = {\n    'Escola': 'Nome da Escola',\n    'Municpio': 'Municpio',\n    'Endereo': 'Endereo',\n    'Terra Indigena (TI)': 'Terra Indgena',\n    'Escola Estadual ou Municipal': 'Tipo de Escola',\n    'Parcerias com o municpio': 'Parcerias com Municpio',\n    'Diretoria de Ensino': 'Diretoria de Ensino',\n    'Ano de criao da escola': 'Ano de Criao',\n    'Povos indigenas': 'Povos Indgenas',\n    'Linguas faladas': 'Lnguas Faladas',\n    'Modalidade de Ensino/turnos de funcionamento': 'Modalidade de Ensino',\n    'Numero de alunos': 'Nmero de Alunos',\n    'turnos_funcionamento': 'Turnos de Funcionamento',\n    'Espao escolar e estrutura': 'Espao Escolar',\n    'Acesso  gua': 'Acesso  gua',\n    'Tem coleta de lixo?': 'Coleta de Lixo',\n    'Acesso  internet': 'Acesso  Internet',\n    'Equipamentos Tecs': 'Equipamentos Tcnicos',\n    'Modo de acesso  escola': 'Modo de Acesso',\n    'Gesto/Nome': 'Gesto',\n    'Outros funcionrios': 'Outros Funcionrios',\n    'Quantidade de professores indgenas': 'Professores Indgenas',\n    'Quantidade de professores no indgenas': 'Professores No Indgenas',\n    'Professores falam a lngua indgena?': 'Professores Falam Lngua Indgena',\n    'Formao dos professores': 'Formao dos Professores',\n    'Formao continuada oferecida': 'Formao Continuada',\n    'A escola possui PPP prprio?': 'PPP Prprio',\n    'PPP elaborado com a comunidade?': 'PPP com Comunidade',\n    'Material pedaggico no indgena': 'Material No Indgena',\n    'Material pedaggico indgena': 'Material Indgena',\n    'Prticas pedaggicas indgenas': 'Prticas Pedaggicas Indgenas',\n    'Formas de avaliao': 'Formas de Avaliao',\n    'Projetos em andamento': 'Projetos em Andamento',\n    'Parcerias com universidades?': 'Parcerias com Universidades',\n    'Aes com ONGs ou coletivos?': 'Aes com ONGs',\n    'Desejos da comunidade para a escola': 'Desejos da Comunidade',\n    'Escola utiliza redes sociais?': 'Uso de Redes Sociais',\n    'Links das redes sociais': 'Links Redes Sociais',\n    'historia_da_escola': 'Histria da Escola',\n    'Latitude': 'Latitude',\n    'Longitude': 'Longitude',\n    'link_para_videos': 'Links de Vdeos',\n    'logradouro': 'Logradouro',\n    'numero': 'Nmero',\n    'complemento': 'Complemento',\n    'bairro': 'Bairro',\n    'cep': 'CEP',\n    'estado': 'Estado',\n    'Cozinha': 'Cozinha',\n    'Merenda_escolar': 'Merenda Escolar',\n    'diferenciada': 'Diferenciada'\n  };\n\n  return labels[campo] || campo;\n};\n\n","import React, { useState } from 'react';\n// import { useRefresh } from '../../contexts/RefreshContext'; // Removido - no utilizado\nimport { useEscolas } from './hooks/useEscolas';\nimport { useModalidades } from './hooks/useModalidades';\nimport { ADMIN_TABS, UI_CONFIG, FORM_CONFIG } from './constants/adminConstants';\nimport AdminSidebar from './AdminSidebar';\nimport AdminToolbar from './AdminToolbar';\nimport ProtectedRoute from '../Auth/ProtectedRoute';\nimport { supabase } from '../../supabaseClient';\nimport './AdminPanel.css';\nimport ModalidadesTab from './tabs/ModalidadesTab';\nimport DadosBasicosTab from './tabs/DadosBasicosTab';\nimport PovosLinguasTab from './tabs/PovosLinguasTab';\nimport InfraestruturaTab from './tabs/InfraestruturaTab';\nimport GestaoProfessoresTab from './tabs/GestaoProfessoresTab';\nimport MaterialPedagogicoTab from './tabs/MaterialPedagogicoTab';\nimport ProjetosParceriasTab from './tabs/ProjetosParceriasTab';\nimport RedesSociaisTab from './tabs/RedesSociaisTab';\nimport VideoTab from './tabs/VideoTab';\nimport HistoriasTab from './tabs/HistoriasTab';\nimport HistoriaProfessoresTab from './tabs/HistoriaProfessoresTab';\nimport CoordenadasTab from './tabs/CoordenadasTab';\nimport TabelasIntegraisTab from './tabs/TabelasIntegraisTab';\nimport TabelaEditavelTab from './tabs/TabelaEditavelTab';\nimport CompletenessDashboard from './components/CompletenessDashboard';\nimport MetadadosModal from './components/MetadadosModal';\nimport { identificarCamposAlterados } from '../../utils/campoComparator';\n\n// Imports condicionais para evitar problemas de hot reload\nlet ImagensEscolaTab = null;\nlet ImagensProfessoresTab = null;\nlet DocumentosTab = null;\n\ntry {\n  ImagensEscolaTab = require('./tabs/ImagensEscolaTab').default;\n} catch (e) {\n  console.warn('ImagensEscolaTab no encontrado:', e);\n}\n\ntry {\n  ImagensProfessoresTab = require('./tabs/ImagensProfessoresTab').default;\n} catch (e) {\n  console.warn('ImagensProfessoresTab no encontrado:', e);\n}\n\ntry {\n  DocumentosTab = require('./tabs/DocumentosTab').default;\n} catch (e) {\n  console.warn('DocumentosTab no encontrado:', e);\n}\n\nconst AdminPanelContent = () => {\n  // const { triggerRefresh } = useRefresh(); // Removido - no utilizado\n  \n  // Estados principais\n  const [editingLocation, setEditingLocation] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveError, setSaveError] = useState(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [showBackupModal, setShowBackupModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [escolaToDelete, setEscolaToDelete] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showCompletenessDashboard, setShowCompletenessDashboard] = useState(false);\n  const [showMetadadosModal, setShowMetadadosModal] = useState(false);\n  const [escolaSalvaId, setEscolaSalvaId] = useState(null);\n  const [escolaSalvaNome, setEscolaSalvaNome] = useState(null);\n  const [camposAlterados, setCamposAlterados] = useState([]);\n  const [dadosOriginais, setDadosOriginais] = useState(null);\n\n  // Detectar se  mobile\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= UI_CONFIG.MOBILE_BREAKPOINT;\n\n  // Hooks customizados\n  const { \n    // escolas, // Removido - no utilizado\n    loading: escolasLoading, \n    error: escolasError,\n    searchTerm, \n    setSearchTerm, \n    selectedType, \n    setSelectedType,\n    filteredEscolas,\n    saveEscola,\n    deleteEscola\n  } = useEscolas();\n\n  const {\n    loadExistingModalidades,\n    clearModalidades\n  } = useModalidades();\n\n  // Funo para abrir edio de escola\n  const openEditModal = (escola) => {\n    // Carregar modalidades existentes\n    loadExistingModalidades(escola['Modalidade de Ensino/turnos de funcionamento']);\n    \n    // Garantir que apenas os campos originais do banco sejam usados\n    const escolaOriginal = {\n      id: escola.id,\n      Escola: escola.Escola,\n      'Municpio': escola['Municpio'],\n      'Endereo': escola['Endereo'],\n      'Terra Indigena (TI)': escola['Terra Indigena (TI)'],\n      'Parcerias com o municpio': escola['Parcerias com o municpio'],\n      'Diretoria de Ensino': escola['Diretoria de Ensino'],\n      'Ano de criao da escola': escola['Ano de criao da escola'],\n      'Povos indigenas': escola['Povos indigenas'],\n      'Linguas faladas': escola['Linguas faladas'],\n      'Modalidade de Ensino/turnos de funcionamento': escola['Modalidade de Ensino/turnos de funcionamento'],\n      'Numero de alunos': escola['Numero de alunos'],\n      'turnos_funcionamento': escola['turnos_funcionamento'] || '',\n      'Espao escolar e estrutura': escola['Espao escolar e estrutura'],\n      'Acesso  gua': escola['Acesso  gua'],\n      'Tem coleta de lixo?': escola['Tem coleta de lixo?'],\n      'Acesso  internet': escola['Acesso  internet'],\n      'Equipamentos Tecs': escola['Equipamentos Tecs'],\n      'Modo de acesso  escola': escola['Modo de acesso  escola'],\n      'Gesto/Nome': escola['Gesto/Nome'],\n      'Outros funcionrios': escola['Outros funcionrios'],\n      'Quantidade de professores indgenas': escola['Quantidade de professores indgenas'],\n      'Quantidade de professores no indgenas': escola['Quantidade de professores no indgenas'],\n      'Professores falam a lngua indgena?': escola['Professores falam a lngua indgena?'],\n      'Formao dos professores': escola['Formao dos professores'],\n      'Formao continuada oferecida': escola['Formao continuada oferecida'],\n      'A escola possui PPP prprio?': escola['A escola possui PPP prprio?'],\n      'PPP elaborado com a comunidade?': escola['PPP elaborado com a comunidade?'],\n      'Projetos em andamento': escola['Projetos em andamento'],\n      'Parcerias com universidades?': escola['Parcerias com universidades?'],\n      'Aes com ONGs ou coletivos?': escola['Aes com ONGs ou coletivos?'],\n      'Desejos da comunidade para a escola': escola['Desejos da comunidade para a escola'],\n      'Escola utiliza redes sociais?': escola['Escola utiliza redes sociais?'],\n      'Links das redes sociais': escola['Links das redes sociais'],\n      'historia_da_escola': escola['historia_da_escola'],\n      'Latitude': escola['Latitude'],\n      'Longitude': escola['Longitude'],\n      'links': escola['links'],\n      'link_para_videos': escola['link_para_videos'],\n      'logradouro': escola['logradouro'],\n      'numero': escola['numero'],\n      'complemento': escola['complemento'],\n      'bairro': escola['bairro'],\n      'cep': escola['cep'],\n      'estado': escola['estado'],\n      'nome_professor': escola['nome_professor'],\n      'professores_indigenas': escola['professores_indigenas'],\n      'professores_nao_indigenas': escola['professores_nao_indigenas'],\n      'professores_falam_lingua_indigena': escola['professores_falam_lingua_indigena'],\n      'formacao_professores': escola['formacao_professores'],\n      'visitas_supervisores_formacao': escola['visitas_supervisores_formacao'],\n      'outros_funcionarios': escola['outros_funcionarios'],\n      'gestao': escola['gestao'],\n      'merenda_diferenciada': escola['merenda_diferenciada'],\n      cozinha: escola.cozinha,\n      merenda_escolar: escola.merenda_escolar,\n      diferenciada: escola.diferenciada,\n      activeTab: FORM_CONFIG.DEFAULT_ACTIVE_TAB\n    };\n    \n    // Salvar dados originais para comparao posterior\n    setDadosOriginais({ ...escolaOriginal });\n    setEditingLocation(escolaOriginal);\n  };\n\n  // Funo para abrir tabela editvel\n  const abrirTabelaEditavel = () => {\n    setEditingLocation({\n      id: 'tabela-editavel',\n      Escola: 'Tabela Editvel',\n      activeTab: 'tabela-editavel'\n    });\n  };\n\n  // Funo para criar nova escola vazia\n  const criarNovaEscolaVazia = () => {\n    // Limpar modalidades\n    clearModalidades();\n    \n    return {\n      Escola: '',\n      'Municpio': '',\n      'Endereo': '',\n      'Terra Indigena (TI)': '',\n      'Parcerias com o municpio': '',\n      'Diretoria de Ensino': '',\n      'Ano de criao da escola': null,\n      'Povos indigenas': '',\n      'Linguas faladas': '',\n      'Modalidade de Ensino/turnos de funcionamento': '',\n      'Numero de alunos': null,\n      'turnos_funcionamento': '',\n      'Espao escolar e estrutura': '',\n      'Acesso  gua': '',\n      'Tem coleta de lixo?': '',\n      'Acesso  internet': '',\n      'Equipamentos Tecs': '',\n      'Modo de acesso  escola': '',\n      'Gesto/Nome': '',\n      'Outros funcionrios': '',\n      'Quantidade de professores indgenas': null,\n      'Quantidade de professores no indgenas': null,\n      'Professores falam a lngua indgena?': '',\n      'Formao dos professores': '',\n      'Formao continuada oferecida': '',\n      'A escola possui PPP prprio?': '',\n      'PPP elaborado com a comunidade?': '',\n      'Projetos em andamento': '',\n      'Parcerias com universidades?': '',\n      'Aes com ONGs ou coletivos?': '',\n      'Desejos da comunidade para a escola': '',\n      'Escola utiliza redes sociais?': '',\n      'Links das redes sociais': '',\n      'historia_da_escola': '',\n      'Latitude': null,\n      'Longitude': null,\n      'links': '',\n      'link_para_videos': '',\n      'logradouro': '',\n      'numero': '',\n      'complemento': '',\n      'bairro': '',\n      'cep': '',\n      'estado': 'SP',\n      'nome_professor': '',\n      'professores_indigenas': '',\n      'professores_nao_indigenas': '',\n      'professores_falam_lingua_indigena': '',\n      'formacao_professores': '',\n      'visitas_supervisores_formacao': '',\n      'outros_funcionarios': '',\n      'gestao': '',\n      'merenda_diferenciada': '',\n      cozinha: '',\n      merenda_escolar: '',\n      diferenciada: '',\n      activeTab: FORM_CONFIG.DEFAULT_ACTIVE_TAB\n    };\n  };\n\n  // Funo para criar nova escola\n  const handleNovaEscola = () => {\n    setEditingLocation(criarNovaEscolaVazia());\n  };\n\n  // Funo para abrir modal de remoo - REMOVIDO: no utilizado\n  // const handleRemoverEscola = (escola) => {\n  //   setEscolaToDelete(escola);\n  //   setShowDeleteModal(true);\n  // };\n\n  // Funo para verificar se uma aba tem informaes faltando\n  const hasMissingInfo = (tabId, escola) => {\n    if (!escola) return false;\n\n    const fieldMappings = {\n      'dados-basicos': ['Escola', 'Municpio', 'Endereo', 'Terra Indigena (TI)', 'Diretoria de Ensino'],\n      'povos-linguas': ['Povos indigenas', 'Linguas faladas'],\n      'modalidades': ['Modalidade de Ensino/turnos de funcionamento', 'Numero de alunos'],\n      'infraestrutura': ['Espao escolar e estrutura', 'Acesso  gua', 'Acesso  internet'],\n      'gestao-professores': ['Gesto/Nome', 'Quantidade de professores indgenas', 'Quantidade de professores no indgenas'],\n      'material-pedagogico': ['A escola possui PPP prprio?', 'Material pedaggico indgena'],\n      'projetos-parcerias': ['Projetos em andamento', 'Parcerias com universidades?'],\n      'redes-sociais': ['Escola utiliza redes sociais?', 'Links das redes sociais'],\n      'video': ['link_para_videos'],\n      'historias': ['historia_da_escola'],\n      'historia-professores': ['nome_professor'],\n      'coordenadas': ['Latitude', 'Longitude'],\n      'imagens-escola': ['imagem_header'],\n      'imagens-professores': [],\n      'documentos': []\n    };\n\n    const fields = fieldMappings[tabId] || [];\n    \n    return fields.some(field => {\n      const value = escola[field];\n      return value === null || value === undefined || value === '' || value === 'null';\n    });\n  };\n\n  // Funo para fazer download de todas as imagens\n  const handleDownloadImages = async () => {\n    try {\n      // Criar um arquivo ZIP com todas as imagens\n      const JSZip = (await import('jszip')).default;\n      const zip = new JSZip();\n      \n      // Buscar todas as imagens do bucket 'imagens'\n      const { data: imagens, error } = await supabase\n        .storage\n        .from('imagens')\n        .list('', {\n          limit: 1000,\n          offset: 0\n        });\n\n      if (error) {\n        console.error('Erro ao buscar imagens:', error);\n        alert('Erro ao buscar imagens: ' + error.message);\n        return;\n      }\n\n      if (!imagens || imagens.length === 0) {\n        alert('Nenhuma imagem encontrada no bucket.');\n        return;\n      }\n\n      // Mostrar loading\n      const loadingMessage = document.createElement('div');\n      loadingMessage.innerHTML = `\n        <div style=\"position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                    background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 10px; \n                    z-index: 9999; text-align: center;\">\n          <div style=\"margin-bottom: 10px;\">Preparando download...</div>\n          <div style=\"font-size: 12px;\">Encontradas ${imagens.length} imagens</div>\n        </div>\n      `;\n      document.body.appendChild(loadingMessage);\n\n      // Baixar cada imagem e adicionar ao ZIP\n      for (let i = 0; i < imagens.length; i++) {\n        const imagem = imagens[i];\n        \n        try {\n          const { data: imageData, error: downloadError } = await supabase\n            .storage\n            .from('imagens')\n            .download(imagem.name);\n\n          if (downloadError) {\n            console.error(`Erro ao baixar ${imagem.name}:`, downloadError);\n            continue;\n          }\n\n          // Adicionar ao ZIP\n          zip.file(imagem.name, imageData);\n          \n          // Atualizar progresso\n          loadingMessage.innerHTML = `\n            <div style=\"position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                        background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 10px; \n                        z-index: 9999; text-align: center;\">\n              <div style=\"margin-bottom: 10px;\">Preparando download...</div>\n              <div style=\"font-size: 12px;\">${i + 1} de ${imagens.length} imagens processadas</div>\n            </div>\n          `;\n        } catch (err) {\n          console.error(`Erro ao processar ${imagem.name}:`, err);\n        }\n      }\n\n      // Gerar e baixar o ZIP\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      \n      // Criar link de download\n      const url = URL.createObjectURL(zipBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `backup-imagens-escolas-${new Date().toISOString().split('T')[0]}.zip`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n\n      // Remover loading\n      document.body.removeChild(loadingMessage);\n      \n      alert(`Download concludo! ${imagens.length} imagens foram baixadas em um arquivo ZIP.`);\n      \n    } catch (error) {\n      console.error('Erro ao fazer download das imagens:', error);\n      alert('Erro ao fazer download das imagens: ' + error.message);\n    }\n  };\n\n  // Funo para confirmar remoo\n  const handleConfirmarRemocao = async () => {\n    if (!escolaToDelete) return;\n\n    setIsDeleting(true);\n    try {\n      const result = await deleteEscola(escolaToDelete.id);\n      \n      if (result.success) {\n        setShowDeleteModal(false);\n        setEscolaToDelete(null);\n        // Limpar edio se a escola removida estava sendo editada\n        if (editingLocation?.id === escolaToDelete.id) {\n          setEditingLocation(null);\n        }\n      } else {\n        console.error('Erro ao remover escola:', result.error);\n      }\n    } catch (error) {\n      console.error('Erro ao remover escola:', error);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  // Funo para salvar escola\n  const handleSaveEscola = async () => {\n    if (!editingLocation) return;\n\n    setIsSaving(true);\n    setSaveError(null);\n    setSaveSuccess(false);\n\n    try {\n      // Identificar campos alterados ANTES de salvar\n      let camposModificados = [];\n      if (editingLocation.id && dadosOriginais) {\n        //  uma atualizao - comparar dados\n        camposModificados = identificarCamposAlterados(dadosOriginais, editingLocation);\n      } else {\n        //  uma criao - todos os campos preenchidos so \"alterados\"\n        camposModificados = Object.keys(editingLocation)\n          .filter(key => {\n            const camposIgnorar = ['id', 'created_at', 'updated_at', 'activeTab', 'imagem_header'];\n            return !camposIgnorar.includes(key) && editingLocation[key];\n          })\n          .map(campo => ({\n            campo,\n            valorAntigo: '',\n            valorNovo: editingLocation[campo],\n            label: campo\n          }));\n      }\n\n      // Salvar escola SEM metadados primeiro (metadados sero salvos depois no modal)\n      const result = await saveEscola(editingLocation, null);\n      \n      if (result.success) {\n        setSaveSuccess(true);\n        // Atualizar o editingLocation com os dados salvos\n        setEditingLocation(result.data);\n        \n        // Preparar dados para o modal de metadados\n        setEscolaSalvaId(result.data.id);\n        setEscolaSalvaNome(result.data.Escola || 'Escola');\n        setCamposAlterados(camposModificados);\n        \n        // Mostrar modal de metadados apenas se houver campos alterados\n        if (camposModificados.length > 0) {\n          setShowMetadadosModal(true);\n        }\n        \n        // Limpar mensagem de sucesso aps 3 segundos\n        setTimeout(() => {\n          setSaveSuccess(false);\n        }, 3000);\n      } else {\n        setSaveError(result.error);\n      }\n    } catch (error) {\n      setSaveError(error.message);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Callback quando metadados so salvos\n  const handleMetadadosSaved = (metadadosData) => {\n    console.log('Metadados salvos com sucesso:', metadadosData);\n    // Opcional: mostrar mensagem de sucesso adicional\n  };\n\n  // Renderizar aba ativa\n  const renderActiveTab = () => {\n    const activeTab = editingLocation?.activeTab || FORM_CONFIG.DEFAULT_ACTIVE_TAB;\n\n    switch (activeTab) {\n      case 'dados-basicos':\n        return (\n          <DadosBasicosTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'povos-linguas':\n        return (\n          <PovosLinguasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'modalidades':\n        return (\n          <ModalidadesTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'infraestrutura':\n        return (\n          <InfraestruturaTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'gestao-professores':\n        return (\n          <GestaoProfessoresTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'material-pedagogico':\n        return (\n          <MaterialPedagogicoTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'projetos-parcerias':\n        return (\n          <ProjetosParceriasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'redes-sociais':\n        return (\n          <RedesSociaisTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'video':\n        return (\n          <VideoTab \n            editingLocation={editingLocation}\n          />\n        );\n      \n      case 'historias':\n        return (\n          <HistoriasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'historia-professores':\n        return (\n          <HistoriaProfessoresTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'coordenadas':\n        return (\n          <CoordenadasTab \n            editingLocation={editingLocation}\n            setEditingLocation={setEditingLocation}\n          />\n        );\n      \n      case 'historias-professor':\n        return <div className=\"text-center py-16\">\n          <div className=\"max-w-md mx-auto\">\n            <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n              Tabela de Histrias dos Professores\n            </h3>\n            <p className=\"text-gray-400 mb-8\">\n              Funcionalidade em desenvolvimento...\n            </p>\n          </div>\n        </div>;\n      \n      case 'documentos-escola':\n        return <div className=\"text-center py-16\">\n          <div className=\"max-w-md mx-auto\">\n            <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n              Tabela de Documentos das Escolas\n            </h3>\n            <p className=\"text-gray-400 mb-8\">\n              Funcionalidade em desenvolvimento...\n            </p>\n          </div>\n        </div>;\n      \n      case 'imagens-escola':\n        if (!ImagensEscolaTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <ImagensEscolaTab editingLocation={editingLocation} />;\n      \n      case 'imagens-professores':\n        if (!ImagensProfessoresTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <ImagensProfessoresTab editingLocation={editingLocation} />;\n      \n      case 'documentos':\n        if (!DocumentosTab) {\n          return <div className=\"text-center py-8 text-gray-500\">Componente em carregamento...</div>;\n        }\n        return <DocumentosTab editingLocation={editingLocation} />;\n      \n      // TODO: Implementar outras abas\n      default:\n        return (\n          <div className=\"text-gray-400 text-center py-8\">\n            Aba \"{activeTab}\" em desenvolvimento...\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950\">\n      {/* Sidebar */}\n      <AdminSidebar\n        isMobile={isMobile}\n        sidebarOpen={sidebarOpen}\n        setSidebarOpen={setSidebarOpen}\n        editingLocation={editingLocation}\n        onEscolaSelect={openEditModal}\n      />\n\n      {/* Contedo principal */}\n      <main className=\"flex-1 p-4 lg:p-8 overflow-y-auto h-screen\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl lg:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-300 mb-2\">\n            Painel de Administrao\n          </h1>\n        </div>\n        \n        {/* Toolbar */}\n        <AdminToolbar\n          searchTerm={searchTerm}\n          setSearchTerm={setSearchTerm}\n          selectedType={selectedType}\n          setSelectedType={setSelectedType}\n          onNovaEscola={handleNovaEscola}\n        />\n\n        {/* Loading state */}\n        {escolasLoading && (\n          <div className=\"flex items-center justify-center py-12\">\n            <div className=\"text-center\">\n              <div className=\"text-gray-400 text-lg\">Carregando escolas...</div>\n            </div>\n          </div>\n        )}\n\n        {/* Error state */}\n        {escolasError && (\n          <div className=\"bg-red-900/50 border border-red-700/50 text-red-200 px-6 py-4 rounded-xl mb-6 backdrop-blur-sm\">\n            <div className=\"flex items-center gap-3\">\n              <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-semibold\">Erro ao carregar escolas</h3>\n                <p className=\"text-red-300\">{escolasError}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Tabela Editvel em Tela Cheia */}\n        {editingLocation && editingLocation.activeTab === 'tabela-editavel' && (\n          <div className=\"fixed inset-0 bg-gray-900 z-40 overflow-hidden\" style={{ top: '72px' }}>\n            <TabelaEditavelTab setEditingLocation={setEditingLocation} />\n          </div>\n        )}\n\n        {/* Painel de Edio */}\n        {editingLocation && typeof editingLocation === 'object' && (editingLocation.Escola !== undefined) && editingLocation.activeTab !== 'tabela-editavel' && (\n          <div className=\"bg-gray-900/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 p-6 flex flex-col\">\n            {/* Header do painel */}\n            <div className=\"flex justify-between items-center mb-6 flex-shrink-0\">\n              <div>\n                <h2 className=\"text-xl lg:text-2xl font-semibold text-gray-100 mb-1\">\n                {editingLocation.id ? 'Editar Escola' : 'Nova Escola'}\n              </h2>\n                {editingLocation.Escola && (\n                  <p className=\"text-gray-400 text-sm\">{editingLocation.Escola}</p>\n                )}\n              </div>\n              <div className=\"flex items-center gap-3\">\n                {/* Boto Salvar */}\n                <button\n                  onClick={handleSaveEscola}\n                  disabled={isSaving}\n                  className=\"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl\"\n                >\n                  {isSaving ? (\n                    <div className=\"flex items-center gap-2\">\n                      Salvando...\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center gap-2\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Salvar\n                    </div>\n                  )}\n                </button>\n                \n                {/* Boto Fechar */}\n                <button\n                  onClick={() => setEditingLocation(null)}\n                  className=\"px-4 py-3 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition-colors\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Mensagens de feedback */}\n            {saveSuccess && (\n              <div className=\"mb-6 p-4 bg-green-900/50 border border-green-700/50 text-green-200 rounded-xl backdrop-blur-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-6 h-6 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"font-semibold\">Escola salva com sucesso!</span>\n                </div>\n              </div>\n            )}\n            \n            {saveError && (\n              <div className=\"mb-6 p-4 bg-red-900/50 border border-red-700/50 text-red-200 rounded-xl backdrop-blur-sm\">\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <div>\n                    <span className=\"font-semibold\">Erro ao salvar:</span>\n                    <p className=\"text-red-300\">{saveError}</p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Navegao por abas */}\n            <div className=\"border-b border-gray-800 mb-6 flex-shrink-0 bg-gray-800/50 rounded-t-xl relative\">\n              <nav className=\"-mb-px flex space-x-1 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 tabs-container\">\n                {ADMIN_TABS.map((tab) => {\n                  const isActive = (editingLocation.activeTab || FORM_CONFIG.DEFAULT_ACTIVE_TAB) === tab.id;\n                  const hasMissing = hasMissingInfo(tab.id, editingLocation);\n                  \n                  return (\n                    <button\n                      key={tab.id}\n                      type=\"button\"\n                      onClick={() => setEditingLocation({ ...editingLocation, activeTab: tab.id })}\n                      className={`whitespace-nowrap py-3 px-3 sm:px-4 border-b-2 font-medium text-xs sm:text-sm transition-all duration-200 rounded-t-lg flex-shrink-0 min-w-fit relative ${\n                        isActive\n                          ? 'border-green-400 text-green-300 bg-gray-900 shadow-lg'\n                          : hasMissing\n                          ? 'border-orange-400 text-orange-300 bg-orange-900/20 hover:text-orange-200 hover:bg-orange-800/30'\n                          : 'border-transparent text-gray-400 hover:text-green-200 hover:bg-gray-700/50'\n                      }`}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        {tab.label}\n                        {hasMissing && !isActive && (\n                          <div className=\"w-2 h-2 bg-orange-400 rounded-full animate-pulse\"></div>\n                        )}\n                      </div>\n                    </button>\n                  );\n                })}\n              </nav>\n            </div>\n\n            {/* Contedo da aba ativa */}\n            <div className=\"scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-800\">\n              {renderActiveTab()}\n            </div>\n          </div>\n        )}\n\n        {/* Modal de Metadados - Aparece aps salvar com sucesso */}\n        <MetadadosModal\n          isOpen={showMetadadosModal}\n          onClose={() => {\n            setShowMetadadosModal(false);\n            setEscolaSalvaId(null);\n            setEscolaSalvaNome(null);\n            setCamposAlterados([]);\n            setDadosOriginais(null);\n          }}\n          onSave={handleMetadadosSaved}\n          escolaId={escolaSalvaId}\n          escolaNome={escolaSalvaNome}\n          camposAlterados={camposAlterados}\n        />\n\n        {/* Dashboard de Completude quando nenhuma escola est selecionada */}\n        {!editingLocation && !escolasLoading && (\n          <div className=\"space-y-8\">\n            {/* Dashboard de Completude - s aparece quando solicitado */}\n            {showCompletenessDashboard && (\n              <CompletenessDashboard />\n            )}\n            \n            {/* Aes do Painel */}\n            <div className=\"bg-gray-900/80 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 p-6\">\n              <div className=\"text-center mb-8\">\n                <div className=\"w-24 h-24 bg-gray-800/50 rounded-full flex items-center justify-center mx-auto mb-6\">\n                  <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\" />\n                  </svg>\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-200 mb-2\">\n                  Aes do Painel de Administrao\n                </h3>\n                <p className=\"text-gray-400 mb-8\">\n                  Escolha uma ao para gerenciar as escolas indgenas. Voc pode criar novas escolas, editar dados em tabelas, fazer backup ou remover escolas.\n                </p>\n              </div>\n              {/* Grid de Aes */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                \n                {/* Aes Principais */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                    </svg>\n                    Aes Principais\n                  </h4>\n                  \n                  <button\n                    onClick={handleNovaEscola}\n                    className=\"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 shadow-lg hover:shadow-xl text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                      </svg>\n                      Criar Nova Escola\n                    </div>\n                  </button>\n\n                  <button\n                    onClick={abrirTabelaEditavel}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                      Editar em Tabela\n                    </div>\n                  </button>\n                </div>\n\n                {/* Anlise e Relatrios */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                    </svg>\n                    Anlise e Relatrios\n                  </h4>\n                  \n                  <button\n                    onClick={() => setShowCompletenessDashboard(!showCompletenessDashboard)}\n                    className={`w-full px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border text-sm ${\n                      showCompletenessDashboard \n                        ? 'bg-green-800 text-green-100 border-green-600 hover:bg-green-700' \n                        : 'bg-gray-800 text-gray-100 border-gray-600 hover:bg-gray-700'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                      </svg>\n                      {showCompletenessDashboard ? 'Ocultar Dashboard' : 'Ver Dashboard'}\n                    </div>\n                  </button>\n                </div>\n\n                {/* Backup de Mdia */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                    </svg>\n                    Backup de Mdia\n                  </h4>\n                  \n                  <button\n                    onClick={handleDownloadImages}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                      </svg>\n                      Download Imagens\n                    </div>\n                  </button>\n                </div>\n\n                {/* Administrao do Sistema */}\n                <div className=\"space-y-3\">\n                  <h4 className=\"text-sm font-semibold text-gray-300 mb-3 flex items-center gap-2\">\n                    <svg className=\"w-4 h-4 text-orange-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    </svg>\n                    Administrao\n                  </h4>\n                  \n                  <button\n                    onClick={() => setShowBackupModal(true)}\n                    className=\"w-full px-4 py-3 bg-gray-800 text-gray-100 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-gray-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                      </svg>\n                      Backup dos Dados\n                    </div>\n                  </button>\n\n                  <button\n                    onClick={() => setShowDeleteModal(true)}\n                    className=\"w-full px-4 py-3 bg-red-800 text-red-100 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 border border-red-600 text-sm\"\n                  >\n                    <div className=\"flex items-center gap-2 justify-center\">\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                      Remover Escola\n                    </div>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Modal de Backup */}\n        {showBackupModal && (\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n              {/* Header da Modal */}\n              <div className=\"flex justify-between items-center p-6 border-b border-gray-800/50 flex-shrink-0\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-blue-500 p-3 rounded-lg\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-semibold text-gray-100\">Backup dos Dados do Site</h2>\n                    <p className=\"text-sm text-gray-400\">Gerencie backups das tabelas e arquivos</p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setShowBackupModal(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Contedo da Modal */}\n              <div className=\"flex-1 overflow-y-auto p-6\">\n                <TabelasIntegraisTab />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Modal de Remoo de Escola */}\n        {showDeleteModal && (\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900/95 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-800/50 w-full max-w-md\">\n              {/* Header da Modal */}\n              <div className=\"flex justify-between items-center p-6 border-b border-gray-800/50\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"bg-red-500 p-3 rounded-lg\">\n                    <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-semibold text-gray-100\">Remover Escola</h2>\n                    <p className=\"text-sm text-gray-400\">Selecione uma escola para remover</p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setShowDeleteModal(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Contedo da Modal */}\n              <div className=\"p-6\">\n                {!escolaToDelete ? (\n                  <div className=\"space-y-4\">\n                    <p className=\"text-gray-300 mb-4\">\n                      Selecione uma escola da lista para remover:\n                    </p>\n                    <div className=\"max-h-64 overflow-y-auto space-y-2\">\n                      {filteredEscolas.map(escola => (\n                        <button\n                          key={escola.id}\n                          onClick={() => setEscolaToDelete(escola)}\n                          className=\"w-full text-left p-4 rounded-xl hover:bg-gray-800/50 transition-all duration-200 border border-transparent hover:border-gray-700/50 text-gray-200 hover:text-white\"\n                        >\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-medium truncate text-gray-200\">\n                                {escola.Escola}\n                              </h3>\n                              {escola['Municpio'] && (\n                                <p className=\"text-sm text-gray-400 truncate mt-1\">\n                                  {escola['Municpio']}\n                                </p>\n                              )}\n                            </div>\n                            <div className=\"ml-2 flex-shrink-0\">\n                              <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                              </svg>\n                            </div>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-red-900/20 border border-red-700/50 rounded-xl p-4\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <svg className=\"w-6 h-6 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                        </svg>\n                        <h3 className=\"font-semibold text-red-200\">Confirmar Remoo</h3>\n                      </div>\n                      <p className=\"text-red-300 text-sm\">\n                        Voc est prestes a remover a escola <strong>\"{escolaToDelete.Escola}\"</strong> de <strong>\"{escolaToDelete['Municpio']}\"</strong>.\n                      </p>\n                      <p className=\"text-red-400 text-sm mt-2\">\n                         Esta ao  irreversvel e remover todos os dados da escola do sistema.\n                      </p>\n                    </div>\n\n                    <div className=\"flex gap-3\">\n                      <button\n                        onClick={() => setEscolaToDelete(null)}\n                        className=\"flex-1 px-4 py-3 bg-gray-700 text-gray-200 rounded-xl hover:bg-gray-600 transition-colors\"\n                      >\n                        Cancelar\n                      </button>\n            <button\n                        onClick={handleConfirmarRemocao}\n                        disabled={isDeleting}\n                        className=\"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\n                      >\n                        {isDeleting ? (\n                          <div className=\"flex items-center gap-2 justify-center\">\n                            Removendo...\n                          </div>\n                        ) : (\n                          <div className=\"flex items-center gap-2 justify-center\">\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                            </svg>\n                            Confirmar Remoo\n                          </div>\n                        )}\n            </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nconst AdminPanel = () => {\n  return (\n    <ProtectedRoute>\n      <AdminPanelContent />\n    </ProtectedRoute>\n  );\n};\n\nexport default AdminPanel; ","import { supabase } from '../supabaseClient';\nimport { \n  STORAGE_BUCKETS, \n  FILE_PATHS, \n  validateFile, \n  generateUniqueFileName,\n  getFileType \n} from '../config/storage';\n\n/**\n * Uploads a file to the specified bucket\n * @param {File} file - The file to upload\n * @param {string} bucket - The bucket to upload to (defaults to 'pdfs')\n * @returns {Promise<string>} The public URL of the uploaded file\n */\nexport const uploadFile = async (file, bucket = STORAGE_BUCKETS.PDFS) => {\n  try {\n    const fileType = getFileType(file);\n    if (!fileType) {\n      throw new Error('Tipo de arquivo no suportado');\n    }\n\n    const validation = validateFile(file, fileType);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    const fileName = generateUniqueFileName(file, `${fileType.toLowerCase()}_`);\n    const filePath = `${FILE_PATHS[fileType]}/${fileName}`;\n\n    const { error: uploadError } = await supabase.storage\n      .from(bucket)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw uploadError;\n    }\n\n    const { data: { publicUrl } } = supabase.storage\n      .from(bucket)\n      .getPublicUrl(filePath);\n\n    return publicUrl;\n  } catch (error) {\n    console.error('Erro ao fazer upload:', error);\n    throw error;\n  }\n};\n\n/**\n * Uploads a PDF file to the pdfs bucket\n * @param {File} file - The PDF file to upload\n * @returns {Promise<string>} The public URL of the uploaded PDF\n */\nexport const uploadPDF = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.PDFS);\n};\n\n/**\n * Uploads an image file to the media bucket\n * @param {File} file - The image file to upload\n * @returns {Promise<string>} The public URL of the uploaded image\n */\nexport const uploadImage = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.MEDIA);\n};\n\n/**\n * Uploads an audio file to the media bucket\n * @param {File} file - The audio file to upload\n * @returns {Promise<string>} The public URL of the uploaded audio\n */\nexport const uploadAudio = async (file) => {\n  return uploadFile(file, STORAGE_BUCKETS.MEDIA);\n};\n\n/**\n * Deletes a file from the specified bucket\n * @param {string} filePath - The path of the file to delete\n * @param {string} bucket - The bucket containing the file\n * @returns {Promise<void>}\n */\nexport const deleteFile = async (filePath, bucket = STORAGE_BUCKETS.PDFS) => {\n  try {\n    const { error } = await supabase.storage\n      .from(bucket)\n      .remove([filePath]);\n\n    if (error) {\n      throw error;\n    }\n  } catch (error) {\n    console.error('Erro ao deletar arquivo:', error);\n    throw error;\n  }\n}; ","// Storage configuration constants\n\nexport const STORAGE_BUCKETS = {\n  PDFS: 'pdfs',\n  MEDIA: 'media', // Keeping for backward compatibility\n};\n\nexport const FILE_RESTRICTIONS = {\n  PDF: {\n    MAX_SIZE: 10 * 1024 * 1024, // 10MB\n    ALLOWED_TYPES: ['application/pdf'],\n    MAX_FILES: Infinity, // Sem limite\n  },\n  IMAGE: {\n    MAX_SIZE: 5 * 1024 * 1024, // 5MB\n    ALLOWED_TYPES: ['image/jpeg', 'image/png', 'image/jpg'],\n    MAX_FILES: 10,\n  },\n  AUDIO: {\n    MAX_SIZE: 20 * 1024 * 1024, // 20MB\n    ALLOWED_TYPES: ['audio/wav', 'audio/mpeg', 'audio/mp3'],\n    MAX_FILES: 1,\n  },\n};\n\nexport const FILE_PATHS = {\n  PDF: 'documents',\n  IMAGE: 'images',\n  AUDIO: 'audio',\n};\n\nexport const getFileType = (file) => {\n  if (FILE_RESTRICTIONS.PDF.ALLOWED_TYPES.includes(file.type)) return 'PDF';\n  if (FILE_RESTRICTIONS.IMAGE.ALLOWED_TYPES.includes(file.type)) return 'IMAGE';\n  if (FILE_RESTRICTIONS.AUDIO.ALLOWED_TYPES.includes(file.type)) return 'AUDIO';\n  return null;\n};\n\nexport const validateFile = (file, type) => {\n  const restrictions = FILE_RESTRICTIONS[type];\n  if (!restrictions) return { isValid: false, error: 'Tipo de arquivo no suportado' };\n\n  if (!restrictions.ALLOWED_TYPES.includes(file.type)) {\n    return { isValid: false, error: `Tipo de arquivo no permitido. Use apenas ${type === 'PDF' ? 'PDF' : type === 'IMAGE' ? 'JPG/PNG' : 'WAV/MP3'}` };\n  }\n\n  if (file.size > restrictions.MAX_SIZE) {\n    return { isValid: false, error: `Arquivo muito grande. Tamanho mximo: ${restrictions.MAX_SIZE / (1024 * 1024)}MB` };\n  }\n\n  return { isValid: true };\n};\n\nexport const generateUniqueFileName = (file, prefix = '') => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop();\n  return `${prefix}${timestamp}_${random}.${extension}`;\n}; ","import { supabase } from '../supabaseClient';\n\n// Configuraes para imagens das escolas\nconst ESCOLA_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-das-escolas',\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: Infinity, // Sem limite\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n// Configuraes para imagens dos professores\nconst PROFESSOR_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-professores', // Usando bucket existente\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: Infinity, // Sem limite\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n/**\n * Valida um arquivo de imagem\n * @param {File} file - Arquivo a ser validado\n * @param {Object} config - Configurao de validao\n * @returns {Object} Resultado da validao\n */\nconst validateImageFile = (file, config) => {\n  // Verificar tipo MIME\n  if (!config.ALLOWED_TYPES.includes(file.type)) {\n    return {\n      isValid: false,\n      error: `Tipo de arquivo no suportado. Use apenas: ${config.ALLOWED_TYPES.map(t => t.split('/')[1].toUpperCase()).join(', ')}`\n    };\n  }\n\n  // Verificar tamanho\n  if (file.size > config.MAX_FILE_SIZE) {\n    return {\n      isValid: false,\n      error: `Arquivo muito grande. Tamanho mximo: ${config.MAX_FILE_SIZE / (1024 * 1024)}MB`\n    };\n  }\n\n  // Verificar extenso\n  const extension = file.name.split('.').pop().toLowerCase();\n  const allowedExtensions = config.ALLOWED_TYPES.map(t => t.split('/')[1]);\n  if (!allowedExtensions.includes(extension)) {\n    return {\n      isValid: false,\n      error: `Extenso no permitida. Use apenas: ${allowedExtensions.join(', ')}`\n    };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Gera nome nico para o arquivo (sem gnero, para imagens de escola)\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @returns {string} Nome nico do arquivo\n */\nconst generateUniqueFileName = (file, escolaId) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Gera nome nico para o arquivo, incluindo o gnero\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {string} Nome nico do arquivo\n */\nconst generateUniqueFileNameWithGenero = (file, escolaId, genero) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${genero}_${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Upload de imagem da escola (verso simplificada sem tabela de metadados)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrio da imagem\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadEscolaImage = async (file, escolaId, descricao = '') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, ESCOLA_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome nico\n    const fileName = generateUniqueFileName(file, escolaId);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pblica\n    const { data: { publicUrl } } = supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    return {\n      id: Date.now(), // ID temporrio\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem da escola ${escolaId}`,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload de imagem do professor (com gnero no nome do arquivo)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrio da imagem\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadProfessorImage = async (file, escolaId, descricao = '', genero = 'professor') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, PROFESSOR_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome nico com gnero\n    const fileName = generateUniqueFileNameWithGenero(file, escolaId, genero);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      console.error('Erro detalhado do upload:', uploadError);\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pblica\n    const { data: { publicUrl } } = supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    // Retornar objeto simulado (sem metadados na tabela)\n    return {\n      id: Date.now(), // ID temporrio\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem do ${genero} da escola ${escolaId}`,\n      genero,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar imagens da escola (verso simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Array>} Lista de imagens\n */\nexport const getEscolaImages = async (escolaId, bucketName = ESCOLA_IMAGE_CONFIG.BUCKET_NAME) => {\n  try {\n    // Listar arquivos no bucket para a escola especfica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    if (!files || files.length === 0) {\n      return [];\n    }\n\n    // Criar objetos de imagem com URLs pblicas\n    const imagens = files.map((file, index) => {\n      const filePath = `${escolaId}/${file.name}`;\n      const { data: { publicUrl } } = supabase.storage\n        .from(bucketName)\n        .getPublicUrl(filePath);\n\n      return {\n        id: index + 1, // ID temporrio\n        url: filePath,\n        publicUrl,\n        descricao: `Imagem ${index + 1}`,\n        created_at: file.created_at || new Date().toISOString()\n      };\n    });\n\n    return imagens;\n\n  } catch (error) {\n    console.error('Erro ao buscar imagens da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar imagem (verso simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} filePath - Caminho do arquivo\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<void>}\n */\nexport const deleteImage = async (imageId, filePath, bucketName) => {\n  try {\n    // Deletar arquivo do storage\n    const { error: storageError } = await supabase.storage\n      .from(bucketName)\n      .remove([filePath]);\n\n    if (storageError) {\n      throw new Error(`Erro ao deletar arquivo: ${storageError.message}`);\n    }\n\n    // Verificar se o arquivo realmente saiu da lista\n    const directory = filePath.includes('/') ? filePath.split('/')[0] + '/' : '';\n    const { data: files, error: listError } = await supabase.storage\n      .from(bucketName)\n      .list(directory);\n    if (listError) {\n      // No bloquear, mas logar\n      console.warn('Aviso: falha ao listar aps deleo:', listError);\n    } else if (files && files.some(f => `${directory}${f.name}` === filePath)) {\n      throw new Error('Arquivo ainda presente no bucket aps tentativa de excluso. Verifique permisses do bucket.');\n    }\n\n    return true;\n  } catch (error) {\n    console.error('Erro ao deletar imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar descrio da imagem (verso simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} descricao - Nova descrio\n * @returns {Promise<Object>} Imagem atualizada\n */\nexport const updateImageDescription = async (imageId, descricao) => {\n  try {\n    // Como no temos tabela de metadados, retornamos um objeto simulado\n    return {\n      id: imageId,\n      descricao: descricao.trim()\n    };\n\n  } catch (error) {\n    console.error('Erro ao atualizar descrio da imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Substituir imagem existente (trocar imagem)\n * @param {File} newFile - Novo arquivo de imagem\n * @param {string} oldFilePath - Caminho do arquivo antigo\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @param {string} descricao - Descrio da nova imagem\n * @returns {Promise<Object>} Dados da nova imagem\n */\nexport const replaceImage = async (newFile, oldFilePath, escolaId, bucketName, descricao = '') => {\n  try {\n    const config = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME \n      ? PROFESSOR_IMAGE_CONFIG \n      : ESCOLA_IMAGE_CONFIG;\n\n    // Validar novo arquivo\n    const validation = validateImageFile(newFile, config);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome nico para o novo arquivo\n    const fileName = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME\n      ? generateUniqueFileNameWithGenero(newFile, escolaId, 'professor') // Assumindo professor por padro\n      : generateUniqueFileName(newFile, escolaId);\n    \n    const newFilePath = `${escolaId}/${fileName}`;\n\n    // 1. Upload da nova imagem\n    const { error: uploadError } = await supabase.storage\n      .from(bucketName)\n      .upload(newFilePath, newFile, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload da nova imagem: ${uploadError.message}`);\n    }\n\n    // 2. Obter URL pblica da nova imagem\n    const { data: { publicUrl } } = supabase.storage\n      .from(bucketName)\n      .getPublicUrl(newFilePath);\n\n    // 3. Deletar a imagem antiga\n    const { error: deleteError } = await supabase.storage\n      .from(bucketName)\n      .remove([oldFilePath]);\n\n    if (deleteError) {\n      console.warn('Erro ao deletar imagem antiga:', deleteError);\n      // No falha a operao se no conseguir deletar a imagem antiga\n    }\n\n    return {\n      id: Date.now(), // ID temporrio\n      url: newFilePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem da escola ${escolaId}`,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro ao substituir imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Verificar limite de imagens (verso simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Object>} Informaes sobre o limite\n */\nexport const checkImageLimit = async (escolaId, bucketName) => {\n  try {\n    const config = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME \n      ? PROFESSOR_IMAGE_CONFIG \n      : ESCOLA_IMAGE_CONFIG;\n\n    // Listar arquivos no bucket para a escola especfica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    const currentCount = files ? files.length : 0;\n\n    return {\n      current: currentCount,\n      limit: config.MAX_IMAGES_PER_SCHOOL,\n      canUpload: currentCount < config.MAX_IMAGES_PER_SCHOOL\n    };\n\n  } catch (error) {\n    console.error('Erro ao verificar limite de imagens:', error);\n    throw error;\n  }\n}; ","import { supabase } from '../supabaseClient';\n\n/**\n * Servio para gerenciar imagens de header das escolas\n */\nexport class HeaderImageService {\n  \n  /**\n   * Buscar imagem atual do header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<string|null>} URL da imagem do header ou null\n   */\n  static async getImagemHeader(escolaId) {\n    try {\n      const { data, error } = await supabase\n        .from('escolas_completa')\n        .select('imagem_header')\n        .eq('id', escolaId)\n        .single();\n      \n      if (error) throw error;\n      return data?.imagem_header || null;\n    } catch (err) {\n      console.error('Erro ao buscar imagem do header:', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Definir imagem como header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @param {string} imagemUrl - URL da imagem\n   * @returns {Promise<void>}\n   */\n  static async setImagemHeader(escolaId, imagemUrl) {\n    try {\n      const { error } = await supabase\n        .from('escolas_completa')\n        .update({ imagem_header: imagemUrl })\n        .eq('id', escolaId);\n      \n      if (error) throw error;\n    } catch (err) {\n      console.error('Erro ao definir imagem do header:', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Remover imagem do header de uma escola\n   * @param {number} escolaId - ID da escola\n   * @returns {Promise<void>}\n   */\n  static async removeImagemHeader(escolaId) {\n    try {\n      const { error } = await supabase\n        .from('escolas_completa')\n        .update({ imagem_header: null })\n        .eq('id', escolaId);\n      \n      if (error) throw error;\n    } catch (err) {\n      console.error('Erro ao remover imagem do header:', err);\n      throw err;\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, Image as ImageIcon, Trash2, Check, AlertCircle, Save, RefreshCw, GripVertical } from 'lucide-react';\nimport { \n  uploadEscolaImage, \n  getEscolaImages, \n  deleteImage, \n  replaceImage\n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable,\n  updateMultipleImageOrders\n} from '../../services/legendasService';\nimport { HeaderImageService } from '../../services/headerImageService';\nimport { supabase } from '../../supabaseClient';\n\nconst ImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // const [editingImage, setEditingImage] = useState(null); // Removido - no utilizado\n  // const [editingDescription, setEditingDescription] = useState(''); // Removido - no utilizado\n  \n  // Estados para trocar imagem\n  const [replacingImage, setReplacingImage] = useState(null);\n  const [replacementFile, setReplacementFile] = useState(null);\n  \n  // Estados para imagem do header\n  const [imagemHeaderAtual, setImagemHeaderAtual] = useState(null);\n  const [loadingHeader, setLoadingHeader] = useState(false);\n  \n  // Estados para drag and drop\n  const [draggedImage, setDraggedImage] = useState(null);\n  const [dragOverIndex, setDragOverIndex] = useState(null);\n\n  // Buscar imagem atual do header\n  const fetchImagemHeader = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      const imagemUrl = await HeaderImageService.getImagemHeader(escolaId);\n      setImagemHeaderAtual(imagemUrl);\n    } catch (err) {\n      console.error('Erro ao buscar imagem do header:', err);\n    }\n  }, [escolaId]);\n\n  // Definir imagem como header\n  const definirImagemHeader = async (imagemUrl) => {\n    if (!escolaId) return;\n    \n    try {\n      setLoadingHeader(true);\n      await HeaderImageService.setImagemHeader(escolaId, imagemUrl);\n      \n      setImagemHeaderAtual(imagemUrl);\n      setSuccess('Imagem definida como header com sucesso!');\n      setTimeout(() => setSuccess(''), 3000);\n      \n      // Notificar atualizao\n      if (onImagesUpdate) onImagesUpdate();\n    } catch (err) {\n      console.error('Erro ao definir imagem do header:', err);\n      setError('Erro ao definir imagem do header: ' + err.message);\n    } finally {\n      setLoadingHeader(false);\n    }\n  };\n\n  // Remover imagem do header\n  const removerImagemHeader = async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoadingHeader(true);\n      await HeaderImageService.removeImagemHeader(escolaId);\n      \n      setImagemHeaderAtual(null);\n      setSuccess('Imagem removida do header com sucesso!');\n      setTimeout(() => setSuccess(''), 3000);\n      \n      // Notificar atualizao\n      if (onImagesUpdate) onImagesUpdate();\n    } catch (err) {\n      console.error('Erro ao remover imagem do header:', err);\n      setError('Erro ao remover imagem do header: ' + err.message);\n    } finally {\n      setLoadingHeader(false);\n    }\n  };\n\n  // Carregar ordem do banco de dados e ordenar imagens\n  const loadImageOrder = useCallback(async (images) => {\n    if (!escolaId || !images || images.length === 0) return images;\n    \n    try {\n      // Buscar todas as legendas da escola para obter a ordem\n      const { data: legendas, error } = await supabase\n        .from('legendas_fotos')\n        .select('imagem_url, ordem')\n        .eq('escola_id', escolaId)\n        .eq('tipo_foto', 'escola')\n        .eq('ativo', true);\n      \n      if (error) {\n        console.warn('Erro ao buscar ordem das imagens:', error);\n        return images;\n      }\n      \n      if (!legendas || legendas.length === 0) {\n        return images;\n      }\n      \n      // Criar um mapa de URLs para ordem\n      const orderMap = new Map();\n      legendas.forEach(legenda => {\n        if (legenda.ordem !== null && legenda.ordem !== undefined) {\n          orderMap.set(legenda.imagem_url, legenda.ordem);\n        }\n      });\n      \n      // Ordenar imagens baseado na ordem do banco\n      const sortedImages = [...images].sort((a, b) => {\n        const orderA = orderMap.has(a.url) ? orderMap.get(a.url) : Infinity;\n        const orderB = orderMap.has(b.url) ? orderMap.get(b.url) : Infinity;\n        return orderA - orderB;\n      });\n      \n      return sortedImages;\n    } catch (err) {\n      console.warn('Erro ao carregar ordem das imagens:', err);\n      return images;\n    }\n  }, [escolaId]);\n\n  // Salvar ordem no banco de dados\n  const saveImageOrder = useCallback(async (images) => {\n    if (!escolaId || !images || images.length === 0) return;\n    \n    try {\n      // Preparar array de ordens\n      const imageOrders = images.map((img, index) => ({\n        imageUrl: img.url,\n        ordem: index + 1\n      }));\n      \n      // Atualizar ordens no banco\n      await updateMultipleImageOrders(imageOrders, escolaId);\n    } catch (err) {\n      console.error('Erro ao salvar ordem das imagens no banco:', err);\n      setError('Erro ao salvar ordem das imagens. Tente novamente.');\n    }\n  }, [escolaId]);\n\n  // Buscar imagens existentes\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-das-escolas');\n      const orderedImages = await loadImageOrder(images);\n      setExistingImages(orderedImages);\n    } catch (err) {\n      console.error('Erro ao buscar imagens:', err);\n      setError('Erro ao carregar imagens existentes');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId, loadImageOrder]);\n\n  useEffect(() => {\n    fetchExistingImages();\n    fetchImagemHeader();\n  }, [fetchExistingImages, fetchImagemHeader]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length || !escolaId) return;\n      \n      console.log('Buscando legendas para', existingImages.length, 'imagens da escola', escolaId);\n      const legendasMap = {};\n      \n      try {\n        for (const img of existingImages) {\n          console.log('Buscando legenda para imagem:', img.url);\n          \n          // Tentar buscar legenda com diferentes formatos de URL\n          let legenda = await getLegendaByImageUrl(img.url, escolaId, 'escola');\n          \n          // Se no encontrar, tentar com URL pblica\n          if (!legenda && img.publicURL) {\n            console.log('Tentando buscar com URL pblica:', img.publicURL);\n            legenda = await getLegendaByImageUrl(img.publicURL, escolaId, 'escola');\n          }\n          \n          console.log('Legenda encontrada:', legenda);\n          legendasMap[img.url] = legenda;\n        }\n        \n        setExistingImages(prev => prev.map(img => ({\n          ...img,\n          legendaData: legendasMap[img.url] || {\n            legenda: '',\n            descricao_detalhada: '',\n            autor_foto: '',\n            data_foto: '',\n            categoria: 'geral',\n          }\n        })));\n        \n        console.log('Legendas carregadas com sucesso');\n      } catch (error) {\n        console.error('Erro ao buscar legendas:', error);\n        setError('Erro ao carregar legendas: ' + error.message);\n      }\n    };\n    \n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens aps 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleo de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" no  uma imagem vlida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\"  muito grande. Tamanho mximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop de arquivos\n  const handleFileDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, []);\n\n  const handleFileDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadEscolaImage(file, escolaId);\n        uploadedImages.push(uploadedImage);\n      }\n\n      // Atualizar lista de imagens\n      const newImages = [...existingImages, ...uploadedImages];\n      setExistingImages(newImages);\n      await saveImageOrder(newImages);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) carregada(s) com sucesso!`);\n\n\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-das-escolas');\n      \n      // Se a imagem excluda era a do header, remover referncia\n      const deletedImage = existingImages.find(img => img.id === imageId);\n      if (deletedImage && deletedImage.publicUrl && deletedImage.publicUrl === imagemHeaderAtual) {\n        try { await removerImagemHeader(); } catch (_) {}\n      }\n\n      // Recarregar lista a partir do storage para refletir estado real\n      await fetchExistingImages();\n      \n      // Atualizar ordem aps deletar\n      const remainingImages = existingImages.filter(img => img.id !== imageId);\n      await saveImageOrder(remainingImages);\n\n      setSuccess('Imagem excluda com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Trocar imagem existente\n  const handleReplaceImage = async (imageId, oldFilePath) => {\n    if (!replacementFile) {\n      setError('Selecione uma nova imagem para substituir');\n      return;\n    }\n\n    try {\n      setUploading(true);\n      setError('');\n\n      // Substituir a imagem\n      const newImage = await replaceImage(\n        replacementFile, \n        oldFilePath, \n        escolaId, \n        'imagens-das-escolas',\n        existingImages.find(img => img.id === imageId)?.descricao || ''\n      );\n\n      // Atualizar lista de imagens\n      const updatedImages = existingImages.map(img => \n        img.id === imageId ? newImage : img\n      );\n      setExistingImages(updatedImages);\n      await saveImageOrder(updatedImages);\n\n      // Limpar estados\n      setReplacingImage(null);\n      setReplacementFile(null);\n      setSuccess('Imagem substituda com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao substituir imagem:', err);\n      setError(`Erro ao substituir imagem: ${err.message}`);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // Iniciar processo de trocar imagem\n  const startReplaceImage = (imageId) => {\n    setReplacingImage(imageId);\n    setReplacementFile(null);\n  };\n\n  // Cancelar troca de imagem\n  const cancelReplaceImage = () => {\n    setReplacingImage(null);\n    setReplacementFile(null);\n  };\n\n  // Selecionar arquivo para substituio\n  const handleReplacementFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setReplacementFile(file);\n    }\n  };\n\n  // Atualizar descrio da imagem - REMOVIDO: no utilizado\n  // const handleDescriptionChange = async (imageId, novaDescricao) => {\n  //   if (!novaDescricao.trim()) return;\n\n  //   try {\n  //     await updateImageDescription(imageId, novaDescricao);\n  //     \n  //     // Atualizar lista\n  //     setExistingImages(prev => prev.map(img => \n  //       img.id === imageId \n  //         ? { ...img, descricao: novaDescricao.trim() }\n  //         : img\n  //     ));\n\n  //     setSuccess('Legenda atualizada com sucesso!');\n\n  //     // Notificar componente pai\n  //     if (onImagesUpdate) {\n  //       onImagesUpdate();\n  //     }\n\n  //   } catch (err) {\n  //     console.error('Erro ao atualizar descrio:', err);\n  //     setError(`Erro ao atualizar legenda: ${err.message}`);\n  //   }\n  // };\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    // Validar dados obrigatrios\n    if (!escolaId) {\n      setError('ID da escola no encontrado');\n      return;\n    }\n    \n    if (!imagem_url_relativa) {\n      setError('URL da imagem no encontrada');\n      return;\n    }\n    \n    // Validar e limpar dados da legenda\n    const cleanLegendaData = { ...legendaData };\n    \n    // Tratar campo data_foto - converter para formato correto se necessrio\n    if (cleanLegendaData.data_foto && cleanLegendaData.data_foto.trim() !== '') {\n      // Garantir que a data est no formato correto\n      try {\n        const data = new Date(cleanLegendaData.data_foto);\n        if (isNaN(data.getTime())) {\n          delete cleanLegendaData.data_foto;\n        } else {\n          cleanLegendaData.data_foto = data.toISOString().split('T')[0];\n        }\n      } catch (e) {\n        delete cleanLegendaData.data_foto;\n      }\n    } else {\n      delete cleanLegendaData.data_foto;\n    }\n    \n    // Tratar outros campos vazios que podem causar problemas\n    Object.keys(cleanLegendaData).forEach(key => {\n      if (cleanLegendaData[key] === '' || cleanLegendaData[key] === null) {\n        delete cleanLegendaData[key];\n      }\n    });\n    \n    console.log('Dados limpos da legenda:', cleanLegendaData);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'escola');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...cleanLegendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualizao:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...cleanLegendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'escola'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda criada:', novaLegenda);\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      \n      // Recarregar as imagens para mostrar as legendas atualizadas\n      await fetchExistingImages();\n      \n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      console.error('Detalhes do erro:', err.details);\n      console.error('Hint do erro:', err.hint);\n      \n      let errorMessage = 'Erro ao salvar legenda: ' + err.message;\n      if (err.details) {\n        errorMessage += ' - Detalhes: ' + err.details;\n      }\n      if (err.hint) {\n        errorMessage += ' - Dica: ' + err.hint;\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Handlers para drag and drop de reordenao de imagens\n  const handleImageDragStart = (e, index) => {\n    setDraggedImage(index);\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', e.target);\n  };\n\n  const handleImageDragOver = (e, index) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setDragOverIndex(index);\n  };\n\n  const handleImageDragLeave = () => {\n    setDragOverIndex(null);\n  };\n\n  const handleImageDrop = async (e, dropIndex) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (draggedImage === null || draggedImage === dropIndex) {\n      setDraggedImage(null);\n      setDragOverIndex(null);\n      return;\n    }\n\n    const newImages = [...existingImages];\n    const draggedItem = newImages[draggedImage];\n    \n    // Remover item da posio original\n    newImages.splice(draggedImage, 1);\n    \n    // Inserir na nova posio\n    newImages.splice(dropIndex, 0, draggedItem);\n    \n    setExistingImages(newImages);\n    await saveImageOrder(newImages);\n    setDraggedImage(null);\n    setDragOverIndex(null);\n    setSuccess('Ordem das imagens atualizada!');\n    setTimeout(() => setSuccess(''), 3000);\n  };\n\n  const handleImageDragEnd = () => {\n    setDraggedImage(null);\n    setDragOverIndex(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-800/30 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <span className=\"ml-2 text-gray-400\">Carregando imagens...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <ImageIcon className=\"w-5 h-5 text-blue-400\" />\n          <h3 className=\"text-lg font-semibold text-gray-100\">Imagens da Escola</h3>\n        </div>\n        <div className=\"text-sm text-gray-400\">\n          {existingImages.length} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-900/50 border-red-700/50 rounded-xl\">\n          <AlertCircle className=\"w-5 h-5 text-red-400\" />\n          <span className=\"text-red-300\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-900/50 border-green-700/50 rounded-xl\">\n          <Check className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-green-300\">{success}</span>\n        </div>\n      )}\n\n      {/* rea de Upload */}\n      <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-600 bg-gray-800/50' \n                : 'border-gray-600 bg-gray-800/50 hover:border-blue-400 hover:bg-gray-700/50'\n            }`}\n            onDrop={handleFileDrop}\n            onDragOver={handleFileDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-blue-400 mx-auto mb-2\" />\n            <p className=\"text-gray-300 mb-2\">\n              Arraste imagens aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-400 mb-4\">\n              JPG, PNG, WEBP, GIF  Mximo 5MB por arquivo\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-400\">\n                <span>Fazendo upload...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-100\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-400 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"font-medium text-gray-100\">Imagens da Escola ({existingImages.length})</h4>\n            <p className=\"text-sm text-gray-400\">Arraste as imagens para reordenar</p>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image, index) => (\n              <div \n                key={image.id} \n                draggable\n                onDragStart={(e) => handleImageDragStart(e, index)}\n                onDragOver={(e) => handleImageDragOver(e, index)}\n                onDragLeave={handleImageDragLeave}\n                onDrop={(e) => handleImageDrop(e, index)}\n                onDragEnd={handleImageDragEnd}\n                className={`bg-gray-800/50 border border-gray-700/50 rounded-lg overflow-hidden shadow-sm transition-all cursor-move ${\n                  imagemHeaderAtual === image.publicUrl ? 'ring-2 ring-blue-400' : ''\n                } ${\n                  draggedImage === index ? 'opacity-50 scale-95' : ''\n                } ${\n                  dragOverIndex === index ? 'ring-2 ring-blue-500 scale-105' : ''\n                }`}\n              >\n                {/* Handle de arrastar */}\n                <div className=\"absolute top-2 right-2 z-10 bg-gray-900/80 p-1 rounded cursor-grab active:cursor-grabbing\">\n                  <GripVertical className=\"w-4 h-4 text-gray-400\" />\n                </div>\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem da escola'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Badge de imagem do header */}\n                {imagemHeaderAtual === image.publicUrl && (\n                  <div className=\"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1\">\n                    <Check className=\"w-3 h-3\" />\n                    Header\n                  </div>\n                )}\n                \n                {/* Overlay de aes */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {/* Boto para definir como header */}\n                    {imagemHeaderAtual !== image.publicUrl && (\n                      <button\n                        onClick={() => definirImagemHeader(image.publicUrl)}\n                        disabled={loadingHeader}\n                        className=\"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-700 disabled:opacity-50\"\n                        title=\"Usar como imagem do header\"\n                      >\n                        <Check className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                    \n                    {/* Boto para remover do header */}\n                    {imagemHeaderAtual === image.publicUrl && (\n                      <button\n                        onClick={removerImagemHeader}\n                        disabled={loadingHeader}\n                        className=\"p-2 bg-yellow-500 text-white rounded-full hover:bg-yellow-700 disabled:opacity-50\"\n                        title=\"Remover do header\"\n                      >\n                        <X className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={() => startReplaceImage(image.id)}\n                      className=\"p-2 bg-orange-500 text-white rounded-full hover:bg-orange-700\"\n                      title=\"Trocar imagem\"\n                    >\n                      <RefreshCw className=\"w-5 h-5\" />\n                    </button>\n                    \n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Descrio Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrio detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotgrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-300 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Modal de Trocar Imagem */}\n      {replacingImage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-100\">Trocar Imagem</h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Selecione a nova imagem\n                </label>\n                <input\n                  type=\"file\"\n                  accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                  onChange={handleReplacementFileSelect}\n                  className=\"w-full bg-gray-700 border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-gray-100\"\n                />\n              </div>\n              \n              {replacementFile && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                    Pr-visualizao\n                  </label>\n                  <img\n                    src={URL.createObjectURL(replacementFile)}\n                    alt=\"Nova imagem\"\n                    className=\"w-full h-32 object-cover rounded-lg border border-gray-600\"\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={cancelReplaceImage}\n                className=\"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700\"\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={() => handleReplaceImage(replacingImage, existingImages.find(img => img.id === replacingImage)?.url)}\n                disabled={!replacementFile || uploading}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Trocando...' : 'Trocar Imagem'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando no h imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-400\">\n          <ImageIcon className=\"w-12 h-12 mx-auto mb-2 text-gray-500\" />\n          <p>Nenhuma imagem adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar a escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ImageUploadSection;","import React from 'react';\nimport ImageUploadSection from '../../EditEscolaPanel/ImageUploadSection';\n\nconst ImagensEscolaTab = ({ editingLocation }) => {\n  const escolaId = editingLocation?.id;\n\n  if (!escolaId) {\n    return (\n      <div className=\"flex items-center justify-center h-64 text-gray-500\">\n        <p>Selecione uma escola para gerenciar suas imagens</p>\n      </div>\n    );\n  }\n\n  return (\n    <ImageUploadSection \n      escolaId={escolaId}\n      onImagesUpdate={() => {\n        // Callback para atualizar dados se necessrio\n        console.log('Imagens da escola atualizadas');\n      }}\n    />\n  );\n};\n\nexport default ImagensEscolaTab; "],"names":["addProfessorImageMeta","async","data","error","supabase","from","insert","meta","select","single","_ref","escolaId","onImagesUpdate","selectedFiles","setSelectedFiles","useState","uploading","setUploading","uploadProgress","setUploadProgress","setError","success","setSuccess","existingImages","setExistingImages","loading","setLoading","genero","titulo","replacingImage","setReplacingImage","replacementFile","setReplacementFile","fetchExistingImages","useCallback","images","getEscolaImages","err","console","useEffect","log","testLegendasTable","length","legendasMap","img","url","legenda","getLegendaByImageUrl","prev","map","_objectSpread","legendaData","descricao_detalhada","autor_foto","data_foto","categoria","fetchLegendas","timer","setTimeout","clearTimeout","handleDrop","event","preventDefault","files","Array","dataTransfer","imageFiles","filter","file","type","startsWith","handleDragOver","handleLegendaFieldChange","imageId","field","value","id","handleLegendaSave","image","imagem_url_relativa","cleanLegendaData","trim","Object","keys","forEach","key","updateData","updated_at","Date","toISOString","resultado","updateLegendaFoto","novaLegendaData","escola_id","imagem_url","ativo","created_at","tipo_foto","novaLegenda","addLegendaFoto","eq","code","getProfessorImageMetaByUrl","publicUrl","updates","update","updateProfessorImageMeta","autor","message","stack","_jsx","className","children","_jsxs","User","AlertCircle","Check","concat","onDrop","onDragOver","Upload","multiple","accept","onChange","target","validFiles","isValidType","includes","isValidSize","size","name","disabled","Math","round","style","width","index","src","URL","createObjectURL","alt","onClick","_","i","removeSelectedFile","X","uploadedImages","progress","uploadedImage","uploadProfessorImage","push","nome_arquivo","_image$legendaData","_image$legendaData2","_image$legendaData3","_image$legendaData4","_image$legendaData5","descricao","startReplaceImage","title","RefreshCw","filePath","window","confirm","deleteImage","handleDeleteImage","Trash2","e","placeholder","Save","cancelReplaceImage","_existingImages$find2","oldFilePath","_existingImages$find","newImage","replaceImage","find","handleReplaceImage","editingLocation","ProfessorImageUploadSection","onUploadComplete","onRemove","existingUrls","isUploading","setIsUploading","previewUrls","setPreviewUrls","FILE_RESTRICTIONS","PDF","MAX_SIZE","ALLOWED_TYPES","File","uploadedUrls","uploadPDF","allUrls","href","rel","newUrls","handleRemove","documentos","setDocumentos","PDFUploadSection","urls","VersionamentoService","obterAutorAtual","AuthService","isAuthenticated","currentUser","getCurrentUser","username","warn","registrarVersaoDados","nomeTabela","chaveLinha","nomeCampo","fonteId","observacoes","Error","toString","autorFinal","this","dadosVersao","nome_tabela","chave_linha","criado_em","nome_campo","fonte_id","buscarFontesDados","order","ascending","buscarVersoesPorLinha","useEscolas","escolas","setEscolas","searchTerm","setSearchTerm","selectedType","setSelectedType","fetchEscolas","escolasMapeadas","escola","logradouro","numero","complemento","bairro","cep","estado","filteredEscolas","_escola$Escola","Escola","toLowerCase","updateEscolaInList","updatedData","addEscolaToList","novaEscola","removeEscolaFromList","getEscolaById","getEscolaByName","nome","_escola$Escola2","saveEscola","escolaData","metadados","arguments","undefined","versionError","deleteEscola","delete","MODALIDADES_OPTIONS","MODALIDADES_CATEGORIAS","indices","useModalidades","selectedModalidades","setSelectedModalidades","outroModalidade","setOutroModalidade","handleModalidadeChange","modalidade","m","handleOutroModalidadeChange","hasOutro","some","saveModalidades","join","loadExistingModalidades","modalidadesText","parts","split","part","modalidades","outro","replace","clearModalidades","getModalidadesPreview","hasSelectedModalidades","ADMIN_TABS","label","UI_CONFIG","FORM_CONFIG","isMobile","sidebarOpen","setSidebarOpen","onEscolaSelect","_Fragment","Menu","transform","top","Search","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onNovaEscola","isOpen","onClose","onSuccess","password","setPassword","showPassword","setShowPassword","attempts","setAttempts","isLocked","setIsLocked","lockTime","setLockTime","passwordRef","useRef","current","focus","handleClose","currentTarget","onKeyDown","tabIndex","onSubmit","result","authenticate","setToken","token","user","newAttempts","ref","autoComplete","EyeOff","Eye","char","CheckCircle","useAuth","showLoginModal","setShowLoginModal","React","LoginModal","setEditingLocation","checked","turnos_funcionamento","handleSaveModalidades","cozinha","merenda_escolar","diferenciada","merenda_diferenciada","videos","setVideos","showForm","setShowForm","editingVideo","setEditingVideo","formData","setFormData","video_url","plataforma","carregarVideos","getVideosEscola","resetForm","Plus","video","allowFullScreen","handleEdit","Edit3","deleteVideoEscola","handleDelete","payload","Number","Boolean","updateVideoEscola","createVideoEscola","required","rows","VideoManager","quillRef","quillInstance","setQuillInstance","imageHandler","input","document","createElement","setAttribute","click","onchange","range","getSelection","insertEmbed","imageUrl","uploadImage","deleteText","setSelection","alert","modules","toolbar","container","handlers","handleEditorChange","content","delta","source","editor","handleEditorReady","quill","ReactQuill","theme","onEditorReady","formats","height","backgroundColor","color","QuillEditor","RichTextEditor","uploadFotoProfessor","arquivo","nomeProfessor","tamanhoMaximo","timestamp","now","extensao","pop","nomeSanitizado","substring","nomeArquivo","caminhoArquivo","nomeOriginal","storage","upload","cacheControl","upsert","getPublicUrl","caminho","atualizarFotoProfessor","historiaId","fotoUrl","foto_rosto","removerFotoProfessor","storageError","remove","dbError","buscarFotoProfessor","listarFotosProfessores","list","fotos","_file$metadata","tamanho","metadata","criadoEm","validarImagem","Promise","resolve","Image","onload","onerror","historias","setHistorias","editingHistoria","setEditingHistoria","isCreating","setIsCreating","uploadingPhoto","setUploadingPhoto","photoError","setPhotoError","photoSuccess","setPhotoSuccess","loadHistorias","getHistoriasProfessor","handleNewHistoria","nome_professor","historia","handleRemovePhoto","FotoProfessorService","novoEstado","htmlFor","updateHistoriaProfessor","historiaData","createHistoriaProfessor","handleSaveHistoria","handleCancelEdit","dangerouslySetInnerHTML","__html","handleEditHistoria","deleteHistoriaProfessor","handleDeleteHistoria","MARKER_SVG_PATH","process","mapRef","mapInstanceRef","markerRef","updateMap","lat","lng","view","getView","isNaN","_mapInstanceRef$curre","coordinates","fromLonLat","parseFloat","setCenter","setZoom","vectorSource","getLayers","getArray","layer","VectorLayer","getSource","removeFeature","marker","Feature","geometry","Point","setStyle","Style","Icon","scale","anchor","anchorXUnits","anchorYUnits","addFeature","handleMapClick","toLonLat","coordinate","toFixed","Map","layers","TileLayer","XYZ","VectorSource","View","center","zoom","on","setTarget","step","minHeight","TabelasIntegraisTab","_tabelas$find","tabelas","setTabelas","selectedTabela","setSelectedTabela","dadosTabela","setDadosTabela","loadingDados","setLoadingDados","backupStatus","setBackupStatus","backupProgress","setBackupProgress","TABELAS_SISTEMA","icone","Database","cor","registros","Users","FileText","Video","BUCKETS_BACKUP","arquivos","carregarDadosTabela","tabelaId","downloadFile","filename","response","fetch","blob","downloadUrl","link","download","body","appendChild","removeChild","revokeObjectURL","createAndDownloadZip","zipName","zip","JSZip","default","arquivosAdicionados","ok","status","statusText","zipBlob","generateAsync","downloadError","Archive","backupTabelas","tabela","backupArquivos","todosArquivos","bucket","limit","arquivosComUrls","urlData","createSignedUrl","signedUrl","arquivoCompleto","bucketNome","backupCompleto","dataBackup","versao","t","buckets","b","totalRegistros","values","reduce","acc","totalArquivos","dados","jsonContent","JSON","stringify","Blob","visibility","detalhes","backupTabelasData","dataAtual","entries","headers","csvContent","row","header","tipo","formato","resultados","mensagem","tabelasOk","r","tabelasErro","FileDown","urlError","f","bucketsOk","bucketsErro","Icone","isSelected","stopPropagation","downloadCSV","Download","downloadJSON","slice","cellIndex","onSave","canScroll","setCanScroll","scrollRef","checkScroll","hasHorizontalScroll","scrollWidth","clientWidth","hasVerticalScroll","scrollHeight","clientHeight","addEventListener","removeEventListener","editingCell","setEditingCell","editValue","setEditValue","originalValue","setOriginalValue","startEditing","rowIndex","columnKey","cancelEditing","saveEdit","updatedEscola","handleKeyDown","columns","renderCell","column","isEditing","Edit2","inputType","inputProps","min","onBlur","autoFocus","overflowY","maxHeight","escolasLoading","escolasError","tableLoading","setTableLoading","tableError","setTableError","updateSuccess","setUpdateSuccess","exportToCSV","nome_escola","municipio","endereco","terra_indigena","parcerias","diretoria_ensino","ano_criacao","povos","linguas","numero_alunos","turnos","estrutura","agua","coleta_lixo","internet","equipamentos","acesso","gestao","funcionarios","professores_indigenas","professores_nao_indigenas","falam_lingua_indigena","formacao_professores","formacao_continuada","ppp_proprio","ppp_comunidade","projetos","parcerias_universidades","parcerias_ongs","desejos_comunidade","redes_sociais","links_redes_sociais","historia_escola","latitude","longitude","links_uteis","link_para_videos","professores_indigenas_detalhado","professores_nao_indigenas_detalhado","falam_lingua_indigena_detalhado","formacao_professores_detalhado","visitas_supervisores","outros_funcionarios_detalhado","gestao_detalhado","merenda_diferenciada_detalhado","EditableTable","CompletenessDashboard","completenessData","setCompletenessData","selectedCategory","setSelectedCategory","incompleteSchools","setIncompleteSchools","showModal","setShowModal","fieldCategories","calculateCategoryCompleteness","fields","fieldCompleteness","calculateFieldCompleteness","fieldName","totalRecords","filledRecords","record","sum","completeness","getCompletenessColor","percentage","getCompletenessIcon","handleCategoryClick","category","categoryFields","incomplete","findIncompleteSchools","school","missingFields","rawData","fetchCompletenessData","categoryCompleteness","allFields","flat","overallCompleteness","IncompleteSchoolsModal","Municpio","MapPin","fieldIndex","escolaNome","camposAlterados","fontes","setFontes","loadingFontes","setLoadingFontes","setAutor","saving","setSaving","fontesResult","autorAtual","carregarDados","handleChange","handleSkip","campoAlterado","campo","catch","hasData","Info","valorAntigo","String","valorNovo","fonte","maxLength","every","erros","normalizeValue","obterLabelCampo","ImagensEscolaTab","ImagensProfessoresTab","DocumentosTab","require","AdminPanelContent","isSaving","setIsSaving","saveError","setSaveError","saveSuccess","setSaveSuccess","showBackupModal","setShowBackupModal","showDeleteModal","setShowDeleteModal","escolaToDelete","setEscolaToDelete","isDeleting","setIsDeleting","showCompletenessDashboard","setShowCompletenessDashboard","showMetadadosModal","setShowMetadadosModal","escolaSalvaId","setEscolaSalvaId","escolaSalvaNome","setEscolaSalvaNome","setCamposAlterados","dadosOriginais","setDadosOriginais","innerWidth","handleNovaEscola","activeTab","AdminSidebar","escolaOriginal","AdminToolbar","TabelaEditavelTab","camposModificados","identificarCamposAlterados","dadosAntigos","dadosNovos","todosCampos","Set","camposIgnorar","tab","isActive","hasMissing","tabId","hasMissingInfo","renderActiveTab","DadosBasicosTab","PovosLinguasTab","ModalidadesTab","InfraestruturaTab","GestaoProfessoresTab","MaterialPedagogicoTab","ProjetosParceriasTab","RedesSociaisTab","VideoTab","HistoriasTab","HistoriaProfessoresTab","CoordenadasTab","MetadadosModal","metadadosData","abrirTabelaEditavel","imagens","offset","loadingMessage","innerHTML","imagem","imageData","a","AdminPanel","ProtectedRoute","uploadFile","STORAGE_BUCKETS","PDFS","fileType","getFileType","validation","validateFile","isValid","fileName","generateUniqueFileName","FILE_PATHS","uploadError","MEDIA","MAX_FILES","Infinity","IMAGE","AUDIO","restrictions","prefix","random","extension","ESCOLA_IMAGE_CONFIG","BUCKET_NAME","MAX_FILE_SIZE","MAX_IMAGES_PER_SCHOOL","MIN_DIMENSIONS","PROFESSOR_IMAGE_CONFIG","validateImageFile","config","toUpperCase","allowedExtensions","generateUniqueFileNameWithGenero","uploadEscolaImage","bucketName","directory","listError","newFile","newFilePath","deleteError","HeaderImageService","getImagemHeader","imagem_header","setImagemHeader","imagemUrl","removeImagemHeader","imagemHeaderAtual","setImagemHeaderAtual","loadingHeader","setLoadingHeader","draggedImage","setDraggedImage","dragOverIndex","setDragOverIndex","fetchImagemHeader","removerImagemHeader","loadImageOrder","legendas","orderMap","ordem","set","sort","has","get","saveImageOrder","imageOrders","updateMultipleImageOrders","orderedImages","publicURL","handleFileDrop","handleFileDragOver","handleImageDragLeave","handleImageDragEnd","ImageIcon","newImages","draggable","onDragStart","handleImageDragStart","effectAllowed","setData","handleImageDragOver","dropEffect","onDragLeave","dropIndex","draggedItem","splice","handleImageDrop","onDragEnd","GripVertical","definirImagemHeader","deletedImage","remainingImages","getTime","details","hint","errorMessage","updatedImages","ImageUploadSection"],"sourceRoot":""}