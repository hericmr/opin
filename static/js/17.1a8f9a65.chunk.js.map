{"version":3,"file":"static/js/17.1a8f9a65.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/upload.ts","services/escolaImageService.js","../node_modules/lucide-react/src/icons/pen-line.ts","../node_modules/lucide-react/src/icons/save.ts","components/EditEscolaPanel/VideoSection.js","../node_modules/lucide-react/src/icons/settings.ts","components/EditEscolaPanel/EditEscolaPanel.js","services/professorImageMetaService.js","components/EditEscolaPanel/ProfessorImageUploadSection.js","../node_modules/lucide-react/src/icons/image.ts","../node_modules/lucide-react/src/icons/circle-alert.ts","../node_modules/lucide-react/src/icons/plus.ts","components/EditEscolaPanel/ImageUploadSection.js","../node_modules/lucide-react/src/icons/video.ts","../node_modules/lucide-react/src/icons/eye-off.ts","../node_modules/lucide-react/src/icons/arrow-up.ts","../node_modules/lucide-react/src/icons/arrow-down.ts","components/AdminPanel/HistoriaProfessorManager.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n];\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('Upload', __iconNode);\n\nexport default Upload;\n","import { supabase } from '../supabaseClient';\n\n// Configurações para imagens das escolas\nconst ESCOLA_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-das-escolas',\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: 10,\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n// Configurações para imagens dos professores\nconst PROFESSOR_IMAGE_CONFIG = {\n  BUCKET_NAME: 'imagens-professores', // Usando bucket existente\n  MAX_FILE_SIZE: 5 * 1024 * 1024, // 5MB\n  ALLOWED_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'],\n  MAX_IMAGES_PER_SCHOOL: 5,\n  MIN_DIMENSIONS: { width: 200, height: 200 }\n};\n\n/**\n * Valida um arquivo de imagem\n * @param {File} file - Arquivo a ser validado\n * @param {Object} config - Configuração de validação\n * @returns {Object} Resultado da validação\n */\nconst validateImageFile = (file, config) => {\n  // Verificar tipo MIME\n  if (!config.ALLOWED_TYPES.includes(file.type)) {\n    return {\n      isValid: false,\n      error: `Tipo de arquivo não suportado. Use apenas: ${config.ALLOWED_TYPES.map(t => t.split('/')[1].toUpperCase()).join(', ')}`\n    };\n  }\n\n  // Verificar tamanho\n  if (file.size > config.MAX_FILE_SIZE) {\n    return {\n      isValid: false,\n      error: `Arquivo muito grande. Tamanho máximo: ${config.MAX_FILE_SIZE / (1024 * 1024)}MB`\n    };\n  }\n\n  // Verificar extensão\n  const extension = file.name.split('.').pop().toLowerCase();\n  const allowedExtensions = config.ALLOWED_TYPES.map(t => t.split('/')[1]);\n  if (!allowedExtensions.includes(extension)) {\n    return {\n      isValid: false,\n      error: `Extensão não permitida. Use apenas: ${allowedExtensions.join(', ')}`\n    };\n  }\n\n  return { isValid: true };\n};\n\n/**\n * Gera nome único para o arquivo (sem gênero, para imagens de escola)\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @returns {string} Nome único do arquivo\n */\nconst generateUniqueFileName = (file, escolaId) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Gera nome único para o arquivo, incluindo o gênero\n * @param {File} file - Arquivo\n * @param {number} escolaId - ID da escola\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {string} Nome único do arquivo\n */\nconst generateUniqueFileNameWithGenero = (file, escolaId, genero) => {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 8);\n  const extension = file.name.split('.').pop().toLowerCase();\n  return `${genero}_${escolaId}_${timestamp}_${random}.${extension}`;\n};\n\n/**\n * Upload de imagem da escola (versão simplificada sem tabela de metadados)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrição da imagem\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadEscolaImage = async (file, escolaId, descricao = '') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, ESCOLA_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome único\n    const fileName = generateUniqueFileName(file, escolaId);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pública\n    const { data: { publicUrl } } = supabase.storage\n      .from(ESCOLA_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    return {\n      id: Date.now(), // ID temporário\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem da escola ${escolaId}`,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload de imagem do professor (com gênero no nome do arquivo)\n * @param {File} file - Arquivo de imagem\n * @param {number} escolaId - ID da escola\n * @param {string} descricao - Descrição da imagem\n * @param {string} genero - 'professor' ou 'professora'\n * @returns {Promise<Object>} Dados da imagem salva\n */\nexport const uploadProfessorImage = async (file, escolaId, descricao = '', genero = 'professor') => {\n  try {\n    // Validar arquivo\n    const validation = validateImageFile(file, PROFESSOR_IMAGE_CONFIG);\n    if (!validation.isValid) {\n      throw new Error(validation.error);\n    }\n\n    // Gerar nome único com gênero\n    const fileName = generateUniqueFileNameWithGenero(file, escolaId, genero);\n    const filePath = `${escolaId}/${fileName}`;\n\n    // Upload ao bucket\n    const { error: uploadError } = await supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .upload(filePath, file, {\n        cacheControl: '3600',\n        upsert: false\n      });\n\n    if (uploadError) {\n      console.error('Erro detalhado do upload:', uploadError);\n      throw new Error(`Erro no upload: ${uploadError.message}`);\n    }\n\n    // Obter URL pública\n    const { data: { publicUrl } } = supabase.storage\n      .from(PROFESSOR_IMAGE_CONFIG.BUCKET_NAME)\n      .getPublicUrl(filePath);\n\n    // Retornar objeto simulado (sem metadados na tabela)\n    return {\n      id: Date.now(), // ID temporário\n      url: filePath,\n      publicUrl,\n      descricao: descricao.trim() || `Imagem do ${genero} da escola ${escolaId}`,\n      genero,\n      created_at: new Date().toISOString()\n    };\n\n  } catch (error) {\n    console.error('Erro no upload da imagem do professor:', error);\n    throw error;\n  }\n};\n\n/**\n * Buscar imagens da escola (versão simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Array>} Lista de imagens\n */\nexport const getEscolaImages = async (escolaId, bucketName = ESCOLA_IMAGE_CONFIG.BUCKET_NAME) => {\n  try {\n    // Listar arquivos no bucket para a escola específica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    if (!files || files.length === 0) {\n      return [];\n    }\n\n    // Criar objetos de imagem com URLs públicas\n    const imagens = files.map((file, index) => {\n      const filePath = `${escolaId}/${file.name}`;\n      const { data: { publicUrl } } = supabase.storage\n        .from(bucketName)\n        .getPublicUrl(filePath);\n\n      return {\n        id: index + 1, // ID temporário\n        url: filePath,\n        publicUrl,\n        descricao: `Imagem ${index + 1}`,\n        created_at: file.created_at || new Date().toISOString()\n      };\n    });\n\n    return imagens;\n\n  } catch (error) {\n    console.error('Erro ao buscar imagens da escola:', error);\n    throw error;\n  }\n};\n\n/**\n * Deletar imagem (versão simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} filePath - Caminho do arquivo\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<void>}\n */\nexport const deleteImage = async (imageId, filePath, bucketName) => {\n  try {\n    // Deletar arquivo do storage\n    const { error: storageError } = await supabase.storage\n      .from(bucketName)\n      .remove([filePath]);\n\n    if (storageError) {\n      throw new Error(`Erro ao deletar arquivo: ${storageError.message}`);\n    }\n\n  } catch (error) {\n    console.error('Erro ao deletar imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Atualizar descrição da imagem (versão simplificada)\n * @param {number} imageId - ID da imagem\n * @param {string} descricao - Nova descrição\n * @returns {Promise<Object>} Imagem atualizada\n */\nexport const updateImageDescription = async (imageId, descricao) => {\n  try {\n    // Como não temos tabela de metadados, retornamos um objeto simulado\n    return {\n      id: imageId,\n      descricao: descricao.trim()\n    };\n\n  } catch (error) {\n    console.error('Erro ao atualizar descrição da imagem:', error);\n    throw error;\n  }\n};\n\n/**\n * Verificar limite de imagens (versão simplificada)\n * @param {number} escolaId - ID da escola\n * @param {string} bucketName - Nome do bucket\n * @returns {Promise<Object>} Informações sobre o limite\n */\nexport const checkImageLimit = async (escolaId, bucketName) => {\n  try {\n    const config = bucketName === PROFESSOR_IMAGE_CONFIG.BUCKET_NAME \n      ? PROFESSOR_IMAGE_CONFIG \n      : ESCOLA_IMAGE_CONFIG;\n\n    // Listar arquivos no bucket para a escola específica\n    const { data: files, error } = await supabase.storage\n      .from(bucketName)\n      .list(`${escolaId}/`);\n\n    if (error) {\n      throw error;\n    }\n\n    const currentCount = files ? files.length : 0;\n\n    return {\n      current: currentCount,\n      limit: config.MAX_IMAGES_PER_SCHOOL,\n      canUpload: currentCount < config.MAX_IMAGES_PER_SCHOOL\n    };\n\n  } catch (error) {\n    console.error('Erro ao verificar limite de imagens:', error);\n    throw error;\n  }\n}; ","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 20h9', key: 't2du7b' }],\n  [\n    'path',\n    {\n      d: 'M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z',\n      key: '1ykcvy',\n    },\n  ],\n];\n\n/**\n * @component @name PenLine\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjBoOSIgLz4KICA8cGF0aCBkPSJNMTYuMzc2IDMuNjIyYTEgMSAwIDAgMSAzLjAwMiAzLjAwMkw3LjM2OCAxOC42MzVhMiAyIDAgMCAxLS44NTUuNTA2bC0yLjg3Mi44MzhhLjUuNSAwIDAgMS0uNjItLjYybC44MzgtMi44NzJhMiAyIDAgMCAxIC41MDYtLjg1NHoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/pen-line\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenLine = createLucideIcon('PenLine', __iconNode);\n\nexport default PenLine;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z',\n      key: '1c8476',\n    },\n  ],\n  ['path', { d: 'M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7', key: '1ydtos' }],\n  ['path', { d: 'M7 3v4a1 1 0 0 0 1 1h7', key: 't51u73' }],\n];\n\n/**\n * @component @name Save\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUuMiAzYTIgMiAwIDAgMSAxLjQuNmwzLjggMy44YTIgMiAwIDAgMSAuNiAxLjRWMTlhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yeiIgLz4KICA8cGF0aCBkPSJNMTcgMjF2LTdhMSAxIDAgMCAwLTEtMUg4YTEgMSAwIDAgMC0xIDF2NyIgLz4KICA8cGF0aCBkPSJNNyAzdjRhMSAxIDAgMCAwIDEgMWg3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/save\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Save = createLucideIcon('Save', __iconNode);\n\nexport default Save;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { \n  Video, \n  Plus, \n  Edit3, \n  Trash2, \n  Save, \n  X, \n  AlertCircle,\n  Check,\n  Clock,\n  Tag,\n  Play,\n  Link\n} from 'lucide-react';\nimport { \n  getTitulosVideos, \n  addTituloVideo, \n  updateTituloVideo, \n  deleteTituloVideo,\n  getTituloByVideoUrl \n} from '../../services/legendasService';\n\nconst VideoSection = ({ escolaId, videoUrl, onVideoUrlChange, onTitulosUpdate }) => {\n  const [videos, setVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showAddVideo, setShowAddVideo] = useState(false);\n  const [newVideo, setNewVideo] = useState({ url: '', titulo: '' });\n\n  // Buscar vídeos existentes\n  const fetchVideos = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const data = await getTitulosVideos(escolaId);\n      \n      // Organizar vídeos por URL\n      const videosOrganizados = data.map(item => ({\n        id: item.id,\n        url: item.video_url,\n        titulo: item.titulo,\n        plataforma: item.plataforma,\n        categoria: item.categoria\n      }));\n      \n      setVideos(videosOrganizados);\n    } catch (err) {\n      console.error('Erro ao buscar vídeos:', err);\n      setError('Erro ao carregar vídeos');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchVideos();\n  }, [fetchVideos]);\n\n  // Limpar mensagens após 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Detectar plataforma automaticamente\n  const detectPlataforma = (url) => {\n    if (url.includes('youtube.com') || url.includes('youtu.be')) {\n      return 'youtube';\n    } else if (url.includes('vimeo.com')) {\n      return 'vimeo';\n    } else if (url.includes('facebook.com')) {\n      return 'facebook';\n    } else if (url.includes('instagram.com')) {\n      return 'instagram';\n    }\n    return 'outro';\n  };\n\n  // Adicionar novo vídeo\n  const handleAddVideo = async (e) => {\n    e.preventDefault();\n    \n    if (!newVideo.url.trim() || !newVideo.titulo.trim()) {\n      setError('URL e título são obrigatórios');\n      return;\n    }\n\n    try {\n      // Verificar se já existe vídeo com esta URL\n      const videoExistente = videos.find(v => v.url === newVideo.url);\n      if (videoExistente) {\n        setError('Este vídeo já foi adicionado');\n        return;\n      }\n\n      // Criar novo vídeo\n      await addTituloVideo({\n        video_url: newVideo.url,\n        titulo: newVideo.titulo,\n        plataforma: detectPlataforma(newVideo.url),\n        categoria: 'geral',\n        escola_id: escolaId\n      });\n      \n      setSuccess('Vídeo adicionado com sucesso!');\n      setNewVideo({ url: '', titulo: '' });\n      setShowAddVideo(false);\n      fetchVideos();\n      \n      if (onTitulosUpdate) {\n        onTitulosUpdate();\n      }\n    } catch (err) {\n      console.error('Erro ao adicionar vídeo:', err);\n      setError('Erro ao adicionar vídeo');\n    }\n  };\n\n  // Atualizar título de um vídeo\n  const handleTituloChange = async (videoId, novoTitulo) => {\n    if (!novoTitulo.trim()) return;\n\n    try {\n      await updateTituloVideo(videoId, {\n        titulo: novoTitulo,\n        escola_id: escolaId\n      });\n      \n      fetchVideos();\n      if (onTitulosUpdate) {\n        onTitulosUpdate();\n      }\n    } catch (err) {\n      console.error('Erro ao atualizar título:', err);\n      setError('Erro ao atualizar título');\n    }\n  };\n\n  // Remover vídeo\n  const handleRemoveVideo = async (videoId) => {\n    if (!window.confirm('Tem certeza que deseja remover este vídeo?')) return;\n\n    try {\n      await deleteTituloVideo(videoId);\n      setSuccess('Vídeo removido com sucesso!');\n      fetchVideos();\n      \n      if (onTitulosUpdate) {\n        onTitulosUpdate();\n      }\n    } catch (err) {\n      console.error('Erro ao remover vídeo:', err);\n      setError('Erro ao remover vídeo');\n    }\n  };\n\n  // Obter URL de embed para qualquer plataforma\n  const getVideoEmbedUrl = (url) => {\n    if (!url) return '';\n    // YouTube\n    const ytMatch = url.match(/(?:youtu.be\\/|youtube.com\\/(?:watch\\?v=|embed\\/|v\\/))([\\w-]{11})/);\n    if (ytMatch) {\n      return `https://www.youtube.com/embed/${ytMatch[1]}`;\n    }\n    // Vimeo\n    const vimeoMatch = url.match(/vimeo.com\\/(\\d+)/);\n    if (vimeoMatch) {\n      return `https://player.vimeo.com/video/${vimeoMatch[1]}`;\n    }\n    // Outros: retorna o próprio link\n    return url;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Vídeo Principal (campo original) */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2\">\n          <Link className=\"w-5 h-5 text-blue-600\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">Vídeo Principal</h3>\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            URL do Vídeo\n          </label>\n          <input\n            type=\"url\"\n            className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            value={videoUrl || ''}\n            onChange={(e) => onVideoUrlChange(e.target.value)}\n            placeholder=\"Cole aqui o link do vídeo (YouTube, Vimeo, etc)\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">Exemplo: https://www.youtube.com/watch?v=...</p>\n        </div>\n\n        {/* Título do vídeo principal */}\n        {videoUrl && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Título do Vídeo\n            </label>\n            <input\n              type=\"text\"\n              className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n              value={videos.find(v => v.url === videoUrl)?.titulo || ''}\n              onChange={(e) => {\n                const video = videos.find(v => v.url === videoUrl);\n                if (video) {\n                  handleTituloChange(video.id, e.target.value);\n                }\n              }}\n              placeholder=\"Das crianças da Aldeia Uru'ity para o mundo\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">Exemplo: \"Das crianças da Aldeia Uru'ity para o mundo\"</p>\n          </div>\n        )}\n\n        {/* Pré-visualização do vídeo principal */}\n        {videoUrl && getVideoEmbedUrl(videoUrl) && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pré-visualização</label>\n            <div className=\"aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden\">\n              <iframe\n                src={getVideoEmbedUrl(videoUrl)}\n                title=\"Pré-visualização do vídeo\"\n                frameBorder=\"0\"\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n                className=\"w-full h-full\"\n              />\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Outros Vídeos */}\n      <div className=\"border-t pt-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Video className=\"w-5 h-5 text-green-600\" />\n            <h3 className=\"text-lg font-semibold text-gray-900\">Outros Vídeos</h3>\n          </div>\n          <button\n            onClick={() => setShowAddVideo(true)}\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Adicionar Outro Vídeo\n          </button>\n        </div>\n\n        {/* Lista de outros vídeos */}\n        {videos.filter(v => v.url !== videoUrl).length > 0 && (\n          <div className=\"space-y-4\">\n            {videos.filter(v => v.url !== videoUrl).map((video) => (\n              <div key={video.id} className=\"bg-gray-50 border rounded-lg p-4\">\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div className=\"flex-1\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Título do Vídeo\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                      value={video.titulo}\n                      onChange={(e) => handleTituloChange(video.id, e.target.value)}\n                      placeholder=\"Digite o título do vídeo\"\n                    />\n                  </div>\n                  <button\n                    onClick={() => handleRemoveVideo(video.id)}\n                    className=\"ml-3 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                    title=\"Remover vídeo\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                \n                <div className=\"mb-3\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    URL do Vídeo\n                  </label>\n                  <input\n                    type=\"url\"\n                    className=\"w-full border rounded-lg px-3 py-2 bg-gray-100\"\n                    value={video.url}\n                    disabled\n                  />\n                </div>\n\n                {/* Pré-visualização do vídeo */}\n                {getVideoEmbedUrl(video.url) && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pré-visualização</label>\n                    <div className=\"aspect-w-16 aspect-h-9 bg-black rounded-lg overflow-hidden\">\n                      <iframe\n                        src={getVideoEmbedUrl(video.url)}\n                        title={video.titulo}\n                        frameBorder=\"0\"\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                        allowFullScreen\n                        className=\"w-full h-full\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Mensagem quando não há outros vídeos */}\n        {videos.filter(v => v.url !== videoUrl).length === 0 && !showAddVideo && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <Video className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\n            <p>Nenhum vídeo adicional adicionado.</p>\n            <p className=\"text-sm\">Clique em \"Adicionar Outro Vídeo\" para incluir mais vídeos.</p>\n          </div>\n        )}\n\n        {/* Formulário para adicionar novo vídeo */}\n        {showAddVideo && (\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h4 className=\"text-lg font-medium text-blue-800\">Adicionar Novo Vídeo</h4>\n              <button\n                onClick={() => {\n                  setShowAddVideo(false);\n                  setNewVideo({ url: '', titulo: '' });\n                }}\n                className=\"text-blue-500 hover:text-blue-700\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleAddVideo} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  URL do Vídeo *\n                </label>\n                <input\n                  type=\"url\"\n                  required\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={newVideo.url}\n                  onChange={(e) => setNewVideo({ ...newVideo, url: e.target.value })}\n                  placeholder=\"https://www.youtube.com/watch?v=...\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Título do Vídeo *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  value={newVideo.titulo}\n                  onChange={(e) => setNewVideo({ ...newVideo, titulo: e.target.value })}\n                  placeholder=\"Digite o título do vídeo\"\n                />\n              </div>\n\n              <div className=\"flex gap-2 pt-4\">\n                <button\n                  type=\"submit\"\n                  className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                >\n                  <Save className=\"w-5 h-5\" />\n                  Adicionar Vídeo\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddVideo(false);\n                    setNewVideo({ url: '', titulo: '' });\n                  }}\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\n                >\n                  Cancelar\n                </button>\n              </div>\n            </form>\n          </div>\n        )}\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <AlertCircle className=\"w-5 h-5 text-red-600\" />\n          <span className=\"text-red-700\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg\">\n          <Check className=\"w-5 h-5 text-green-600\" />\n          <span className=\"text-green-700\">{success}</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nVideoSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  videoUrl: PropTypes.string,\n  onVideoUrlChange: PropTypes.func.isRequired,\n  onTitulosUpdate: PropTypes.func\n};\n\nexport default VideoSection; \n ","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z',\n      key: '1qme2f',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n];\n\n/**\n * @component @name Settings\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuMjIgMmgtLjQ0YTIgMiAwIDAgMC0yIDJ2LjE4YTIgMiAwIDAgMS0xIDEuNzNsLS40My4yNWEyIDIgMCAwIDEtMiAwbC0uMTUtLjA4YTIgMiAwIDAgMC0yLjczLjczbC0uMjIuMzhhMiAyIDAgMCAwIC43MyAyLjczbC4xNS4xYTIgMiAwIDAgMSAxIDEuNzJ2LjUxYTIgMiAwIDAgMS0xIDEuNzRsLS4xNS4wOWEyIDIgMCAwIDAtLjczIDIuNzNsLjIyLjM4YTIgMiAwIDAgMCAyLjczLjczbC4xNS0uMDhhMiAyIDAgMCAxIDIgMGwuNDMuMjVhMiAyIDAgMCAxIDEgMS43M1YyMGEyIDIgMCAwIDAgMiAyaC40NGEyIDIgMCAwIDAgMi0ydi0uMThhMiAyIDAgMCAxIDEtMS43M2wuNDMtLjI1YTIgMiAwIDAgMSAyIDBsLjE1LjA4YTIgMiAwIDAgMCAyLjczLS43M2wuMjItLjM5YTIgMiAwIDAgMC0uNzMtMi43M2wtLjE1LS4wOGEyIDIgMCAwIDEtMS0xLjc0di0uNWEyIDIgMCAwIDEgMS0xLjc0bC4xNS0uMDlhMiAyIDAgMCAwIC43My0yLjczbC0uMjItLjM4YTIgMiAwIDAgMC0yLjczLS43M2wtLjE1LjA4YTIgMiAwIDAgMS0yIDBsLS40My0uMjVhMiAyIDAgMCAxLTEtMS43M1Y0YTIgMiAwIDAgMC0yLTJ6IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/settings\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings = createLucideIcon('Settings', __iconNode);\n\nexport default Settings;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Image as ImageIcon, User, BookOpen, MapPin, Users, Settings, FileText, Video } from 'lucide-react';\nimport ImageUploadSection from './ImageUploadSection';\nimport ProfessorImageUploadSection from './ProfessorImageUploadSection';\nimport VideoSection from './VideoSection';\nimport HistoriaProfessorManager from '../AdminPanel/HistoriaProfessorManager';\n\nconst EditEscolaPanel = ({ escola, onClose, onSave }) => {\n  const [nomeEscola, setNomeEscola] = useState(escola?.Escola || '');\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('dados-basicos');\n  \n  // Detectar modo de criação vs. edição\n  const isCreating = !escola?.id;\n  const isEditing = !!escola?.id;\n  \n  console.log('render painel', activeTab, 'modo:', isCreating ? 'criação' : 'edição');\n\n  // Configuração das abas\n  const tabs = [\n    { \n      id: 'dados-basicos', \n      label: 'Dados Básicos', \n      icon: BookOpen,\n      description: 'Informações principais da escola'\n    },\n    { \n      id: 'imagens-escola', \n      label: 'Imagens da Escola', \n      icon: ImageIcon,\n      description: 'Upload e gerenciamento de imagens da escola (máx. 10)'\n    },\n    { \n      id: 'imagens-professores', \n      label: 'Imagens dos Professores', \n      icon: User,\n      description: 'Upload e gerenciamento de imagens dos professores (máx. 5)'\n    },\n    { \n      id: 'video', \n      label: 'Vídeo', \n      icon: Video,\n      description: 'Link do vídeo e gerenciamento de títulos'\n    },\n    { \n      id: 'localizacao', \n      label: 'Localização', \n      icon: MapPin,\n      description: 'Coordenadas e endereço da escola'\n    },\n    { \n      id: 'gestao', \n      label: 'Gestão', \n      icon: Users,\n      description: 'Informações sobre gestão e funcionários'\n    },\n    { \n      id: 'configuracoes', \n      label: 'Configurações', \n      icon: Settings,\n      description: 'Configurações avançadas da escola'\n    },\n    { \n      id: 'historia-professores', \n      label: 'História dos Professores', \n      icon: BookOpen,\n      description: 'Gerencie as histórias dos professores desta escola'\n    },\n  ];\n\n  const handleSubmit = async (e) => {\n    console.log('submit painel');\n    e.preventDefault();\n    if (!nomeEscola.trim()) {\n      setError('O nome da escola é obrigatório.');\n      return;\n    }\n    setError('');\n    setIsSaving(true);\n    try {\n      await onSave({ ...escola, Escola: nomeEscola });\n      onClose();\n    } catch (err) {\n      setError('Erro ao salvar.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Handler para atualização de imagens\n  const handleImagesUpdate = () => {\n    // Aqui você pode adicionar lógica para atualizar o PainelInformacoes\n    // Por exemplo, disparar um evento ou callback para refresh\n    console.log('Imagens atualizadas - PainelInformacoes deve ser atualizado');\n  };\n\n  // Handler para atualização de títulos\n  const handleTitulosUpdate = () => {\n    console.log('Títulos atualizados - PainelInformacoes deve ser atualizado');\n  };\n\n  // Renderizar conteúdo da aba ativa\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'dados-basicos':\n        return (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Nome da Escola *\n              </label>\n              <input\n                type=\"text\"\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                value={nomeEscola}\n                onChange={e => setNomeEscola(e.target.value)}\n                disabled={isSaving}\n                placeholder=\"Digite o nome da escola\"\n              />\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Município\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.['Município'] || ''}\n                  onChange={e => onSave({ ...escola, 'Município': e.target.value })}\n                  placeholder=\"Nome do município\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Terra Indígena (TI)\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.['Terra Indigena (TI)'] || ''}\n                  onChange={e => onSave({ ...escola, 'Terra Indigena (TI)': e.target.value })}\n                  placeholder=\"Nome da terra indígena\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Endereço\n              </label>\n              <textarea\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                rows=\"3\"\n                value={escola?.['Endereço'] || ''}\n                onChange={e => onSave({ ...escola, 'Endereço': e.target.value })}\n                placeholder=\"Endereço completo da escola\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Turnos de Funcionamento\n              </label>\n              <input\n                type=\"text\"\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                value={escola?.turnos_funcionamento || ''}\n                onChange={e => onSave({ ...escola, turnos_funcionamento: e.target.value })}\n                placeholder=\"Ex: Diurno, Noturno, Vespertino, etc.\"\n              />\n            </div>\n          </div>\n        );\n\n      case 'imagens-escola':\n        return (\n          <ImageUploadSection \n            escolaId={escola?.id} \n            onImagesUpdate={handleImagesUpdate}\n          />\n        );\n\n      case 'imagens-professores':\n        return (\n          <ProfessorImageUploadSection \n            escolaId={escola?.id} \n            onImagesUpdate={handleImagesUpdate}\n          />\n        );\n\n      case 'video':\n        return (\n          <VideoSection \n            escolaId={escola?.id}\n            videoUrl={escola?.['link_para_videos'] || ''}\n            onVideoUrlChange={(value) => onSave({ ...escola, 'link_para_videos': value })}\n            onTitulosUpdate={handleTitulosUpdate}\n          />\n        );\n\n      case 'localizacao':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Latitude\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"any\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.latitude || ''}\n                  onChange={e => onSave({ ...escola, latitude: parseFloat(e.target.value) || null })}\n                  placeholder=\"Ex: -23.5505\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Longitude\n                </label>\n                <input\n                  type=\"number\"\n                  step=\"any\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.longitude || ''}\n                  onChange={e => onSave({ ...escola, longitude: parseFloat(e.target.value) || null })}\n                  placeholder=\"Ex: -46.6333\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">\n                <strong>Dica:</strong> Use o Google Maps para encontrar as coordenadas exatas da escola.\n                Clique com o botão direito no local da escola e selecione as coordenadas.\n              </p>\n            </div>\n          </div>\n        );\n\n      case 'gestao':\n        return (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Gestão/Nome\n              </label>\n              <input\n                type=\"text\"\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                value={escola?.gestao || ''}\n                onChange={e => onSave({ ...escola, gestao: e.target.value })}\n                placeholder=\"Nome da gestão atual\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Nome do Professor Principal\n              </label>\n              <input\n                type=\"text\"\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                value={escola?.nome_professor || ''}\n                onChange={e => onSave({ ...escola, nome_professor: e.target.value })}\n                placeholder=\"Nome do professor principal\"\n              />\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Professores Indígenas\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.professores_indigenas || ''}\n                  onChange={e => onSave({ ...escola, professores_indigenas: e.target.value })}\n                  placeholder=\"Quantidade ou nomes\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Professores Não Indígenas\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  value={escola?.professores_nao_indigenas || ''}\n                  onChange={e => onSave({ ...escola, professores_nao_indigenas: e.target.value })}\n                  placeholder=\"Quantidade ou nomes\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'infraestrutura':\n        return (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Merenda diferenciada\n              </label>\n              <textarea\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                rows=\"3\"\n                value={escola?.merenda_diferenciada || ''}\n                onChange={e => onSave({ ...escola, merenda_diferenciada: e.target.value })}\n                placeholder=\"Descreva a situação do fornecimento de merenda (ex: se a escola recebe, se há interrupções, etc.)\"\n              />\n            </div>\n          </div>\n        );\n\n      case 'configuracoes':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800\">\n                <strong>Configurações Avançadas:</strong> Esta seção será implementada em breve.\n                Aqui você poderá configurar permissões, notificações e outras opções avançadas.\n              </p>\n            </div>\n          </div>\n        );\n\n      case 'historia-professores':\n        return (\n          <div className=\"space-y-4\">\n            <HistoriaProfessorManager escolaId={escola?.id} escolaNome={escola?.Escola} />\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  // Detectar se é mobile\n  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;\n\n  console.log('activeTab', activeTab);\n  return (\n    <div className={`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 ${isMobile ? 'p-0' : ''}`}\n      style={{\n        padding: isMobile ? 0 : undefined,\n      }}\n    >\n      <div\n        className={`bg-white rounded-lg shadow-xl w-full max-w-6xl h-[90vh] flex flex-col ${isMobile ? 'rounded-none h-screen max-w-full' : ''}`}\n        style={{\n          width: isMobile ? '100vw' : 'min(100vw, 640px)',\n          height: isMobile ? '100vh' : 'min(90vh, 900px)',\n          maxWidth: isMobile ? '100vw' : '96vw',\n          maxHeight: isMobile ? '100vh' : '90vh',\n          overflow: 'hidden',\n        }}\n      >\n      {/* Header */}\n        <div className={`flex items-center justify-between ${isMobile ? 'p-4' : 'p-6'} border-b`}>\n            <h2 className={`text-xl font-semibold text-gray-900 ${isMobile ? 'text-lg' : ''}`}>\n              {isCreating ? 'Nova Escola' : `Editar Escola: ${escola?.Escola || ''}`}\n            </h2>\n          <button\n            onClick={onClose}\n            className={`text-gray-400 hover:text-gray-600 ${isMobile ? 'w-8 h-8' : ''}`}\n            style={isMobile ? { fontSize: 24 } : {}}\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n      </div>\n\n        {/* Tabs */}\n        <nav\n          className={`flex border-b bg-gray-50 ${isMobile ? 'overflow-x-auto no-scrollbar' : ''}`}\n          style={isMobile ? { WebkitOverflowScrolling: 'touch', scrollBehavior: 'smooth' } : {}}\n          role=\"tablist\"\n          aria-label=\"Abas de edição da escola\"\n        >\n          {tabs.map((tab, idx) => {\n            const Icon = tab.icon;\n            const isActive = activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                id={`tab-${tab.id}`}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${\n                  isActive\n                    ? 'text-blue-700 border-b-4 border-blue-600 bg-white shadow-sm' // feedback visual forte\n                    : 'text-gray-600 hover:text-blue-700 hover:bg-blue-50'\n                } ${isMobile ? 'px-2 py-2 text-xs' : ''}`}\n                title={tab.description}\n                role=\"tab\"\n                aria-selected={isActive}\n                aria-controls={`tabpanel-${tab.id}`}\n                tabIndex={isActive ? 0 : -1}\n              >\n                <Icon className={`w-5 h-5 ${isActive ? 'text-blue-700' : 'text-gray-400'}`} />\n                <span className={`${isMobile ? 'hidden xs:inline' : ''}`}>{tab.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n\n        {/* Content */}\n        <div className={`flex-1 overflow-y-auto ${isMobile ? 'p-3' : 'p-6'}`} style={isMobile ? { fontSize: '1rem' } : {}}>\n          {/* ABA HISTÓRIA DOS PROFESSORES: RENDERIZA FORA DO <form> GLOBAL! */}\n          {activeTab === 'historia-professores' ? (\n            // Renderiza fora do <form> para evitar forms aninhados\n            renderTabContent()\n          ) : (\n            <form onSubmit={handleSubmit}>\n              {/* Conteúdo da aba ativa */}\n              <div className=\"min-h-[300px] md:min-h-[400px]\" id={`tabpanel-${activeTab}`} role=\"tabpanel\" aria-labelledby={`tab-${activeTab}`}> \n                {renderTabContent()}\n              </div>\n\n              {/* Mensagens de erro */}\n              {error && (\n                <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-red-700 text-sm\">{error}</p>\n                </div>\n              )}\n\n              {/* Botões de ação */}\n              <div className={`flex gap-3 mt-6 pt-6 border-t border-gray-200 ${isMobile ? 'flex-col' : ''}`}\n                style={isMobile ? { gap: 8 } : {}}>\n                <button\n                  type=\"submit\"\n                  className={`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${isMobile ? 'w-full text-base' : ''}`}\n                  disabled={isSaving}\n                >\n                  {isSaving ? 'Salvando...' : (isCreating ? 'Criar Escola' : 'Salvar Alterações')}\n                </button>\n                <button\n                  type=\"button\"\n                  className={`px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors ${isMobile ? 'w-full text-base' : ''}`}\n                  onClick={onClose}\n                  disabled={isSaving}\n                >\n                  Cancelar\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nEditEscolaPanel.propTypes = {\n  escola: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired,\n};\n\nexport default EditEscolaPanel;","import { supabase } from '../supabaseClient';\n\nexport const addProfessorImageMeta = async (meta) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .insert([meta])\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const updateProfessorImageMeta = async (id, updates) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .update(updates)\n    .eq('id', id)\n    .select()\n    .single();\n  if (error) throw error;\n  return data;\n};\n\nexport const getProfessorImageMetaByUrl = async (imagem_url, escola_id) => {\n  const { data, error } = await supabase\n    .from('imagens_professores')\n    .select('*')\n    .eq('imagem_url', imagem_url)\n    .eq('escola_id', escola_id)\n    .eq('ativo', true)\n    .single();\n  if (error && error.code !== 'PGRST116') throw error;\n  return data || null;\n}; ","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, User, Trash2, Edit3, Check, AlertCircle, Save } from 'lucide-react';\nimport { \n  uploadProfessorImage, \n  getEscolaImages, \n  deleteImage, \n  updateImageDescription,\n  checkImageLimit \n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable\n} from '../../services/legendasService';\nimport {\n  addProfessorImageMeta,\n  updateProfessorImageMeta,\n  getProfessorImageMetaByUrl\n} from '../../services/professorImageMetaService';\n\nconst ProfessorImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [imageLimit, setImageLimit] = useState({ current: 0, limit: 5, canUpload: true });\n  const [editingImage, setEditingImage] = useState(null);\n  const [editingDescription, setEditingDescription] = useState('');\n  const [genero, setGenero] = useState('professor');\n  const [titulo, setTitulo] = useState('');\n\n  // Buscar imagens existentes dos professores\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-professores');\n      setExistingImages(images);\n      \n      // Verificar limite\n      const limit = await checkImageLimit(escolaId, 'imagens-professores');\n      setImageLimit(limit);\n    } catch (err) {\n      console.error('Erro ao buscar imagens dos professores:', err);\n      setError('Erro ao carregar imagens dos professores');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchExistingImages();\n  }, [fetchExistingImages]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos (professores)...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length) return;\n      console.log('Buscando legendas para', existingImages.length, 'imagens de professores');\n      const legendasMap = {};\n      for (const img of existingImages) {\n        console.log('Buscando legenda para imagem de professor:', img.url);\n        const legenda = await getLegendaByImageUrl(img.url, escolaId, 'professor');\n        console.log('Legenda encontrada para professor:', legenda);\n        legendasMap[img.url] = legenda;\n      }\n      setExistingImages(prev => prev.map(img => ({\n        ...img,\n        legendaData: legendasMap[img.url] || {\n          legenda: '',\n          descricao_detalhada: '',\n          autor_foto: '',\n          data_foto: '',\n          categoria: 'geral',\n        }\n      })));\n    };\n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens após 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleção de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Verificar se ainda pode fazer upload\n    if (!imageLimit.canUpload) {\n      setError(`Limite de ${imageLimit.limit} imagens dos professores atingido. Remova algumas imagens antes de adicionar novas.`);\n      return;\n    }\n\n    // Verificar se não excederá o limite\n    const totalImages = existingImages.length + selectedFiles.length + files.length;\n    if (totalImages > imageLimit.limit) {\n      setError(`Você pode adicionar no máximo ${imageLimit.limit - existingImages.length - selectedFiles.length} imagens dos professores.`);\n      return;\n    }\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" não é uma imagem válida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\" é muito grande. Tamanho máximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Verificar se ainda pode fazer upload\n    if (!imageLimit.canUpload) {\n      setError(`Limite de ${imageLimit.limit} imagens dos professores atingido. Remova algumas imagens antes de adicionar novas.`);\n      return;\n    }\n\n    // Verificar se não excederá o limite\n    const totalImages = existingImages.length + selectedFiles.length + files.length;\n    if (totalImages > imageLimit.limit) {\n      setError(`Você pode adicionar no máximo ${imageLimit.limit - existingImages.length - selectedFiles.length} imagens dos professores.`);\n      return;\n    }\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, [imageLimit, existingImages.length, selectedFiles.length]);\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadProfessorImage(file, escolaId, '', genero, titulo);\n        uploadedImages.push(uploadedImage);\n\n        // Criar registro em imagens_professores\n        await addProfessorImageMeta({\n          escola_id: escolaId,\n          imagem_url: uploadedImage.url,\n          nome_arquivo: file.name,\n          autor: '',\n          ativo: true\n        });\n      }\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => [...prev, ...uploadedImages]);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) do(s) professor(es) carregada(s) com sucesso!`);\n\n      // Atualizar limite\n      const newLimit = await checkImageLimit(escolaId, 'imagens-professores');\n      setImageLimit(newLimit);\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem do professor?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-professores');\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.filter(img => img.id !== imageId));\n      \n      // Atualizar limite\n      const newLimit = await checkImageLimit(escolaId, 'imagens-professores');\n      setImageLimit(newLimit);\n\n      setSuccess('Imagem do professor excluída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Atualizar descrição da imagem\n  const handleDescriptionChange = async (imageId, novaDescricao) => {\n    if (!novaDescricao.trim()) return;\n\n    try {\n      await updateImageDescription(imageId, novaDescricao);\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.map(img => \n        img.id === imageId \n          ? { ...img, descricao: novaDescricao.trim() }\n          : img\n      ));\n\n      setSuccess('Legenda atualizada com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao atualizar descrição:', err);\n      setError(`Erro ao atualizar legenda: ${err.message}`);\n    }\n  };\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda de professor ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'professor');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...legendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualização:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda de professor atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...legendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'professor'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda de professor criada:', novaLegenda);\n      }\n      \n      // Atualizar imagens_professores\n      console.log('Atualizando metadados da imagem...');\n      let meta = await getProfessorImageMetaByUrl(image.publicUrl, escolaId);\n      if (meta) {\n        console.log('Metadados encontrados:', meta);\n        await updateProfessorImageMeta(meta.id, {\n          autor: legendaData.autor_foto,\n          updated_at: new Date().toISOString()\n        });\n        console.log('Metadados atualizados com sucesso');\n      } else {\n        console.log('Nenhum metadado encontrado para atualizar');\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda de professor ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      setError('Erro ao salvar legenda: ' + err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-50 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n          <span className=\"ml-2 text-gray-600\">Carregando imagens dos professores...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <User className=\"w-5 h-5 text-green-600\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">Imagens dos Professores</h3>\n        </div>\n        <div className=\"text-sm text-gray-500\">\n          {imageLimit.current}/{imageLimit.limit} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <AlertCircle className=\"w-5 h-5 text-red-600\" />\n          <span className=\"text-red-700\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg\">\n          <Check className=\"w-5 h-5 text-green-600\" />\n          <span className=\"text-green-700\">{success}</span>\n        </div>\n      )}\n\n      {/* Área de Upload */}\n      {imageLimit.canUpload && (\n        <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-300 bg-gray-50' \n                : 'border-green-300 bg-green-50 hover:border-green-400 hover:bg-green-100'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-green-600 mx-auto mb-2\" />\n            <p className=\"text-gray-600 mb-2\">\n              Arraste imagens dos professores aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-500 mb-4\">\n              JPG, PNG, WEBP, GIF • Máximo 5MB por arquivo • Máximo 5 imagens\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-600\">\n                <span>Fazendo upload das imagens dos professores...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-green-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-900\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-600 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-900\">Imagens dos Professores ({existingImages.length})</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image) => (\n              <div key={image.id} className=\"bg-white border rounded-lg overflow-hidden shadow-sm\">\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem do professor'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Overlay de ações */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-600 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Descrição Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrição detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotógrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando não há imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <User className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\n          <p>Nenhuma imagem dos professores adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar os professores da escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nProfessorImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ProfessorImageUploadSection; ","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['circle', { cx: '9', cy: '9', r: '2', key: 'af1f0g' }],\n  ['path', { d: 'm21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21', key: '1xmnt7' }],\n];\n\n/**\n * @component @name Image\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iOSIgcj0iMiIgLz4KICA8cGF0aCBkPSJtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Image = createLucideIcon('Image', __iconNode);\n\nexport default Image;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['line', { x1: '12', x2: '12', y1: '8', y2: '12', key: '1pkeuh' }],\n  ['line', { x1: '12', x2: '12.01', y1: '16', y2: '16', key: '4dfq90' }],\n];\n\n/**\n * @component @name CircleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjgiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjE2IiB5Mj0iMTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleAlert = createLucideIcon('CircleAlert', __iconNode);\n\nexport default CircleAlert;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', __iconNode);\n\nexport default Plus;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, X, Image as ImageIcon, Trash2, Edit3, Check, AlertCircle, Save } from 'lucide-react';\nimport { \n  uploadEscolaImage, \n  getEscolaImages, \n  deleteImage, \n  updateImageDescription,\n  checkImageLimit \n} from '../../services/escolaImageService';\nimport { \n  getLegendaByImageUrl, \n  addLegendaFoto, \n  updateLegendaFoto,\n  testLegendasTable\n} from '../../services/legendasService';\n\nconst ImageUploadSection = ({ escolaId, onImagesUpdate }) => {\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [existingImages, setExistingImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [imageLimit, setImageLimit] = useState({ current: 0, limit: 10, canUpload: true });\n  const [editingImage, setEditingImage] = useState(null);\n  const [editingDescription, setEditingDescription] = useState('');\n\n  // Buscar imagens existentes\n  const fetchExistingImages = useCallback(async () => {\n    if (!escolaId) return;\n    \n    try {\n      setLoading(true);\n      const images = await getEscolaImages(escolaId, 'imagens-das-escolas');\n      setExistingImages(images);\n      \n      // Verificar limite\n      const limit = await checkImageLimit(escolaId, 'imagens-das-escolas');\n      setImageLimit(limit);\n    } catch (err) {\n      console.error('Erro ao buscar imagens:', err);\n      setError('Erro ao carregar imagens existentes');\n    } finally {\n      setLoading(false);\n    }\n  }, [escolaId]);\n\n  useEffect(() => {\n    fetchExistingImages();\n  }, [fetchExistingImages]);\n\n  // Testar estrutura da tabela quando o componente for carregado\n  useEffect(() => {\n    if (escolaId) {\n      console.log('Testando estrutura da tabela legendas_fotos...');\n      testLegendasTable();\n    }\n  }, [escolaId]);\n\n  // Buscar legendas para as imagens existentes\n  useEffect(() => {\n    const fetchLegendas = async () => {\n      if (!existingImages.length) return;\n      console.log('Buscando legendas para', existingImages.length, 'imagens');\n      const legendasMap = {};\n      for (const img of existingImages) {\n        console.log('Buscando legenda para imagem:', img.url);\n        const legenda = await getLegendaByImageUrl(img.url, escolaId, 'escola');\n        console.log('Legenda encontrada:', legenda);\n        legendasMap[img.url] = legenda;\n      }\n      setExistingImages(prev => prev.map(img => ({\n        ...img,\n        legendaData: legendasMap[img.url] || {\n          legenda: '',\n          descricao_detalhada: '',\n          autor_foto: '',\n          data_foto: '',\n          categoria: 'geral',\n        }\n      })));\n    };\n    fetchLegendas();\n    // eslint-disable-next-line\n  }, [existingImages.length, escolaId]);\n\n  // Limpar mensagens após 5 segundos\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError('');\n        setSuccess('');\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handler para seleção de arquivos\n  const handleFileSelect = (event) => {\n    const files = Array.from(event.target.files);\n    if (files.length === 0) return;\n\n    // Verificar se ainda pode fazer upload\n    if (!imageLimit.canUpload) {\n      setError(`Limite de ${imageLimit.limit} imagens atingido. Remova algumas imagens antes de adicionar novas.`);\n      return;\n    }\n\n    // Verificar se não excederá o limite\n    const totalImages = existingImages.length + selectedFiles.length + files.length;\n    if (totalImages > imageLimit.limit) {\n      setError(`Você pode adicionar no máximo ${imageLimit.limit - existingImages.length - selectedFiles.length} imagens.`);\n      return;\n    }\n\n    // Validar arquivos\n    const validFiles = files.filter(file => {\n      const isValidType = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'].includes(file.type);\n      const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB\n      \n      if (!isValidType) {\n        setError(`Arquivo \"${file.name}\" não é uma imagem válida. Use apenas JPG, PNG, WEBP ou GIF.`);\n      }\n      if (!isValidSize) {\n        setError(`Arquivo \"${file.name}\" é muito grande. Tamanho máximo: 5MB.`);\n      }\n      \n      return isValidType && isValidSize;\n    });\n\n    if (validFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...validFiles]);\n      setError('');\n    }\n  };\n\n  // Handler para drag & drop\n  const handleDrop = useCallback((event) => {\n    event.preventDefault();\n    const files = Array.from(event.dataTransfer.files);\n    \n    if (files.length === 0) return;\n\n    // Verificar se ainda pode fazer upload\n    if (!imageLimit.canUpload) {\n      setError(`Limite de ${imageLimit.limit} imagens atingido. Remova algumas imagens antes de adicionar novas.`);\n      return;\n    }\n\n    // Verificar se não excederá o limite\n    const totalImages = existingImages.length + selectedFiles.length + files.length;\n    if (totalImages > imageLimit.limit) {\n      setError(`Você pode adicionar no máximo ${imageLimit.limit - existingImages.length - selectedFiles.length} imagens.`);\n      return;\n    }\n\n    // Filtrar apenas imagens\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n    if (imageFiles.length > 0) {\n      setSelectedFiles(prev => [...prev, ...imageFiles]);\n      setError('');\n    }\n  }, [imageLimit, existingImages.length, selectedFiles.length]);\n\n  const handleDragOver = useCallback((event) => {\n    event.preventDefault();\n  }, []);\n\n  // Remover arquivo selecionado\n  const removeSelectedFile = (index) => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Upload das imagens selecionadas\n  const handleUpload = async () => {\n    if (selectedFiles.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n    setError('');\n\n    try {\n      const uploadedImages = [];\n      \n      for (let i = 0; i < selectedFiles.length; i++) {\n        const file = selectedFiles[i];\n        const progress = ((i + 1) / selectedFiles.length) * 100;\n        setUploadProgress(progress);\n\n        const uploadedImage = await uploadEscolaImage(file, escolaId);\n        uploadedImages.push(uploadedImage);\n      }\n\n      // Atualizar lista de imagens\n      setExistingImages(prev => [...prev, ...uploadedImages]);\n      setSelectedFiles([]);\n      setUploadProgress(0);\n      setSuccess(`${uploadedImages.length} imagem(ns) carregada(s) com sucesso!`);\n\n      // Atualizar limite\n      const newLimit = await checkImageLimit(escolaId, 'imagens-das-escolas');\n      setImageLimit(newLimit);\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro no upload:', err);\n      setError(`Erro ao fazer upload: ${err.message}`);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Deletar imagem existente\n  const handleDeleteImage = async (imageId, filePath) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta imagem?')) return;\n\n    try {\n      await deleteImage(imageId, filePath, 'imagens-das-escolas');\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.filter(img => img.id !== imageId));\n      \n      // Atualizar limite\n      const newLimit = await checkImageLimit(escolaId, 'imagens-das-escolas');\n      setImageLimit(newLimit);\n\n      setSuccess('Imagem excluída com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao deletar imagem:', err);\n      setError(`Erro ao excluir imagem: ${err.message}`);\n    }\n  };\n\n  // Atualizar descrição da imagem\n  const handleDescriptionChange = async (imageId, novaDescricao) => {\n    if (!novaDescricao.trim()) return;\n\n    try {\n      await updateImageDescription(imageId, novaDescricao);\n      \n      // Atualizar lista\n      setExistingImages(prev => prev.map(img => \n        img.id === imageId \n          ? { ...img, descricao: novaDescricao.trim() }\n          : img\n      ));\n\n      setSuccess('Legenda atualizada com sucesso!');\n\n      // Notificar componente pai\n      if (onImagesUpdate) {\n        onImagesUpdate();\n      }\n\n    } catch (err) {\n      console.error('Erro ao atualizar descrição:', err);\n      setError(`Erro ao atualizar legenda: ${err.message}`);\n    }\n  };\n\n  // Atualizar legenda inline\n  const handleLegendaFieldChange = (imageId, field, value) => {\n    setExistingImages(prev => prev.map(img =>\n      img.id === imageId\n        ? { ...img, legendaData: { ...img.legendaData, [field]: value } }\n        : img\n    ));\n  };\n\n  const handleLegendaSave = async (image) => {\n    console.log('=== DEBUG: Salvando legenda ===');\n    console.log('Imagem completa:', image);\n    \n    const imagem_url_relativa = image.url;\n    const legendaData = image.legendaData;\n    console.log('URL relativa:', imagem_url_relativa);\n    console.log('Dados da legenda:', legendaData);\n    console.log('Escola ID:', escolaId);\n    \n    try {\n      console.log('Buscando legenda existente...');\n      let legenda = await getLegendaByImageUrl(imagem_url_relativa, escolaId, 'escola');\n      console.log('Legenda existente encontrada:', legenda);\n      \n      if (legenda) {\n        console.log('Atualizando legenda existente...');\n        const updateData = {\n          ...legendaData,\n          updated_at: new Date().toISOString()\n        };\n        console.log('Dados para atualização:', updateData);\n        \n        const resultado = await updateLegendaFoto(legenda.id, updateData);\n        console.log('Legenda atualizada com sucesso:', resultado);\n      } else {\n        console.log('Criando nova legenda...');\n        const novaLegendaData = {\n          escola_id: escolaId,\n          imagem_url: imagem_url_relativa,\n          ...legendaData,\n          ativo: true,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n          tipo_foto: 'escola'\n        };\n        console.log('Dados para nova legenda:', novaLegendaData);\n        \n        const novaLegenda = await addLegendaFoto(novaLegendaData);\n        console.log('Nova legenda criada:', novaLegenda);\n      }\n      \n      setSuccess('Legenda salva com sucesso!');\n      if (onImagesUpdate) {\n        console.log('Chamando onImagesUpdate...');\n        onImagesUpdate();\n      }\n    } catch (err) {\n      console.error('=== ERRO ao salvar legenda ===');\n      console.error('Erro completo:', err);\n      console.error('Mensagem de erro:', err.message);\n      console.error('Stack trace:', err.stack);\n      setError('Erro ao salvar legenda: ' + err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-50 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-2 text-gray-600\">Carregando imagens...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <ImageIcon className=\"w-5 h-5 text-blue-600\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">Imagens da Escola</h3>\n        </div>\n        <div className=\"text-sm text-gray-500\">\n          {imageLimit.current}/{imageLimit.limit} imagens\n        </div>\n      </div>\n\n      {/* Mensagens */}\n      {error && (\n        <div className=\"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <AlertCircle className=\"w-5 h-5 text-red-600\" />\n          <span className=\"text-red-700\">{error}</span>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg\">\n          <Check className=\"w-5 h-5 text-green-600\" />\n          <span className=\"text-green-700\">{success}</span>\n        </div>\n      )}\n\n      {/* Área de Upload */}\n      {imageLimit.canUpload && (\n        <div className=\"space-y-4\">\n          {/* Drag & Drop */}\n          <div\n            className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n              uploading \n                ? 'border-gray-300 bg-gray-50' \n                : 'border-blue-300 bg-blue-50 hover:border-blue-400 hover:bg-blue-100'\n            }`}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          >\n            <Upload className=\"w-8 h-8 text-blue-600 mx-auto mb-2\" />\n            <p className=\"text-gray-600 mb-2\">\n              Arraste imagens aqui ou clique para selecionar\n            </p>\n            <p className=\"text-sm text-gray-500 mb-4\">\n              JPG, PNG, WEBP, GIF • Máximo 5MB por arquivo\n            </p>\n            \n            <label className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\">\n              <input\n                type=\"file\"\n                multiple\n                accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                disabled={uploading}\n              />\n              Selecionar Arquivos\n            </label>\n          </div>\n\n          {/* Progress Bar */}\n          {uploading && (\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm text-gray-600\">\n                <span>Fazendo upload...</span>\n                <span>{Math.round(uploadProgress)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${uploadProgress}%` }}\n                ></div>\n              </div>\n            </div>\n          )}\n\n          {/* Arquivos Selecionados */}\n          {selectedFiles.length > 0 && (\n            <div className=\"space-y-3\">\n              <h4 className=\"font-medium text-gray-900\">Arquivos selecionados ({selectedFiles.length})</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                {selectedFiles.map((file, index) => (\n                  <div key={index} className=\"relative group\">\n                    <img\n                      src={URL.createObjectURL(file)}\n                      alt={file.name}\n                      className=\"w-full h-24 object-cover rounded-lg border\"\n                    />\n                    <button\n                      onClick={() => removeSelectedFile(index)}\n                      className=\"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                    <p className=\"text-xs text-gray-600 mt-1 truncate\">{file.name}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={handleUpload}\n                disabled={uploading}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? 'Fazendo Upload...' : 'Fazer Upload'}\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Imagens Existentes */}\n      {existingImages.length > 0 && (\n        <div className=\"space-y-4\">\n          <h4 className=\"font-medium text-gray-900\">Imagens da Escola ({existingImages.length})</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {existingImages.map((image) => (\n              <div key={image.id} className=\"bg-white border rounded-lg overflow-hidden shadow-sm\">\n                {/* Imagem */}\n                <div className=\"relative group\">\n                <img\n                  src={image.publicUrl}\n                  alt={image.descricao || 'Imagem da escola'}\n                    className=\"w-full h-48 object-cover\"\n                />\n                \n                {/* Overlay de ações */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center\">\n                  <div className=\"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button\n                      onClick={() => handleDeleteImage(image.id, image.url)}\n                      className=\"p-2 bg-red-600 text-white rounded-full hover:bg-red-700\"\n                      title=\"Excluir imagem\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Campos de legenda integrados com legendas_fotos */}\n                <div className=\"p-4 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Legenda\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={image.legendaData?.legenda || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'legenda', e.target.value)}\n                    placeholder=\"Digite a legenda da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Descrição Detalhada\n                  </label>\n                  <textarea\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={image.legendaData?.descricao_detalhada || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'descricao_detalhada', e.target.value)}\n                    placeholder=\"Descrição detalhada da imagem...\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Autor da Foto\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={image.legendaData?.autor_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'autor_foto', e.target.value)}\n                    placeholder=\"Nome do fotógrafo\"\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Data da Foto\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={image.legendaData?.data_foto || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'data_foto', e.target.value)}\n                  />\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Categoria\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={image.legendaData?.categoria || ''}\n                    onChange={e => handleLegendaFieldChange(image.id, 'categoria', e.target.value)}\n                    placeholder=\"Digite a categoria da imagem...\"\n                  />\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => handleLegendaSave(image)}\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                      type=\"button\"\n                    >\n                      <Save className=\"w-5 h-5\" /> Salvar Legenda\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Mensagem quando não há imagens */}\n      {existingImages.length === 0 && !uploading && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <ImageIcon className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\n          <p>Nenhuma imagem adicionada ainda.</p>\n          <p className=\"text-sm\">Adicione imagens para mostrar a escola.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nImageUploadSection.propTypes = {\n  escolaId: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onImagesUpdate: PropTypes.func\n};\n\nexport default ImageUploadSection; ","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5',\n      key: 'ftymec',\n    },\n  ],\n  ['rect', { x: '2', y: '6', width: '14', height: '12', rx: '2', key: '158x01' }],\n];\n\n/**\n * @component @name Video\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTMgNS4yMjMgMy40ODJhLjUuNSAwIDAgMCAuNzc3LS40MTZWNy44N2EuNS41IDAgMCAwLS43NTItLjQzMkwxNiAxMC41IiAvPgogIDxyZWN0IHg9IjIiIHk9IjYiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxMiIgcng9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/video\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Video = createLucideIcon('Video', __iconNode);\n\nexport default Video;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49',\n      key: 'ct8e1f',\n    },\n  ],\n  ['path', { d: 'M14.084 14.158a3 3 0 0 1-4.242-4.242', key: '151rxh' }],\n  [\n    'path',\n    {\n      d: 'M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143',\n      key: '13bj9a',\n    },\n  ],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n];\n\n/**\n * @component @name EyeOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuNzMzIDUuMDc2YTEwLjc0NCAxMC43NDQgMCAwIDEgMTEuMjA1IDYuNTc1IDEgMSAwIDAgMSAwIC42OTYgMTAuNzQ3IDEwLjc0NyAwIDAgMS0xLjQ0NCAyLjQ5IiAvPgogIDxwYXRoIGQ9Ik0xNC4wODQgMTQuMTU4YTMgMyAwIDAgMS00LjI0Mi00LjI0MiIgLz4KICA8cGF0aCBkPSJNMTcuNDc5IDE3LjQ5OWExMC43NSAxMC43NSAwIDAgMS0xNS40MTctNS4xNTEgMSAxIDAgMCAxIDAtLjY5NiAxMC43NSAxMC43NSAwIDAgMSA0LjQ0Ni01LjE0MyIgLz4KICA8cGF0aCBkPSJtMiAyIDIwIDIwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eye-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst EyeOff = createLucideIcon('EyeOff', __iconNode);\n\nexport default EyeOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm5 12 7-7 7 7', key: 'hav0vg' }],\n  ['path', { d: 'M12 19V5', key: 'x0mq9r' }],\n];\n\n/**\n * @component @name ArrowUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSAxMiA3LTcgNyA3IiAvPgogIDxwYXRoIGQ9Ik0xMiAxOVY1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/arrow-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUp = createLucideIcon('ArrowUp', __iconNode);\n\nexport default ArrowUp;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n  ['path', { d: 'm19 12-7 7-7-7', key: '1idqje' }],\n];\n\n/**\n * @component @name ArrowDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KICA8cGF0aCBkPSJtMTkgMTItNyA3LTctNyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowDown = createLucideIcon('ArrowDown', __iconNode);\n\nexport default ArrowDown;\n","import React, { useState, useEffect } from 'react';\nimport { \n  BookOpen, \n  Plus, \n  Edit3, \n  Trash2, \n  Upload, \n  X, \n  Save, \n  ArrowUp, \n  ArrowDown,\n  Eye,\n  EyeOff\n} from 'lucide-react';\nimport { \n  getHistoriasProfessor, \n  createHistoriaProfessor, \n  updateHistoriaProfessor, \n  deleteHistoriaProfessor,\n  uploadHistoriaProfessorImage,\n  deleteHistoriaProfessorImage\n} from '../../services/historiaProfessorService';\n\nconst HistoriaProfessorManager = ({ escolaId, escolaNome }) => {\n  console.log('render historia manager', { escolaId, escolaNome });\n  const [historias, setHistorias] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingHistoria, setEditingHistoria] = useState(null);\n  const [uploadingImage, setUploadingImage] = useState(null);\n  const [success, setSuccess] = useState('');\n\n  // Form states\n  const [formData, setFormData] = useState({\n    nome_professor: '',\n    historia: '',\n    ordem: 1,\n    ativo: true\n  });\n\n  // Carregar histórias\n  const carregarHistorias = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getHistoriasProfessor(escolaId);\n      setHistorias(data);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (escolaId) {\n      carregarHistorias();\n    }\n  }, [escolaId]);\n\n  // Reset form\n  const resetForm = () => {\n    setFormData({\n      nome_professor: '',\n      historia: '',\n      ordem: 1,\n      ativo: true\n    });\n    setEditingHistoria(null);\n    setShowAddForm(false);\n  };\n\n  // Handle form submit\n  const handleSubmit = async (e) => {\n    console.log('🔍 SUBMIT CHAMADO - ID:', editingHistoria?.id);\n    console.log('📝 Evento recebido:', e);\n    console.log('📝 Evento type:', e.type);\n    console.log('📝 Evento target:', e.target);\n    \n    e.preventDefault();\n    console.log('✅ preventDefault executado');\n    \n    console.log('submit historia', editingHistoria);\n    if (!formData.nome_professor.trim()) {\n      setError('O nome do professor é obrigatório.');\n      return;\n    }\n    if (!formData.historia.trim()) {\n      setError('A história é obrigatória');\n      return;\n    }\n    // Conversão de tipos e preparação do payload\n    const payload = {\n      escola_id: Number(escolaId),\n      nome_professor: formData.nome_professor.trim(),\n      historia: formData.historia.trim(),\n      ordem: Number(formData.ordem) || 1,\n      ativo: Boolean(formData.ativo),\n    };\n    if (editingHistoria) {\n      console.log('Payload enviado para updateHistoriaProfessor:', payload);\n    }\n    console.log('Payload enviado para createHistoriaProfessor:', payload);\n    try {\n      setError('');\n      setSuccess('');\n      if (editingHistoria) {\n        await updateHistoriaProfessor(editingHistoria.id, payload);\n        setSuccess('História atualizada com sucesso!');\n      } else {\n        await createHistoriaProfessor(payload);\n        setSuccess('História criada com sucesso!');\n      }\n      resetForm();\n      carregarHistorias();\n    } catch (err) {\n      setError(err.message);\n      console.log('ERRO AO CRIAR/EDITAR HISTÓRIA:', err);\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async (historiaId) => {\n    if (!window.confirm('Tem certeza que deseja excluir esta história?')) return;\n\n    try {\n      await deleteHistoriaProfessor(historiaId);\n      setSuccess('História excluída com sucesso!');\n      carregarHistorias();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Handle image upload\n  const handleImageUpload = async (historiaId, file) => {\n    try {\n      setUploadingImage(historiaId);\n      setError('');\n      \n      await uploadHistoriaProfessorImage(file, escolaId, historiaId);\n      setSuccess('Imagem carregada com sucesso!');\n      carregarHistorias();\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setUploadingImage(null);\n    }\n  };\n\n  // Handle image delete\n  const handleImageDelete = async (historiaId) => {\n    if (!window.confirm('Tem certeza que deseja remover a imagem desta história?')) return;\n\n    try {\n      await deleteHistoriaProfessorImage(historiaId);\n      setSuccess('Imagem removida com sucesso!');\n      carregarHistorias();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Handle edit\n  const handleEdit = (historia) => {\n    console.log('Entrou em handleEdit:', historia);\n    setEditingHistoria(historia);\n    setFormData({\n      nome_professor: historia.nome_professor || '',\n      historia: historia.historia,\n      ordem: historia.ordem,\n      ativo: historia.ativo\n    });\n    setShowAddForm(true);\n  };\n\n  // Handle reorder\n  const handleReorder = async (historiaId, direction) => {\n    const historiaIndex = historias.findIndex(h => h.id === historiaId);\n    if (historiaIndex === -1) return;\n\n    const newHistorias = [...historias];\n    const targetIndex = direction === 'up' ? historiaIndex - 1 : historiaIndex + 1;\n    \n    if (targetIndex < 0 || targetIndex >= newHistorias.length) return;\n\n    // Trocar posições\n    [newHistorias[historiaIndex], newHistorias[targetIndex]] = \n    [newHistorias[targetIndex], newHistorias[historiaIndex]];\n\n    // Atualizar ordens\n    const updates = newHistorias.map((historia, index) => ({\n      id: historia.id,\n      ordem: index + 1\n    }));\n\n    try {\n      // Atualizar todas as histórias com novas ordens\n      for (const update of updates) {\n        await updateHistoriaProfessor(update.id, { ordem: update.ordem });\n      }\n      \n      setSuccess('Ordem atualizada com sucesso!');\n      carregarHistorias();\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6 bg-gray-50 rounded-lg\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600\"></div>\n          <span className=\"ml-2 text-gray-600\">Carregando histórias do professor...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <BookOpen className=\"w-6 h-6 text-green-700\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">\n            Histórias do Professor - {escolaNome}\n          </h3>\n        </div>\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Nova História\n        </button>\n      </div>\n\n      {/* Messages */}\n      {error && (\n        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-red-600\">{error}</p>\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n          <p className=\"text-green-600\">{success}</p>\n        </div>\n      )}\n\n      {/* Lista de Histórias */}\n      <div className=\"space-y-4\">\n        {historias.length === 0 ? (\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n            <BookOpen className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Nenhuma história do professor cadastrada.</p>\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n            >\n              Criar primeira história\n            </button>\n          </div>\n        ) : (\n          historias.map((historia, index) => {\n            console.log('Renderizando história:', historia);\n            return (\n              <div\n                key={historia.id}\n                className={`p-6 bg-white rounded-lg border ${\n                  !historia.ativo ? 'opacity-60' : ''\n                }`}\n              >\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                        #{historia.ordem}\n                      </span>\n                      {historia.nome_professor && (\n                        <h4 className=\"font-medium text-gray-900\">{historia.nome_professor}</h4>\n                      )}\n                      {!historia.ativo && (\n                        <span className=\"flex items-center gap-1 text-orange-600 text-sm\">\n                          <EyeOff className=\"w-5 h-5\" />\n                          Inativa\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-gray-700 line-clamp-3\">\n                      {historia.historia}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2 ml-4\">\n                    {/* Reorder buttons */}\n                    <button\n                      onClick={() => handleReorder(historia.id, 'up')}\n                      disabled={index === 0}\n                      className=\"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30\"\n                      title=\"Mover para cima\"\n                    >\n                      <ArrowUp className=\"w-5 h-5\" />\n                    </button>\n                    <button\n                      onClick={() => handleReorder(historia.id, 'down')}\n                      disabled={index === historias.length - 1}\n                      className=\"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30\"\n                      title=\"Mover para baixo\"\n                    >\n                      <ArrowDown className=\"w-5 h-5\" />\n                    </button>\n                    {/* Action buttons */}\n                    <button\n                      onClick={() => { console.log('CLICOU NO BOTÃO EDITAR', historia); handleEdit(historia); }}\n                      className=\"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg\"\n                      title=\"Editar\"\n                    >\n                      <Edit3 className=\"w-5 h-5\" />\n                    </button>\n                    <button\n                      onClick={() => handleDelete(historia.id)}\n                      className=\"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg\"\n                      title=\"Excluir\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n\n      {/* Add/Edit Form */}\n      {showAddForm && (\n        <div className=\"p-6 bg-gray-50 rounded-lg border\">\n          {editingHistoria\n            ? console.log('Abrindo formulário de edição:', editingHistoria)\n            : console.log('Abrindo formulário de criação')}\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"text-lg font-medium text-gray-900\">\n              {editingHistoria ? 'Editar História' : 'Nova História'}\n            </h4>\n            <button\n              onClick={resetForm}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Nome do Professor *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.nome_professor}\n                  onChange={(e) => setFormData({ ...formData, nome_professor: e.target.value })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                  placeholder=\"Nome do professor\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Ordem\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  value={formData.ordem}\n                  onChange={(e) => setFormData({ ...formData, ordem: parseInt(e.target.value) || 1 })}\n                  className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                História *\n              </label>\n              <textarea\n                value={formData.historia}\n                onChange={(e) => setFormData({ ...formData, historia: e.target.value })}\n                rows={6}\n                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500\"\n                placeholder=\"Digite a história do professor...\"\n                required\n              />\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.ativo}\n                  onChange={(e) => setFormData({ ...formData, ativo: e.target.checked })}\n                  className=\"rounded border-gray-300 text-green-600 focus:ring-green-500\"\n                />\n                <span className=\"text-sm text-gray-700\">Ativa</span>\n              </label>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                type=\"submit\"\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                <Save className=\"w-5 h-5\" />\n                {editingHistoria ? 'Atualizar' : 'Criar'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={resetForm}\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancelar\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default HistoriaProfessorManager; "],"names":["Upload","createLucideIcon","d","key","points","x1","x2","y1","y2","ESCOLA_IMAGE_CONFIG","BUCKET_NAME","MAX_FILE_SIZE","ALLOWED_TYPES","MAX_IMAGES_PER_SCHOOL","MIN_DIMENSIONS","width","height","PROFESSOR_IMAGE_CONFIG","validateImageFile","file","config","includes","type","isValid","error","concat","map","t","split","toUpperCase","join","size","extension","name","pop","toLowerCase","allowedExtensions","uploadEscolaImage","async","escolaId","descricao","arguments","length","undefined","validation","Error","fileName","generateUniqueFileName","timestamp","Date","now","random","Math","toString","substring","filePath","uploadError","supabase","storage","from","upload","cacheControl","upsert","message","data","publicUrl","getPublicUrl","id","url","trim","created_at","toISOString","console","uploadProfessorImage","genero","generateUniqueFileNameWithGenero","getEscolaImages","bucketName","files","list","index","deleteImage","imageId","storageError","remove","updateImageDescription","checkImageLimit","currentCount","current","limit","canUpload","PenLine","Save","_ref","_videos$find","videoUrl","onVideoUrlChange","onTitulosUpdate","videos","setVideos","useState","loading","setLoading","setError","success","setSuccess","showAddVideo","setShowAddVideo","newVideo","setNewVideo","titulo","fetchVideos","useCallback","videosOrganizados","getTitulosVideos","item","video_url","plataforma","categoria","err","useEffect","timer","setTimeout","clearTimeout","handleTituloChange","videoId","novoTitulo","updateTituloVideo","escola_id","getVideoEmbedUrl","ytMatch","match","vimeoMatch","_jsxs","className","children","_jsx","Link","value","onChange","e","target","placeholder","find","v","video","src","title","frameBorder","allow","allowFullScreen","Video","onClick","Plus","filter","window","confirm","deleteTituloVideo","handleRemoveVideo","Trash2","disabled","X","onSubmit","preventDefault","addTituloVideo","required","_objectSpread","AlertCircle","Check","Settings","cx","cy","r","escola","onClose","onSave","nomeEscola","setNomeEscola","Escola","isSaving","setIsSaving","activeTab","setActiveTab","isCreating","log","tabs","label","icon","BookOpen","description","ImageIcon","User","MapPin","Users","handleImagesUpdate","handleTitulosUpdate","renderTabContent","rows","turnos_funcionamento","ImageUploadSection","onImagesUpdate","ProfessorImageUploadSection","VideoSection","step","latitude","parseFloat","longitude","gestao","nome_professor","professores_indigenas","professores_nao_indigenas","merenda_diferenciada","HistoriaProfessorManager","escolaNome","isMobile","innerWidth","style","padding","maxWidth","maxHeight","overflow","fontSize","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","WebkitOverflowScrolling","scrollBehavior","role","tab","idx","Icon","isActive","tabIndex","gap","addProfessorImageMeta","insert","meta","select","single","selectedFiles","setSelectedFiles","uploading","setUploading","uploadProgress","setUploadProgress","existingImages","setExistingImages","imageLimit","setImageLimit","editingImage","setEditingImage","editingDescription","setEditingDescription","setGenero","setTitulo","fetchExistingImages","images","testLegendasTable","legendasMap","img","legenda","getLegendaByImageUrl","prev","legendaData","descricao_detalhada","autor_foto","data_foto","fetchLegendas","handleDrop","event","Array","dataTransfer","imageFiles","startsWith","handleDragOver","handleLegendaFieldChange","field","handleLegendaSave","image","imagem_url_relativa","updateData","updated_at","resultado","updateLegendaFoto","novaLegendaData","imagem_url","ativo","tipo_foto","novaLegenda","addLegendaFoto","eq","code","getProfessorImageMetaByUrl","updates","update","updateProfessorImageMeta","autor","stack","onDrop","onDragOver","multiple","accept","validFiles","isValidType","isValidSize","round","URL","createObjectURL","alt","_","i","removeSelectedFile","uploadedImages","progress","uploadedImage","push","nome_arquivo","newLimit","_image$legendaData","_image$legendaData2","_image$legendaData3","_image$legendaData4","_image$legendaData5","handleDeleteImage","Image","x","y","rx","ry","CircleAlert","EyeOff","ArrowUp","ArrowDown","historias","setHistorias","showAddForm","setShowAddForm","editingHistoria","setEditingHistoria","uploadingImage","setUploadingImage","formData","setFormData","historia","ordem","carregarHistorias","getHistoriasProfessor","resetForm","handleReorder","historiaId","direction","historiaIndex","findIndex","h","newHistorias","targetIndex","updateHistoriaProfessor","handleEdit","Edit3","deleteHistoriaProfessor","handleDelete","payload","Number","Boolean","createHistoriaProfessor","min","parseInt","checked"],"sourceRoot":""}